<?xml version="1.0"?>
<rss xmlns:dc="http://purl.org/dc/elements/1.1/" version="2.0">
  <channel>
    <title>CKAN: Ticket #1339: Issues / question re navl and data conversion</title>
    <link>http://localhost/ticket/1339</link>
    <description>&lt;p&gt;
I ran into a bug with the size field on resources.
&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;It would not accept an empty value from form (IMO this clearly equates to null/None)
&lt;/li&gt;&lt;li&gt;This could be fixed via using ignore_empty instead of ignore_missing
&lt;/li&gt;&lt;li&gt;However using this means there was no way to empty the field (e.g. i may just want to set the size field back to null not just change to another value)
&lt;/li&gt;&lt;li&gt;similar issues could arise around other fields (such as last_modified ...)
&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;
To solve this i create an int_converter temporarily in logic/schema.py (this is almost certainly the wrong place). But I think it raises a bigger issue about the conversion layer and how it works.
&lt;/p&gt;
</description>
    <language>en-us</language>
    <image>
      <title>CKAN</title>
      <url>http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png</url>
      <link>http://localhost/ticket/1339</link>
    </image>
    <generator>Trac 0.12.3</generator>
    <item>
      
        <dc:creator>rgrp</dc:creator>

      <pubDate>Tue, 13 Sep 2011 20:58:00 GMT</pubDate>
      <title>description changed</title>
      <link>http://localhost/ticket/1339#comment:1</link>
      <guid isPermaLink="false">http://localhost/ticket/1339#comment:1</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;description&lt;/strong&gt;
              modified (&lt;a href="/ticket/1339?action=diff&amp;amp;version=1"&gt;diff&lt;/a&gt;)
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>kindly</dc:creator>

      <pubDate>Wed, 14 Sep 2011 14:30:07 GMT</pubDate>
      <title>cc set</title>
      <link>http://localhost/ticket/1339#comment:2</link>
      <guid isPermaLink="false">http://localhost/ticket/1339#comment:2</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;cc&lt;/strong&gt;
              &lt;em&gt;rgrp&lt;/em&gt; added
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
I have fixed the isodata and made a slightly modified int_converter for this case.  In the correct place and raises invalids on not being an int.  cset:a4af115116bb
&lt;/p&gt;
&lt;p&gt;
The thinking was that the input of these fields would be through the api so the empty string case did not arise.  These should clearly be converted to None (Null).
&lt;/p&gt;
&lt;p&gt;
What issues in general?
Having done this lots of times before you always end up needing to write your own little validators as the standard ones never do what you want.  Thats the point of them. Look in ckan/lib/validators if you need examples.
&lt;/p&gt;
&lt;p&gt;
So what you did was correct...
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>kindly</dc:creator>

      <pubDate>Wed, 14 Sep 2011 15:42:34 GMT</pubDate>
      <title>status changed; resolution set</title>
      <link>http://localhost/ticket/1339#comment:3</link>
      <guid isPermaLink="false">http://localhost/ticket/1339#comment:3</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;new&lt;/em&gt; to &lt;em&gt;closed&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;resolution&lt;/strong&gt;
                set to &lt;em&gt;fixed&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item>
 </channel>
</rss>