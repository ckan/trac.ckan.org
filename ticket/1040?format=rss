<?xml version="1.0"?>
<rss xmlns:dc="http://purl.org/dc/elements/1.1/" version="2.0">
  <channel>
    <title>CKAN: Ticket #1040: File system mounted</title>
    <link>http://localhost/ticket/1040</link>
    <description>&lt;p&gt;
Public file path code adds a trailing , and thus adds / as a static file app in the Pylons middleware cascade.
&lt;/p&gt;
</description>
    <language>en-us</language>
    <image>
      <title>CKAN</title>
      <url>http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png</url>
      <link>http://localhost/ticket/1040</link>
    </image>
    <generator>Trac 0.12.3</generator>
    <item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Tue, 15 Mar 2011 18:32:02 GMT</pubDate>
      <title>owner set</title>
      <link>http://localhost/ticket/1040#comment:1</link>
      <guid isPermaLink="false">http://localhost/ticket/1040#comment:1</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;owner&lt;/strong&gt;
              set to &lt;em&gt;thejimmyg&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
Fixed by James in 904f1f36a672 for 1.3.2
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Tue, 15 Mar 2011 18:32:10 GMT</pubDate>
      <title>status changed; resolution set</title>
      <link>http://localhost/ticket/1040#comment:2</link>
      <guid isPermaLink="false">http://localhost/ticket/1040#comment:2</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;new&lt;/em&gt; to &lt;em&gt;closed&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;resolution&lt;/strong&gt;
                set to &lt;em&gt;fixed&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Thu, 09 Feb 2012 16:42:58 GMT</pubDate>
      <title>repo, theme set</title>
      <link>http://localhost/ticket/1040#comment:3</link>
      <guid isPermaLink="false">http://localhost/ticket/1040#comment:3</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;repo&lt;/strong&gt;
                set to &lt;em&gt;ckan&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;theme&lt;/strong&gt;
                set to &lt;em&gt;none&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
The problem arises when you do two things together:
&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Have code like this in a CKAN extension's plugin.py:
&lt;pre class="wiki"&gt;        config['extra_public_paths'] = ','.join([our_public_dir,
                config.get('extra_public_paths', '')])
&lt;/pre&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;
which will have a trailing blank value (unless you set extra_public_paths in the config file)
&lt;/p&gt;
&lt;pre class="wiki"&gt;extra_public_paths=['/some/path/', '']
&lt;/pre&gt;&lt;ol start="2"&gt;&lt;li&gt;Run CKAN with this code:
&lt;pre class="wiki"&gt;        extra_public_paths = config.get('extra_public_paths')
        if extra_public_paths:
            static_parsers = [StaticURLParser(public_path) \
                              for public_path in \
                              extra_public_paths.split(',')] + static_parsers
&lt;/pre&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;
Introduced in &lt;a class="closed ticket" href="http://localhost/ticket/340" title="enhancement: Web UI theme easier to configure (closed: fixed)"&gt;#340&lt;/a&gt; &lt;a class="ext-link" href="https://github.com/okfn/ckan/commit/0593c3e5050882a9dbf54fb6c263f4a2f1de2097#ckan/config/middleware.py"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;https://github.com/okfn/ckan/commit/0593c3e5050882a9dbf54fb6c263f4a2f1de2097#ckan/config/middleware.py&lt;/a&gt; in CKAN 1.0.2
This was made safer in &lt;a class="ext-link" href="https://github.com/okfn/ckan/commit/e0d5f02168116a18a7aeb7b058e4160bbd402a02#ckan/config/middleware.py"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;https://github.com/okfn/ckan/commit/e0d5f02168116a18a7aeb7b058e4160bbd402a02#ckan/config/middleware.py&lt;/a&gt; for CKAN 1.3.2 (it ignores blank paths)
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Thu, 09 Feb 2012 16:43:32 GMT</pubDate>
      <title>cc set</title>
      <link>http://localhost/ticket/1040#comment:4</link>
      <guid isPermaLink="false">http://localhost/ticket/1040#comment:4</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;cc&lt;/strong&gt;
              &lt;em&gt;nils.toedtmann&lt;/em&gt; added
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Thu, 09 Feb 2012 17:00:24 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/1040#comment:5</link>
      <guid isPermaLink="false">http://localhost/ticket/1040#comment:5</guid>
      <description>
        &lt;p&gt;
Here are all the CKAN instances potentially involved in this issue:
&lt;/p&gt;
&lt;h2 id="ckan.netDGU"&gt;ckan.net / DGU&lt;/h2&gt;
&lt;p&gt;
These suffered this problem briefly and were fixed 15/3/11
&lt;/p&gt;
&lt;h2 id="opengov_eshttp:opengov.es1.2"&gt;opengov_es  &lt;a class="ext-link" href="http://opengov.es/"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;http://opengov.es/&lt;/a&gt; 1.2&lt;/h2&gt;
&lt;p&gt;
This does not have a theme extension. Is not serving files from root.
&lt;/p&gt;
&lt;h2 id="nosdonnees_frhttp:www.nosdonnees.fr1.3.1a"&gt;nosdonnees_fr  &lt;a class="ext-link" href="http://www.nosdonnees.fr/"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;http://www.nosdonnees.fr/&lt;/a&gt; 1.3.1a&lt;/h2&gt;
&lt;p&gt;
This does have a theme extension but does not seem to have a trailing blank public path since it is not serving files from root.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item>
 </channel>
</rss>