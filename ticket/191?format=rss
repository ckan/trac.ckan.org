<?xml version="1.0"?>
<rss xmlns:dc="http://purl.org/dc/elements/1.1/" version="2.0">
  <channel>
    <title>CKAN: Ticket #191: Searching by modification date</title>
    <link>http://localhost/ticket/191</link>
    <description>&lt;p&gt;
Cost - 2 days
&lt;/p&gt;
&lt;p&gt;
Search interface has new options to filter and sort the results by the date the package has been last modified in ckan. Search options are included in both Web UI and Search API.
&lt;/p&gt;
&lt;p&gt;
The filter specifies a range of dates. The results can be sorted by ascending or descending dates. The last modification date is surfaced in the package.
&lt;/p&gt;
&lt;p&gt;
Example search parameters:
&lt;/p&gt;
&lt;table class="wiki"&gt;
&lt;tr&gt;&lt;td&gt; modification-range=5/4/09- &lt;/td&gt;&lt;td&gt; Exclude packages last modified earlier than 5/4/09
&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt; modification-range=5/4/09-5/12/09 &lt;/td&gt;&lt;td&gt; Exclude packages last modified outside of 5/4/09-5/12/09
&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt; order_by=mod &lt;/td&gt;&lt;td style="text-align: left"&gt;Sort by metadata modification. Defaults to newest first.
&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt; order_by=mod-newest &lt;/td&gt;&lt;td&gt; Sort by metadata modification, newest first.
&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt; order_by=mod-oldest &lt;/td&gt;&lt;td&gt; Sort by metadata modification, oldest first.
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
</description>
    <language>en-us</language>
    <image>
      <title>CKAN</title>
      <url>http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png</url>
      <link>http://localhost/ticket/191</link>
    </image>
    <generator>Trac 0.12.3</generator>
    <item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Wed, 18 May 2011 15:24:45 GMT</pubDate>
      <title>repo, theme set</title>
      <link>http://localhost/ticket/191#comment:1</link>
      <guid isPermaLink="false">http://localhost/ticket/191#comment:1</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;repo&lt;/strong&gt;
                set to &lt;em&gt;ckan&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;theme&lt;/strong&gt;
                set to &lt;em&gt;none&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
Will's suggestion is to have "modified_since" param, just as we have for Revision Search.
&lt;/p&gt;
&lt;p&gt;
Maybe we don't need a range. 'Order by modification' should be on by default for  queries with 'modified_since' param.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Wed, 18 May 2011 15:26:54 GMT</pubDate>
      <title>priority changed</title>
      <link>http://localhost/ticket/191#comment:2</link>
      <guid isPermaLink="false">http://localhost/ticket/191#comment:2</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;priority&lt;/strong&gt;
                changed from &lt;em&gt;awaiting triage&lt;/em&gt; to &lt;em&gt;critical&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
Do this after refactor &lt;a class="closed ticket" href="http://localhost/ticket/1129" title="CREP: CREP0002: Moderated  Edits (closed: fixed)"&gt;#1129&lt;/a&gt;
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Wed, 18 May 2011 15:27:15 GMT</pubDate>
      <title>status changed; owner deleted</title>
      <link>http://localhost/ticket/191#comment:3</link>
      <guid isPermaLink="false">http://localhost/ticket/191#comment:3</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;owner&lt;/strong&gt;
              &lt;em&gt;rgrp&lt;/em&gt; deleted
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;new&lt;/em&gt; to &lt;em&gt;assigned&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Thu, 19 May 2011 14:21:40 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/191#comment:4</link>
      <guid isPermaLink="false">http://localhost/ticket/191#comment:4</guid>
      <description>
        &lt;p&gt;
Maybe allow searching by package creation date too?
&lt;/p&gt;
&lt;p&gt;
Suggestion from kindly: when indexing a package, have the search backend also store the metadata_modified value, to make it easy to search on it.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Mon, 24 Oct 2011 09:22:14 GMT</pubDate>
      <title>milestone set</title>
      <link>http://localhost/ticket/191#comment:5</link>
      <guid isPermaLink="false">http://localhost/ticket/191#comment:5</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;milestone&lt;/strong&gt;
                set to &lt;em&gt;ckan-backlog&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Thu, 01 Dec 2011 18:02:47 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/191#comment:6</link>
      <guid isPermaLink="false">http://localhost/ticket/191#comment:6</guid>
      <description>
        &lt;p&gt;
So you can do this sort of search:
&lt;/p&gt;
&lt;pre class="wiki"&gt;curl http://thedatahub.org/api/action/package_search -d '{"q": "groups:lodcloud", "sort": "metadata_modified asc"}'
&lt;/pre&gt;&lt;p&gt;
but it doesn't work because solr doesn't store the metadata_modified field yet.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>shevski</dc:creator>

      <pubDate>Tue, 06 Dec 2011 11:25:46 GMT</pubDate>
      <title>owner set</title>
      <link>http://localhost/ticket/191#comment:7</link>
      <guid isPermaLink="false">http://localhost/ticket/191#comment:7</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;owner&lt;/strong&gt;
              set to &lt;em&gt;johnglover&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>thejimmyg</dc:creator>

      <pubDate>Tue, 06 Dec 2011 11:38:34 GMT</pubDate>
      <title>priority, milestone changed; cc set</title>
      <link>http://localhost/ticket/191#comment:8</link>
      <guid isPermaLink="false">http://localhost/ticket/191#comment:8</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;cc&lt;/strong&gt;
              &lt;em&gt;amercader&lt;/em&gt; added
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;priority&lt;/strong&gt;
                changed from &lt;em&gt;critical&lt;/em&gt; to &lt;em&gt;minor&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;milestone&lt;/strong&gt;
                changed from &lt;em&gt;ckan-backlog&lt;/em&gt; to &lt;em&gt;current-ckan-sprint-2011-12-19&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
John will just check that the API version 3 does support modified after the new solr schema handled by Adria is in place.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>johnglover</dc:creator>

      <pubDate>Mon, 12 Dec 2011 16:10:10 GMT</pubDate>
      <title>status changed; resolution set</title>
      <link>http://localhost/ticket/191#comment:9</link>
      <guid isPermaLink="false">http://localhost/ticket/191#comment:9</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;assigned&lt;/em&gt; to &lt;em&gt;closed&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;resolution&lt;/strong&gt;
                set to &lt;em&gt;fixed&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
working in current master and 1.5.1
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Mon, 12 Dec 2011 16:54:04 GMT</pubDate>
      <title>status changed; resolution deleted</title>
      <link>http://localhost/ticket/191#comment:10</link>
      <guid isPermaLink="false">http://localhost/ticket/191#comment:10</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;closed&lt;/em&gt; to &lt;em&gt;reopened&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;resolution&lt;/strong&gt;
                &lt;em&gt;fixed&lt;/em&gt; deleted
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
A test for this would be great, and maybe add as an example in the search docs too?
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Thu, 15 Dec 2011 17:26:51 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/191#comment:11</link>
      <guid isPermaLink="false">http://localhost/ticket/191#comment:11</guid>
      <description>
        &lt;p&gt;
Added a fix for the problems caused by the &lt;a class="closed ticket" href="http://localhost/ticket/1546" title="defect: Package metadata_created returns the wrong date (closed: fixed)"&gt;#1546&lt;/a&gt; fix. SOLR indexing was excepting for new packages (tests such as ckan/tests/functional/api/model/test_package.py:TestPackagesUnversioned.test_entity_update_indexerror failed). The problem was (somehow) related to last_modified function using a new connection causing problems for the modified_metadata in finding the revision &amp;amp; package table entries created during the commit.
&lt;/p&gt;
&lt;p&gt;
Changeset: [release-v1.5.1c 2c595ae] and cherry picked to [origin/defect-191-modification-date f98a4b2]
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Thu, 15 Dec 2011 18:18:36 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/191#comment:12</link>
      <guid isPermaLink="false">http://localhost/ticket/191#comment:12</guid>
      <description>
        &lt;p&gt;
I put the sort syntax example in the apiv3.rst table and moved the full curl example to &lt;a class="ext-link" href="http://wiki.ckan.org/Searching_CKAN"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;http://wiki.ckan.org/Searching_CKAN&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
I added tests for metadata_modified and prepared this branch for closure.
&lt;/p&gt;
&lt;p&gt;
Changeset: [origin/defect-191-modification-date bebf7a5]
&lt;/p&gt;
&lt;p&gt;
John, please review and close/merge if you think it is all ok.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>johnglover</dc:creator>

      <pubDate>Fri, 16 Dec 2011 10:21:15 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/191#comment:13</link>
      <guid isPermaLink="false">http://localhost/ticket/191#comment:13</guid>
      <description>
        &lt;p&gt;
Thanks for this David. This one in particular was causing me some grief: &lt;a class="ext-link" href="https://github.com/okfn/ckan/commit/f98a4b2a5f5013fa4aed475bd8b3237bb7847fcc"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;https://github.com/okfn/ckan/commit/f98a4b2a5f5013fa4aed475bd8b3237bb7847fcc&lt;/a&gt;
Good spot. All looks good to me.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>johnglover</dc:creator>

      <pubDate>Mon, 19 Dec 2011 09:37:28 GMT</pubDate>
      <title>status changed; resolution set</title>
      <link>http://localhost/ticket/191#comment:14</link>
      <guid isPermaLink="false">http://localhost/ticket/191#comment:14</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;reopened&lt;/em&gt; to &lt;em&gt;closed&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;resolution&lt;/strong&gt;
                set to &lt;em&gt;fixed&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Thu, 23 Feb 2012 18:11:17 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/191#comment:15</link>
      <guid isPermaLink="false">http://localhost/ticket/191#comment:15</guid>
      <description>
        &lt;p&gt;
Went into CKAN 1.6
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Thu, 23 Feb 2012 18:16:23 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/191#comment:16</link>
      <guid isPermaLink="false">http://localhost/ticket/191#comment:16</guid>
      <description>
        &lt;p&gt;
Replying to &lt;a href="http://localhost/ticket/191#comment:15" title="Comment 15 for Ticket #191"&gt;dread&lt;/a&gt;:
&lt;/p&gt;
&lt;blockquote class="citation"&gt;
&lt;p&gt;
Went into CKAN 1.6
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
Sorry, I meant 1.5.1
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item>
 </channel>
</rss>