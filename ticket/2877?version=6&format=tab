id	summary	reporter	owner	description	type	status	priority	milestone	component	resolution	keywords	cc	repo	theme
2877	Bugs with datastore v2	rgrp	kindly	"In progress

 1. ~~[major] q does not seem to work reliably. e.g. using the setup from this gist https://gist.github.com/1930806 and doing a ?q=DE yields no results (does not work with ""q=de"" either)~~
  * ~~q=second does work ...~~
 1. [major] q does not work with 2 values (see below)
 2. Query on search with limit 0 results in total of 0 (should either be null or correct total). Queries with other limits yield correct total AFAICT
   * Also weird fact that limit is returned but as as as string - should it not be an integer
 3. Types on fields: could these not be canonical and as per recline (or is it important to allow exact sql types ...)

=== Multiple query values ===

Try a query such as: ""second UK"" and you will get 500 error:

http://localhost:5000/api/3/action/datastore_search?resource_id=4f1299ab-a100-4e5f-ba81-e6d234a2f3bd&q=second%20UK

{{{
ProgrammingError: (ProgrammingError) syntax error in tsquery: ""second UK"" 'select ""_id"", ""id"", ""date"", ""x"", ""y"", ""z"", ""country"", ""title"", ""lat"", ""lon"", count(*) over() as ""_full_count""\n from ""4f1299ab-a100-4e5f-ba81-e6d234a2f3bd"" where _full_text @@ to_tsquery(%s) limit 100 offset 0' (u'second UK',)
}}}

=== Suggestions ===

Filter support: should think in more detail about this (may want to follow recline style)

Simple filters in query parameters would be nice too ..."	enhancement	assigned	awaiting triage		ckan				ckan	none
