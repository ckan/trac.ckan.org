<?xml version="1.0"?>
<rss xmlns:dc="http://purl.org/dc/elements/1.1/" version="2.0">
  <channel>
    <title>CKAN: Ticket #1784: Links to renamed objects break</title>
    <link>http://localhost/ticket/1784</link>
    <description>&lt;p&gt;
The HTML templates for some activity stream activities link to objects (packages, resources, etc.) by their names, e.g. /dataset/foo, but if the object has since been renamed then the link will be broken.
&lt;/p&gt;
&lt;p&gt;
Possible solutions are to use the object ID to find its current name at rendering time and link to that, or link to the object by ID rather than by name.
&lt;/p&gt;
&lt;p&gt;
Linking by ID is both simpler to implement and better. Links by ID are ugly, but they are permanent and don't break when an object is renamed. We should be using links by ID everywhere on CKAN, so that when third-party sites copy-paste our URLs and link to us, their links don't break later.
&lt;/p&gt;
&lt;p&gt;
Fixing this means fixing the dataset_link(), resource_link(), group_link() etc. functions in ckan/lib/helpers.py which will change the links everywhere in CKAN where those functions are used to link to objects (which should be everywhere where we link to an object).
&lt;/p&gt;
&lt;p&gt;
If we want to have nice looking by-name URLs and what them to be permanent, then we need to change CKAN so that objects cannot be renamed.
&lt;/p&gt;
</description>
    <language>en-us</language>
    <image>
      <title>CKAN</title>
      <url>http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png</url>
      <link>http://localhost/ticket/1784</link>
    </image>
    <generator>Trac 0.12.3</generator>
    <item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Tue, 07 Feb 2012 11:45:06 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/1784#comment:1</link>
      <guid isPermaLink="false">http://localhost/ticket/1784#comment:1</guid>
      <description>
        &lt;p&gt;
I don't agree. I think we have a good compromise at the moment, where you have readable URLs, and people can change names if they want to. Names are changed only occasionally. The CKAN site adjusts all its links automatically of course. External blog posts may have incoming links, and these would break, but it's not difficult to search for a dataset. If we're really worried about this then we should provide a 'permalink' somewhere on the Package / Group / Resource page.
&lt;/p&gt;
&lt;p&gt;
In the meantime, I suggest changing the Activity Stream links to be with names.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>seanh</dc:creator>

      <pubDate>Mon, 28 May 2012 11:33:17 GMT</pubDate>
      <title>status changed; resolution set</title>
      <link>http://localhost/ticket/1784#comment:2</link>
      <guid isPermaLink="false">http://localhost/ticket/1784#comment:2</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;new&lt;/em&gt; to &lt;em&gt;closed&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;resolution&lt;/strong&gt;
                set to &lt;em&gt;wontfix&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item>
 </channel>
</rss>