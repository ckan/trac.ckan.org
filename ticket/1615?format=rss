<?xml version="1.0"?>
<rss xmlns:dc="http://purl.org/dc/elements/1.1/" version="2.0">
  <channel>
    <title>CKAN: Ticket #1615: CKAN Should work behind a proxy server</title>
    <link>http://localhost/ticket/1615</link>
    <description>&lt;p&gt;
This would allow deployment via Nginx or Apache using proxy to Paster, uWSGI. At the moment CKAN isn't aware of the proxy's IP address so when you perform an action which does a redirect (such as adding a package), CKAN redirects you to the *internal IP* not the external *proxy IP*.
&lt;/p&gt;
&lt;p&gt;
We would like this work to facilitate testing within VMs as part of our new build infrastructure.
&lt;/p&gt;
&lt;p&gt;
It would also be nice if CKAN worked when mounted at a path other than /. That could be dealt with in another ticket because it isn't a problem at the moment.
&lt;/p&gt;
</description>
    <language>en-us</language>
    <image>
      <title>CKAN</title>
      <url>http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png</url>
      <link>http://localhost/ticket/1615</link>
    </image>
    <generator>Trac 0.12.3</generator>
    <item>
      
        <dc:creator>rgrp</dc:creator>

      <pubDate>Thu, 05 Jan 2012 14:42:53 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/1615#comment:1</link>
      <guid isPermaLink="false">http://localhost/ticket/1615#comment:1</guid>
      <description>
        &lt;p&gt;
We have done several successful deploys behind a proxy server on apache. Any details of what didn't work? Worth adding details here: &lt;a class="ext-link" href="http://wiki.ckan.org/Deployment"&gt;&lt;span class="icon"&gt;â€‹&lt;/span&gt;http://wiki.ckan.org/Deployment&lt;/a&gt; ?
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Thu, 12 Jan 2012 18:40:51 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/1615#comment:2</link>
      <guid isPermaLink="false">http://localhost/ticket/1615#comment:2</guid>
      <description>
        &lt;p&gt;
The mounting issue is discussed and more-or-less solved here: &lt;a class="closed ticket" href="http://localhost/ticket/1401" title="defect: Some links don't take account when CKAN is mounted at a non-root URL (closed: fixed)"&gt;#1401&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
What's this redirect problem? The redirect is to a relative URL using h.url_for, just the same as the majority of links. I can't see why this is a problem, and it certainly works for Florian and Herrmann (see &lt;a class="closed ticket" href="http://localhost/ticket/1401" title="defect: Some links don't take account when CKAN is mounted at a non-root URL (closed: fixed)"&gt;#1401&lt;/a&gt;). Please provide more details.
&lt;/p&gt;
&lt;pre class="wiki"&gt;            url = h.url_for(controller='package', action='read', id=pkgname)
        redirect(url)
&lt;/pre&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Fri, 10 Feb 2012 15:47:50 GMT</pubDate>
      <title>status changed; resolution set</title>
      <link>http://localhost/ticket/1615#comment:3</link>
      <guid isPermaLink="false">http://localhost/ticket/1615#comment:3</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;new&lt;/em&gt; to &lt;em&gt;closed&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;resolution&lt;/strong&gt;
                set to &lt;em&gt;worksforme&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
Closing - looks ok to me
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item>
 </channel>
</rss>