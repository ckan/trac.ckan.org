<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      #1004 (Group creation instructions missing)
     – CKAN
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">window.location.hash = window.location.hash;</script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="925.html" title="Ticket #925" />
        <link rel="last" href="1780.html" title="Ticket #1780" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="1004%3Fformat=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="1004%3Fformat=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="1004%3Fformat=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="up" href="../query%3Fstatus=closed&amp;milestone=ckan-backlog&amp;group=resolution&amp;order=time.html" />
        <link rel="next" href="1139.html" title="Ticket #1139" />
        <link rel="start" href="../wiki.1.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="819.html" title="Ticket #819" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search CKAN" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="93d81ccf9a7bb1c456462f62";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 1004, escape_newlines: 0}
        $("#comment").autoPreview("/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://ckan.org/"><img src="http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png" alt="CKAN Trac" height="70" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../login.html">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li><a href="../about.html">About Trac</a></li><li class="last"><a href="../register.html">Register</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li><a href="../search.html">Search</a></li><li class="last"><a href="../wiki.1.html">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="925.html" title="Ticket #925">Previous Ticket</a></span></li><li><a href="../query%3Fstatus=closed&amp;milestone=ckan-backlog&amp;group=resolution&amp;order=time.html">Back to Query</a></li><li class="last"><span><a class="next" href="1139.html" title="Ticket #1139">Next Ticket</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="1004.html">Ticket #1004</a>
          <span class="status">(closed defect: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="../timeline%3Ffrom=2011-02-24T14:52:24Z&amp;precision=second.html" title="2011-02-24T14:52:24Z in Timeline">3 years</a> ago</p>
    <p>Last modified <a class="timeline" href="../timeline%3Ffrom=2011-12-06T18:18:05Z&amp;precision=second.html" title="2011-12-06T18:18:05Z in Timeline">2 years</a> ago</p>
  </div>
  <h2 class="summary searchable">Group creation instructions missing</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="../query%3Fstatus=!closed&amp;reporter=dread.html">dread</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="../query%3Fstatus=!closed&amp;owner=zephod.html">zephod</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="../query%3Fstatus=!closed&amp;priority=minor.html">minor</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="../query%3Fstatus=!closed&amp;component=ckan.html">ckan</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
              <a href="../query%3Fstatus=!closed&amp;keywords=~bitesize.html">bitesize</a>
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_repo">
          Repository:
        </th>
        <td headers="h_repo">
              <a href="../query%3Fstatus=!closed&amp;repo=ckan.html">ckan</a>
        </td>
    </tr><tr>
        <th id="h_theme">
          Theme:
        </th>
        <td headers="h_theme">
              <a href="../query%3Fstatus=!closed&amp;theme=none.html">none</a>
        </td>
        <th>
        </th>
        <td>
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
Need instructions on the group page to tell people they need to login to create a group. Someone must have deleted this.
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="1004.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="../timeline%3Ffrom=2011-03-07T17:16:49Z&amp;precision=second.html" title="2011-03-07T17:16:49Z in Timeline">3 years</a> ago by rgrp
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Keywords</strong>
        <em>bitesize</em> added
    </li><li>
      <strong>Priority</strong>
        changed from <em>awaiting triage</em> to <em>minor</em>
    </li><li>
      <strong>Milestone</strong>
        changed from <em>ckan-v1.4-sprint-2</em> to <em>ckan-v1.4</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="1004.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="../timeline%3Ffrom=2011-05-16T15:21:35Z&amp;precision=second.html" title="2011-05-16T15:21:35Z in Timeline">3 years</a> ago by dread
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Repository</strong>
        set to <em>ckan</em>
    </li><li>
      <strong>state</strong>
        set to <em>draft</em>
    </li><li>
      <strong>Theme</strong>
        set to <em>none</em>
    </li><li>
      <strong>Milestone</strong>
        changed from <em>ckan-v1.4</em> to <em>ckan-v1.5</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="1004.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="../timeline%3Ffrom=2011-07-20T14:52:40Z&amp;precision=second.html" title="2011-07-20T14:52:40Z in Timeline">3 years</a> ago by thejimmyg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>ckan-v1.5</em> to <em>ckan-backlog</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
At the moment it says "Create a new group" and clicking it takes you to the login page. We want it to do the same thing but if you aren't logged in the label should say "Log in to create a group".
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="1004.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="../timeline%3Ffrom=2011-12-06T11:36:15Z&amp;precision=second.html" title="2011-12-06T11:36:15Z in Timeline">2 years</a> ago by thejimmyg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>closed</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
The yellow box on the right is now back and you don't get taken to the login page. We'll write more detailed instructions once the group refactor is done.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="1004.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="../timeline%3Ffrom=2011-12-06T11:54:49Z&amp;precision=second.html" title="2011-12-06T11:54:49Z in Timeline">2 years</a> ago by dread
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>closed</em> to <em>reopened</em>
    </li><li>
      <strong>Resolution</strong>
        <em>fixed</em> deleted
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
There is a description of groups, but that is not the subject of this ticket. In fact if you're not logged in you do get taken to the login page (which is quite correct). I agree with your earlier comment that the text of the link needs changing. 
</p>
<p>
Sorry to be reopening this, but I think the previous comment misses the point. Doing this ticket would be a valuable quick fix. Putting on backlog.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="1004.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="../timeline%3Ffrom=2011-12-06T12:29:57Z&amp;precision=second.html" title="2011-12-06T12:29:57Z in Timeline">2 years</a> ago by thejimmyg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>reopened</em> to <em>closed</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>duplicate</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
I don't understand. We just had a team meeting about this, all discussed it and agreed to close it. Yes, you get taken to the login page, but that is the correct behaviour. 
</p>
<p>
The problem in the past was that the link was in the yellow box and there was no explanation as to why you had to login. This time you click from the header bar and there is a clear message saying "Unauthorized to create a group" - exactly as a user would expect. Even if the exact text of the ticket description isn't fully implemented in the current release, the UX isn't broken anymore. Yes, it might be even nicer to have a message warning them in advanced but these improvements will be taken forward in the UX work - maybe there is an even better solution than a message?
</p>
<p>
Since you are unhappy about closing it I'm marking it as "Duplicate" of <a class="closed ticket" href="1521.html" title="enhancement: [super] Groups UI and UX improvements in v1.6 from Cygri (closed: fixed)">#1521</a>. As agreed earlier with the entire team, we'll take this forward as part of the groups refactor.
</p>
<p>
See <a class="closed ticket" href="1521.html" title="enhancement: [super] Groups UI and UX improvements in v1.6 from Cygri (closed: fixed)">#1521</a> for more information.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="1004.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="../timeline%3Ffrom=2011-12-06T13:26:34Z&amp;precision=second.html" title="2011-12-06T13:26:34Z in Timeline">2 years</a> ago by dread
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>closed</em> to <em>reopened</em>
    </li><li>
      <strong>Resolution</strong>
        <em>duplicate</em> deleted
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
My suggested fix:
</p>
<pre class="wiki">
diff --git a/ckan/templates/group/index.html b/ckan/templates/group/index.html
index 8502df9..064e066 100644
--- a/ckan/templates/group/index.html
+++ b/ckan/templates/group/index.html
@@ -9,7 +9,15 @@
   &lt;py:match path="primarysidebar"&gt;
     &lt;li class="widget-container boxed widget_text"&gt;
       &lt;h3&gt;What Are Groups?&lt;/h3&gt;
-      &lt;span i18n:msg=""&gt;Whilst tags are great at collecting datasets together, 
+      &lt;p&gt;&lt;span i18n:msg=""&gt;Whilst tags are great at collecting datasets togethe
+      &lt;p&gt;
+      &lt;span i18n:msg="" class="ckan-logged-in" style="display: none;"&gt;
+         &lt;a href="${h.url_for(controller='group',action='new', id=None)}"&gt;Creat
+      &lt;/span&gt;
+      &lt;span i18n:msg="" class="ckan-logged-out"&gt;
+         To create a new group, please first &lt;a href="${h.url_for(controller='u
+      &lt;/span&gt;
+      &lt;/p&gt;
     &lt;/li&gt;
   &lt;/py:match&gt;
 
diff --git a/ckan/templates/group/layout.html b/ckan/templates/group/layout.html
index 64153aa..a3f732b 100644
--- a/ckan/templates/group/layout.html
+++ b/ckan/templates/group/layout.html
@@ -25,9 +25,12 @@
       &lt;li py:attrs="{'class':'current-tab'} if c.action=='index' else {}"&gt;
         ${h.subnav_link(c, h.icon('group') + _('List Groups'), controller='grou
       &lt;/li&gt;
-      &lt;li py:attrs="{'class':'current-tab'} if c.action=='new' else {}"&gt;
+      &lt;li py:attrs="{'class':'current-tab'} if c.action=='new' else {}" class="
         ${h.subnav_link(c, h.icon('group_add') + _('Add a Group'), controller='
       &lt;/li&gt;
+      &lt;li py:attrs="{'class':'current-tab'} if c.action=='new' else {}" class="
+        ${h.subnav_link(c, h.icon('group_add') + _('Log-in to add a Group'), co
+      &lt;/li&gt;
     &lt;/ul&gt;
   &lt;/py:match&gt;
</pre><p>
BUT this fix doesn't completely work. When you log-in and create a group, at this point the nav bar changes from the (correct) "Add a group" to (incorrect) "Log-in to add a group".
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="1004.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="../timeline%3Ffrom=2011-12-06T13:26:45Z&amp;precision=second.html" title="2011-12-06T13:26:45Z in Timeline">2 years</a> ago by dread
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Owner</strong>
        set to <em>zephod</em>
    </li><li>
      <strong>Status</strong>
        changed from <em>reopened</em> to <em>assigned</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="1004.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="../timeline%3Ffrom=2011-12-06T16:02:32Z&amp;precision=second.html" title="2011-12-06T16:02:32Z in Timeline">2 years</a> ago by dread
                </h3>
                
    <div class="comment searchable">
      
      <p>
Here is the unclipped version:
</p>
<pre class="wiki">      &lt;p&gt;
      &lt;span i18n:msg="" class="ckan-logged-in" style="display: none;"&gt;
	  &lt;a href="${h.url_for(controller='group',action='new', id=None)}"&gt;Create a new group&lt;/a&gt;
      &lt;/span&gt;
      &lt;span i18n:msg="" class="ckan-logged-out"&gt;
	  To create a new group, please first &lt;a href="${h.url_for(controller='user',action='login', id=None)}"&gt;log-in&lt;/a&gt;.
      &lt;/span&gt;
      &lt;/p&gt;
</pre><pre class="wiki">      &lt;li py:attrs="{'class':'current-tab'} if c.action=='new' else {}" class="ckan-logged-in" style="display: none;"&gt;
        ${h.subnav_link(c, h.icon('group_add') + _('Add a Group'), controller='group', action='new')}
      &lt;/li&gt;
      &lt;li py:attrs="{'class':'current-tab'} if c.action=='new' else {}" class="ckan-logged-out"&gt;
        ${h.subnav_link(c, h.icon('group_add') + _('Log-in to add a Group'), controller='group', action='new')}
      &lt;/li&gt;
</pre>
    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="1004.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="../timeline%3Ffrom=2011-12-06T17:53:36Z&amp;precision=second.html" title="2011-12-06T17:53:36Z in Timeline">2 years</a> ago by zephod
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>assigned</em> to <em>closed</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Dread, that fix wouldn't work because the class attribute was being defined in Genshi and again in HTML, with slighly undefined behaviour (in this case Genshi overwrites HTML). 
I have performed a very very simple fix which modifies the navbar text when you're not logged in. 
<a class="ext-link" href="https://github.com/okfn/ckan/commit/a89a48731ba548170045a60ac2930e0019c299c7"><span class="icon">​</span>https://github.com/okfn/ckan/commit/a89a48731ba548170045a60ac2930e0019c299c7</a>
</p>
<p>
I don't think the link should be restored in the sidebar, it was explicitly removed as part of a site-wide sweep to make the sidebar a passive, helpful element rather than an active element with action links.
</p>
<p>
Site looks great to me, I'm closing this ticket.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="1004.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="../timeline%3Ffrom=2011-12-06T18:18:05Z&amp;precision=second.html" title="2011-12-06T18:18:05Z in Timeline">2 years</a> ago by dread
                </h3>
                
    <div class="comment searchable">
      
      <p>
Great stuff zeph! Diff looks really good and cheers for the explanation. 
</p>
<p>
On master, cset:a89a48731ba548170045a60ac2930e0019c299c7 and I've cherry picked this for release 1.5.1. too.
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="1004%3Fformat=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="1004%3Fformat=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="1004%3Fformat=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.3</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>