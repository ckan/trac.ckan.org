<?xml version="1.0"?>
<rss xmlns:dc="http://purl.org/dc/elements/1.1/" version="2.0">
  <channel>
    <title>CKAN: Ticket #2331: Search should AND terms not OR terms</title>
    <link>http://localhost/ticket/2331</link>
    <description>&lt;p&gt;
Appears current default search in CKAN ORs terms rather than ANDing them (i.e. adding more terms increasing number of items found rather than reducing it).
&lt;/p&gt;
&lt;p&gt;
Not sure when this crept in or if it has been there for a long time.
&lt;/p&gt;
</description>
    <language>en-us</language>
    <image>
      <title>CKAN</title>
      <url>http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png</url>
      <link>http://localhost/ticket/2331</link>
    </image>
    <generator>Trac 0.12.3</generator>
    <item>
      
        <dc:creator>rgrp</dc:creator>

      <pubDate>Mon, 21 May 2012 06:46:33 GMT</pubDate>
      <title>status, milestone changed; owner set</title>
      <link>http://localhost/ticket/2331#comment:1</link>
      <guid isPermaLink="false">http://localhost/ticket/2331#comment:1</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;owner&lt;/strong&gt;
              set to &lt;em&gt;rossjones&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;new&lt;/em&gt; to &lt;em&gt;assigned&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;milestone&lt;/strong&gt;
                changed from &lt;em&gt;ckan-v1.7&lt;/em&gt; to &lt;em&gt;current-ckan-sprint-2012-05-29&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>kindly</dc:creator>

      <pubDate>Wed, 23 May 2012 14:18:09 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/2331#comment:2</link>
      <guid isPermaLink="false">http://localhost/ticket/2331#comment:2</guid>
      <description>
        &lt;p&gt;
This is a wontfix.  I think terms should be ored by default.  All modern search engines work like this.
If there is an issue due to relevancy (i.e if you type mulitple words and your result not coming near the top) then we should use this examples so we can tweak the results.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>ross</dc:creator>

      <pubDate>Thu, 24 May 2012 10:18:59 GMT</pubDate>
      <title>owner changed</title>
      <link>http://localhost/ticket/2331#comment:3</link>
      <guid isPermaLink="false">http://localhost/ticket/2331#comment:3</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;owner&lt;/strong&gt;
              changed from &lt;em&gt;rossjones&lt;/em&gt; to &lt;em&gt;kindly&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>kindly</dc:creator>

      <pubDate>Mon, 28 May 2012 07:55:08 GMT</pubDate>
      <title>status changed; resolution set</title>
      <link>http://localhost/ticket/2331#comment:4</link>
      <guid isPermaLink="false">http://localhost/ticket/2331#comment:4</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;assigned&lt;/em&gt; to &lt;em&gt;closed&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;resolution&lt;/strong&gt;
                set to &lt;em&gt;wontfix&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>rgrp</dc:creator>

      <pubDate>Wed, 30 May 2012 15:16:35 GMT</pubDate>
      <title>status changed; resolution deleted</title>
      <link>http://localhost/ticket/2331#comment:5</link>
      <guid isPermaLink="false">http://localhost/ticket/2331#comment:5</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;closed&lt;/em&gt; to &lt;em&gt;reopened&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;resolution&lt;/strong&gt;
                &lt;em&gt;wontfix&lt;/em&gt; deleted
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
@kindly I really don't get this but I may understand poorly. Google does not work by or-ing does it (as i add things to the search query I get *less* results not more ...).
&lt;/p&gt;
&lt;p&gt;
It also makes it really hard to find stuff: as I add query terms to my query I get more stuff not less which makes for terrible finding of stuff - I appreciate that there is a scoring aspect but that seems secondary.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>kindly</dc:creator>

      <pubDate>Thu, 31 May 2012 09:19:41 GMT</pubDate>
      <title>status changed; resolution set</title>
      <link>http://localhost/ticket/2331#comment:6</link>
      <guid isPermaLink="false">http://localhost/ticket/2331#comment:6</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;reopened&lt;/em&gt; to &lt;em&gt;closed&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;resolution&lt;/strong&gt;
                set to &lt;em&gt;wontfix&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
Scoring is primary in my opinion.  Who cares if you have 1000 results if the top few are yours.
&lt;/p&gt;
&lt;p&gt;
If things are hard to find we need to change our relevancy first.  So if you have examples of where you think the scoring is wrong then please make a ticket for that.
&lt;/p&gt;
&lt;p&gt;
Google, I imagine, just has a cutoff of anything under a certain score not being shown.  We could do that as well but it would take some working out what we wanted that score to be.
&lt;/p&gt;
&lt;p&gt;
Full "And" queries also limit any accidental discovery, especially of rare terms.  If you do not get your search exactly correct then you get nothing, which is bad.
&lt;/p&gt;
&lt;p&gt;
Obviously you can still AND things or +things.
&lt;/p&gt;
&lt;p&gt;
The correct solution to this is adding a minimum match parameter which is a middle ground. eg you can say that you want to match over half of the terms.  "thing1 thing2 thing3 thing3"  means you have to match at least 2. There are many options described here. &lt;a class="ext-link" href="http://wiki.apache.org/solr/DisMaxQParserPlugin"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;http://wiki.apache.org/solr/DisMaxQParserPlugin&lt;/a&gt;.   You can change this in an extension if you want it just requries adding an mm field to the before_search in the Ipackage controller.  I do not personally think we should change it as default.
&lt;/p&gt;
&lt;p&gt;
I am closing it as wont fix as its trivial to change and is a philosophical difference not a technical one.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>rgrp</dc:creator>

      <pubDate>Wed, 01 Aug 2012 09:52:38 GMT</pubDate>
      <title>status changed; resolution deleted</title>
      <link>http://localhost/ticket/2331#comment:7</link>
      <guid isPermaLink="false">http://localhost/ticket/2331#comment:7</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;closed&lt;/em&gt; to &lt;em&gt;reopened&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;resolution&lt;/strong&gt;
                &lt;em&gt;wontfix&lt;/em&gt; deleted
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
I'm re-opening this. This is a reasonably significant UX problem -- not just a philosophical difference. It is just *weird* to get *more* results as I add search terms rather than less. Please can we have this fixed ...
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>kindly</dc:creator>

      <pubDate>Wed, 01 Aug 2012 23:03:50 GMT</pubDate>
      <title>status changed; resolution set</title>
      <link>http://localhost/ticket/2331#comment:8</link>
      <guid isPermaLink="false">http://localhost/ticket/2331#comment:8</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;reopened&lt;/em&gt; to &lt;em&gt;closed&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;resolution&lt;/strong&gt;
                set to &lt;em&gt;wontfix&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
As I said I do not not agree with it being a UX problem or *wierd*. *wierd* is not acceptable in response to a thought out comment. So I am closing it again.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>rgrp</dc:creator>

      <pubDate>Fri, 17 Aug 2012 08:18:14 GMT</pubDate>
      <title>status changed; resolution deleted</title>
      <link>http://localhost/ticket/2331#comment:9</link>
      <guid isPermaLink="false">http://localhost/ticket/2331#comment:9</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;closed&lt;/em&gt; to &lt;em&gt;reopened&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;resolution&lt;/strong&gt;
                &lt;em&gt;wontfix&lt;/em&gt; deleted
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
Re-opening yet again. This is something brought up by entire client team on several occasions :-)
&lt;/p&gt;
&lt;p&gt;
We really do need to fix this as it is really poor UX. To give, yet another, example:
&lt;/p&gt;
&lt;p&gt;
&lt;a class="ext-link" href="http://datahub.io/dataset?q=thatcher+wages"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;http://datahub.io/dataset?q=thatcher+wages&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
This returns 15 datasets yet only one of them has any mention of thatchers (the first one!). (The others are there because they match wages). This isn't what I expect. I expect *only* to see datasets that match *both* terms ...
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>ross</dc:creator>

      <pubDate>Fri, 17 Aug 2012 08:38:42 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/2331#comment:10</link>
      <guid isPermaLink="false">http://localhost/ticket/2331#comment:10</guid>
      <description>
        &lt;p&gt;
This is the dullest game of ticket tennis ever :D
&lt;/p&gt;
&lt;p&gt;
Google don't OR the results, they have an explicit operator for ORing query terms and default to ensuring that all terms are present (in one form or another) in the documents.  I understand the argument about cut-offs and relevancy scores, but for a large search engine they have the benefit of scale both in resource and documents. I spent 6 months of my life tweaking weightings for n-dimensional vector space search, I don't think it is likely to be a number we can, or will find by accident.
&lt;/p&gt;
&lt;p&gt;
Given that Marcus also got confused by the current behaviour I think we should either:
&lt;/p&gt;
&lt;p&gt;
a) Make it configurable
b) Just change it to what has been asked for
&lt;/p&gt;
&lt;p&gt;
Don't care which.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>rgrp</dc:creator>

      <pubDate>Tue, 25 Dec 2012 22:25:44 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/2331#comment:11</link>
      <guid isPermaLink="false">http://localhost/ticket/2331#comment:11</guid>
      <description>
        &lt;p&gt;
Now transferred to github at &lt;a class="ext-link" href="https://github.com/okfn/ckan/issues/258"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;https://github.com/okfn/ckan/issues/258&lt;/a&gt;
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item>
 </channel>
</rss>