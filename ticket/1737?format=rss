<?xml version="1.0"?>
<rss xmlns:dc="http://purl.org/dc/elements/1.1/" version="2.0">
  <channel>
    <title>CKAN: Ticket #1737: Expose solr-based search API</title>
    <link>http://localhost/ticket/1737</link>
    <description>&lt;p&gt;
Super ticket: &lt;a class="new ticket" href="http://localhost/ticket/1745" title="enhancement: Dataset search UX improvements as of Jan 2012 (new)"&gt;#1745&lt;/a&gt;
&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Convert /api/rest/dataset to be search query (i.e. take arguments in ?....)
&lt;/li&gt;&lt;li&gt;Directly expose solr though may want to override limit. See &lt;a class="ext-link" href="https://github.com/okfn/openspending/blob/master/openspending/ui/controllers/api.py#L48"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;https://github.com/okfn/openspending/blob/master/openspending/ui/controllers/api.py#L48&lt;/a&gt;
&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;
Required for some improvements to UX (such as autocomplete and better search).
&lt;/p&gt;
</description>
    <language>en-us</language>
    <image>
      <title>CKAN</title>
      <url>http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png</url>
      <link>http://localhost/ticket/1737</link>
    </image>
    <generator>Trac 0.12.3</generator>
    <item>
      
        <dc:creator>rgrp</dc:creator>

      <pubDate>Tue, 31 Jan 2012 12:57:18 GMT</pubDate>
      <title>keywords set</title>
      <link>http://localhost/ticket/1737#comment:1</link>
      <guid isPermaLink="false">http://localhost/ticket/1737#comment:1</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;keywords&lt;/strong&gt;
              &lt;em&gt;1d&lt;/em&gt; added
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>rgrp</dc:creator>

      <pubDate>Thu, 02 Feb 2012 23:22:34 GMT</pubDate>
      <title>description changed</title>
      <link>http://localhost/ticket/1737#comment:2</link>
      <guid isPermaLink="false">http://localhost/ticket/1737#comment:2</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;description&lt;/strong&gt;
              modified (&lt;a href="/ticket/1737?action=diff&amp;amp;version=2"&gt;diff&lt;/a&gt;)
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>rgrp</dc:creator>

      <pubDate>Thu, 02 Feb 2012 23:24:15 GMT</pubDate>
      <title>milestone changed</title>
      <link>http://localhost/ticket/1737#comment:3</link>
      <guid isPermaLink="false">http://localhost/ticket/1737#comment:3</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;milestone&lt;/strong&gt;
                changed from &lt;em&gt;ckan-sprint-2012-02-20&lt;/em&gt; to &lt;em&gt;ckan-v1.7&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>rgrp</dc:creator>

      <pubDate>Mon, 06 Feb 2012 11:47:12 GMT</pubDate>
      <title>status, milestone changed</title>
      <link>http://localhost/ticket/1737#comment:4</link>
      <guid isPermaLink="false">http://localhost/ticket/1737#comment:4</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;new&lt;/em&gt; to &lt;em&gt;assigned&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;milestone&lt;/strong&gt;
                changed from &lt;em&gt;ckan-v1.7&lt;/em&gt; to &lt;em&gt;current-ckan-sprint-2012-02-20&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>rgrp</dc:creator>

      <pubDate>Mon, 06 Feb 2012 12:07:39 GMT</pubDate>
      <title>keywords changed</title>
      <link>http://localhost/ticket/1737#comment:5</link>
      <guid isPermaLink="false">http://localhost/ticket/1737#comment:5</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;keywords&lt;/strong&gt;
              &lt;em&gt;[1d]&lt;/em&gt; added; &lt;em&gt;1d&lt;/em&gt; removed
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>rgrp</dc:creator>

      <pubDate>Tue, 07 Feb 2012 00:39:05 GMT</pubDate>
      <title>owner changed</title>
      <link>http://localhost/ticket/1737#comment:6</link>
      <guid isPermaLink="false">http://localhost/ticket/1737#comment:6</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;owner&lt;/strong&gt;
              changed from &lt;em&gt;zephod&lt;/em&gt; to &lt;em&gt;rgrp&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Wed, 22 Feb 2012 13:19:41 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/1737#comment:7</link>
      <guid isPermaLink="false">http://localhost/ticket/1737#comment:7</guid>
      <description>
        &lt;p&gt;
SOLR syntax is already accepted in:
&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;api/3/search/package
&lt;/li&gt;&lt;li&gt;Action API "package_search"
&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;
Actually api/1/search/package and api/1/search/package accept SOLR syntax too, but they also translate old-CKAN search parameters syntax to SOLR as well.
&lt;/p&gt;
&lt;p&gt;
See: &lt;a class="ext-link" href="http://docs.ckan.org/en/latest/apiv3.html"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;http://docs.ckan.org/en/latest/apiv3.html&lt;/a&gt;
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>rgrp</dc:creator>

      <pubDate>Mon, 05 Mar 2012 00:43:55 GMT</pubDate>
      <title>milestone changed</title>
      <link>http://localhost/ticket/1737#comment:8</link>
      <guid isPermaLink="false">http://localhost/ticket/1737#comment:8</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;milestone&lt;/strong&gt;
                changed from &lt;em&gt;current-ckan-sprint-2012-03-05&lt;/em&gt; to &lt;em&gt;ckan-v1.7&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
Did not get to this sprint as focused on &lt;a class="closed ticket" href="http://localhost/ticket/1797" title="enhancement: [super] Webstore v2 - Integrated and based on ElasticSearch (closed: fixed)"&gt;#1797&lt;/a&gt;.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>icmurray</dc:creator>

      <pubDate>Mon, 16 Apr 2012 15:47:26 GMT</pubDate>
      <title>keywords, owner changed</title>
      <link>http://localhost/ticket/1737#comment:9</link>
      <guid isPermaLink="false">http://localhost/ticket/1737#comment:9</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;keywords&lt;/strong&gt;
              &lt;em&gt;[1-2d]&lt;/em&gt; added; &lt;em&gt;[1d]&lt;/em&gt; removed
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;owner&lt;/strong&gt;
              changed from &lt;em&gt;rgrp&lt;/em&gt; to &lt;em&gt;icmurray&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
See &lt;a class="ext-link" href="http://ckan.okfnpad.org/feature-1737-expose-solr-based-search-api"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;http://ckan.okfnpad.org/feature-1737-expose-solr-based-search-api&lt;/a&gt;
&lt;/p&gt;
&lt;h1 id="Immediateactions"&gt;Immediate actions&lt;/h1&gt;
&lt;ul&gt;&lt;li&gt;analysis of whether the current action/get.py:package_search() function exposes all we currently need for the use cases described above.
&lt;/li&gt;&lt;li&gt;how to return that data (expand the current format?)
&lt;/li&gt;&lt;li&gt;analysis of whether the current (action) API v.3 can use query parameters rather than as well as POSTed data.
&lt;/li&gt;&lt;/ul&gt;&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;
(controlles/api.py:action() )
uses "self._get_request_data()" which in-turn pulls out data from POST body.
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;h1 id="Tasks"&gt;Tasks&lt;/h1&gt;
&lt;p&gt;
Extend the existing package_search action.
&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;pass the facet fields into the logic layer from the request parameters.
&lt;ul&gt;&lt;li&gt;/api/3/action/package_search
&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;facet information not being returned via package_search action (is empty).
&lt;ul&gt;&lt;li&gt;curl -X POST -d '{"q": "{!lucene q.op=AND df=text}tags:health +community -profile"}' '&lt;a class="ext-link" href="http://thedatahub.org/api/3/action/package_search"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;http://thedatahub.org/api/3/action/package_search&lt;/a&gt;'
&lt;/li&gt;&lt;li&gt;figure out why it's not working, and what the facet information should look like
&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;whitelist any GETable api actions, and optionally construct the query from url params rather than body
&lt;/li&gt;&lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>icmurray</dc:creator>

      <pubDate>Mon, 16 Apr 2012 15:48:17 GMT</pubDate>
      <title>milestone changed</title>
      <link>http://localhost/ticket/1737#comment:10</link>
      <guid isPermaLink="false">http://localhost/ticket/1737#comment:10</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;milestone&lt;/strong&gt;
                changed from &lt;em&gt;ckan-v1.7&lt;/em&gt; to &lt;em&gt;current-ckan-sprint-2012-04-30&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>icmurray</dc:creator>

      <pubDate>Thu, 26 Apr 2012 17:18:03 GMT</pubDate>
      <title>status changed; resolution set</title>
      <link>http://localhost/ticket/1737#comment:11</link>
      <guid isPermaLink="false">http://localhost/ticket/1737#comment:11</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;assigned&lt;/em&gt; to &lt;em&gt;closed&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;resolution&lt;/strong&gt;
                set to &lt;em&gt;worksforme&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
Facet results &lt;strong&gt;are&lt;/strong&gt; already available through the package_search action api.  The facet fields need to be specified in the query, otherwise no faceting will be done (ie - the default facets specified in the .ini file are not used).
&lt;/p&gt;
&lt;p&gt;
This leaves "whitelist any GETable api actions, and optionally construct the query from url params rather than body" todo, which I've pulled out into another ticket, as it wasn't originally in this ticket.  (&lt;a class="closed ticket" href="http://localhost/ticket/2330" title="enhancement: Make api read-actions GETable (closed: fixed)"&gt;#2330&lt;/a&gt;)
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>icmurray</dc:creator>

      <pubDate>Thu, 26 Apr 2012 17:23:17 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/1737#comment:12</link>
      <guid isPermaLink="false">http://localhost/ticket/1737#comment:12</guid>
      <description>
        &lt;p&gt;
... just to add to the above:
&lt;/p&gt;
&lt;pre class="wiki"&gt;
&amp;gt;&amp;gt;&amp;gt; pprint(json.loads(requests.post('http://127.0.0.1:8088/api/3/action/package_search', json.dumps({'facet.field': ["tags", "groups"]})).content))
&amp;lt;snip&amp;gt;
u'search_facets': {u'groups': {u'items': [{u'count': 1,
                                                        u'display_name': u"Roger's books",
                                                        u'name': u'roger'},
                                                       {u'count': 2,
                                                        u'display_name': u"Dave's books",
                                                        u'name': u'david'}],
                                            u'title': u'groups'},
                                u'tags': {u'items': [{u'count': 1,
                                                      u'display_name': u'tolstoy',
                                                      u'name': u'tolstoy'},
                                                     {u'count': 2,
                                                      u'display_name': u'russian',
                                                      u'name': u'russian'},
                                                     {u'count': 2,
                                                      u'display_name': u'Flexible \u30a1',
                                                      u'name': u'Flexible \u30a1'}],
                                          u'title': u'tags'}}},
 u'success': True}
&lt;/pre&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>rgrp</dc:creator>

      <pubDate>Sun, 06 May 2012 18:29:07 GMT</pubDate>
      <title>status, milestone changed; resolution deleted</title>
      <link>http://localhost/ticket/1737#comment:13</link>
      <guid isPermaLink="false">http://localhost/ticket/1737#comment:13</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;closed&lt;/em&gt; to &lt;em&gt;reopened&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;resolution&lt;/strong&gt;
                &lt;em&gt;worksforme&lt;/em&gt; deleted
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;milestone&lt;/strong&gt;
                changed from &lt;em&gt;ckan-sprint-2012-04-30&lt;/em&gt; to &lt;em&gt;current-ckan-sprint-2012-05-15&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
Having now thought about this I'm re-opening this ticket for the following reasons:
&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;No real documentation (other than that in this ticket yet available)
&lt;ul&gt;&lt;li&gt;It would also be nice to know how this maps to SOLR API (can i use all of the facet options solr provides or not ...?)
&lt;/li&gt;&lt;li&gt;And I would again emphasize my preference for having *direct* access to something that looks *exactly* like SOLR API as I can then use client and docs from SOLR to work with it.
&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;No clear resolution of separation between Action and REST API (and search API). Really seems to me there should be convergence between latter 2 (as suggested in the ticket) -- this would also resolve the problem that having GET /api/dataset return all datasets is *not* a great idea
&lt;/li&gt;&lt;li&gt;The Action API requires a POST request. Since the primary purpose of the search API would be usage from JS it would be nice if GET and JSONP were supported. (Though given our CORS support we could argue this was optional).
&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;
Not saying *all* of this needs fixing but some clear approach here would be useful
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>icmurray</dc:creator>

      <pubDate>Wed, 16 May 2012 09:07:58 GMT</pubDate>
      <title>keywords, milestone changed</title>
      <link>http://localhost/ticket/1737#comment:14</link>
      <guid isPermaLink="false">http://localhost/ticket/1737#comment:14</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;keywords&lt;/strong&gt;
              &lt;em&gt;[0.5d]&lt;/em&gt; added; &lt;em&gt;[1-2d]&lt;/em&gt; removed
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;milestone&lt;/strong&gt;
                changed from &lt;em&gt;ckan-sprint-2012-05-15&lt;/em&gt; to &lt;em&gt;current-ckan-sprint-2012-05-29&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>icmurray</dc:creator>

      <pubDate>Mon, 21 May 2012 09:59:12 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/1737#comment:15</link>
      <guid isPermaLink="false">http://localhost/ticket/1737#comment:15</guid>
      <description>
        &lt;ul&gt;&lt;li&gt;package_search action is now documented, with reference to the solr search parameters available. &lt;a class="ext-link" href="http://docs.ckan.org/en/latest/apiv3.html"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;http://docs.ckan.org/en/latest/apiv3.html&lt;/a&gt; (auto-docs not working on rtd at the moment).
&lt;/li&gt;&lt;/ul&gt;&lt;ul&gt;&lt;li&gt;actions defined in get.py are now GETable.  &lt;a class="ext-link" href="http://docs.ckan.org/en/latest/apiv3.html#get-able-actions"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;http://docs.ckan.org/en/latest/apiv3.html#get-able-actions&lt;/a&gt;
&lt;/li&gt;&lt;/ul&gt;&lt;ul&gt;&lt;li&gt;we won't be providing direct access to solr api, as we think the cost outweighs the benefit.
&lt;/li&gt;&lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>icmurray</dc:creator>

      <pubDate>Mon, 21 May 2012 09:59:30 GMT</pubDate>
      <title>cc set</title>
      <link>http://localhost/ticket/1737#comment:16</link>
      <guid isPermaLink="false">http://localhost/ticket/1737#comment:16</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;cc&lt;/strong&gt;
              &lt;em&gt;rgrp&lt;/em&gt; added
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>rgrp</dc:creator>

      <pubDate>Fri, 25 May 2012 10:39:05 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/1737#comment:17</link>
      <guid isPermaLink="false">http://localhost/ticket/1737#comment:17</guid>
      <description>
        &lt;p&gt;
I *strongly* disagree re access to solr API -- i don't really care if it is direct but I want something that looks like it at least for core query parameters and facets ...
&lt;/p&gt;
&lt;p&gt;
Is there some major issue around security etc (e.g. limiting to only public datasets or similar?)
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>icmurray</dc:creator>

      <pubDate>Fri, 25 May 2012 11:01:11 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/1737#comment:18</link>
      <guid isPermaLink="false">http://localhost/ticket/1737#comment:18</guid>
      <description>
        &lt;p&gt;
For completeness, package_search docs can be viewed at &lt;a class="ext-link" href="https://github.com/okfn/ckan/blob/master/ckan/logic/action/get.py#L983"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;https://github.com/okfn/ckan/blob/master/ckan/logic/action/get.py#L983&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
@rgrp: are you happy with this ticket now, does it expose all you need?  If so, I'll close it...
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>ross</dc:creator>

      <pubDate>Mon, 28 May 2012 11:24:59 GMT</pubDate>
      <title>milestone changed</title>
      <link>http://localhost/ticket/1737#comment:19</link>
      <guid isPermaLink="false">http://localhost/ticket/1737#comment:19</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;milestone&lt;/strong&gt;
                changed from &lt;em&gt;current-ckan-sprint-2012-05-29&lt;/em&gt; to &lt;em&gt;ckan-v1.8&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>rgrp</dc:creator>

      <pubDate>Sun, 03 Jun 2012 10:27:00 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/1737#comment:20</link>
      <guid isPermaLink="false">http://localhost/ticket/1737#comment:20</guid>
      <description>
        &lt;p&gt;
Let's close. What would be nice though is ETA on the GET support getting deployed on the &lt;a class="missing wiki"&gt;DataHub?&lt;/a&gt; -- just tried using it today and realized it didn't work :-)
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>icmurray</dc:creator>

      <pubDate>Mon, 18 Jun 2012 09:16:41 GMT</pubDate>
      <title>status changed; resolution set</title>
      <link>http://localhost/ticket/1737#comment:21</link>
      <guid isPermaLink="false">http://localhost/ticket/1737#comment:21</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;reopened&lt;/em&gt; to &lt;em&gt;closed&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;resolution&lt;/strong&gt;
                set to &lt;em&gt;fixed&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
The GET-able actions ( &lt;a class="closed ticket" href="http://localhost/ticket/2330" title="enhancement: Make api read-actions GETable (closed: fixed)"&gt;#2330&lt;/a&gt; ) are in master, and will make it into 1.8
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>rgrp</dc:creator>

      <pubDate>Mon, 18 Jun 2012 09:20:03 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/1737#comment:22</link>
      <guid isPermaLink="false">http://localhost/ticket/1737#comment:22</guid>
      <description>
        &lt;p&gt;
But not v1.7.1? (When is v1.8 due?).
&lt;/p&gt;
&lt;p&gt;
Also for the record a couple of things I found when trying to use this:
&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;No support for facet sort order or facet limit afaict ...
&lt;/li&gt;&lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>icmurray</dc:creator>

      <pubDate>Mon, 18 Jun 2012 10:34:55 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/1737#comment:23</link>
      <guid isPermaLink="false">http://localhost/ticket/1737#comment:23</guid>
      <description>
        &lt;p&gt;
Replying to &lt;a href="http://localhost/ticket/1737#comment:22" title="Comment 22 for Ticket #1737"&gt;rgrp&lt;/a&gt;:
&lt;/p&gt;
&lt;blockquote class="citation"&gt;
&lt;p&gt;
But not v1.7.1? (When is v1.8 due?).
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
Not 1.7.1 as it's not a bug fix (&lt;a class="ext-link" href="https://docs.google.com/document/d/170fxET3kd9dJ4L6VAj3yZugtK0rrVe44J4HuLbTUsEU/"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;https://docs.google.com/document/d/170fxET3kd9dJ4L6VAj3yZugtK0rrVe44J4HuLbTUsEU/&lt;/a&gt;)
&lt;/p&gt;
&lt;p&gt;
I don't know when 1.8 is due.
&lt;/p&gt;
&lt;blockquote class="citation"&gt;
&lt;p&gt;
Also for the record a couple of things I found when trying to use this:
&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;No support for facet sort order or facet limit afaict ...
&lt;/li&gt;&lt;/ul&gt;&lt;/blockquote&gt;
&lt;p&gt;
Thanks, that's good to know.
&lt;/p&gt;
&lt;p&gt;
facet.limit should be working &lt;a class="missing changeset" title="No default repository defined"&gt;[1]&lt;/a&gt;, so if it's not, then that's a bug.  I can check that.
&lt;/p&gt;
&lt;p&gt;
for facet.sort, I've added ticket &lt;a class="new ticket" href="http://localhost/ticket/2543" title="enhancement: facet.sort is not available in the package_search action (new)"&gt;#2543&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
&lt;a class="missing changeset" title="No default repository defined"&gt;[1]&lt;/a&gt; &lt;a class="ext-link" href="https://github.com/okfn/ckan/blob/master/ckan/logic/action/get.py#L1022"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;https://github.com/okfn/ckan/blob/master/ckan/logic/action/get.py#L1022&lt;/a&gt;
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>icmurray</dc:creator>

      <pubDate>Tue, 19 Jun 2012 13:32:12 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/1737#comment:24</link>
      <guid isPermaLink="false">http://localhost/ticket/1737#comment:24</guid>
      <description>
        &lt;p&gt;
Replying to &lt;a href="http://localhost/ticket/1737#comment:23" title="Comment 23 for Ticket #1737"&gt;icmurray&lt;/a&gt;:
&lt;/p&gt;
&lt;blockquote class="citation"&gt;
&lt;blockquote class="citation"&gt;
&lt;p&gt;
Also for the record a couple of things I found when trying to use this:
&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;No support for facet sort order or facet limit afaict ...
&lt;/li&gt;&lt;/ul&gt;&lt;/blockquote&gt;
&lt;p&gt;
Thanks, that's good to know.
&lt;/p&gt;
&lt;p&gt;
facet.limit should be working &lt;a class="missing changeset" title="No default repository defined"&gt;[1]&lt;/a&gt;, so if it's not, then that's a bug.  I can check that.
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
facet.limit is working as I'd expect. eg (on master):
&lt;/p&gt;
&lt;pre class="wiki"&gt;import requests
import json
from pprint import pprint as pp
pp(json.loads(requests.get('http://ian-laptop:5000/api/3/action/package_search?q=data&amp;amp;facet.field=tags&amp;amp;facet.limit=1').content))
&lt;/pre&gt;&lt;p&gt;
Returns a result where only the tag with the highest count is returned in the search_facets result dict.
&lt;/p&gt;
&lt;p&gt;
One thing I did spot though was that we aren't able to specify per-field parameters.  ie whilst &lt;tt&gt;facet.limit&lt;/tt&gt; sets the facet limit for &lt;em&gt;all&lt;/em&gt; facet fields, solr allows that to be overridden on a per-field basis, eg &lt;tt&gt;facet.tags.limit&lt;/tt&gt;.  This isn't something we support at the moment.  I've created a ticket for this, &lt;a class="new ticket" href="http://localhost/ticket/2573" title="enhancement: package_search does not allow solr's per-field facet parameters (new)"&gt;#2573&lt;/a&gt; .  Let me know if this something that you'd find useful, otherwise I'll leave it on the backlog for a future iteration.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item>
 </channel>
</rss>