<?xml version="1.0"?>
<rss xmlns:dc="http://purl.org/dc/elements/1.1/" version="2.0">
  <channel>
    <title>CKAN: Ticket #1004: Group creation instructions missing</title>
    <link>http://localhost/ticket/1004</link>
    <description>&lt;p&gt;
Need instructions on the group page to tell people they need to login to create a group. Someone must have deleted this.
&lt;/p&gt;
</description>
    <language>en-us</language>
    <image>
      <title>CKAN</title>
      <url>http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png</url>
      <link>http://localhost/ticket/1004</link>
    </image>
    <generator>Trac 0.12.3</generator>
    <item>
      
        <dc:creator>rgrp</dc:creator>

      <pubDate>Mon, 07 Mar 2011 17:16:49 GMT</pubDate>
      <title>priority, milestone changed; keywords set</title>
      <link>http://localhost/ticket/1004#comment:1</link>
      <guid isPermaLink="false">http://localhost/ticket/1004#comment:1</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;keywords&lt;/strong&gt;
              &lt;em&gt;bitesize&lt;/em&gt; added
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;priority&lt;/strong&gt;
                changed from &lt;em&gt;awaiting triage&lt;/em&gt; to &lt;em&gt;minor&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;milestone&lt;/strong&gt;
                changed from &lt;em&gt;ckan-v1.4-sprint-2&lt;/em&gt; to &lt;em&gt;ckan-v1.4&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Mon, 16 May 2011 15:21:35 GMT</pubDate>
      <title>milestone changed; repo, state, theme set</title>
      <link>http://localhost/ticket/1004#comment:2</link>
      <guid isPermaLink="false">http://localhost/ticket/1004#comment:2</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;repo&lt;/strong&gt;
                set to &lt;em&gt;ckan&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;state&lt;/strong&gt;
                set to &lt;em&gt;draft&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;theme&lt;/strong&gt;
                set to &lt;em&gt;none&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;milestone&lt;/strong&gt;
                changed from &lt;em&gt;ckan-v1.4&lt;/em&gt; to &lt;em&gt;ckan-v1.5&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>thejimmyg</dc:creator>

      <pubDate>Wed, 20 Jul 2011 14:52:40 GMT</pubDate>
      <title>milestone changed</title>
      <link>http://localhost/ticket/1004#comment:3</link>
      <guid isPermaLink="false">http://localhost/ticket/1004#comment:3</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;milestone&lt;/strong&gt;
                changed from &lt;em&gt;ckan-v1.5&lt;/em&gt; to &lt;em&gt;ckan-backlog&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
At the moment it says "Create a new group" and clicking it takes you to the login page. We want it to do the same thing but if you aren't logged in the label should say "Log in to create a group".
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>thejimmyg</dc:creator>

      <pubDate>Tue, 06 Dec 2011 11:36:15 GMT</pubDate>
      <title>status changed; resolution set</title>
      <link>http://localhost/ticket/1004#comment:4</link>
      <guid isPermaLink="false">http://localhost/ticket/1004#comment:4</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;new&lt;/em&gt; to &lt;em&gt;closed&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;resolution&lt;/strong&gt;
                set to &lt;em&gt;fixed&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
The yellow box on the right is now back and you don't get taken to the login page. We'll write more detailed instructions once the group refactor is done.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Tue, 06 Dec 2011 11:54:49 GMT</pubDate>
      <title>status changed; resolution deleted</title>
      <link>http://localhost/ticket/1004#comment:5</link>
      <guid isPermaLink="false">http://localhost/ticket/1004#comment:5</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;closed&lt;/em&gt; to &lt;em&gt;reopened&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;resolution&lt;/strong&gt;
                &lt;em&gt;fixed&lt;/em&gt; deleted
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
There is a description of groups, but that is not the subject of this ticket. In fact if you're not logged in you do get taken to the login page (which is quite correct). I agree with your earlier comment that the text of the link needs changing.
&lt;/p&gt;
&lt;p&gt;
Sorry to be reopening this, but I think the previous comment misses the point. Doing this ticket would be a valuable quick fix. Putting on backlog.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>thejimmyg</dc:creator>

      <pubDate>Tue, 06 Dec 2011 12:29:57 GMT</pubDate>
      <title>status changed; resolution set</title>
      <link>http://localhost/ticket/1004#comment:6</link>
      <guid isPermaLink="false">http://localhost/ticket/1004#comment:6</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;reopened&lt;/em&gt; to &lt;em&gt;closed&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;resolution&lt;/strong&gt;
                set to &lt;em&gt;duplicate&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
I don't understand. We just had a team meeting about this, all discussed it and agreed to close it. Yes, you get taken to the login page, but that is the correct behaviour.
&lt;/p&gt;
&lt;p&gt;
The problem in the past was that the link was in the yellow box and there was no explanation as to why you had to login. This time you click from the header bar and there is a clear message saying "Unauthorized to create a group" - exactly as a user would expect. Even if the exact text of the ticket description isn't fully implemented in the current release, the UX isn't broken anymore. Yes, it might be even nicer to have a message warning them in advanced but these improvements will be taken forward in the UX work - maybe there is an even better solution than a message?
&lt;/p&gt;
&lt;p&gt;
Since you are unhappy about closing it I'm marking it as "Duplicate" of &lt;a class="closed ticket" href="http://localhost/ticket/1521" title="enhancement: [super] Groups UI and UX improvements in v1.6 from Cygri (closed: fixed)"&gt;#1521&lt;/a&gt;. As agreed earlier with the entire team, we'll take this forward as part of the groups refactor.
&lt;/p&gt;
&lt;p&gt;
See &lt;a class="closed ticket" href="http://localhost/ticket/1521" title="enhancement: [super] Groups UI and UX improvements in v1.6 from Cygri (closed: fixed)"&gt;#1521&lt;/a&gt; for more information.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Tue, 06 Dec 2011 13:26:34 GMT</pubDate>
      <title>status changed; resolution deleted</title>
      <link>http://localhost/ticket/1004#comment:7</link>
      <guid isPermaLink="false">http://localhost/ticket/1004#comment:7</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;closed&lt;/em&gt; to &lt;em&gt;reopened&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;resolution&lt;/strong&gt;
                &lt;em&gt;duplicate&lt;/em&gt; deleted
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
My suggested fix:
&lt;/p&gt;
&lt;pre class="wiki"&gt;
diff --git a/ckan/templates/group/index.html b/ckan/templates/group/index.html
index 8502df9..064e066 100644
--- a/ckan/templates/group/index.html
+++ b/ckan/templates/group/index.html
@@ -9,7 +9,15 @@
   &amp;lt;py:match path="primarysidebar"&amp;gt;
     &amp;lt;li class="widget-container boxed widget_text"&amp;gt;
       &amp;lt;h3&amp;gt;What Are Groups?&amp;lt;/h3&amp;gt;
-      &amp;lt;span i18n:msg=""&amp;gt;Whilst tags are great at collecting datasets together,
+      &amp;lt;p&amp;gt;&amp;lt;span i18n:msg=""&amp;gt;Whilst tags are great at collecting datasets togethe
+      &amp;lt;p&amp;gt;
+      &amp;lt;span i18n:msg="" class="ckan-logged-in" style="display: none;"&amp;gt;
+         &amp;lt;a href="${h.url_for(controller='group',action='new', id=None)}"&amp;gt;Creat
+      &amp;lt;/span&amp;gt;
+      &amp;lt;span i18n:msg="" class="ckan-logged-out"&amp;gt;
+         To create a new group, please first &amp;lt;a href="${h.url_for(controller='u
+      &amp;lt;/span&amp;gt;
+      &amp;lt;/p&amp;gt;
     &amp;lt;/li&amp;gt;
   &amp;lt;/py:match&amp;gt;
diff --git a/ckan/templates/group/layout.html b/ckan/templates/group/layout.html
index 64153aa..a3f732b 100644
--- a/ckan/templates/group/layout.html
+++ b/ckan/templates/group/layout.html
@@ -25,9 +25,12 @@
       &amp;lt;li py:attrs="{'class':'current-tab'} if c.action=='index' else {}"&amp;gt;
         ${h.subnav_link(c, h.icon('group') + _('List Groups'), controller='grou
       &amp;lt;/li&amp;gt;
-      &amp;lt;li py:attrs="{'class':'current-tab'} if c.action=='new' else {}"&amp;gt;
+      &amp;lt;li py:attrs="{'class':'current-tab'} if c.action=='new' else {}" class="
         ${h.subnav_link(c, h.icon('group_add') + _('Add a Group'), controller='
       &amp;lt;/li&amp;gt;
+      &amp;lt;li py:attrs="{'class':'current-tab'} if c.action=='new' else {}" class="
+        ${h.subnav_link(c, h.icon('group_add') + _('Log-in to add a Group'), co
+      &amp;lt;/li&amp;gt;
     &amp;lt;/ul&amp;gt;
   &amp;lt;/py:match&amp;gt;
&lt;/pre&gt;&lt;p&gt;
BUT this fix doesn't completely work. When you log-in and create a group, at this point the nav bar changes from the (correct) "Add a group" to (incorrect) "Log-in to add a group".
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Tue, 06 Dec 2011 13:26:45 GMT</pubDate>
      <title>status changed; owner set</title>
      <link>http://localhost/ticket/1004#comment:8</link>
      <guid isPermaLink="false">http://localhost/ticket/1004#comment:8</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;owner&lt;/strong&gt;
              set to &lt;em&gt;zephod&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;reopened&lt;/em&gt; to &lt;em&gt;assigned&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Tue, 06 Dec 2011 16:02:32 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/1004#comment:9</link>
      <guid isPermaLink="false">http://localhost/ticket/1004#comment:9</guid>
      <description>
        &lt;p&gt;
Here is the unclipped version:
&lt;/p&gt;
&lt;pre class="wiki"&gt;      &amp;lt;p&amp;gt;
      &amp;lt;span i18n:msg="" class="ckan-logged-in" style="display: none;"&amp;gt;
	  &amp;lt;a href="${h.url_for(controller='group',action='new', id=None)}"&amp;gt;Create a new group&amp;lt;/a&amp;gt;
      &amp;lt;/span&amp;gt;
      &amp;lt;span i18n:msg="" class="ckan-logged-out"&amp;gt;
	  To create a new group, please first &amp;lt;a href="${h.url_for(controller='user',action='login', id=None)}"&amp;gt;log-in&amp;lt;/a&amp;gt;.
      &amp;lt;/span&amp;gt;
      &amp;lt;/p&amp;gt;
&lt;/pre&gt;&lt;pre class="wiki"&gt;      &amp;lt;li py:attrs="{'class':'current-tab'} if c.action=='new' else {}" class="ckan-logged-in" style="display: none;"&amp;gt;
        ${h.subnav_link(c, h.icon('group_add') + _('Add a Group'), controller='group', action='new')}
      &amp;lt;/li&amp;gt;
      &amp;lt;li py:attrs="{'class':'current-tab'} if c.action=='new' else {}" class="ckan-logged-out"&amp;gt;
        ${h.subnav_link(c, h.icon('group_add') + _('Log-in to add a Group'), controller='group', action='new')}
      &amp;lt;/li&amp;gt;
&lt;/pre&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>zephod</dc:creator>

      <pubDate>Tue, 06 Dec 2011 17:53:36 GMT</pubDate>
      <title>status changed; resolution set</title>
      <link>http://localhost/ticket/1004#comment:10</link>
      <guid isPermaLink="false">http://localhost/ticket/1004#comment:10</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;assigned&lt;/em&gt; to &lt;em&gt;closed&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;resolution&lt;/strong&gt;
                set to &lt;em&gt;fixed&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
Dread, that fix wouldn't work because the class attribute was being defined in Genshi and again in HTML, with slighly undefined behaviour (in this case Genshi overwrites HTML).
I have performed a very very simple fix which modifies the navbar text when you're not logged in.
&lt;a class="ext-link" href="https://github.com/okfn/ckan/commit/a89a48731ba548170045a60ac2930e0019c299c7"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;https://github.com/okfn/ckan/commit/a89a48731ba548170045a60ac2930e0019c299c7&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
I don't think the link should be restored in the sidebar, it was explicitly removed as part of a site-wide sweep to make the sidebar a passive, helpful element rather than an active element with action links.
&lt;/p&gt;
&lt;p&gt;
Site looks great to me, I'm closing this ticket.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Tue, 06 Dec 2011 18:18:05 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/1004#comment:11</link>
      <guid isPermaLink="false">http://localhost/ticket/1004#comment:11</guid>
      <description>
        &lt;p&gt;
Great stuff zeph! Diff looks really good and cheers for the explanation.
&lt;/p&gt;
&lt;p&gt;
On master, cset:a89a48731ba548170045a60ac2930e0019c299c7 and I've cherry picked this for release 1.5.1. too.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item>
 </channel>
</rss>