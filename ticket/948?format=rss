<?xml version="1.0"?>
<rss xmlns:dc="http://purl.org/dc/elements/1.1/" version="2.0">
  <channel>
    <title>CKAN: Ticket #948: Highlight (to a sysadmin) which packages are deleted</title>
    <link>http://localhost/ticket/948</link>
    <description>&lt;p&gt;
When a customer logs in as a sysadmin then he/she see all packages, including deleted and pending ones. These are hidden to the average user, but the sysadmin has no idea of this until he clicks on the package and sees at the bottom 'state: deleted'.
&lt;/p&gt;
&lt;p&gt;
It should be more obvious than that on the search view - an icon, message or crossed-out name to packages are deleted.
&lt;/p&gt;
</description>
    <language>en-us</language>
    <image>
      <title>CKAN</title>
      <url>http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png</url>
      <link>http://localhost/ticket/948</link>
    </image>
    <generator>Trac 0.12.3</generator>
    <item>
      
        <dc:creator>sebbacon</dc:creator>

      <pubDate>Wed, 16 Mar 2011 10:23:29 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/948#comment:1</link>
      <guid isPermaLink="false">http://localhost/ticket/948#comment:1</guid>
      <description>
        &lt;p&gt;
I would propose a "trash can" model: a "deleted items" area where only deleted items can be viewed / searched.  Deleted items should not appear anywhere else, but we could include a "also search deleted items" option in the search for admins.  (In which case, deleted items should have a "div class='deleted'" or similar so they can be highlighted with CSS).
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Wed, 16 Mar 2011 10:25:00 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/948#comment:2</link>
      <guid isPermaLink="false">http://localhost/ticket/948#comment:2</guid>
      <description>
        &lt;p&gt;
This sounds like a good solution to me. This should include not just packages, but groups and all other stateful objects.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Wed, 16 Mar 2011 10:27:48 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/948#comment:3</link>
      <guid isPermaLink="false">http://localhost/ticket/948#comment:3</guid>
      <description>
        &lt;p&gt;
There's also the API to consider.
&lt;/p&gt;
&lt;p&gt;
One edge case to consider too - currently we don't allow reuse of the name of a deleted package, which is confusing. The deleted package should be moved aside (renamed), unless the deleted package is entirely the same as the new or renamed package.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>sebbacon</dc:creator>

      <pubDate>Thu, 17 Mar 2011 17:25:00 GMT</pubDate>
      <title>owner, repo, theme set</title>
      <link>http://localhost/ticket/948#comment:4</link>
      <guid isPermaLink="false">http://localhost/ticket/948#comment:4</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;owner&lt;/strong&gt;
              set to &lt;em&gt;sebbacon&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;repo&lt;/strong&gt;
                set to &lt;em&gt;ckan&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;theme&lt;/strong&gt;
                set to &lt;em&gt;none&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>sebbacon</dc:creator>

      <pubDate>Thu, 17 Mar 2011 18:19:39 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/948#comment:5</link>
      <guid isPermaLink="false">http://localhost/ticket/948#comment:5</guid>
      <description>
        &lt;p&gt;
Emptying the trashcan (which would amount to purging deleted objects) would probably be a function of the administrative dashboard &lt;a class="closed ticket" href="http://localhost/ticket/833" title="enhancement: [super] Administrative dashboard extension (closed: fixed)"&gt;#833&lt;/a&gt;
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Mon, 21 Mar 2011 17:30:02 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/948#comment:6</link>
      <guid isPermaLink="false">http://localhost/ticket/948#comment:6</guid>
      <description>
        &lt;p&gt;
We have a use case now for DGU where if a user requests a deleted package, he is 302 redirected to another package (specified in the deleted package's extras). This is for the API, but could also be done in the Web UI if deleted packages are hidden away in a trashcan. But this suggests we need a trashcan in the API too.
&lt;/p&gt;
&lt;p&gt;
i.e we should keep the data model really synchronised between the Web UI and API, (even if they are becoming divorced from the ORM Model - or maybe we should have a trashcan in the ORM model too?)
&lt;/p&gt;
&lt;p&gt;
Ideas:
&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;GET api/rest/package - lists active packages
&lt;/li&gt;&lt;li&gt;GET api/rest/package/traffic_data - active package
&lt;/li&gt;&lt;li&gt;GET api/rest/trash/package - lists deleted packages
&lt;/li&gt;&lt;li&gt;GET api/rest/trash/traffic_data_old - deleted package
&lt;/li&gt;&lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Tue, 23 Aug 2011 15:17:22 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/948#comment:7</link>
      <guid isPermaLink="false">http://localhost/ticket/948#comment:7</guid>
      <description>
        &lt;p&gt;
Note: Packages will now be excluded from the search view (see &lt;a class="closed ticket" href="http://localhost/ticket/1283" title="enhancement: Deleted packages shouldn't be searchable or browsable (closed: fixed)"&gt;#1283&lt;/a&gt;). Also there is now no redirect requirement from DGU any more.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>thejimmyg</dc:creator>

      <pubDate>Tue, 06 Dec 2011 12:00:59 GMT</pubDate>
      <title>owner, status changed</title>
      <link>http://localhost/ticket/948#comment:8</link>
      <guid isPermaLink="false">http://localhost/ticket/948#comment:8</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;owner&lt;/strong&gt;
              changed from &lt;em&gt;sebbacon&lt;/em&gt; to &lt;em&gt;thejimmyg&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;new&lt;/em&gt; to &lt;em&gt;assigned&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
Re-assigning to me temporarily to investigate now that Seb has left.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>ross</dc:creator>

      <pubDate>Mon, 28 May 2012 11:58:00 GMT</pubDate>
      <title>milestone set; owner deleted</title>
      <link>http://localhost/ticket/948#comment:9</link>
      <guid isPermaLink="false">http://localhost/ticket/948#comment:9</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;owner&lt;/strong&gt;
              &lt;em&gt;thejimmyg&lt;/em&gt; deleted
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;milestone&lt;/strong&gt;
                set to &lt;em&gt;ckan-future&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item>
 </channel>
</rss>