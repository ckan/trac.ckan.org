<?xml version="1.0"?>
<rss xmlns:dc="http://purl.org/dc/elements/1.1/" version="2.0">
  <channel>
    <title>CKAN: Ticket #1177: routes.util.GenerationException</title>
    <link>http://localhost/ticket/1177</link>
    <description>&lt;blockquote&gt;
&lt;p&gt;
Hello,
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
I have done a recent update to mu ckan install, and I am now getting this error for all my packages:
&lt;/p&gt;
&lt;pre class="wiki"&gt;URL: http://ckan.emap.fgv.br/package/dengue-net
Module weberror.errormiddleware:162 in __call__
&amp;lt;&amp;lt;              __traceback_supplement__ = Supplement, self, environ
                   sr_checker = ResponseStartChecker(start_response)
                   app_iter = self.application(environ, sr_checker)
                   return self.make_catching_iter(app_iter, environ, sr_checker)
               except:
&amp;gt;&amp;gt;  app_iter = self.application(environ, sr_checker)
Module beaker.middleware:73 in __call__
&amp;lt;&amp;lt;                                                     self.cache_manager)
               environ[self.environ_key] = self.cache_manager
               return self.app(environ, start_response)
&amp;gt;&amp;gt;  return self.app(environ, start_response)
Module beaker.middleware:152 in __call__
&amp;lt;&amp;lt;                          headers.append(('Set-cookie', cookie))
                   return start_response(status, headers, exc_info)
               return self.wrap_app(environ, session_start_response)
           def _get_session(self):
&amp;gt;&amp;gt;  return self.wrap_app(environ, session_start_response)
Module routes.middleware:130 in __call__
&amp;lt;&amp;lt;                  environ['SCRIPT_NAME'] = environ['SCRIPT_NAME'][:-1]
               response = self.app(environ, start_response)
               # Wrapped in try as in rare cases the attribute will be gone already
&amp;gt;&amp;gt;  response = self.app(environ, start_response)
Module pylons.wsgiapp:125 in __call__
&amp;lt;&amp;lt;
               controller = self.resolve(environ, start_response)
               response = self.dispatch(controller, environ, start_response)
               if 'paste.testing_variables' in environ and hasattr(response,
&amp;gt;&amp;gt;  response = self.dispatch(controller, environ, start_response)
Module pylons.wsgiapp:324 in dispatch
&amp;lt;&amp;lt;          if log_debug:
                   log.debug("Calling controller class with WSGI interface")
               return controller(environ, start_response)
           def load_test_env(self, environ):
&amp;gt;&amp;gt;  return controller(environ, start_response)
Module ckan.lib.base:118 in __call__
&amp;lt;&amp;lt;          # available in environ['pylons.routes_dict']
               try:
                   return WSGIController.__call__(self, environ, start_response)
               finally:
                   model.Session.remove()
&amp;gt;&amp;gt;  return WSGIController.__call__(self, environ, start_response)
Module pylons.controllers.core:221 in __call__
&amp;lt;&amp;lt;                  return response(environ, self.start_response)
               response = self._dispatch_call()
               if not start_response_called:
                   self.start_response = start_response
&amp;gt;&amp;gt;  response = self._dispatch_call()
Module pylons.controllers.core:172 in _dispatch_call
&amp;lt;&amp;lt;              req.environ['pylons.action_method'] = func
                   response = self._inspect_call(func)
               else:
                   if log_debug:
&amp;gt;&amp;gt;  response = self._inspect_call(func)
Module pylons.controllers.core:107 in _inspect_call
&amp;lt;&amp;lt;                        func.__name__, args)
               try:
                   result = self._perform_call(func, args)
               except HTTPException, httpe:
                   if log_debug:
&amp;gt;&amp;gt;  result = self._perform_call(func, args)
Module pylons.controllers.core:60 in _perform_call
&amp;lt;&amp;lt;          """Hide the traceback for everything above this method"""
               __traceback_hide__ = 'before_and_this'
               return func(**args)
           def _inspect_call(self, func):
&amp;gt;&amp;gt;  return func(**args)
Module ?:2 in read
Module ckan.lib.cache:167 in wrapper
&amp;lt;&amp;lt;      log = __import__("logging").getLogger("proxy_cache")
           def wrapper(func, *args, **kwargs):
               result = func(*args, **kwargs)
               pylons = get_pylons(args)
&amp;gt;&amp;gt;  result = func(*args, **kwargs)
Module ckan.controllers.package:208 in read
&amp;lt;&amp;lt;          #render the package
               PackageSaver().render_package(c.pkg)
               return render('package/read.html')
           def comments(self, id):
&amp;gt;&amp;gt;  return render('package/read.html')
Module ckan.lib.base:74 in render
&amp;lt;&amp;lt;
           return cached_template(template_name, render_template, cache_key=cache_key,
                                  cache_type=cache_type, cache_expire=cache_expire)
                                  #, ns_options=('method'), method=method)
&amp;gt;&amp;gt;  cache_type=cache_type, cache_expire=cache_expire)
Module pylons.templating:249 in cached_template
&amp;lt;&amp;lt;          return content
           else:
               return render_func()
&amp;gt;&amp;gt;  return render_func()
Module ckan.lib.base:63 in render_template
&amp;lt;&amp;lt;              stream = item.filter(stream)
               return literal(stream.render(method=method, encoding=None))
           if 'Pragma' in response.headers:
&amp;gt;&amp;gt;  return literal(stream.render(method=method, encoding=None))
Module genshi.core:183 in render
&amp;lt;&amp;lt;              method = self.serializer or 'xml'
               generator = self.serialize(method=method, **kwargs)
               return encode(generator, method=method, encoding=encoding, out=out)
           def select(self, path, namespaces=None, variables=None):
&amp;gt;&amp;gt;  return encode(generator, method=method, encoding=encoding, out=out)
Module genshi.output:57 in encode
&amp;lt;&amp;lt;          _encode = lambda string: string
           if out is None:
               return _encode(''.join(list(iterator)))
           for chunk in iterator:
               out.write(_encode(chunk))
&amp;gt;&amp;gt;  return _encode(''.join(list(iterator)))
Module genshi.output:339 in __call__
&amp;lt;&amp;lt;          for filter_ in self.filters:
                   stream = filter_(stream)
               for kind, data, pos in stream:
                   cached = cache_get((kind, data))
                   if cached is not None:
&amp;gt;&amp;gt;  for kind, data, pos in stream:
Module genshi.output:670 in __call__
&amp;lt;&amp;lt;          _gen_prefix = _gen_prefix().next
               for kind, data, pos in stream:
                   output = cache_get((kind, data))
                   if output is not None:
&amp;gt;&amp;gt;  for kind, data, pos in stream:
Module genshi.output:771 in __call__
&amp;lt;&amp;lt;          push_text = textbuf.append
               pop_text = textbuf.pop
               for kind, data, pos in chain(stream, [(None, None, None)]):
                   if kind is TEXT:
&amp;gt;&amp;gt;  for kind, data, pos in chain(stream, [(None, None, None)]):
Module genshi.output:586 in __call__
&amp;lt;&amp;lt;      def __call__(self, stream):
               prev = (None, None, None)
               for ev in stream:
                   if prev[0] is START:
                       if ev[0] is END:
&amp;gt;&amp;gt;  for ev in stream:
Module genshi.core:288 in _ensure
&amp;lt;&amp;lt;      # unchanged
           yield event
           for event in stream:
               yield event
&amp;gt;&amp;gt;  for event in stream:
Module genshi.template.base:618 in _include
&amp;lt;&amp;lt;                      tmpl = self.loader.load(href, relative_to=event[2][0],
                                                   cls=cls or self.__class__)
                           for event in tmpl.generate(ctxt, **vars):
                               yield event
                       except TemplateNotFound:
&amp;gt;&amp;gt;  for event in tmpl.generate(ctxt, **vars):
Module genshi.template.base:618 in _include
&amp;lt;&amp;lt;                      tmpl = self.loader.load(href, relative_to=event[2][0],
                                                   cls=cls or self.__class__)
                           for event in tmpl.generate(ctxt, **vars):
                               yield event
                       except TemplateNotFound:
&amp;gt;&amp;gt;  for event in tmpl.generate(ctxt, **vars):
Module genshi.template.base:618 in _include
&amp;lt;&amp;lt;                      tmpl = self.loader.load(href, relative_to=event[2][0],
                                                   cls=cls or self.__class__)
                           for event in tmpl.generate(ctxt, **vars):
                               yield event
                       except TemplateNotFound:
&amp;gt;&amp;gt;  for event in tmpl.generate(ctxt, **vars):
Module genshi.template.base:605 in _include
&amp;lt;&amp;lt;          from genshi.template.loader import TemplateNotFound
               for event in stream:
                   if event[0] is INCLUDE:
                       href, cls, fallback = event[1]
&amp;gt;&amp;gt;  for event in stream:
Module genshi.template.markup:378 in _match
&amp;lt;&amp;lt;                      for event in self._match(self._flatten(template, ctxt,
                                                                  **vars),
                                                    ctxt, start=idx + 1, **vars):
                               yield event
&amp;gt;&amp;gt;  ctxt, start=idx + 1, **vars):
Module genshi.template.markup:327 in _match
&amp;lt;&amp;lt;                      break
               for event in stream:
                   # We (currently) only care about start and end events for matching
&amp;gt;&amp;gt;  for event in stream:
Module genshi.template.base:565 in _flatten
&amp;lt;&amp;lt;                  elif kind is EXPR:
                           result = _eval_expr(data, ctxt, vars)
                           if result is not None:
                               # First check for a string, otherwise the iterable test
&amp;gt;&amp;gt;  result = _eval_expr(data, ctxt, vars)
Module genshi.template.base:277 in _eval_expr
&amp;lt;&amp;lt;      if vars:
               ctxt.push(vars)
           retval = expr.evaluate(ctxt)
           if vars:
               ctxt.pop()
&amp;gt;&amp;gt;  retval = expr.evaluate(ctxt)
Module genshi.template.eval:178 in evaluate
&amp;lt;&amp;lt;          __traceback_hide__ = 'before_and_this'
               _globals = self._globals(data)
               return eval(self.code, _globals, {'__data__': data})
&amp;gt;&amp;gt;  return eval(self.code, _globals, {'__data__': data})
Module ?:16 in &amp;lt;Expression u"h.subnav_link(c, h.icon('comments') + _('Comments &amp;amp; Questions'), controller='package', action='comments', id=c.pkg.name)"&amp;gt;
&amp;lt;&amp;lt;        &amp;lt;/li&amp;gt;
             &amp;lt;li py:if="g.has_commenting"&amp;gt;
                 ${h.subnav_link(c, h.icon('comments') + _('Comments &amp;amp;amp; Questions'), controller='package', action='comments', id=c.pkg.name)}
             &amp;lt;/li&amp;gt;
             &amp;lt;li&amp;gt;${h.subnav_link(c, h.icon('page_white_stack') + _('History'), controller='package', action='history', id=c.pkg.name)}&amp;lt;/li&amp;gt;
&amp;gt;&amp;gt;  ${h.subnav_link(c, h.icon('comments') + _('Comments &amp;amp;amp; Questions'), controller='package', action='comments', id=c.pkg.name)}
Module ckan.lib.helpers:126 in subnav_link
&amp;lt;&amp;lt;      return link_to(
               text,
               url_for(action=action, **kwargs),
               class_=('active' if c.action == action else '')
           )
&amp;gt;&amp;gt;  url_for(action=action, **kwargs),
Module routes.util:280 in url_for
&amp;lt;&amp;lt;          raise GenerationException(
                   "url_for could not generate URL. Called with args: %s %s" % \
                   (args, kargs))
           return url
&amp;gt;&amp;gt;  (args, kargs))
GenerationException: url_for could not generate URL. Called with args: () {'action': 'comments', 'controller': 'package', 'id': 'dengue-net'}
CGI Variables
AUTH_TYPE 	'cookie'
DOCUMENT_ROOT 	'/etc/apache2/htdocs'
GATEWAY_INTERFACE 	'CGI/1.1'
HTTP_ACCEPT 	'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'
HTTP_ACCEPT_CHARSET 	'ISO-8859-1,utf-8;q=0.7,*;q=0.7'
HTTP_ACCEPT_ENCODING 	'gzip, deflate'
HTTP_ACCEPT_LANGUAGE 	'pt-br,pt;q=0.8,en-us;q=0.5,en;q=0.3'
HTTP_CONNECTION 	'keep-alive'
HTTP_COOKIE 	'__utma=4669863.1260802706.1295364409.1306935693.1306960483.86; __utmz=4669863.1295364409.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); SESS61faf7f7d2406929b2f9eb4cbfff17d2=a3306f5d1194cf0d8a51dbf7b42c1259; ckan=d4951177ef995d92f0f987d481bd9180aa0f89e4518921db9cd9b6ac75fdd3fab4a25d06; auth_tkt="c6c3c3e0b3fe7bb765356659992760b24da43221flavio!userid_type:unicode"; auth_tkt="c6c3c3e0b3fe7bb765356659992760b24da43221flavio!userid_type:unicode"; ckan_user="flavio"; ckan_display_name="Fl\xc3\xa1vio Code\xc3\xa7o Coelho"; ckan_apikey="c139718d-918f-4a2b-b219-e33cb05cbe23"; __utmc=4669863'
HTTP_HOST 	'ckan.emap.fgv.br'
HTTP_KEEP_ALIVE 	'115'
HTTP_REFERER 	'http://ckan.emap.fgv.br/'
HTTP_USER_AGENT 	'Mozilla/5.0 (X11; Linux x86_64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1'
PATH_INFO 	'/package/dengue-net'
PATH_TRANSLATED 	'/home/flavio/var/srvc/ckan.emap.fgv.br/pyenv/bin/ckan.emap.fgv.br.py/package/dengue-net'
REMOTE_ADDR 	'10.250.48.110'
REMOTE_PORT 	'47624'
REMOTE_USER 	u'flavio'
REMOTE_USER_DATA 	'userid_type:unicode'
REMOTE_USER_TOKENS 	['']
REQUEST_METHOD 	'GET'
REQUEST_URI 	'/package/dengue-net'
SCRIPT_FILENAME 	'/home/flavio/var/srvc/ckan.emap.fgv.br/pyenv/bin/ckan.emap.fgv.br.py'
SERVER_ADDR 	'10.252.2.60'
SERVER_ADMIN 	'[no address given]'
SERVER_NAME 	'ckan.emap.fgv.br'
SERVER_PORT 	'80'
SERVER_PROTOCOL 	'HTTP/1.1'
SERVER_SIGNATURE 	'&amp;lt;address&amp;gt;Apache/2.2.16 (Debian) Server at ckan.emap.fgv.br Port 80&amp;lt;/address&amp;gt;\n'
SERVER_SOFTWARE 	'Apache/2.2.16 (Debian)'
WSGI Variables
application 	&amp;lt;beaker.middleware.CacheMiddleware object at 0x7f051c802690&amp;gt;
beaker.cache 	&amp;lt;beaker.cache.CacheManager object at 0x7f051c802750&amp;gt;
beaker.get_session 	&amp;lt;bound method SessionMiddleware._get_session of &amp;lt;beaker.middleware.SessionMiddleware object at 0x7f051c8026d0&amp;gt;&amp;gt;
beaker.session 	{'locale': u'pt_BR', '_accessed_time': 1307358102.6266389, '_creation_time': 1302605470.0245121}
mod_wsgi.application_group 	'dck093|'
mod_wsgi.callable_object 	'application'
mod_wsgi.handler_script 	''
mod_wsgi.input_chunked 	'0'
mod_wsgi.listener_host 	''
mod_wsgi.listener_port 	'80'
mod_wsgi.process_group 	'ckan'
mod_wsgi.request_handler 	'wsgi-script'
mod_wsgi.script_reloading 	'1'
mod_wsgi.version 	(3, 3)
paste.cookies 	(&amp;lt;SimpleCookie: SESS61faf7f7d2406929b2f9eb4cbfff17d2='a3306f5d1194cf0d8a51dbf7b42c1259' __utma='4669863.1260802706.1295364409.1306935693.1306960483.86' __utmc='4669863' __utmz='4669863.1295364409.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)' auth_tkt='c6c3c3e0b3fe7bb765356659992760b24da43221flavio!userid_type:unicode' ckan='d4951177ef995d92f0f987d481bd9180aa0f89e4518921db9cd9b6ac75fdd3fab4a25d06' ckan_apikey='c139718d-918f-4a2b-b219-e33cb05cbe23' ckan_display_name='Fl\xc3\xa1vio Code\xc3\xa7o Coelho' ckan_user='flavio'&amp;gt;, '__utma=4669863.1260802706.1295364409.1306935693.1306960483.86; __utmz=4669863.1295364409.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); SESS61faf7f7d2406929b2f9eb4cbfff17d2=a3306f5d1194cf0d8a51dbf7b42c1259; ckan=d4951177ef995d92f0f987d481bd9180aa0f89e4518921db9cd9b6ac75fdd3fab4a25d06; auth_tkt="c6c3c3e0b3fe7bb765356659992760b24da43221flavio!userid_type:unicode"; auth_tkt="c6c3c3e0b3fe7bb765356659992760b24da43221flavio!userid_type:unicode";... __utmc=4669863')
paste.registry 	&amp;lt;paste.registry.Registry object at 0x7f051d7e5710&amp;gt;
paste.throw_errors 	True
pylons.action_method 	&amp;lt;bound method PackageController.read of &amp;lt;ckan.controllers.package.PackageController object at 0x7f051d7e5b10&amp;gt;&amp;gt;
pylons.controller 	&amp;lt;ckan.controllers.package.PackageController object at 0x7f051d7e5b10&amp;gt;
pylons.environ_config 	{'session': 'beaker.session', 'cache': 'beaker.cache'}
pylons.pylons 	&amp;lt;pylons.util.PylonsContext object at 0x7f051d7e5a50&amp;gt;
pylons.routes_dict 	{'action': u'read', 'controller': u'package', 'id': u'dengue-net'}
repoze.who.identity 	&amp;lt;repoze.who identity (hidden, dict-like) at 139659946193344&amp;gt;
repoze.who.logger 	&amp;lt;logging.Logger instance at 0x7f051c801128&amp;gt;
repoze.who.plugins 	{'openid': &amp;lt;OpenIdIdentificationPlugin 139659931643152&amp;gt;, 'friendlyform': &amp;lt;FriendlyFormPlugin 139659929725584&amp;gt;, 'ckan.lib.authenticator:UsernamePasswordAuthenticator': &amp;lt;ckan.lib.authenticator.UsernamePasswordAuthenticator object at 0x7f051c9e7610&amp;gt;, 'auth_tkt': &amp;lt;AuthTktCookiePlugin 139659931643280&amp;gt;, 'ckan.lib.authenticator:OpenIDAuthenticator': &amp;lt;ckan.lib.authenticator.OpenIDAuthenticator object at 0x7f051c9dcfd0&amp;gt;}
routes.route 	&amp;lt;routes.route.Route object at 0x7f051c69fd50&amp;gt;
routes.url 	&amp;lt;routes.util.URLGenerator object at 0x7f051d7e57d0&amp;gt;
webob._parsed_cookies 	({'ckan': 'd4951177ef995d92f0f987d481bd9180aa0f89e4518921db9cd9b6ac75fdd3fab4a25d06', '__utmz': '4669863.1295364409.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'auth_tkt': 'c6c3c3e0b3fe7bb765356659992760b24da43221flavio!userid_type:unicode', 'ckan_display_name': 'Fl\xc3\xa1vio Code\xc3\xa7o Coelho', 'ckan_apikey': 'c139718d-918f-4a2b-b219-e33cb05cbe23', 'ckan_user': 'flavio', '__utma': '4669863.1260802706.1295364409.1306935693.1306960483.86', '__utmc': '4669863', 'SESS61faf7f7d2406929b2f9eb4cbfff17d2': 'a3306f5d1194cf0d8a51dbf7b42c1259'}, '__utma=4669863.1260802706.1295364409.1306935693.1306960483.86; __utmz=4669863.1295364409.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); SESS61faf7f7d2406929b2f9eb4cbfff17d2=a3306f5d1194cf0d8a51dbf7b42c1259; ckan=d4951177ef995d92f0f987d481bd9180aa0f89e4518921db9cd9b6ac75fdd3fab4a25d06; auth_tkt="c6c3c3e0b3fe7bb765356659992760b24da43221flavio!userid_type:unicode"&amp;lt; wbr&amp;gt;; auth_tkt="c6c3c3e0b3fe7bb765356659992760b24da43221flavio!... __utmc=4669863')
webob._parsed_query_vars 	(GET([]), '')
webob.adhoc_attrs 	{'language': 'en-us'}
wsgi process 	'Multi process AND threads (?)'
wsgi.file_wrapper 	&amp;lt;built-in method file_wrapper of mod_wsgi.Adapter object at 0x7f051cc1ad50&amp;gt;
wsgi.version 	(1, 1)
wsgiorg.routing_args 	(&amp;lt;routes.util.URLGenerator object at 0x7f051d7e57d0&amp;gt;, {'action': u'read', 'controller': u'package', 'id': u'dengue-net'})
&lt;/pre&gt;</description>
    <language>en-us</language>
    <image>
      <title>CKAN</title>
      <url>http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png</url>
      <link>http://localhost/ticket/1177</link>
    </image>
    <generator>Trac 0.12.3</generator>
    <item>
      
        <dc:creator>rgrp</dc:creator>

      <pubDate>Mon, 06 Jun 2011 11:44:03 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/1177#comment:1</link>
      <guid isPermaLink="false">http://localhost/ticket/1177#comment:1</guid>
      <description>
        &lt;p&gt;
What revision of the CKAN code are you using (do hg id to get revision if installing from source). Have you modified the package template in any way? Have you restarted apache after upgrading?
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Mon, 06 Jun 2011 11:49:57 GMT</pubDate>
      <title>description changed</title>
      <link>http://localhost/ticket/1177#comment:2</link>
      <guid isPermaLink="false">http://localhost/ticket/1177#comment:2</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;description&lt;/strong&gt;
              modified (&lt;a href="/ticket/1177?action=diff&amp;amp;version=2"&gt;diff&lt;/a&gt;)
            &lt;/li&gt;
          &lt;/ul&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>fccoelho</dc:creator>

      <pubDate>Mon, 06 Jun 2011 11:52:37 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/1177#comment:3</link>
      <guid isPermaLink="false">http://localhost/ticket/1177#comment:3</guid>
      <description>
        &lt;p&gt;
to upgrade I used the method describeb on bitbucket, after upgrading pip-requirements:
&lt;/p&gt;
&lt;p&gt;
pip -E pyenv install -r pip-requirements.txt
&lt;/p&gt;
&lt;p&gt;
after that I did a
&lt;/p&gt;
&lt;p&gt;
paster --plugin ckan db upgrade --config ckan.emap.fgv.br.ini
&lt;/p&gt;
&lt;p&gt;
the revision id on my pyenv/src/ckan is:
5730c79db461+ tip
&lt;/p&gt;
&lt;p&gt;
yes, I have restarted apached after upgrading
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>rgrp</dc:creator>

      <pubDate>Mon, 06 Jun 2011 13:04:56 GMT</pubDate>
      <title>status changed; resolution set</title>
      <link>http://localhost/ticket/1177#comment:4</link>
      <guid isPermaLink="false">http://localhost/ticket/1177#comment:4</guid>
      <description>
          &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;
                changed from &lt;em&gt;new&lt;/em&gt; to &lt;em&gt;closed&lt;/em&gt;
            &lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;resolution&lt;/strong&gt;
                set to &lt;em&gt;fixed&lt;/em&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;p&gt;
The issue here is that the line should never be reached because g.has_commenting should be False: &lt;a class="ext-link" href="https://bitbucket.org/okfn/ckan/src/5730c79db461/ckan/lib/app_globals.py"&gt;&lt;span class="icon"&gt;â€‹&lt;/span&gt;https://bitbucket.org/okfn/ckan/src/5730c79db461/ckan/lib/app_globals.py&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
@Flavio: have you modded your code in any way? is self.has_commenting False in your app_globals.py
&lt;/p&gt;
&lt;p&gt;
A quick fix would be to remove the template lines calling to remove the lines in the template:
&lt;/p&gt;
&lt;pre class="wiki"&gt;${h.subnav_link(c, h.icon('comments') + _('Comments &amp;amp;amp; Questions'), controller='package', action='comments', id=c.pkg.name)}
&lt;/pre&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>fccoelho</dc:creator>

      <pubDate>Mon, 06 Jun 2011 13:23:41 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/1177#comment:5</link>
      <guid isPermaLink="false">http://localhost/ticket/1177#comment:5</guid>
      <description>
        &lt;p&gt;
I have not modded the code in any way...
&lt;/p&gt;
&lt;p&gt;
I'll look for those lines in the template.which template is it? read.html does not have a line such as this.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>fccoelho</dc:creator>

      <pubDate>Mon, 06 Jun 2011 13:35:54 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/1177#comment:6</link>
      <guid isPermaLink="false">http://localhost/ticket/1177#comment:6</guid>
      <description>
        &lt;p&gt;
OK I did an fgrep on all package template and found the line on layout.html, I'll comment the block and test.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>fccoelho</dc:creator>

      <pubDate>Mon, 06 Jun 2011 13:45:23 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/1177#comment:7</link>
      <guid isPermaLink="false">http://localhost/ticket/1177#comment:7</guid>
      <description>
        &lt;p&gt;
Ok it fixed it!
&lt;/p&gt;
&lt;p&gt;
thanks a lot!!
&lt;/p&gt;
&lt;p&gt;
Is there any side effects to the removal of this line, I should know of?
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item><item>
      
        <dc:creator>dread</dc:creator>

      <pubDate>Mon, 06 Jun 2011 15:41:37 GMT</pubDate>
      <title></title>
      <link>http://localhost/ticket/1177#comment:8</link>
      <guid isPermaLink="false">http://localhost/ticket/1177#comment:8</guid>
      <description>
        &lt;p&gt;
I think rgrp was suggesting you have mistakenly set has_commenting to "True" in app_globals or elsewhere. But either way, this should have no side-effects.
&lt;/p&gt;
      </description>
      <category>Ticket</category>
    </item>
 </channel>
</rss>