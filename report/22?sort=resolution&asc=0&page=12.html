<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      {22} Trac tickets – CKAN
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">window.location.hash = window.location.hash;</script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="22%3Fsort=resolution&amp;asc=0&amp;format=rss" type="application/rss+xml" class="rss" title="RSS Feed" /><link rel="alternate" href="22%3Fsort=resolution&amp;asc=0&amp;format=csv" type="text/plain" title="Comma-delimited Text" /><link rel="alternate" href="22%3Fsort=resolution&amp;asc=0&amp;format=tab" type="text/plain" title="Tab-delimited Text" /><link rel="alternate" href="../report%3Fid=22&amp;format=sql" type="text/plain" title="SQL Query" />
        <link rel="up" href="../report.html" title="Available Reports" />
        <link rel="next" href="22%3Fsort=resolution&amp;asc=0&amp;page=13.html" title="Next Page" />
        <link rel="start" href="../wiki.1.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/report.css" type="text/css" />
        <link rel="prev" href="22%3Fsort=resolution&amp;asc=0&amp;page=11.html" title="Previous Page" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search CKAN" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://ckan.org/"><img src="http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png" alt="CKAN Trac" height="70" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../login.html">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li><a href="../about.html">About Trac</a></li><li class="last"><a href="../register.html">Register</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li><a href="../search.html">Search</a></li><li class="last"><a href="../wiki.1.html">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="../report.html">Available Reports</a></li><li class="last"><a href="../query.html">Custom Query</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="report">
      <h1>{22} Trac tickets
        <span class="numrows">(2647 matches)</span>
      </h1>
      <form method="get" action="22%3Fsort=resolution&amp;asc=0&amp;page=12.html">
        <div id="prefs">
          <div>
            <label>
              Max items per page
              <input type="text" name="max" size="10" value="100" />
            </label>
          </div>
          <div class="buttons">
            <input type="submit" value="Update" />
          </div>
        </div>
      </form>
      <div id="description">
        <p>
<a class="ext-link" href="https://github.com/roskakori/tratihubis/blob/master/query_tickets.sql"><span class="icon">​</span>https://github.com/roskakori/tratihubis/blob/master/query_tickets.sql</a>
</p>

      </div>
      <div class="buttons">
      </div>
      <h2 class="report-result">
        Results <span class="numresults">(1101 - 1200 of 2647)</span>
      </h2>
      <div class="paging">
    <span class="previous">
      <a href="22%3Fsort=resolution&amp;asc=0&amp;page=11.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=2.html" title="Page 2">2</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=3.html" title="Page 3">3</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=4.html" title="Page 4">4</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=5.html" title="Page 5">5</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=6.html" title="Page 6">6</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=7.html" title="Page 7">7</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=8.html" title="Page 8">8</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=9.html" title="Page 9">9</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=10.html" title="Page 10">10</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=11.html" title="Page 11">11</a>
      </span>
      <span>
        <span class="current">12</span>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=13.html" title="Page 13">13</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=14.html" title="Page 14">14</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=15.html" title="Page 15">15</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=16.html" title="Page 16">16</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=17.html" title="Page 17">17</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=18.html" title="Page 18">18</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=19.html" title="Page 19">19</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=20.html" title="Page 20">20</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=21.html" title="Page 21">21</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=22.html" title="Page 22">22</a>
      </span>
    <span class="next">
      <a href="22%3Fsort=resolution&amp;asc=0&amp;page=13.html" title="Next Page">→</a>
    </span>
</div>
      <table class="listing tickets">
          <thead>
        <tr class="trac-columns">
          <th>
            <a href="22%3Fsort=id&amp;asc=1&amp;page=12.html">
              Id
            </a>
          </th><th>
            <a href="22%3Fsort=type&amp;asc=1&amp;page=12.html">
              Type
            </a>
          </th><th>
            <a href="22%3Fsort=owner&amp;asc=1&amp;page=12.html">
              Owner
            </a>
          </th><th>
            <a href="22%3Fsort=reporter&amp;asc=1&amp;page=12.html">
              Reporter
            </a>
          </th><th>
            <a href="22%3Fsort=milestone&amp;asc=1&amp;page=12.html">
              Milestone
            </a>
          </th><th>
            <a href="22%3Fsort=status&amp;asc=1&amp;page=12.html">
              Status
            </a>
          </th><th class="desc">
            <a href="22%3Fsort=resolution&amp;asc=1&amp;page=12.html">
              Resolution
            </a>
          </th><th>
            <a href="22%3Fsort=summary&amp;asc=1&amp;page=12.html">
              Summary
            </a>
          </th><th>
            <a href="22%3Fsort=description&amp;asc=1&amp;page=12.html">
              Description
            </a>
          </th><th>
            <a href="22%3Fsort=PosixTime&amp;asc=1&amp;page=12.html">
              Posixtime
            </a>
          </th><th colspan="100">
            <a href="22%3Fsort=ModifiedTime&amp;asc=1&amp;page=12.html">
              Modifiedtime
            </a>
          </th>
        </tr>
          </thead>
          <tbody>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1199.html">#1199</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1199.html">Implement an email function for users.</a>
                          </td>
                          <td class="description">
                            <p>
We need an email function in CKAN to accept messages sent to users. The basic signature will be: 
</p>
<ul><li>mail_user(user_obj, subject, body, mime_type='text/plain', headers={})
</li></ul><p>
This has a number of use cases: 
</p>
<ul><li>Retrieval of lost passwords
</li><li>E-Mail confirmation 
</li></ul><p>
Finally, the mail function should be exposed in the API for sysadmin clients. This way we can have scripts traverse CKAN for 404s, invalid data or missing fields and ping users about that automatically (requires traversal by revision, not package, to get the associated users). 
</p>
<h2 id="Implementation">Implementation</h2>
<p>
Note we have already written code like this (*and* tested it) in isitopen:
</p>
<ul><li><a class="ext-link" href="https://bitbucket.org/okfn/isitopen/src/bb2cbd146fa5/isitopen/lib/mailer.py"><span class="icon">​</span>https://bitbucket.org/okfn/isitopen/src/bb2cbd146fa5/isitopen/lib/mailer.py</a>
</li><li><a class="ext-link" href="https://bitbucket.org/okfn/isitopen/src/bb2cbd146fa5/isitopen/tests/lib/test_mailer.py"><span class="icon">​</span>https://bitbucket.org/okfn/isitopen/src/bb2cbd146fa5/isitopen/tests/lib/test_mailer.py</a>
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1308821986000000
                          </td>
                          <td class="ModifiedTime">1310555589000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1205.html">#1205</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1205.html">db upgrade problem on cz.ckan.net</a>
                          </td>
                          <td class="description">
                            <p>
When upgrading database for cz.ckan.net (psql.okfn.org/cz.okfn.org) an error occurred (see below).
</p>
<p>
cz.ckan.net has been running on eu3 and this updrade was part of moving it to eu19, with a more recent version of ckan.
</p>
<p>
In the meantime I've reverted the db to the old version (pre-upgrade). 
</p>
<p>
cz.ckan.net is not working properly until this is fixed.
</p>
<pre class="wiki">okfn@eu19:~$ paster --plugin ckan db upgrade --config=/etc/ckan/cz/cz.ini
/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/url.py:105: SADeprecationWarning: The SQLAlchemy PostgreSQL dialect has been renamed from 'postgres' to 'postgresql'. The new URL format is postgresql[+driver]://&lt;user&gt;:&lt;pass&gt;@&lt;host&gt;/&lt;dbname&gt;
  module = __import__('sqlalchemy.dialects.%s' % (dialect, )).dialects
2011-06-29 09:07:41,294 INFO  [migrate.versioning.api] 28 -&gt; 29... 
/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/reflection.py:46: SAWarning: Skipped unsupported reflection of expression-based index idx_pkg_lname
  ret = fn(self, con, *args, **kw)
/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/reflection.py:46: SAWarning: Skipped unsupported reflection of expression-based index idx_pkg_slname
  ret = fn(self, con, *args, **kw)
/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/reflection.py:46: SAWarning: Skipped unsupported reflection of expression-based index idx_pkg_suname
  ret = fn(self, con, *args, **kw)
/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/reflection.py:46: SAWarning: Skipped unsupported reflection of expression-based index idx_pkg_uname
  ret = fn(self, con, *args, **kw)
Traceback (most recent call last):
  File "/usr/bin/paster", line 18, in &lt;module&gt;
    command.run()
  File "/usr/lib/pymodules/python2.6/paste/script/command.py", line 84, in run
    invoke(command, command_name, options, args[1:])
  File "/usr/lib/pymodules/python2.6/paste/script/command.py", line 123, in invoke
    exit_code = runner.run(args)
  File "/usr/lib/pymodules/python2.6/paste/script/command.py", line 218, in run
    result = self.command()
  File "/usr/lib/pymodules/python2.6/ckan/lib/cli.py", line 84, in command
    model.repo.upgrade_db()
  File "/usr/lib/pymodules/python2.6/ckan/model/__init__.py", line 163, in upgrade_db
    mig.upgrade(self.metadata.bind, self.migrate_repository, version=version)
  File "/usr/lib/pymodules/python2.6/ckan_deps/migrate/versioning/api.py", line 185, in upgrade
    return _migrate(url, repository, version, upgrade=True, err=err, **opts)
  File "&lt;string&gt;", line 2, in _migrate
  File "/usr/lib/pymodules/python2.6/ckan_deps/migrate/versioning/util/__init__.py", line 160, in with_engine
    return f(*a, **kw)
  File "/usr/lib/pymodules/python2.6/ckan_deps/migrate/versioning/api.py", line 364, in _migrate
    schema.runchange(ver, change, changeset.step)
  File "/usr/lib/pymodules/python2.6/ckan_deps/migrate/versioning/schema.py", line 83, in runchange
    change.run(self.engine, step)
  File "/usr/lib/pymodules/python2.6/ckan_deps/migrate/versioning/script/py.py", line 140, in run
    script_func(engine)
  File "/usr/lib/pymodules/python2.6/ckan/migration/versions/029_version_groups.py", line 152, in upgrade
    migrate_engine.execute(q)
  File "/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/base.py", line 1788, in execute
    return connection.execute(statement, *multiparams, **params)
  File "/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/base.py", line 1191, in execute
    params)
  File "/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/base.py", line 1271, in _execute_clauseelement
    return self.__execute_context(context)
  File "/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/base.py", line 1302, in __execute_context
    context.parameters[0], context=context)
  File "/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/base.py", line 1401, in _cursor_execute
    context)
  File "/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/base.py", line 1394, in _cursor_execute
    context)
  File "/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/default.py", line 299, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (IntegrityError) insert or update on table "package_group_revision" violates foreign key constraint "package_group_revision_continuity_id_fkey"
DETAIL:  Key (continuity_id)=(7f373978-40a0-4848-bdc9-018ad213aa0b) is not present in table "package_group".
 'INSERT INTO package_group_revision (id, package_id, group_id, state, revision_id, continuity_id) VALUES (%(id)s, %(package_id)s, %(group_id)s, %(state)s, %(revision_id)s, %(continuity_id)s)' {'state': u'active', 'package_id': u'14d76e9e-028c-49c1-955b-ef30d4abb970', 'continuity_id': u'7f373978-40a0-4848-bdc9-018ad213aa0b', 'revision_id': u'24a11f58-2ff9-46f3-b113-0bf7f0baf254', 'group_id': u'4b832199-b8e3-4989-9b5d-de8dd6322612', 'id': u'7a3863bd-3054-40c8-bb3d-68b73096c108'}
</pre>
                            
                          </td>
                          <td class="PosixTime">1309339700000000
                          </td>
                          <td class="ModifiedTime">1310568631000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1206.html">#1206</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">wwaites
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1206.html">"Content-Type json" header scuppers package POST</a>
                          </td>
                          <td class="description">
                            <p>
Compare these two requests to create a package:
</p>
<pre class="wiki">curl http://test.ckan.net/api/rest/package -d '{name:"test"}' -H 'Content-Type: application/json' -H 'X-CKAN-API-KEY: tester'
curl http://test.ckan.net/api/rest/package -d '{name:"test"}' -H 'X-CKAN-API-KEY: tester'
</pre><p>
The second one gets the payload through (ckan log):
</p>
<pre class="wiki">Retrieving request params: UnicodeMultiDict([('{name:"test"}', u'')])
</pre><p>
But the first one causes a <a class="missing wiki">ServerError?</a> because the payload (name:&#34;test&#34;) doesn't make it to request.POST or request.params:
</p>
<pre class="wiki">Retrieving request params: UnicodeMultiDict([])
</pre><p>
The only difference is the "<a class="missing wiki">ContentType?</a>: application/json" header, which seems a reasonable thing to include. Javascript lib backbone.js (for example) inserts this automatically.
</p>
<p>
So why does this header cause the payload to not get through to the request object?
</p>

                            
                          </td>
                          <td class="PosixTime">1309344348000000
                          </td>
                          <td class="ModifiedTime">1309450216000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1207.html">#1207</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1207.html">ckanclient.package_entity_get should raise more specific exception</a>
                          </td>
                          <td class="description">
                            <p>
When package does not exist in ckan catalogue, ckanclient.package_entity_get should raise more specific exception, such as <a class="missing wiki">CkanNotFoundError?</a> instead of generic <a class="missing wiki">CkanApiError?</a>.
</p>

                            
                          </td>
                          <td class="PosixTime">1309515582000000
                          </td>
                          <td class="ModifiedTime">1311325343000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1208.html">#1208</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1208.html">Webstore: a datastore with web API</a>
                          </td>
                          <td class="description">
                            <ul><li>SQLite based
</li><li>Use Cyclone for async http server on top with auth
</li><li>Designed to not be specific to CKAN or anything else
</li></ul><p>
Current code is here: <a class="ext-link" href="https://github.com/okfn/webstore"><span class="icon">​</span>https://github.com/okfn/webstore</a>.
</p>
<h2 id="APISpec">API Spec</h2>
<h4 id="Read">Read</h4>
<p>
Two basic ways to query::
</p>
<pre class="wiki">    GET: /{owner}/{db-name}/?sql=...
    GET: /{owner}/{db-name}/?table=...&amp;attr=value&amp;attr=value&amp;limit=...
</pre><p>
Returns::
</p>
<pre class="wiki">  {
      u'keys': [u'id', u'name'],
      u'data': [
          [1, u'jones'],
          [u'aaa', u'jones']
          ]
  }
</pre><h4 id="Write">Write</h4>
<p>
POST to::
</p>
<blockquote>
<p>
/{owner/{database}/{table}
</p>
</blockquote>
<p>
Payload is json data structured as follows::
</p>
<blockquote>
<p>
{
</p>
<blockquote>
<p>
unique_keys: [list of key attributes]
data: {dict of values}
</p>
</blockquote>
<p>
}
</p>
</blockquote>
<h3 id="AuthenticationandAuthorization">Authentication and Authorization</h3>
<p>
Authentication: use basic auth header.
</p>
<p>
Authorization:
</p>
<ul><li>Default: all read, owner can write
</li><li>Restricted: owner can read and write, everyone can do nothing
</li></ul><p>
Possible future: config file can specify a python method (TODO: method
signature)
</p>
<h3 id="IntegrationwithOtherSystems">Integration with Other Systems</h3>
<p>
TODO: Specify how to delegate authenatication to user database in some other system.
</p>

                            
                          </td>
                          <td class="PosixTime">1309804460000000
                          </td>
                          <td class="ModifiedTime">1312191646000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1209.html">#1209</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1209.html">sort out rendering of formalchemy package preview</a>
                          </td>
                          <td class="description">
                            <p>
Got broken due to the moderated edits changes <a class="closed ticket" href="../ticket/1141.html" title="CREP: [super] Moderated Edits User Interface (closed: fixed)">#1141</a>.
</p>
<p>
Need to make sure preview works.
</p>

                            
                          </td>
                          <td class="PosixTime">1309817240000000
                          </td>
                          <td class="ModifiedTime">1310571715000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1210.html">#1210</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5-sprint-4.html">ckan-v1.5-sprint-4</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1210.html">POST application/json error handling with newer WebOb</a>
                          </td>
                          <td class="description">
                            <p>
<a class="missing wiki">WebOb?</a> from v1.0.7 has some interesting new behaviour with reading request data for different Content-Types:
</p>
<ul><li>It seems that looking at request.body mangles request.POST. See fix in ckan cset:e83bad9caa1b (problem with <a class="missing wiki">WebOb?</a> v1.0.7 but may go back to v1.0.4?)
</li></ul><ul><li>A particular request caused an <a class="missing wiki">AssertionError?</a> during looking at request.body, so we need to enclose this in a try/except. I couldn't recreate it in a test unfortunately (problem with <a class="missing wiki">WebOb?</a> v1.0.7 but may go back to v1.0.2?)
</li></ul><p>
Example:
</p>
<pre class="wiki">Module ckan.controllers.api:206 in create
&lt;&lt;          log.debug('create: %s' % (context))
               try:
                   request_data = self._get_request_data()
               except ValueError, inst:
                   response.status_int = 400
&gt;&gt;  request_data = self._get_request_data()
Module ckan.lib.base:149 in _get_request_data
&lt;&lt;          cls.log.debug('Retrieving request params: %r' % request.params)
               cls.log.debug('Retrieving request POST: %r' % request.POST)
               cls.log.debug('Retrieving request POST body: %r' % request.body)
               if request.POST:
                   try:
&gt;&gt;  cls.log.debug('Retrieving request POST body: %r' % request.body)
Module paste.registry:137 in __getattr__
&lt;&lt;      
           def __getattr__(self, attr):
               return getattr(self._current_obj(), attr)
           
           def __setattr__(self, attr, value):
&gt;&gt;  return getattr(self._current_obj(), attr)
Module webob.request:470 in _body__get
&lt;&lt;          Return the content of the request body.
               """
               self.make_body_seekable() # we need this to have content_length
               r = self.body_file.read(self.content_length)
               self.body_file.seek(0)
&gt;&gt;  self.make_body_seekable() # we need this to have content_length
Module webob.request:697 in make_body_seekable
&lt;&lt;              self.body_file_raw.seek(0)
               else:
                   self.copy_body()
&gt;&gt;  self.copy_body()
Module webob.request:714 in copy_body
&lt;&lt;                  self.body = self.body_file_raw.read(length)
               elif self.is_body_readable:
                   self.body = self.body_file_raw.read()
                   self._copy_body_tempfile()
               else:
&gt;&gt;  self.body = self.body_file_raw.read()
Module webob.request:1190 in read
&lt;&lt;      def read(self, size=-1):
               body = self._get_body()
               if size &lt; 0:
                   v = body[self.position:]
&gt;&gt;  body = self._get_body()
Module webob.request:1207 in _get_body
&lt;&lt;                  self._body = _encode_multipart(self.vars, self.content_type)
                   else:
                       assert 0, ('Bad content type: %r' % self.content_type)
               return self._body
&gt;&gt;  assert 0, ('Bad content type: %r' % self.content_type)
AssertionError: Bad content type: '; charset=utf-8'
</pre>
                            
                          </td>
                          <td class="PosixTime">1309949451000000
                          </td>
                          <td class="ModifiedTime">1309974781000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1211.html">#1211</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1211.html">[super] Drupal integration</a>
                          </td>
                          <td class="description">
                            <p>
Sub-tasks / tickets:
</p>
<ul><li><a class="closed ticket" href="../ticket/1335.html" title="enhancement: Action API - basic (closed: fixed)">#1335</a> Action API - access to any logic layer function
</li><li>Standardize logic functions on ordering: (context, data_dict) and put parameters into data_dict.
</li><li>Add package_create_validate &amp; package_update_validate logic functions
</li><li>Allow extensions to provide logic layer functions (IActions)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1309958442000000
                          </td>
                          <td class="ModifiedTime">1315948703000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1215.html">#1215</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1215.html">Edit Resources table - removing all rows prevents adding them again</a>
                          </td>
                          <td class="description">
                            <p>
I'm not sure if this was reported earlier, but I have found a minor bug in the "Add new package" form. As far as I can see this bug exists in v1.3.2 and also in v1.4.1a (that runs on ckan.net). This is a problem with adding new resources in "Resources" section. To reproduce the bug do the following:
</p>
<ol><li>Go to "Add new package", for instance <a class="ext-link" href="http://ckan.net/package/new"><span class="icon">​</span>http://ckan.net/package/new</a>
</li><li>Scroll down to "Resources" section.
</li><li>Click on "Remove this row" link (red circle).
</li><li>Say "Yes" to "Are you sure you wish to remove this row?"
</li><li>Now there should be no rows. Only the header "URL*   Format  Description"
</li><li>Click on "Add row to table"
</li><li>All you get now is another row with table header "URL*        Format Description". You will not be able to add any resources now. Solution is to reload the page.
</li></ol><p>
The simplest solution to this bug will be to hide the "Remove this
row" link if there is only one row.
</p>

                            
                          </td>
                          <td class="PosixTime">1310133224000000
                          </td>
                          <td class="ModifiedTime">1310385485000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1218.html">#1218</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">minspamboks@…
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1218.html">Colour the History tab icon</a>
                          </td>
                          <td class="description">
                            <p>
Change the color of the "History" tab icon to yellowish, like the rest of the icons in the other tabs ("View" and "Edit", "Authorization").
</p>
<h2 id="Reasoning">Reasoning</h2>
<p>
When you view a data package, for instance
<a class="ext-link" href="http://ckan.net/package/thesaurus-w"><span class="icon">​</span>http://ckan.net/package/thesaurus-w</a>, you will see "View", "Edit",
"History" tabs on the top. "History" tab has a black-and-white icon
which makes it look like an inactive/disabled tab (since the text is
also grayed out when the tab is not selected). This is not a major
issue, but it is a little bit confusing for the users. This icon
exists in v1.3.2 and also in v1.4.1a (that runs on ckan.net).
</p>
<p>
The simple solution would be to change the color of the "History" tab icon and give it the same yellowish color like the rest of the icons in the other tabs (e.g. "View" and "Edit").
</p>

                            
                          </td>
                          <td class="PosixTime">1310375768000000
                          </td>
                          <td class="ModifiedTime">1310389390000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1219.html">#1219</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">timmcnamara
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1219.html">CSS issues on IE7</a>
                          </td>
                          <td class="description">
                            <p>
As reported on <a class="ext-link" href="http://lists.okfn.org/pipermail/ckan-dev/2011-July/001043.html"><span class="icon">​</span>ckan-dev</a>:
</p>
<blockquote class="citation">
<p>
items in the footer of CKAN ("Packages", "Groups &amp; Tags", "About", "Language", etc.) are shown vertically instead of horizontally in IE7. This works fine in later browsers like IE8, IE9, FF4, and latest Opera and Chrome.
</p>
</blockquote>
<blockquote class="citation">
<p>
This seems to exist in all recent CKAN versions up to 1.4.1a.
</p>
</blockquote>

                            
                          </td>
                          <td class="PosixTime">1310423688000000
                          </td>
                          <td class="ModifiedTime">1310740534000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1221.html">#1221</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1221.html">Password reset tidy up</a>
                          </td>
                          <td class="description">
                            <ul><li>No tests.
</li><li>500 error given when user is not found.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1310475661000000
                          </td>
                          <td class="ModifiedTime">1310556607000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1222.html">#1222</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1222.html">Mailer has no tests</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1310479136000000
                          </td>
                          <td class="ModifiedTime">1310556618000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1223.html">#1223</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1223.html">Caching of static files</a>
                          </td>
                          <td class="description">
                            <p>
StaticURLParser can have caching - use it
</p>

                            
                          </td>
                          <td class="PosixTime">1310573854000000
                          </td>
                          <td class="ModifiedTime">1310573893000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1225.html">#1225</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1225.html">Tool for mass tag changes</a>
                          </td>
                          <td class="description">
                            <p>
Using ckanapi
</p>

                            
                          </td>
                          <td class="PosixTime">1310642161000000
                          </td>
                          <td class="ModifiedTime">1310642407000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1228.html">#1228</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1228.html">Display OpenID login errors</a>
                          </td>
                          <td class="description">
                            <p>
When there are errors when logging into OpenID, these don't get displayed. You just get the login screen again.
</p>

                            
                          </td>
                          <td class="PosixTime">1311086562000000
                          </td>
                          <td class="ModifiedTime">1311325161000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1229.html">#1229</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">thejimmyg
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-24.html">ckan-sprint-2011-10-24</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1229.html">Refactor all database code out of the controllers and into the logic layer</a>
                          </td>
                          <td class="description">
                            <p>
Progress can be tracked in this document:
</p>
<p>
<a class="ext-link" href="https://spreadsheets.google.com/spreadsheet/ccc?key=0Atp3cZFjuIOAdFQzRnVoUHV6ckoyblI5TUdEcnJLVlE&amp;hl=en_US#gid=0"><span class="icon">​</span>https://spreadsheets.google.com/spreadsheet/ccc?key=0Atp3cZFjuIOAdFQzRnVoUHV6ckoyblI5TUdEcnJLVlE&amp;hl=en_US#gid=0</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1311093924000000
                          </td>
                          <td class="ModifiedTime">1319645778000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1230.html">#1230</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1230.html">Make sure plugins tables work in tests.</a>
                          </td>
                          <td class="description">
                            <p>
Dgu tests failed as harvesting table are not created at the correct point.
</p>

                            
                          </td>
                          <td class="PosixTime">1311100811000000
                          </td>
                          <td class="ModifiedTime">1311154142000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1234.html">#1234</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1234.html">Setting locale error conditions handled badly</a>
                          </td>
                          <td class="description">
                            <p>
Needs tests for error conditions for bad locale and redirect parameters.
</p>

                            
                          </td>
                          <td class="PosixTime">1311179871000000
                          </td>
                          <td class="ModifiedTime">1311183328000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1236.html">#1236</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-11-07.html">ckan-sprint-2011-11-07</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1236.html">View a package at a given revision</a>
                          </td>
                          <td class="description">
                            <p>
As a user I want to view a package at a given revision:
</p>
<ul><li>When I visit /package/osm@yyyy-mm-dd or /package/osm@rrrrrrr I should be shown package at date yyyy-mm-dd or revision rrrrrrr.
</li><li>viewing this page, it should say it is the old revision, just like wikipedia
</li><li>package history page should provide links to these pages
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1311269333000000
                          </td>
                          <td class="ModifiedTime">1330019788000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1239.html">#1239</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1239.html">Remove and re-add tag on package not working</a>
                          </td>
                          <td class="description">
                            <p>
See reports on list at:
</p>
<ul><li><a class="ext-link" href="http://lists.okfn.org/pipermail/ckan-dev/2011-July/001103.html"><span class="icon">​</span>http://lists.okfn.org/pipermail/ckan-dev/2011-July/001103.html</a>
</li><li><a class="ext-link" href="http://lists.okfn.org/pipermail/ckan-dev/2011-July/001107.html"><span class="icon">​</span>http://lists.okfn.org/pipermail/ckan-dev/2011-July/001107.html</a>
</li></ul><p>
Tracked this to issue in dictization/model_save whereby was ignoring case where Package Tag already there but in deleted state. Rather than describe at length see fix.
</p>

                            
                          </td>
                          <td class="PosixTime">1311441020000000
                          </td>
                          <td class="ModifiedTime">1312453156000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1242.html">#1242</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">timmcnamara
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1242.html">thedatahub.org's login page</a>
                          </td>
                          <td class="description">
                            <p>
The right hand side of <a class="ext-link" href="http://thedatahub.org/user/login"><span class="icon">​</span>thedatahub.org login screen</a> is a little confusing: 
</p>
<pre class="wiki">    Not a member?

    Join CKAN to contribute packages under your own name.

     - Register
     - Reset your password
     - Privacy Policy
</pre><p>
Suggested improvements to make:
</p>
<ul><li>replace CKAN with thedatahub.org
</li><li>in general, edit the copy to be more inviting
</li><li>remove "Reset your password" from that bubble
</li><li>move the privacy policy link to somewhere less prominent 
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1311569218000000
                          </td>
                          <td class="ModifiedTime">1323173292000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1245.html">#1245</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1245.html">Reorganise ckan.org pages</a>
                          </td>
                          <td class="description">
                            <p>
Here is Rufus' plan for ckan.org reorganisation from <a class="ext-link" href="http://ckan.okfnpad.org/documentation"><span class="icon">​</span>http://ckan.okfnpad.org/documentation</a> (22/7/11) (ticket made by dread):
</p>
<pre class="wiki">/solutions
  /overview &lt;--- current 'about' page (the software)
  /customers &lt;-- say "in addition to our clients..."
  /features &lt;-- needs most work (pictures etc)
/pricing/  &lt;-- simplest thing possible ... talk with Ira (cover pricing and support)
/developers &lt;--- links to http://docs.ckan.org/, getting the software, the wiki, the mailing list /contact
/blog
</pre><p>
Tasks: 
</p>
<ul><li>add tagline in header - "the data portal software"
</li><li>make and add glossy PDF
</li><li>change "data hub" to "data portal" passim (if only using one  term)
</li><li>add info@… 
</li><li>image banner on home page - redo screenshots without menus
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1311861708000000
                          </td>
                          <td class="ModifiedTime">1317422640000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1246.html">#1246</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">adrian.pohl@…
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1246.html">Search results on ckan.net are mistakenly all 'open'</a>
                          </td>
                          <td class="description">
                            <p>
All package search results on ckan.net are labelled as 'open' even when their license is closed or unknown: <a class="ext-link" href="http://ckan.net/package"><span class="icon">​</span>http://ckan.net/package</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1311863353000000
                          </td>
                          <td class="ModifiedTime">1311892816000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1247.html">#1247</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1247.html">Put docs on ReadTheDocs</a>
                          </td>
                          <td class="description">
                            <p>
Put docs on <a class="missing wiki">ReadTheDocs?</a> instead of eu13.
</p>

                            
                          </td>
                          <td class="PosixTime">1311941948000000
                          </td>
                          <td class="ModifiedTime">1311955185000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1248.html">#1248</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-11-07.html">ckan-sprint-2011-11-07</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1248.html">License exception</a>
                          </td>
                          <td class="description">
                            <p>
Exception received on test.ckan.net at 10.12 on 29/7/11
</p>
<pre class="wiki">http://test.ckan.net/package?__cache=2759373&amp;page=4
Module pylons.controllers.core:60 in _perform_call
&lt;&lt;          """Hide the traceback for everything above this method"""
               __traceback_hide__ = 'before_and_this'
               return func(**args)
           
           def _inspect_call(self, func):
&gt;&gt;  return func(**args)
Module ckan.controllers.package:153 in search
&lt;&lt;                          }
       
                   query = get.package_search(context,data_dict)
       
                   c.page = h.Page(
&gt;&gt;  query = get.package_search(context,data_dict)
Module ckan.logic.action.get:514 in package_search
&lt;&lt;      for package in query.results:
               result_dict = table_dictize(package, context)
               result_dict = _extend_package_dict(result_dict,context)
       
               results.append(result_dict)
&gt;&gt;  result_dict = _extend_package_dict(result_dict,context)
Module ckan.logic.action.get:537 in _extend_package_dict
&lt;&lt;      license_id = package_dict['license_id']
           if license_id:
               isopen = model.Package.get_license_register()[license_id].isopen()
               package_dict['isopen'] = isopen
           else:
&gt;&gt;  isopen = model.Package.get_license_register()[license_id].isopen()
Module ckan.model.license:59 in __getitem__
&lt;&lt;              return default
               else:
                   raise KeyError, "License not found: %s" % key
       
           def get(self, key, default=None):
&gt;&gt;  raise KeyError, "License not found: %s" % key
KeyError: u'License not found: None'
</pre><p>
and a similar one: 
</p>
<pre class="wiki"> http://test.ckan.net/tag/barbecue
Module pylons.wsgiapp:324 in dispatch
&lt;&lt;          if log_debug:
                   log.debug("Calling controller class with WSGI interface")
               return controller(environ, start_response)
           
           def load_test_env(self, environ):
&gt;&gt;  return controller(environ, start_response)
Module ckan.lib.base:118 in __call__
&lt;&lt;          # available in environ['pylons.routes_dict']    
               try:
                   return WSGIController.__call__(self, environ, start_response)
               finally:
                   model.Session.remove()
&gt;&gt;  return WSGIController.__call__(self, environ, start_response)
Module pylons.controllers.core:221 in __call__
&lt;&lt;                  return response(environ, self.start_response)
               
               response = self._dispatch_call()
               if not start_response_called:
                   self.start_response = start_response
&gt;&gt;  response = self._dispatch_call()
Module pylons.controllers.core:172 in _dispatch_call
&lt;&lt;              req.environ['pylons.action_method'] = func
                   
                   response = self._inspect_call(func)
               else:
                   if log_debug:
&gt;&gt;  response = self._inspect_call(func)
Module pylons.controllers.core:107 in _inspect_call
&lt;&lt;                        func.__name__, args)
               try:
                   result = self._perform_call(func, args)
               except HTTPException, httpe:
                   if log_debug:
&gt;&gt;  result = self._perform_call(func, args)
Module pylons.controllers.core:60 in _perform_call
&lt;&lt;          """Hide the traceback for everything above this method"""
               __traceback_hide__ = 'before_and_this'
               return func(**args)
           
           def _inspect_call(self, func):
&gt;&gt;  return func(**args)
Module ckan.controllers.tag:2 in read
Module ckan.lib.cache:167 in wrapper
&lt;&lt;      log = __import__("logging").getLogger("proxy_cache")
           def wrapper(func, *args, **kwargs):
               result = func(*args, **kwargs)
       
               pylons = get_pylons(args)
&gt;&gt;  result = func(*args, **kwargs)
Module ckan.controllers.tag:64 in read
&lt;&lt;          data_dict = {'id':id}
               try:
                   c.tag = get.tag_show(context,data_dict)
               except NotFound:
                   abort(404, _('Tag not found'))
&gt;&gt;  c.tag = get.tag_show(context,data_dict)
Module ckan.logic.action.get:341 in tag_show
&lt;&lt;      extended_packages = []
           for package in tag_dict['packages']:
               extended_packages.append(_extend_package_dict(package,context))
       
           tag_dict['packages'] = extended_packages
&gt;&gt;  extended_packages.append(_extend_package_dict(package,context))
Module ckan.logic.action.get:537 in _extend_package_dict
&lt;&lt;      license_id = package_dict['license_id']
           if license_id:
               isopen = model.Package.get_license_register()[license_id].isopen()
               package_dict['isopen'] = isopen
           else:
&gt;&gt;  isopen = model.Package.get_license_register()[license_id].isopen()
Module ckan.model.license:59 in __getitem__
&lt;&lt;              return default
               else:
                   raise KeyError, "License not found: %s" % key
       
           def get(self, key, default=None):
&gt;&gt;  raise KeyError, "License not found: %s" % key
KeyError: u'License not found: CreativeCommonsAttributionCCBY25'
</pre>
                            
                          </td>
                          <td class="PosixTime">1311954136000000
                          </td>
                          <td class="ModifiedTime">1319797763000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1249.html">#1249</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1249.html">Exclude script tag from extraction for i18n</a>
                          </td>
                          <td class="description">
                            <p>
Currently have this script section put in for i18n. It shouldn't be. 
</p>
<pre class="wiki">&lt;script type="text/javascript"&gt;
//&lt;![CDATA[
(function($){
    $.fn.ajaxCreateSlug = function(name, url) {
        var title = this;
        var updater = {
            init: function(title, name) {
                // Add a new element where the validity of the package name can be displayed
                this.name_field = name;
                this.title_field = title;
                this.name_field.parent().append('&lt;div id="package_name_valid_msg"&gt;&lt;/div&gt;');
                this.title_field.blur(this.title_change_handler())
                this.title_field.keyup(this.title_change_handler())
                this.name_field.keyup(this.name_change_handler());
                this.name_field.blur(this.name_blur_handler());
                this.url = url;
            },
....
</pre>
                            
                          </td>
                          <td class="PosixTime">1311958536000000
                          </td>
                          <td class="ModifiedTime">1311959356000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1250.html">#1250</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1250.html">Search results should be sorted by score rather than alphabetical</a>
                          </td>
                          <td class="description">
                            <p>
At the moment we sort search results alphabetically. While this is useful for doing 'browse' case where no search bad for all other cases.
</p>
<p>
Adopt default sort order of 'score' though may wish to keep alphabetical for no search term (i.e. wildcard).
</p>
<p>
Options:
</p>
<ul><li>Default this in solr (no need to touch code) but fragile and affects everything ...
</li><li>Do it in code and default to score
</li><li>Do it in code and have alphabetical (on name or title?) when no criteria otherwise score
</li></ul><p>
Aside: may also wish to support search in query api but that is for later!
</p>

                            
                          </td>
                          <td class="PosixTime">1311964752000000
                          </td>
                          <td class="ModifiedTime">1312370201000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1251.html">#1251</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1251.html">Rename wiki.ckan.net to wiki.ckan.org</a>
                          </td>
                          <td class="description">
                            <p>
Inline with general naming policy going forward.
</p>

                            
                          </td>
                          <td class="PosixTime">1311965147000000
                          </td>
                          <td class="ModifiedTime">1317315159000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1252.html">#1252</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1252.html">Deprecate ckan.net in favour of thedatahub.org</a>
                          </td>
                          <td class="description">
                            <p>
Deprecate ckan.net in favour of thedatahub.org
</p>
<ul><li>Announce
</li><li>Create thedatahub.org and have it run same data as ckan.net
</li><li>Announce closing down of ckan.net with 302
</li><li>Implement 302 permanent
</li></ul><p>
Also redirect wiki.ckan.net to wiki.ckan.org
</p>

                            
                          </td>
                          <td class="PosixTime">1311965339000000
                          </td>
                          <td class="ModifiedTime">1318160334000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1253.html">#1253</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1253.html">Authz refactor</a>
                          </td>
                          <td class="description">
                            <p>
We agreed on a system that allows overriding the authz checks at a logic function level (e.g. package_create, user_show) and supports the old (current) authz system.
</p>

                            
                          </td>
                          <td class="PosixTime">1312199491000000
                          </td>
                          <td class="ModifiedTime">1313401367000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1254.html">#1254</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1254.html">Feature sheet</a>
                          </td>
                          <td class="description">
                            <p>
Compose a feature list for CKAN. Use the existing Feature Matrix. Basic explanation of terms. For use by customers.
</p>

                            
                          </td>
                          <td class="PosixTime">1312211925000000
                          </td>
                          <td class="ModifiedTime">1313401629000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1256.html">#1256</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1256.html">fix modification extension for moderation</a>
                          </td>
                          <td class="description">
                            <p>
Solr is not working for moderation, pending changes are not being indexed.
</p>

                            
                          </td>
                          <td class="PosixTime">1312280026000000
                          </td>
                          <td class="ModifiedTime">1319812556000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1258.html">#1258</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1258.html">Bring purge revision into ckan repo from vdm</a>
                          </td>
                          <td class="description">
                            <p>
In order to make purge revision work correctly with the moderated edits we need to modify purge revision in vdm.  This is best modified in ckan so we will override the vdm one in the reposotory.
</p>

                            
                          </td>
                          <td class="PosixTime">1312289539000000
                          </td>
                          <td class="ModifiedTime">1319812452000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1263.html">#1263</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1263.html">Bad name for logic action in API causes Exception</a>
                          </td>
                          <td class="description">
                            <p>
A bad action name:
e.g.
curl <a class="ext-link" href="http://test.ckan.net/api/action/user_showaa"><span class="icon">​</span>http://test.ckan.net/api/action/user_showaa</a> -d '{}'
causes 500 response.
</p>
<p>
Occurs only on 1.4.3 beta.
</p>

                            
                          </td>
                          <td class="PosixTime">1312479020000000
                          </td>
                          <td class="ModifiedTime">1314029279000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1264.html">#1264</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">zephod
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-10.html">ckan-sprint-2011-10-10</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1264.html">Merge ckanext-admin into core</a>
                          </td>
                          <td class="description">
                            <p>
This extension should be in core now -- functionality is basic and very useful.
</p>
<p>
Copy across from here: <a class="ext-link" href="http://bitbucket.org/okfn/ckanext-admin"><span class="icon">​</span>http://bitbucket.org/okfn/ckanext-admin</a>
</p>
<p>
Suggest this no longer even be an extension.
</p>

                            
                          </td>
                          <td class="PosixTime">1312480783000000
                          </td>
                          <td class="ModifiedTime">1318245716000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1265.html">#1265</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1265.html">user/edit error conditions cause exceptions</a>
                          </td>
                          <td class="description">
                            <p>
We get exceptions on these occasions:
</p>
<ul><li>user/edit if not logged in
</li><li>user/edit/bob if bob is not a known user
</li></ul><p>
These are a problem only on 1.4.3b.
</p>
<p>
Introduced in <a class="closed ticket" href="../ticket/1229.html" title="enhancement: Refactor all database code out of the controllers and into the logic layer (closed: fixed)">#1229</a> - merge of branch feature-1229-db-out-of-controllers
</p>

                            
                          </td>
                          <td class="PosixTime">1312565788000000
                          </td>
                          <td class="ModifiedTime">1312566052000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1266.html">#1266</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1266.html">Timestamps without microseconds causing exception</a>
                          </td>
                          <td class="description">
                            <p>
I'm not sure why some timestamps are missing microseconds in the ckan.net data, but plenty seem to. This causes this exception when viewing the package rss feed:
</p>
<pre class="wiki">URL: http://ckan.net/package/history/sfk_publishing?format=atom&amp;days=7
In Module ckan.lib.helpers:227 in date_str_to_datetime
WebApp Error: &lt;type 'exceptions.ValueError'&gt;: time data '2008-04-13T20:40:20' does not match format '%Y-%m-%dT%H:%M:%S.%f'
</pre><p>
Only seen with ckan 1.4.3b
</p>

                            
                          </td>
                          <td class="PosixTime">1312794831000000
                          </td>
                          <td class="ModifiedTime">1312797477000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1267.html">#1267</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1267.html">Random exception: cannot set the body to a unicode value</a>
                          </td>
                          <td class="description">
                            <p>
Occasionally see this problem when producing an error page. Here's an example
</p>
<pre class="wiki">WebApp Error: &lt;type 'exceptions.TypeError'&gt;: You cannot set the body to a unicode value without a charset
URL: http://at.ckan.net/authorizationgroup/new
Module weberror.errormiddleware:162 in __call__
&lt;&lt;              __traceback_supplement__ = Supplement, self, environ
                   sr_checker = ResponseStartChecker(start_response)
                   app_iter = self.application(environ, sr_checker)
                   return self.make_catching_iter(app_iter, environ, sr_checker)
               except:
&gt;&gt;  app_iter = self.application(environ, sr_checker)
Module beaker.middleware:73 in __call__
&lt;&lt;                                                     self.cache_manager)
               environ[self.environ_key] = self.cache_manager
               return self.app(environ, start_response)
&gt;&gt;  return self.app(environ, start_response)
Module beaker.middleware:152 in __call__
&lt;&lt;                          headers.append(('Set-cookie', cookie))
                   return start_response(status, headers, exc_info)
               return self.wrap_app(environ, session_start_response)
           
           def _get_session(self):
&gt;&gt;  return self.wrap_app(environ, session_start_response)
Module routes.middleware:130 in __call__
&lt;&lt;                  environ['SCRIPT_NAME'] = environ['SCRIPT_NAME'][:-1]
               
               response = self.app(environ, start_response)
               
               # Wrapped in try as in rare cases the attribute will be gone already
&gt;&gt;  response = self.app(environ, start_response)
Module pylons.wsgiapp:125 in __call__
&lt;&lt;          
               controller = self.resolve(environ, start_response)
               response = self.dispatch(controller, environ, start_response)
               
               if 'paste.testing_variables' in environ and hasattr(response,
&gt;&gt;  response = self.dispatch(controller, environ, start_response)
Module pylons.wsgiapp:324 in dispatch
&lt;&lt;          if log_debug:
                   log.debug("Calling controller class with WSGI interface")
               return controller(environ, start_response)
           
           def load_test_env(self, environ):
&gt;&gt;  return controller(environ, start_response)
Module ckan.lib.base:117 in __call__
&lt;&lt;          # available in environ['pylons.routes_dict']    
               try:
                   return WSGIController.__call__(self, environ, start_response)
               finally:
                   model.Session.remove()
&gt;&gt;  return WSGIController.__call__(self, environ, start_response)
Module pylons.controllers.core:284 in __call__
&lt;&lt;              if log_debug:
                       log.debug("Calling Response object to return WSGI data")
                   return response(environ, self.start_response)
               
               if log_debug:
&gt;&gt;  return response(environ, self.start_response)
Module webob.exc:248 in __call__
&lt;&lt;              return []
               if not self.body and not self.empty_body:
                   return self.generate_response(environ, start_response)
               return Response.__call__(self, environ, start_response)
&gt;&gt;  return self.generate_response(environ, start_response)
Module webob.exc:239 in generate_response
&lt;&lt;              status=self.status,
                   headerlist=headerlist,
                   content_type=content_type
               )
               return resp(environ, start_response)
&gt;&gt;  content_type=content_type
Module webob.response:94 in __init__
&lt;&lt;                  if charset is None:
                           raise TypeError(
                               "You cannot set the body to a unicode value without a charset")
                       body = body.encode(charset)
                   self._body = body
&gt;&gt;  "You cannot set the body to a unicode value without a charset")
TypeError: You cannot set the body to a unicode value without a charset
</pre>
                            
                          </td>
                          <td class="PosixTime">1312889084000000
                          </td>
                          <td class="ModifiedTime">1312897724000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1268.html">#1268</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-10.html">ckan-sprint-2011-10-10</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1268.html">Speed up listing users by revisions by adding db index</a>
                          </td>
                          <td class="description">
                            <p>
At the moment this appears to be slow (kindly suggests because missing index in db). Page is /user on a ckan instance.
</p>
<p>
Would this also speed up user page where we recent changes?
</p>

                            
                          </td>
                          <td class="PosixTime">1312906592000000
                          </td>
                          <td class="ModifiedTime">1318279592000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1270.html">#1270</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1270.html">Default site www.ckan.net is a redirect and loses POSTs</a>
                          </td>
                          <td class="description">
                            <p>
The default site was www.ckan.net, which had an Apache 301 redirect to ckan.net, but the problem was urllib was not rePOSTing stuff. This affected search parameters:
</p>
<pre class="wiki">In [1]: import ckanclient

In [2]: c = ckanclient.CkanClient()

In [3]: c2 = ckanclient.CkanClient('http://ckan.net/api')

In [4]: c.package_search('', search_options={'groups':'openspending'})
Out[4]: 
{u'count': 2102,
 u'results': &lt;generator object _result_generator at 0x10168b1e0&gt;}

In [5]: c2.package_search('', search_options={'groups':'openspending'})
Out[5]: {u'count': 29, u'results': &lt;generator object _result_generator at 0x10168b410&gt;}
</pre><p>
Thanks to borior for finding this and raising it.
</p>

                            
                          </td>
                          <td class="PosixTime">1312911847000000
                          </td>
                          <td class="ModifiedTime">1312912188000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1271.html">#1271</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1271.html">CORS support</a>
                          </td>
                          <td class="description">
                            <p>
CORS - <a class="ext-link" href="http://www.w3.org/TR/cors/"><span class="icon">​</span>http://www.w3.org/TR/cors/</a> - support.
</p>
<p>
This is what you do in Apache. Should do this in lib/base.py or similar.
</p>
<pre class="wiki">    Header always set Access-Control-Allow-Origin "*"
    Header always set Access-Control-Allow-Methods "POST, PUT, GET, OPTIONS"
    Header always set Access-Control-Allow-Headers "X-CKAN-API-KEY, Content-Type"

    # Respond to all OPTIONS requests with 200 OK
    # This could be done in the webapp
    # This is need for pre-flighted requests (POSTs/PUTs)
    RewriteEngine On
    RewriteCond %{REQUEST_METHOD} OPTIONS
    RewriteRule ^(.*)$ $1 [R=200,L]
</pre>
                            
                          </td>
                          <td class="PosixTime">1313241839000000
                          </td>
                          <td class="ModifiedTime">1313753663000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1272.html">#1272</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-10.html">ckan-sprint-2011-10-10</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1272.html">Store spatial extents provided in the package form</a>
                          </td>
                          <td class="description">
                            <p>
Consolidate the extra <tt>spatial</tt> as the field for providing information about the geographic extent of the package. This will integrate automatically with the spatial search and give developers a single point to develop geospatial features.
</p>

                            
                          </td>
                          <td class="PosixTime">1313411787000000
                          </td>
                          <td class="ModifiedTime">1317381996000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1274.html">#1274</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">johnglover
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1274.html">Testing solr search</a>
                          </td>
                          <td class="description">
                            <p>
Copy ckan core postgres package search tests to the ckanext-solr extension and update them so that they use the solr search backend.
</p>

                            
                          </td>
                          <td class="PosixTime">1313413202000000
                          </td>
                          <td class="ModifiedTime">1313429049000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1275.html">#1275</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">johnglover
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-09-26.html">ckan-sprint-2011-09-26</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1275.html">Move solr search extension to ckan core</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1313413597000000
                          </td>
                          <td class="ModifiedTime">1319812967000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1276.html">#1276</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">johnglover
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-09-12.html">ckan-sprint-2011-09-12</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1276.html">Apply weighting to search fields in solr</a>
                          </td>
                          <td class="description">
                            <p>
For example:
</p>
<ul><li>name and title should have a higher weight than the notes field
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1313414353000000
                          </td>
                          <td class="ModifiedTime">1315948394000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1277.html">#1277</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">johnglover
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-09-12.html">ckan-sprint-2011-09-12</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1277.html">Use solr query parser for search instead of ckan query parser</a>
                          </td>
                          <td class="description">
                            <p>
See <a class="ext-link" href="http://ckan.okfnpad.org/search"><span class="icon">​</span>http://ckan.okfnpad.org/search</a> for details/discussion
</p>

                            
                          </td>
                          <td class="PosixTime">1313414446000000
                          </td>
                          <td class="ModifiedTime">1315948417000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1280.html">#1280</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1280.html">fix sqlalchemy so that it works with postgres 9.0</a>
                          </td>
                          <td class="description">
                            <p>
After the ckan migrate process, sqlalcehmy reflect does not work and causes an error when reflecting indexes.  A bug report needs to be put into sqlalchemy.
</p>

                            
                          </td>
                          <td class="PosixTime">1313513090000000
                          </td>
                          <td class="ModifiedTime">1328786670000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1281.html">#1281</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1281.html">Locale change flash message in wrong language</a>
                          </td>
                          <td class="description">
                            <p>
When you change the locale, it displays a flash message "Language has been set to: English" in the original language, not the one we have just changed to.
</p>

                            
                          </td>
                          <td class="PosixTime">1314021656000000
                          </td>
                          <td class="ModifiedTime">1314021919000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1282.html">#1282</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1282.html">JS and WUI tidy up</a>
                          </td>
                          <td class="description">
                            <p>
Consolidate js. Remove cruft.
</p>
<ul><li>Move stuff to vendor
<ul><li>Have all vendor libs local (?)                                             
</li><li>jquery, jquery-ui etc
</li></ul></li><li>Consolidate autocomplete to use jquery-ui
<ul><li>package autocomplete (groups)
</li><li>tag autocomplete (package)
</li><li>user autocomplete (authz group create)
<ul><li>turns out that authz group edit had autocomplete disabled so refactoring meant enabling ...
</li></ul></li></ul></li><li>Move forms.css into main  
</li><li>Remove tag cloud from front page (can be example going forward)
</li><li>Remove bookmarklet (since in wiki at: <a class="ext-link" href="http://wiki.ckan.net/Managing_Data_Packages#How_Do_I_Install_the_CKAN_Bookmarklet.3F"><span class="icon">​</span>http://wiki.ckan.net/Managing_Data_Packages#How_Do_I_Install_the_CKAN_Bookmarklet.3F</a>)
</li><li>Move name slug generation into standard js and clean up
</li></ul><p>
Possible:
</p>
<ol><li>JS unit tests for the given pages ...
</li><li>Option to use external site to serve js and css (e.g. CDN)
</li></ol><p>
                                                       
</p>

                            
                          </td>
                          <td class="PosixTime">1314090389000000
                          </td>
                          <td class="ModifiedTime">1314404540000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1283.html">#1283</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1283.html">Deleted packages shouldn't be searchable or browsable</a>
                          </td>
                          <td class="description">
                            <p>
A package in deleted state doesn't show to general users, but admins DO see them. The idea is that they can resurrect them if they want. But now we have the trash can that lists deleted packages. So we don't want admins to see the deleted packages anywhere else. 
</p>
<p>
(But an admin should still be able to READ and EDIT a deleted package, so if he clicks on it in the trash list he can see it to decide whether to resurrect and actually be able to change its state.)
</p>
<p>
Same in the Web interface and API.
</p>
<p>
This ticket ties in with <a class="assigned ticket" href="../ticket/948.html" title="enhancement: Highlight (to a sysadmin) which packages are deleted (assigned)">#948</a> highlighting a package being deleted (when viewing or editing) and follows on from the introduction of the trash can <a class="closed ticket" href="../ticket/1076.html" title="enhancement: Improve revision and package purge system (closed: fixed)">#1076</a>.
</p>

                            
                          </td>
                          <td class="PosixTime">1314112481000000
                          </td>
                          <td class="ModifiedTime">1330083933000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1284.html">#1284</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1284.html">Lots of revisions being created on datahub.org</a>
                          </td>
                          <td class="description">
                            <p>
Revisions aren't assigned to packages. Where are they coming from? This seems to have been occurring since the upgrade to 1.4.3b a couple of weeks ago?
</p>

                            
                          </td>
                          <td class="PosixTime">1314113015000000
                          </td>
                          <td class="ModifiedTime">1315215626000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1290.html">#1290</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1290.html">Better error when blank database</a>
                          </td>
                          <td class="description">
                            <p>
When installing CKAN, when doing "paster serve development.ini", lots of users encounter the error for every request: 
</p>
<pre class="wiki">ProgrammingError: (ProgrammingError) relation "user" does not exist
</pre><p>
This is because the database tables have not been created - they have forgotten or missed the "paster db init" step.
</p>
<p>
Can we provide a better error to say that the database is not initialised yet?
</p>
<h2 id="Implementationoptions">Implementation options</h2>
<ol><li>At the start of every request we reflect the database tables and check they are there. This is rather expensive!
</li></ol><ol start="2"><li>Uncached requests to the home page start with a cheap database query. If there is an exception then return this error about database setup. I really like Drupal's page for this that has in large letters that the site is currently off-line. Below a line, in small letters, there are developer suggestions on what is wrong and where to look to fix it.
</li></ol>
                            
                          </td>
                          <td class="PosixTime">1314264255000000
                          </td>
                          <td class="ModifiedTime">1314270894000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1291.html">#1291</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-09-12.html">ckan-sprint-2011-09-12</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1291.html">Add activity and activity detail tables.</a>
                          </td>
                          <td class="description">
                            <p>
Add tables described in <a class="ext-link" href="http://ckan.okfnpad.org/notifications"><span class="icon">​</span>http://ckan.okfnpad.org/notifications</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1314267572000000
                          </td>
                          <td class="ModifiedTime">1315950394000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1292.html">#1292</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-11-07.html">ckan-sprint-2011-11-07</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1292.html">Internationalization improvements</a>
                          </td>
                          <td class="description">
                            <ul><li>Review process of releases and updating strings (pot) and translations (po) files
<ul><li>c.f. <a class="ext-link" href="http://lists.okfn.org/pipermail/ckan-dev/2011-May/000718.html"><span class="icon">​</span>http://lists.okfn.org/pipermail/ckan-dev/2011-May/000718.html</a>
</li></ul></li><li>Get language changing thing to get home page to mostly work - push to key strings translated (or don't advertise the translation?)
</li><li>Review long list of strings for improvement
<ul><li>Consolidate any?
</li><li>Get rid of i18n for strings in api
</li><li>Try and remove javascript
</li><li>Add in extensions
</li></ul></li><li><a class="closed ticket" href="../ticket/1374.html" title="defect: Can't switch to English if default is non-English (closed: fixed)">#1374</a> Fix switching to en from other default language
</li><li><a class="closed ticket" href="../ticket/1417.html" title="defect: Browser language detection doesn't work (closed: fixed)">#1417</a> Fix browser language detection
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1314303314000000
                          </td>
                          <td class="ModifiedTime">1320145732000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1293.html">#1293</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">zephod
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-09-12.html">ckan-sprint-2011-09-12</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1293.html">Rename Package to Dataset throughout WUI, API</a>
                          </td>
                          <td class="description">
                            <h2 id="Changes">Changes</h2>
<ul><li>All templates
</li><li>[DONE] Routing: /package/ -&gt; /dataset/ (including API)
</li><li>[DONE] Tests: self.app.get('/dataset/...') rather than package ...
<ul><li>One test to check redirect works?
</li></ul></li><li>Docs
</li></ul><h2 id="Leave">Leave</h2>
<ul><li>Stay with Package in code e.g. stay with '<a class="missing wiki">PackageController?</a>'
<ul><li>also leave stuff like pkg = .... (gradual migration)
</li></ul></li><li>Leave extensions
</li></ul><h2 id="Notes">Notes</h2>
<ul><li>Package -&gt; Dataset
</li><li>Data Package -&gt; Dataset
</li><li>respect capitalization
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1314405700000000
                          </td>
                          <td class="ModifiedTime">1317649968000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1294.html">#1294</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1294.html">[super] Package creation and editing UX improvements</a>
                          </td>
                          <td class="description">
                            <p>
Largely an integration of work from ckanjs
</p>
<ul><li><a class="closed ticket" href="../ticket/1295.html" title="enhancement: Simplify package create form (closed: fixed)">#1295</a> Simplify package create form
</li><li>Improvements to edit form
<ul><li>Split edit form into sections
</li><li>Remove preview from edit form (introduce inline preview on description/notes field)
</li></ul></li><li><a class="closed ticket" href="../ticket/1296.html" title="enhancement: Improved resource adding/editing on dataset/page page (closed: fixed)">#1296</a> Improved resource adding/editing on dataset/page page
</li><li><a class="closed ticket" href="../ticket/878.html" title="enhancement: Integrate file upload with workflow around package resources (closed: fixed)">#878</a> File upload integrated into resource creation
</li><li><a class="closed ticket" href="../ticket/1297.html" title="enhancement: In-place preview of edited description markdown on edit dataset form (closed: fixed)">#1297</a> In-place editing of notes field for existing packages
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1314405811000000
                          </td>
                          <td class="ModifiedTime">1315948257000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1295.html">#1295</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-09-12.html">ckan-sprint-2011-09-12</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1295.html">Simplify package create form</a>
                          </td>
                          <td class="description">
                            <p>
Sub ticket of <a class="closed ticket" href="../ticket/1294.html" title="enhancement: [super] Package creation and editing UX improvements (closed: fixed)">#1294</a>
</p>
<ul><li>Initial screen just title, name, description (notes), license (and tags?).
</li><li>State that you can add data and more information on next screen. This takes you to Package 'view' where you can then do more stuff.
<ul><li>Flash some instructions? e.g. that resources are missing?
</li></ul></li><li>Name slug should by default look uneditable (cf wordpress way to do the slug)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1314406014000000
                          </td>
                          <td class="ModifiedTime">1315948009000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1296.html">#1296</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">zephod
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-09-12.html">ckan-sprint-2011-09-12</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1296.html">Improved resource adding/editing on dataset/page page</a>
                          </td>
                          <td class="description">
                            <p>
Subticket of <a class="closed ticket" href="../ticket/1294.html" title="enhancement: [super] Package creation and editing UX improvements (closed: fixed)">#1294</a>.
</p>
<ul><li>Nice way to edit all resource attributes
</li><li>Nice way to add new resources
<ul><li>Including file upload (cf <a class="closed ticket" href="../ticket/878.html" title="enhancement: Integrate file upload with workflow around package resources (closed: fixed)">#878</a>).
<ul><li>Cf work in ckanjs (this can be a straight integration).
</li></ul></li></ul></li></ul>
                            
                          </td>
                          <td class="PosixTime">1314406093000000
                          </td>
                          <td class="ModifiedTime">1315948224000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1297.html">#1297</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">zephod
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-09-12.html">ckan-sprint-2011-09-12</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1297.html">In-place preview of edited description markdown on edit dataset form</a>
                          </td>
                          <td class="description">
                            <p>
Subticket of <a class="closed ticket" href="../ticket/1294.html" title="enhancement: [super] Package creation and editing UX improvements (closed: fixed)">#1294</a>.
</p>
<p>
Can integrate from working system on ckanjs.
</p>

                            
                          </td>
                          <td class="PosixTime">1314406183000000
                          </td>
                          <td class="ModifiedTime">1317649974000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1298.html">#1298</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-01-09.html">ckan-sprint-2012-01-09</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1298.html">Generate activites to be put into activities table.</a>
                          </td>
                          <td class="description">
                            <p>
This should be done from the logic layer or automatically from a session extension.
</p>

                            
                          </td>
                          <td class="PosixTime">1314696442000000
                          </td>
                          <td class="ModifiedTime">1325591582000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1299.html">#1299</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">seanh
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-01-23.html">ckan-sprint-2012-01-23</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1299.html">Activity streams table migration</a>
                          </td>
                          <td class="description">
                            <p>
Migrate tables for activity streams
</p>

                            
                          </td>
                          <td class="PosixTime">1314696635000000
                          </td>
                          <td class="ModifiedTime">1327322739000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1300.html">#1300</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-11-07.html">ckan-sprint-2011-11-07</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1300.html">Core changes to base theme</a>
                          </td>
                          <td class="description">
                            <p>
Core changes to theme in order to make it easier to re-theme:
</p>
<ul><li>page_heading
</li><li>side bar menu must be switchable (left to right) (through config or css)
</li><li>Add optional_footer to complement optional_head
<ul><li>And adopt rule for template writers that all extra js must go in optional footer
</li><li>That way we could move optional js to the bottom of the page to improve page load times.
</li></ul></li><li>Re-add support for body-class ... (seems to be removed by <a class="closed ticket" href="../ticket/1108.html" title="enhancement: Create a more modern theme for CKAN (closed: fixed)">#1108</a>)
</li><li>more divs.
</li><li>better labelling for css (and javascript)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1314862223000000
                          </td>
                          <td class="ModifiedTime">1319794520000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1301.html">#1301</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-09-12.html">ckan-sprint-2011-09-12</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1301.html">Give access to extensions from the old formalchemy controllers</a>
                          </td>
                          <td class="description">
                            <p>
This was removed during the auth refactoring, but it's needed in the old controllers
</p>

                            
                          </td>
                          <td class="PosixTime">1314882888000000
                          </td>
                          <td class="ModifiedTime">1314893744000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1302.html">#1302</a>
                          </td>
                          <td class="type">refactor
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">johnglover
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-09-26.html">ckan-sprint-2011-09-26</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1302.html">Move Resource and Tag search code to logic layer</a>
                          </td>
                          <td class="description">
                            <p>
Resource and Tag search is currently still using the old ckan query parser which is unnecessary. Refactor this out and move to the logic layer.
</p>

                            
                          </td>
                          <td class="PosixTime">1314886102000000
                          </td>
                          <td class="ModifiedTime">1317131948000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1303.html">#1303</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-09-12.html">ckan-sprint-2011-09-12</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1303.html">User can not login again if he has edited his profile</a>
                          </td>
                          <td class="description">
                            <p>
Only happens if the user does not update the password.
Most probably introduced during <a class="closed ticket" href="../ticket/1229.html" title="enhancement: Refactor all database code out of the controllers and into the logic layer (closed: fixed)">#1229</a>.
</p>

                            
                          </td>
                          <td class="PosixTime">1314889472000000
                          </td>
                          <td class="ModifiedTime">1314978842000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1304.html">#1304</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-09-12.html">ckan-sprint-2011-09-12</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1304.html">Show more descriptive error messages when sending emails</a>
                          </td>
                          <td class="description">
                            <p>
Sending emails is failing in some cases, and the error message just says 'Could not send reset link'.
</p>

                            
                          </td>
                          <td class="PosixTime">1314893206000000
                          </td>
                          <td class="ModifiedTime">1314893749000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1305.html">#1305</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">nils.toedtmann
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1305.html">SMTP config for thedatahub.org and IATI</a>
                          </td>
                          <td class="description">
                            <p>
The email sending functionality (e.g for password reset) does not work on thedatahub.org and IATI (and probably some other instances) when using an address which is not a okfn.org one.
</p>
<p>
Could not send reset link:
SMTPRecipientsRefused({u'amercadero@…': (550, 'relay not
permitted')},)
</p>
<p>
As I said, adria.mercader@… works fine.
The SMTP server used mail.okfn.org
</p>

                            
                          </td>
                          <td class="PosixTime">1314956657000000
                          </td>
                          <td class="ModifiedTime">1315317033000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1307.html">#1307</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">zephod
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-09-12.html">ckan-sprint-2011-09-12</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1307.html">Implement captcha for signup</a>
                          </td>
                          <td class="description">
                            <ul><li>Major issue with spam signup on thedatahub.org
</li><li>Suggest using recaptcha
</li></ul><p>
Est cost: 1d
</p>

                            
                          </td>
                          <td class="PosixTime">1315153860000000
                          </td>
                          <td class="ModifiedTime">1317649963000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1308.html">#1308</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">shevski
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1308.html">'create package' user case failure</a>
                          </td>
                          <td class="description">
                            <p>
On the CKAN home page there is no suggestion that you can add or register a dataset. The 'Register a dataset' option has been removed at some point! (only visible to users that have registered - why would they do that when the benefits aren't described?)
</p>

                            
                          </td>
                          <td class="PosixTime">1315219500000000
                          </td>
                          <td class="ModifiedTime">1323174312000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1310.html">#1310</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-09-12.html">ckan-sprint-2011-09-12</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1310.html">API GET of a revision that has been approved causes exception</a>
                          </td>
                          <td class="description">
                            <p>
e.g. this particular revision on ckan.net: <a class="ext-link" href="http://ckan.net/api/rest/revision/9601fbcb-03a7-4ebc-981d-5aa16df4852c"><span class="icon">​</span>http://ckan.net/api/rest/revision/9601fbcb-03a7-4ebc-981d-5aa16df4852c</a>
(most others have not been approved)
Causes 500 error.
</p>

                            
                          </td>
                          <td class="PosixTime">1315234899000000
                          </td>
                          <td class="ModifiedTime">1315820419000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1315.html">#1315</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-11-07.html">ckan-sprint-2011-11-07</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1315.html">Document /api/action</a>
                          </td>
                          <td class="description">
                            <p>
We need some documentation for the /api/action. Even though it's beta and subject to change it would be good to have a guide.
</p>

                            
                          </td>
                          <td class="PosixTime">1315396722000000
                          </td>
                          <td class="ModifiedTime">1320173768000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1316.html">#1316</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1316.html">/api/action uncaught exception if missing necessary parameter</a>
                          </td>
                          <td class="description">
                            <pre class="wiki">curl http://ckan.net/api/action/package_show -d '{"name": "uk-quango-data"}'
</pre><p>
This gives 500 error due to <a class="missing wiki">KeyError?</a> (it looked for the 'id' param), rather than 400.
</p>

                            
                          </td>
                          <td class="PosixTime">1315397224000000
                          </td>
                          <td class="ModifiedTime">1338193724000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1318.html">#1318</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1318.html">'Register user' doesn't log you in</a>
                          </td>
                          <td class="description">
                            <p>
When you register a user, it doesn't seem to be logged in properly straight away. Top-right it invites you to "log in" and "register". Also the "create package" menu option doesn't appear. Going to /user/me sends you to login page. If you then login, then all these things are corrected.
</p>

                            
                          </td>
                          <td class="PosixTime">1315415783000000
                          </td>
                          <td class="ModifiedTime">1315569362000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1319.html">#1319</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-24.html">ckan-sprint-2011-10-24</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1319.html">Require an email address on User registration</a>
                          </td>
                          <td class="description">
                            <p>
Superticket: <a class="new ticket" href="../ticket/1343.html" title="enhancement: [super] User related improvements (login, user pages etc) (new)">#1343</a>
</p>
<p>
This avoids difficulties when they forget their password.
</p>
<ul><li>(?) Email validation (navl does not have one!)
</li><li>Require email confirmation to be activated (?) (Answer: no, not at present -- see discussion below)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1315415932000000
                          </td>
                          <td class="ModifiedTime">1324036947000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1320.html">#1320</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">zephod
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-10.html">ckan-sprint-2011-10-10</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1320.html">Extend basic markdown to support normal http / https links</a>
                          </td>
                          <td class="description">
                            <p>
It is very annoying that you have to wrap links in &lt;...&gt; and most people don't bother. Extend h.markdown in code and markdown in js to fix this.
</p>
<p>
(We should also support 'package' links etc in javascript?)
</p>
<p>
*ADDITIONAL*
</p>
<ul><li>Note that CKAN flavoured markdown will not currently recognise dataset:my_data links (still uses package).
</li><li>Move the markdown api to /util/markdown
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1315422000000000
                          </td>
                          <td class="ModifiedTime">1318164603000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1321.html">#1321</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-24.html">ckan-sprint-2011-10-24</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1321.html">Flash message deferred</a>
                          </td>
                          <td class="description">
                            <p>
When you reset a password, the flash message saying "check your email" sometimes doesn't display on the next page. You then click on the link in your email and it displays on that page (i.e. too late).
</p>
<p>
Seen this on thedatahub.org. To do with the proxy caching?
</p>

                            
                          </td>
                          <td class="PosixTime">1315474657000000
                          </td>
                          <td class="ModifiedTime">1319814460000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1323.html">#1323</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1323.html">GET /authorizationgroup causes Exception when logged in</a>
                          </td>
                          <td class="description">
                            <p>
on thedatahub.org
</p>

                            
                          </td>
                          <td class="PosixTime">1315475685000000
                          </td>
                          <td class="ModifiedTime">1315594333000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1324.html">#1324</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-09-12.html">ckan-sprint-2011-09-12</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1324.html">Add extra fields to resource table</a>
                          </td>
                          <td class="description">
                            <p>
add extra fields to resource as outlined in
</p>
<p>
<a class="ext-link" href="http://wiki.ckan.net/Domain_Model/Resource"><span class="icon">​</span>http://wiki.ckan.net/Domain_Model/Resource</a>
</p>
<p>
Specifically (all unicode strings except for those noted):
</p>
<ul><li><em>name</em>: a name for this resource (could be used in a ckan url)
</li><li><em>type</em>: the type of the resource. One of: file | api | service | listing
</li><li><em>mimetype</em>: standard mimetype (e.g. for zipped csv would be application/zip)
</li><li><em>mimetype_inner</em>: mimetype of innermost object (so for example would be text/csv)
</li><li><em>size</em>: [integer] size of the resource (content length) in bytes. Usually only relevant for resources of type file.
</li><li><em>last_modified</em>: [datetime] the date when this resource's data was last modified (NB: <em>not</em> the date when the metadata was modified).
</li><li>cache_url: url for cache of object in ckan storage
</li><li>cache_last_updated: [datetime] timestamp when cached version was created
</li><li>webstore_url: 
</li><li>webstore_last_updated: [datetime] timestamp when webstore was last updated
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1315578976000000
                          </td>
                          <td class="ModifiedTime">1315948336000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1325.html">#1325</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-09-12.html">ckan-sprint-2011-09-12</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1325.html">python 2.5 incompatibilities</a>
                          </td>
                          <td class="description">
                            <p>
We claim to support Python 2.5 (useful for Lenny), yet a few problems have crept in:
</p>
<ul><li>'with' statement requires <tt>from __future__ import with_statement</tt>
</li><li>import json from ckan.lib.helpers, rather than directly, since it copes with reverting to simplejson, used in python 2.5.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1315580452000000
                          </td>
                          <td class="ModifiedTime">1315587113000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1329.html">#1329</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1329.html">i18n poor in some templates - missing i18n tags</a>
                          </td>
                          <td class="description">
                            <p>
Just a tip for developers regarding translations:
</p>
<ul><li>When writing templates, mark &lt;p&gt;, &lt;div&gt;, etc elements with the
</li></ul><p>
i18:msg attribute, otherwise the messages don't get extracted
properly.
</p>
<p>
Good: <a class="ext-link" href="https://bitbucket.org/okfn/ckan/src/1996b0439e81/ckan/templates/home/about.html#cl-40"><span class="icon">​</span>https://bitbucket.org/okfn/ckan/src/1996b0439e81/ckan/templates/home/about.html#cl-40</a>
</p>
<pre class="wiki">&lt;p i18n:msg=""&gt;More about CKAN, and the background to its creation can
   be found in &lt;a
     href="http://m.okfn.org/files/talks/opentech_20080705/"&gt;these
     slides&lt;/a&gt;.&lt;/p&gt;
</pre><p>
gives this:
<a class="ext-link" href="https://bitbucket.org/okfn/ckan/src/1996b0439e81/ckan/i18n/ca/LC_MESSAGES/ckan.po#cl-1238"><span class="icon">​</span>https://bitbucket.org/okfn/ckan/src/1996b0439e81/ckan/i18n/ca/LC_MESSAGES/ckan.po#cl-1238</a>
</p>
<p>
Bad: <a class="ext-link" href="https://bitbucket.org/okfn/ckan/src/1996b0439e81/ckan/templates/package/new_package_form.html#cl-211"><span class="icon">​</span>https://bitbucket.org/okfn/ckan/src/1996b0439e81/ckan/templates/package/new_package_form.html#cl-211</a>
</p>
<pre class="wiki">&lt;p class="hints"&gt;
&lt;strong&gt;Important:&lt;/strong&gt; By submitting content, you agree to
release your contributions
 under the &lt;a href="http://opendatacommons.org/licenses/odbl/1.0/"&gt;Open
Database License&lt;/a&gt;. Please &lt;strong&gt;refrain&lt;/strong&gt; from editing
this page if you are &lt;strong&gt;not&lt;/strong&gt; happy to do this.
&lt;/p&gt;
</pre><p>
gives this:
<a class="ext-link" href="https://bitbucket.org/okfn/ckan/src/1996b0439e81/ckan/i18n/ca/LC_MESSAGES/ckan.po#cl-1384"><span class="icon">​</span>https://bitbucket.org/okfn/ckan/src/1996b0439e81/ckan/i18n/ca/LC_MESSAGES/ckan.po#cl-1384</a>
</p>
<p>
The message is split in different parts that not necessarily match the
grammar or syntax of the translated language.
</p>

                            
                          </td>
                          <td class="PosixTime">1315824288000000
                          </td>
                          <td class="ModifiedTime">1317404566000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1332.html">#1332</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1332.html">i18n IndexError exceptions</a>
                          </td>
                          <td class="description">
                            <p>
We get this i18n error for the URL <a class="ext-link" href="http://no.ckan.net/authorizationgroup"><span class="icon">​</span>http://no.ckan.net/authorizationgroup</a> (which runs 1.4.2 with Norwegian translation). I'm not sure why it occurs. Fixing it is low importance though, because this site doesn't use Authorization Group feature
</p>
<p>
Usually caused by bots. The user does not appear to be logged in.
</p>
<pre class="wiki">WebApp Error: &lt;type 'exceptions.IndexError'&gt;: list index out of range
...
Module genshi.filters.i18n:177 in _generate
&lt;&lt;                  msgbuf.append(*previous)
                       previous = None
                   for event in msgbuf.translate(gettext(msgbuf.format())):
                       yield event
                   if previous:
&gt;&gt;  for event in msgbuf.translate(gettext(msgbuf.format())):
Module genshi.filters.i18n:1029 in translate
&lt;&lt;                      )
       
               parts = parse_msg(string)
               parts_counter = {}
               for order, string in parts:
&gt;&gt;  parts = parse_msg(string)
Module genshi.filters.i18n:1143 in parse_msg
&lt;&lt;      if string:
               parts.append((stack[-1], string))
       
           return parts
&gt;&gt;  parts.append((stack[-1], string))
IndexError: list index out of range
</pre>
                            
                          </td>
                          <td class="PosixTime">1315906429000000
                          </td>
                          <td class="ModifiedTime">1315999104000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1333.html">#1333</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1333.html">Move form converters to ckan core</a>
                          </td>
                          <td class="description">
                            <p>
Functions like convert_to_extras and convert_from_extras will be widely used from extensions and should be on ckan core.
</p>

                            
                          </td>
                          <td class="PosixTime">1315909268000000
                          </td>
                          <td class="ModifiedTime">1316951285000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1334.html">#1334</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1334.html">"AttributeError: 'NoneType' object has no attribute 'name'" exception when logging in</a>
                          </td>
                          <td class="description">
                            <p>
On same cases this exception is thrown when logging in:
</p>
<pre class="wiki">File '/home/adria/dev/envs/iati/src/ckan/ckan/controllers/user.py', line 252 in logged_in
  user_dict = get_action('user_show')(context,data_dict)
File '/home/adria/dev/envs/iati/src/ckan/ckan/logic/action/get.py', line 414 in user_show
  revision_dict = revision_show(context,{'id':revision.id})
File '/home/adria/dev/envs/iati/src/ckan/ckan/logic/action/get.py', line 332 in revision_show
  ref_package_by=ref_package_by)
File '/home/adria/dev/envs/iati/src/ckan/ckan/model/__init__.py', line 317 in revision_as_dict
  for pkg in revision.packages]
AttributeError: 'NoneType' object has no attribute 'name'
</pre>
                            
                          </td>
                          <td class="PosixTime">1315909508000000
                          </td>
                          <td class="ModifiedTime">1319798961000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1335.html">#1335</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1335.html">Action API - basic</a>
                          </td>
                          <td class="description">
                            <p>
Provide an API to the logic layer at /api/action.
</p>

                            
                          </td>
                          <td class="PosixTime">1315910021000000
                          </td>
                          <td class="ModifiedTime">1315910117000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1337.html">#1337</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1337.html">Group extras are JSON endoded in the REST API responses</a>
                          </td>
                          <td class="description">
                            <p>
Instead of this:
</p>
<pre class="wiki">extras: {
type: ""Primary source""
license_id: ""localauth-withrights""
publisher_frequency: ""2Pre\u00f1o \u20ac $ \u00e0dri\u00e0""
}
</pre><p>
we should return this:
</p>
<pre class="wiki">extras: {
type: "Primary source",
license_id: "localauth-withrights",
publisher_frequency: "2Preño € $ àdrià",
}
</pre>
                            
                          </td>
                          <td class="PosixTime">1315924727000000
                          </td>
                          <td class="ModifiedTime">1316951259000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1338.html">#1338</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1338.html">Exception when trying to use a custom form schema from an extension</a>
                          </td>
                          <td class="description">
                            <p>
Both with the package and group controllers, when overriding the default _db_to_form_schema method (which does nothing) from an extension, you get an exception because the context is not passed to the validators.
</p>
<pre class="wiki">File '/home/adria/dev/envs/iati/src/ckan/ckan/controllers/group.py', line 140 in edit
  old_data, errors = validate(old_data, schema)
File '/home/adria/dev/envs/iati/src/ckan/ckan/lib/navl/dictization_functions.py', line 215 in validate
  converted_data, errors = _validate(flattened, schema, context)
File '/home/adria/dev/envs/iati/src/ckan/ckan/lib/navl/dictization_functions.py', line 270 in _validate
  convert(converter, key, converted_data, errors, context)
File '/home/adria/dev/envs/iati/src/ckan/ckan/lib/navl/dictization_functions.py', line 178 in convert
  converter(key, converted_data, errors, context)
File '/home/adria/dev/envs/iati/src/ckan/ckan/logic/validators.py', line 108 in group_name_validator
  model = context['model']
KeyError: 'model'
</pre>
                            
                          </td>
                          <td class="PosixTime">1315925217000000
                          </td>
                          <td class="ModifiedTime">1317117738000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1339.html">#1339</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1339.html">Issues / question re navl and data conversion</a>
                          </td>
                          <td class="description">
                            <p>
I ran into a bug with the size field on resources.
</p>
<ul><li>It would not accept an empty value from form (IMO this clearly equates to null/None)
</li><li>This could be fixed via using ignore_empty instead of ignore_missing
</li><li>However using this means there was no way to empty the field (e.g. i may just want to set the size field back to null not just change to another value)
</li><li>similar issues could arise around other fields (such as last_modified ...)
<ul><li>cf cset:645031d07b60
</li></ul></li></ul><p>
To solve this (cset:58acdcfe6d4e) i created an int_converter temporarily in logic/schema.py (this is almost certainly the wrong place). But I think it raises a bigger issue about the conversion layer and how it works.
</p>

                            
                          </td>
                          <td class="PosixTime">1315947022000000
                          </td>
                          <td class="ModifiedTime">1316014954000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1340.html">#1340</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1340.html">Editing non-existent group causes Exception</a>
                          </td>
                          <td class="description">
                            <p>
e.g. <a class="ext-link" href="http://ckan.net/group/edit/history"><span class="icon">​</span>http://ckan.net/group/edit/history</a>
</p>
<pre class="wiki">Module ckan.controllers.group:135 in edit
&lt;&lt;          try:
                   old_data = get_action('group_show')(context, data_dict)
                   c.grouptitle = old_data.get('title')
                   c.groupname = old_data.get('name')
&gt;&gt;  old_data = get_action('group_show')(context, data_dict)
Module ckan.logic.action.get:347 in group_show
&lt;&lt;      if group is None:
               raise NotFound
       
           check_access('group_show',context, data_dict)
&gt;&gt;  raise NotFound
</pre>
                            
                          </td>
                          <td class="PosixTime">1315991374000000
                          </td>
                          <td class="ModifiedTime">1315991534000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1342.html">#1342</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-10.html">ckan-sprint-2011-10-10</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1342.html">Home controller does not capture SearchError exceptions</a>
                          </td>
                          <td class="description">
                            <p>
If there is a problem with the SOLR connection,the home page just shows a 500 Server error, instead of a notice (the package controller shows a notice when visiting <a class="ext-link" href="../../localhost:5000/dataset.html"><span class="icon">​</span>http://localhost:5000/dataset</a>).
</p>
<p>
Steps to reproduce:
</p>
<ul><li>Change the solr_url parameter in the ini file to something non-existant
</li><li>Visit <a class="ext-link" href="../../localhost:5000/index.html"><span class="icon">​</span>http://localhost:5000</a>
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1316001227000000
                          </td>
                          <td class="ModifiedTime">1318256532000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1344.html">#1344</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-10.html">ckan-sprint-2011-10-10</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1344.html">datetime error json conversion on search</a>
                          </td>
                          <td class="description">
                            <p>
Json decoding error on search, due to date in resources.
</p>

                            
                          </td>
                          <td class="PosixTime">1316020195000000
                          </td>
                          <td class="ModifiedTime">1317211299000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1345.html">#1345</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">nils.toedtmann
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1345.html">Investigate possible memory leak</a>
                          </td>
                          <td class="description">
                            <p>
There is some evidence pointing to CKAN handling memory inefficiently or even leaking under certain conditions:
</p>
<p>
When we migrated ckan.net/thedatahub.org from eu7.okfn.org (32bit) to s053.okserver.org (64bit) (<a class="ext-link" href="http://trac.okfn.org/ticket/882"><span class="icon">​</span>ticket</a>) we experienced extraordinary memory usage peaks (<a class="ext-link" href="http://trac.okfn.org/ticket/904"><span class="icon">​</span>ticket</a>). Here are the observed value with Apache default settings:
</p>
<ul><li>eu7, mpm-prefork: base level ~0.6GB, peaks up to 2GB
</li><li>s055, mpm-prefork: base level ~1GB, peaks up to 4GB
</li><li>s055, mpm-worker: base level ~1.5GB, peaks up to 6GB
</li></ul><p>
William reduced the life-time of a WSGI CKAN process from 500 requests down to 25 requests (<a class="ext-link" href="https://bitbucket.org/okfn/sysadmin/changeset/126290aead28"><span class="icon">​</span>changeset</a>). This (together with two other tweaks) changed the situation drastically:
</p>
<ul><li>s055, mpm-event: base level ~1.4GB, no peaks
</li></ul><p>
This suggests that the more requests a CKAN processes serves over time, the more memory it consumes, aka bad memory management or a leak.
</p>
<p>
To prove this theory, one could reduce the total number of WSGI CKAN processes as much as possible without killing the performance (e.g. down to <em>processes=3</em>), and then observing the relation between <em>maximum-requests=25...500</em> and memory consumption.
</p>
<p>
On 14/09/11 17:49, David Read wrote:
</p>
<blockquote class="citation">
<p>
Someone to do a bit of top-down memory-use profiling would be very useful. Also useful would be something in the tests that reported what test cases use lots of memory - this could be in the nose plugin.
</p>
</blockquote>
<p>
+1
</p>

                            
                          </td>
                          <td class="PosixTime">1316041450000000
                          </td>
                          <td class="ModifiedTime">1343215489000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1346.html">#1346</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1346.html">'get_authorization_group_dict not found' exception</a>
                          </td>
                          <td class="description">
                            <p>
This stems from a feature to allow you to prefill fields in the authorizationgroup creation form. 
</p>
<p>
e.g. <a class="ext-link" href="http://ckan.net/authorizationgroup/new?name=science"><span class="icon">​</span>http://ckan.net/authorizationgroup/new?name=science</a>
</p>
<p>
It's not tested, not supported in the new logic layer and therefore broken. I don't think anyone uses it - can remove it.
</p>

                            
                          </td>
                          <td class="PosixTime">1316081974000000
                          </td>
                          <td class="ModifiedTime">1316094632000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1347.html">#1347</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1347.html">Exception caused by New Group form POST with bad formed parameter</a>
                          </td>
                          <td class="description">
                            <p>
Exception caused by bots POSTing 'new group' form, but with bad (old-style) parameters.
</p>
<pre class="wiki">&lt;type 'exceptions.ValueError'&gt;: invalid literal for int() with base 10: 'cache'
...
Module ckan.controllers.group:102 in new
&lt;&lt;          if context['save'] and not data:
                   return self._save_new(context)
               
               data = data or {}
&gt;&gt;  return self._save_new(context)
Module ckan.controllers.group:152 in _save_new
&lt;&lt;          try:
                   data_dict = clean_dict(unflatten(
                       tuplize_dict(parse_params(request.params))))
                   context['message'] = data_dict.get('log_message', '')
                   group = create.group_create(data_dict, context)
&gt;&gt;  tuplize_dict(parse_params(request.params))))
Module ckan.logic:57 in tuplize_dict
&lt;&lt;          for num, key in enumerate(key_list):
                   if num % 2 == 1:
                       key_list[num] = int(key)
               tuplized_dict[tuple(key_list)] = value
           return tuplized_dict
&gt;&gt;  key_list[num] = int(key)
ValueError: invalid literal for int() with base 10: 'cache'
</pre>
                            
                          </td>
                          <td class="PosixTime">1316094466000000
                          </td>
                          <td class="ModifiedTime">1316094608000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1348.html">#1348</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">zephod
                          </td>
                          <td class="reporter">zephod
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-09-26.html">ckan-sprint-2011-09-26</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1348.html">UX polishing (dataset create/view/edit experience)</a>
                          </td>
                          <td class="description">
                            <p>
Tweaking UIs and polishing the work done in <a class="closed ticket" href="../ticket/1294.html" title="enhancement: [super] Package creation and editing UX improvements (closed: fixed)">#1294</a>.
</p>
<p>
## Edit Page ##
</p>
<ul><li>[Done; cset:49e0b059b6f5] Hide upload if  storage not enabled
</li><li>[Done; cset:81ff13b42dad] Make 'Add resource' links on edit page clearer and more button-like.
</li><li>[Done; cset:03904fc50cbf] Move edit form tabs to the left
</li><li>[Done; cset:fde26b87d6ce] API placeholder text should not link to a CSV file
</li><li>[Done] We used to autocomplete the format field - restore this functionality
<ul><li>Works on live. My local db has an empty 'resource_revision' table; maybe 'paster create-test-data' should insert something here?
</li></ul></li><li>[Done; cset:1aab499d73db] Summary should contain 'name' (or, if unavailable, use description. Long term: description is to be deprecated)
</li><li>[Done] Remove/move instructions where possible (a lot could just be placeholder text on the elements) (other stuff could only show on hover)
<ul><li>NB: reveal_instructions.js already disabled on edit page
</li><li>[RP] have now done this on create -- think we can leave on edit
</li></ul></li><li>[Done; cset:755b1a622199] We have broken 'error' reporting for resource issues. Either need to move that into error summary or somehow not destroy it when we rewrite table on page load ...
</li><li>[Done; cset:7ad090cb7855] Add slideDown to Resource expanded view 
</li><li>[Done; cset:d3595143e506] Need ability to delete resources
<ul><li>No thought yet given to uploaded resources. Long term re-think probable.
</li></ul></li><li>[Done; cset:2430a68a59fc] Empty resource table to resemble view page ("no resources" text)
</li></ul><p>
## General ##
</p>
<ul><li>[Done; cset:cc0ad47293e5] Highlight the package tab I'm on (view/edit/history)
<ul><li>More generally, the presence of the #minornavigation bar is very inconsistent throughout the site.
</li></ul></li><li>[Done; cset:d5babc3629cf] Remove 'license' filtered search from backend
</li><li>[Done] Move script stuff to footer of page
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1316170410000000
                          </td>
                          <td class="ModifiedTime">1317650043000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1349.html">#1349</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">zephod
                          </td>
                          <td class="reporter">zephod
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-09-26.html">ckan-sprint-2011-09-26</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1349.html">Template tidying</a>
                          </td>
                          <td class="description">
                            <p>
Various things in templates can be tidied up after work has finished on <a class="closed ticket" href="../ticket/1294.html" title="enhancement: [super] Package creation and editing UX improvements (closed: fixed)">#1294</a>:
</p>
<ul><li>remove styling in page in group/index.html (put in css main)
<ul><li>ditto for package/search.html
</li><li>ditto for home/index.html 
</li></ul></li><li>Forms.css - to merge into style.css; remove explicit imports elsewhere
<ul><li>@import at the top of style.css @import url(forms.css)
</li></ul></li><li>Make a note: Success/failure controllers clash CSS with success/failure flash banners
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1316171025000000
                          </td>
                          <td class="ModifiedTime">1317650050000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1350.html">#1350</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">zephod
                          </td>
                          <td class="reporter">zephod
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-09-26.html">ckan-sprint-2011-09-26</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1350.html">i18n of new javascript</a>
                          </td>
                          <td class="description">
                            <p>
New js code running produced in the work following <a class="closed ticket" href="../ticket/1294.html" title="enhancement: [super] Package creation and editing UX improvements (closed: fixed)">#1294</a> contains various string literals, and needs proper internationalisation.
</p>
<p>
See files:
</p>
<ul><li>application.js
</li><li>templates.js
</li></ul><p>
Furthermore, efforts can be made to tidy up strings as described in <a class="closed ticket" href="../ticket/1329.html" title="defect: i18n poor in some templates - missing i18n tags (closed: fixed)">#1329</a>.
</p>

                            
                          </td>
                          <td class="PosixTime">1316172576000000
                          </td>
                          <td class="ModifiedTime">1317650056000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1351.html">#1351</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">zephod
                          </td>
                          <td class="reporter">zephod
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-09-26.html">ckan-sprint-2011-09-26</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1351.html">Tidy edit-user form; strip preview functionality</a>
                          </td>
                          <td class="description">
                            <p>
The template for editing a user's profile seems to output the same form twice in one page.
Furthermore, the page is made needlessly complex by the preview functionality. The neat inline preview used in package will make this page a lot neater.
</p>
<ul><li>Fix the duplicate form
</li><li>Strip the preview functionality from the front-end, replacing it with js editor
</li><li>Strip the preview functionality from the back-end and test
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1316534753000000
                          </td>
                          <td class="ModifiedTime">1317650062000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1353.html">#1353</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">nickstenning
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1353.html">No UI to remove resources</a>
                          </td>
                          <td class="description">
                            <p>
I have no idea whether this was a deliberate decision or not, but there is a total absence of any UI with which to delete resources from the currently deployed version of thedatahub.org.
</p>

                            
                          </td>
                          <td class="PosixTime">1316729765000000
                          </td>
                          <td class="ModifiedTime">1317075904000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1356.html">#1356</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-10.html">ckan-sprint-2011-10-10</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1356.html">Can not recreate a deleted extra</a>
                          </td>
                          <td class="description">
                            <p>
If you delete an extra and later on change your mind, you can not recreate it with the same value (Different value works fine).
</p>

                            
                          </td>
                          <td class="PosixTime">1317034180000000
                          </td>
                          <td class="ModifiedTime">1318279617000000
                          </td>
              </tr>
          </tbody>
      </table>
      <div class="paging">
    <span class="previous">
      <a href="22%3Fsort=resolution&amp;asc=0&amp;page=11.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=2.html" title="Page 2">2</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=3.html" title="Page 3">3</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=4.html" title="Page 4">4</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=5.html" title="Page 5">5</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=6.html" title="Page 6">6</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=7.html" title="Page 7">7</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=8.html" title="Page 8">8</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=9.html" title="Page 9">9</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=10.html" title="Page 10">10</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=11.html" title="Page 11">11</a>
      </span>
      <span>
        <span class="current">12</span>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=13.html" title="Page 13">13</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=14.html" title="Page 14">14</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=15.html" title="Page 15">15</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=16.html" title="Page 16">16</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=17.html" title="Page 17">17</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=18.html" title="Page 18">18</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=19.html" title="Page 19">19</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=20.html" title="Page 20">20</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=21.html" title="Page 21">21</a>
      </span>
      <span>
        <a href="22%3Fsort=resolution&amp;asc=0&amp;page=22.html" title="Page 22">22</a>
      </span>
    <span class="next">
      <a href="22%3Fsort=resolution&amp;asc=0&amp;page=13.html" title="Next Page">→</a>
    </span>
</div>
      <div id="help"><strong>Note:</strong>
        See <a href="../wiki/TracReports.html">TracReports</a> for help on using and creating reports.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="22%3Fsort=resolution&amp;asc=0&amp;format=rss" class="rss">RSS Feed</a>
        </li><li>
          <a rel="nofollow" href="22%3Fsort=resolution&amp;asc=0&amp;format=csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="22%3Fsort=resolution&amp;asc=0&amp;format=tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="../report%3Fid=22&amp;format=sql">SQL Query</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.3</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>