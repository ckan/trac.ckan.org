<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      {23} Trac comments – CKAN
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">window.location.hash = window.location.hash;</script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="23%3Fsort=ticket&amp;asc=1&amp;format=rss" type="application/rss+xml" class="rss" title="RSS Feed" /><link rel="alternate" href="23%3Fsort=ticket&amp;asc=1&amp;format=csv" type="text/plain" title="Comma-delimited Text" /><link rel="alternate" href="23%3Fsort=ticket&amp;asc=1&amp;format=tab" type="text/plain" title="Tab-delimited Text" /><link rel="alternate" href="../report%3Fid=23&amp;format=sql" type="text/plain" title="SQL Query" />
        <link rel="up" href="../report.html" title="Available Reports" />
        <link rel="next" href="23%3Fsort=ticket&amp;asc=1&amp;page=22.html" title="Next Page" />
        <link rel="start" href="../wiki.1.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/report.css" type="text/css" />
        <link rel="prev" href="23%3Fsort=ticket&amp;asc=1&amp;page=20.html" title="Previous Page" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search CKAN" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://ckan.org/"><img src="http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png" alt="CKAN Trac" height="70" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../login.html">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li><a href="../about.html">About Trac</a></li><li class="last"><a href="../register.html">Register</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li><a href="../search.html">Search</a></li><li class="last"><a href="../wiki.1.html">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="../report.html">Available Reports</a></li><li class="last"><a href="../query.html">Custom Query</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="report">
      <h1>{23} Trac comments
        <span class="numrows">(3729 matches)</span>
      </h1>
      <form method="get" action="23%3Fsort=ticket&amp;asc=1&amp;page=21.html">
        <div id="prefs">
          <div>
            <label>
              Max items per page
              <input type="text" name="max" size="10" value="100" />
            </label>
          </div>
          <div class="buttons">
            <input type="submit" value="Update" />
          </div>
        </div>
      </form>
      <div id="description">
        <p>
<a class="ext-link" href="https://github.com/roskakori/tratihubis/blob/master/query_comments.sql"><span class="icon">​</span>https://github.com/roskakori/tratihubis/blob/master/query_comments.sql</a>
</p>

      </div>
      <div class="buttons">
      </div>
      <h2 class="report-result">
        Results <span class="numresults">(2001 - 2100 of 3729)</span>
      </h2>
      <div class="paging">
    <span class="previous">
      <a href="23%3Fsort=ticket&amp;asc=1&amp;page=20.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=11.html" title="Page 11">11</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=12.html" title="Page 12">12</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=13.html" title="Page 13">13</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=14.html" title="Page 14">14</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=15.html" title="Page 15">15</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=16.html" title="Page 16">16</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=17.html" title="Page 17">17</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=18.html" title="Page 18">18</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=19.html" title="Page 19">19</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=20.html" title="Page 20">20</a>
      </span>
      <span>
        <span class="current">21</span>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=22.html" title="Page 22">22</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=23.html" title="Page 23">23</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=24.html" title="Page 24">24</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=25.html" title="Page 25">25</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=26.html" title="Page 26">26</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=27.html" title="Page 27">27</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=28.html" title="Page 28">28</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=29.html" title="Page 29">29</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=30.html" title="Page 30">30</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=31.html" title="Page 31">31</a>
      </span>
    <span class="next">
      <a href="23%3Fsort=ticket&amp;asc=1&amp;page=22.html" title="Next Page">→</a>
    </span>
</div>
      <table class="listing tickets">
          <thead>
        <tr class="trac-columns">
          <th class="asc">
            <a href="23%3Fsort=ticket&amp;asc=0&amp;page=21.html">
              Ticket
            </a>
          </th><th>
            <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=21.html">
              Posixtime
            </a>
          </th><th>
            <a href="23%3Fsort=author&amp;asc=1&amp;page=21.html">
              Author
            </a>
          </th><th colspan="100">
            <a href="23%3Fsort=newvalue&amp;asc=1&amp;page=21.html">
              Newvalue
            </a>
          </th>
        </tr>
          </thead>
          <tbody>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1167.html">#1167</a>
                          </td>
                          <td class="PosixTime">1306856992000000
                          </td>
                          <td class="author">sebbacon
                          </td>
                          <td class="newvalue">Yes to all the above.

Further question: which extensions should be installed as standard?  I would argue:

 * ckanext-stats
 * ckanext-googleanalytics
 * ckanext-disqus
 * ckanext-solr (implies installing a running solr, too...)
 * ckanext-follower
 * ckanext-admin

Note that googleanalytics and disqus both require user accounts set up at the corresponding service.  Not sure how we would handle this in the instance setup.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1167.html">#1167</a>
                          </td>
                          <td class="PosixTime">1306857142000000
                          </td>
                          <td class="author">sebbacon
                          </td>
                          <td class="newvalue">Another thing to consider: how do we ensure we keep a single, up-to-date version available?  (I'm thinking wrt developer / sysadmin workflow)
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1167.html">#1167</a>
                          </td>
                          <td class="PosixTime">1306857750000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">Creating the AMI is really just the icing on the cake. The hard bit is getting the packaging right so that's where we need to concentrate first. Once the packaging works we just make sure apt-get upgrade is run regularly.

+1 to the list above.

I also agree we should install solr by default. Who has actually done a CKAN solr install? I haven't but together with whoever has I can try to package it up.

Wrt to usernames and passwords, I'll look into how dpkg manages those blue pop-up screens for entering configuration options.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1167.html">#1167</a>
                          </td>
                          <td class="PosixTime">1307358318000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">debconf seems the preferred way to question the user post-install and run setup scripts. It seems a bit of a faff. 

The person that is able to spin up an EC2 instance is no doubt technically able enough to follow a couple of instructions in README.txt saying edit /etc/ckan/&lt;instancename&gt;/&lt;instancename&gt;.ini and add your Google Analytics credentials. So I don't think this ticket is the driver for a debconf setup.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1167.html">#1167</a>
                          </td>
                          <td class="PosixTime">1311178516000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">I've now written a 20 page guide on using CKAN on Amazon EC2. I haven't explicitly created an AMI, but I don't think we should do that anyway for a few reasons:

 * it is fiddly
 * there is no advantage to the user as CKAN installation is so easy and so well documented
 * we don't want to have to maintain the image going forward
 * we might not want to promote a non-open approach

The guide will form part of Anna PS's work on the overall documentation but you can also see the original version here:

https://bitbucket.org/okfn/ckan-debs-public/src/489a5ecf369f/ec2/
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1168.html">#1168</a>
                          </td>
                          <td class="PosixTime">1310134901000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">This is now working on dgu-buildbot.okfn.org. The code that manages it is partly the repo.py script from http://hg.3aims.com/public/BuildKit/ and partly the fab code in https://bitbucket.org/okfn/buildbot-scripts
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1168.html">#1168</a>
                          </td>
                          <td class="PosixTime">1310396585000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This might run manually on the us7, but the buildbot is not running these automatically or any sort of testing, which is what this ticket is about.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1168.html">#1168</a>
                          </td>
                          <td class="PosixTime">1325866142000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">Quick update... we now have:

 * An automated way to build the deb packages
 * An automated way to install them into a fresh virtual machine

We don't currently run them via buildbot or have smoke tests.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1169.html">#1169</a>
                          </td>
                          <td class="PosixTime">1306754833000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Done on default. Will appear on ckan.net next time it is branched and updated.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1170.html">#1170</a>
                          </td>
                          <td class="PosixTime">1306864422000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Done in cset:4d2d0857281f on default
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1171.html">#1171</a>
                          </td>
                          <td class="PosixTime">1347358705000000
                          </td>
                          <td class="author">ross
                          </td>
                          <td class="newvalue">I have implemented this on the datahub, but this change likely needs to be made to CKAN core. Probably as part of 2.0.

The format on tdh is currently:

${TITLE}. ${AUTHOR}.
Retrieved ${UTC time}.
${DATASET LINK}

Best discuss and agree on what format should be supported. Mark, I've assigned this to you as it is tagged academia ;)

                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1172.html">#1172</a>
                          </td>
                          <td class="PosixTime">1312991332000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">I've started this on branch defect-1172-exceptions
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1172.html">#1172</a>
                          </td>
                          <td class="PosixTime">1314118281000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Is in cset:47225f03e2af and merged to default for 1.4.4.

It now barfs instead of failing silently:

* if the ckan config file has any errors
* search indexing error

There are some other "except Exception" statements
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1172.html">#1172</a>
                          </td>
                          <td class="PosixTime">1314118883000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">I took out "raise" by mistake in ckan/lib/search/worker.py:26 but John has added it in in the corresponding place in ckan/lib/search/__init__.py on branch feature-1275-solr-search anyway.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1173.html">#1173</a>
                          </td>
                          <td class="PosixTime">1307000249000000
                          </td>
                          <td class="author">pudo
                          </td>
                          <td class="newvalue">I propose we do a bit of frameworkiness here: set up a two-part content type registry and refactor the API controller to use it. 

The idea would be to do the following things: 

1. Create a registry mapping format extensions to mime types: RepresentationRegistry.add_format('json', 'application/json')
2. Create a registry of (mime types, entity types) -&gt; converter functions that yield an appropriate representation of the entity. 
3. Hook this into the _finish method of the API controller based on Accept: handling
4. Add support for /api/rest/ENTITY/NAME.{format} and /ENTITY/NAME.{format} to routing, use registry from (1) to rewrite accept headers. 
5. Register converters in load_environment or via IConfigurable plugins
6. Document

What do you think? 
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1173.html">#1173</a>
                          </td>
                          <td class="PosixTime">1307615271000000
                          </td>
                          <td class="author">pudo
                          </td>
                          <td class="newvalue">Now available in ckanext-rdf and linked to from WUI.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1174.html">#1174</a>
                          </td>
                          <td class="PosixTime">1307615200000000
                          </td>
                          <td class="author">pudo
                          </td>
                          <td class="newvalue">wontfix as thejimmyg wants to turn REST API into RPC API and this doesn't fit in. 

Not an excellent plan in my idea but this is to be discussed elsewhere.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1175.html">#1175</a>
                          </td>
                          <td class="PosixTime">1307350866000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Flavio, can you post here the exception that you get?
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1175.html">#1175</a>
                          </td>
                          <td class="PosixTime">1307372833000000
                          </td>
                          <td class="author">fccoelho
                          </td>
                          <td class="newvalue">Thats the thing, I don't get any error message, no even in the logs. But I can't even load a page.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1175.html">#1175</a>
                          </td>
                          <td class="PosixTime">1314030683000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Hi Flavio, is this still a concern? I'd like to close this ticket unless you can provide details of the error from your logs or exception email.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1175.html">#1175</a>
                          </td>
                          <td class="PosixTime">1325355170000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This error (which will be in the apache or ckan log) must be unrelated. Stats extension runs fine elsewhere.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1176.html">#1176</a>
                          </td>
                          <td class="PosixTime">1310557852000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This is occurring several times a day now - James can you suggest what's happening?
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1176.html">#1176</a>
                          </td>
                          <td class="PosixTime">1314273012000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This occurs when you browse {{{/error/document}}} directly, rather than being directed there on error. In this case there is no 'original_response'.

Fixed in cset:c67d5934fb0b for ckan 1.4.3 and merged to default.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1177.html">#1177</a>
                          </td>
                          <td class="PosixTime">1307360643000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">What revision of the CKAN code are you using (do hg id to get revision if installing from source). Have you modified the package template in any way? Have you restarted apache after upgrading?
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1177.html">#1177</a>
                          </td>
                          <td class="PosixTime">1307361157000000
                          </td>
                          <td class="author">fccoelho
                          </td>
                          <td class="newvalue">to upgrade I used the method describeb on bitbucket, after upgrading pip-requirements:

pip -E pyenv install -r pip-requirements.txt

after that I did a 

paster --plugin ckan db upgrade --config ckan.emap.fgv.br.ini

the revision id on my pyenv/src/ckan is:
5730c79db461+ tip

yes, I have restarted apached after upgrading
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1177.html">#1177</a>
                          </td>
                          <td class="PosixTime">1307365496000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">The issue here is that the line should never be reached because g.has_commenting should be False: https://bitbucket.org/okfn/ckan/src/5730c79db461/ckan/lib/app_globals.py

@Flavio: have you modded your code in any way? is self.has_commenting False in your app_globals.py

A quick fix would be to remove the template lines calling to remove the lines in the template:

{{{
${h.subnav_link(c, h.icon('comments') + _('Comments &amp;amp; Questions'), controller='package', action='comments', id=c.pkg.name)}
}}}
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1177.html">#1177</a>
                          </td>
                          <td class="PosixTime">1307366621000000
                          </td>
                          <td class="author">fccoelho
                          </td>
                          <td class="newvalue">I have not modded the code in any way... 

I'll look for those lines in the template.which template is it? read.html does not have a line such as this.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1177.html">#1177</a>
                          </td>
                          <td class="PosixTime">1307367354000000
                          </td>
                          <td class="author">fccoelho
                          </td>
                          <td class="newvalue">OK I did an fgrep on all package template and found the line on layout.html, I'll comment the block and test.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1177.html">#1177</a>
                          </td>
                          <td class="PosixTime">1307367923000000
                          </td>
                          <td class="author">fccoelho
                          </td>
                          <td class="newvalue">Ok it fixed it! 

thanks a lot!!

Is there any side effects to the removal of this line, I should know of?
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1177.html">#1177</a>
                          </td>
                          <td class="PosixTime">1307374897000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">I think rgrp was suggesting you have mistakenly set has_commenting to "True" in app_globals or elsewhere. But either way, this should have no side-effects.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1178.html">#1178</a>
                          </td>
                          <td class="PosixTime">1308045351000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Fixed. This was due to incorrect config of bucket option.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1180.html">#1180</a>
                          </td>
                          <td class="PosixTime">1307544223000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Both issues solved using a whitelist on anchor tags. 

Second issue was a link with unicode expression of the quote. e.g. &lt;a href=\u201dsomelink\u201d&gt;somelink&lt;/a&gt;
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1181.html">#1181</a>
                          </td>
                          <td class="PosixTime">1307532816000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed in ckan default in cset:72f7d48d7f31. Have left Package url and Resource url links though, as these are the key links we want google to see. So we need to check these carefully for spam.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1183.html">#1183</a>
                          </td>
                          <td class="PosixTime">1311181719000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">Hi John,

Can you have a look at this one too please?

Cheers,

James
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1183.html">#1183</a>
                          </td>
                          <td class="PosixTime">1311771069000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Fixed in new datapreview code (currently running on the test.ckan.net), which now gets the preview data from a webstore instead of the dataproxy API. It also only now shows a preview button for resources that were successfully archived and saved in the webstore.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1186.html">#1186</a>
                          </td>
                          <td class="PosixTime">1310556519000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This was done by pudo in branch feature-1198-mailer and went into default, lined up for release 1.4.2.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1187.html">#1187</a>
                          </td>
                          <td class="PosixTime">1308143605000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Also stopped creating revision for user edits.

Done in cset:795ccd6405ba for 1.4.1 release
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1189.html">#1189</a>
                          </td>
                          <td class="PosixTime">1323173227000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">Closing this ticket in line with ticketing policy since it is over 6 months old. If someone would like to develop an extension that uses spideroak as a back end we can look at it again.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1190.html">#1190</a>
                          </td>
                          <td class="PosixTime">1320143592000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">A very substantial portion of this got done as part of 0.5 including the webstore #1208 and the majority of automated conversion #1398. #1432 is currently deferred so we're going to close this ticket on basis that item (3) is now out of scope.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1191.html">#1191</a>
                          </td>
                          <td class="PosixTime">1308650930000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Done in cset:c3822feffb38 for 1.4.1 release
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1192.html">#1192</a>
                          </td>
                          <td class="PosixTime">1308337652000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">I really think forms are a key asset of CKAN, and keeping the docs about customising and integrating them is important - i.e. forms.rst and forms-integration.rst. There are ideas being suggested for replacing bits of front-end, but forms hard to do, and David's new system is a significant offering on top of the CKAN back-end, so it seems crazy to me to abandon it.

forms.rst has been updated by David Raznick in the release_v1.4.1 branch.

i18n.rst - include here the creation of the pot file, deploying a translation, transifex admin

load-testing.rst - I think performance should be mentioned in the glossy guide (some sort of basic metrics of speed profile, to return web pages, run searches and API operations, for 100 or 1000 packages, on a given spec machine) and have it based on a report showing how we measured it. The report would look a bit like this file, and it might do as a stub, but it seems pretty lacking.

distributed.rst - agreed, remove.

design.rst - agreed, delete.

loaders.rst / loader_scripts.rst - yes move to wiki

feeds.rst - this should be split into a tutorial for the wiki and the reference page left in sphinx

importer.rst - this should be moved to ckanext-importer/doc

admin.html - this has already gone in 1.4.1

authorization.rst - This is a bit jumbled. We're talking about changes to the code, so maybe not worth working hard to make this good, so I suggest leaving it, but delete the boring section "Requirements and Use Cases".

deb.rst - this is an administrator task, so should stay why move this to the wiki?

buildbot.rst - ok to stay here?

vm.rst - I assume there's no problem with this
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1192.html">#1192</a>
                          </td>
                          <td class="PosixTime">1310135468000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">This is now a child ticket of #1142
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1192.html">#1192</a>
                          </td>
                          <td class="PosixTime">1312191462000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Marking this as closed as Anna has completed and this is now deployed at http://docs.ckan.org/.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1193.html">#1193</a>
                          </td>
                          <td class="PosixTime">1309768960000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed cset:87d6140e06ad
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1194.html">#1194</a>
                          </td>
                          <td class="PosixTime">1317043212000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Suggest changing this to "Welcome, Rob" rather than "Welcome back, Rob", avoiding the problem.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1194.html">#1194</a>
                          </td>
                          <td class="PosixTime">1317053674000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Done in cset:49e2c05e69ea
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1194.html">#1194</a>
                          </td>
                          <td class="PosixTime">1317053688000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Will go into ckan 1.5.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1195.html">#1195</a>
                          </td>
                          <td class="PosixTime">1311332049000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Also this one: http://ckan.net/storage/f/file/
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1195.html">#1195</a>
                          </td>
                          <td class="PosixTime">1311841763000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Fixed in https://bitbucket.org/okfn/ckanext-storage/changeset/49734285f1ef
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1196.html">#1196</a>
                          </td>
                          <td class="PosixTime">1308743857000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Reason here:

http://www.freewisdom.org/projects/python-markdown/Tickets/000018

Using the suggested workaround. Fixed on default for 1.4.2 in cset:715212cd220c
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1197.html">#1197</a>
                          </td>
                          <td class="PosixTime">1340010256000000
                          </td>
                          <td class="author">toby
                          </td>
                          <td class="newvalue">personally I'm against these for 4 reasons

a) The site should be self explanatory and if it is not this is a failure of design

b) a cookie would be needed to prevent these happening all the time - cookies are bad as they interfere with caching proxies.

c) I find stuff like this patronising/annoying for the user

d) They are a maintenance burden for ckan as we do not have a single instance

Therefore I'd suggest closing this as a won't fix - I agree this is just a personal view point and therefore am not going to actually close the ticket but just record my opinion.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1197.html">#1197</a>
                          </td>
                          <td class="PosixTime">1340018903000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">Hi Toby, yes I think I agree with you, it reminds me of when I install new Android apps on my phone, some of them start off by bothering me with some sort of guided tour or long instructional text, I hate this and always skip through without reading it, expecting to be able to figure out the interface for myself.

The one thing that something like this could be useful is, rather than showing someone how to use the site, showing them what the site is capable of so they can assess whether it meets their needs/is something they're interested in. However, we already have a good guided tour of this type on ckan.org/features, those pages are really pretty good.

Close this as wontfix?
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1197.html">#1197</a>
                          </td>
                          <td class="PosixTime">1340019675000000
                          </td>
                          <td class="author">toby
                          </td>
                          <td class="newvalue">Thinking horrible thoughts, there was a rumour of a ckan tour, for something like that this would be useful.

Not sure where that plan is at?  if there is a ticket for it maybe link to this one and close?
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1197.html">#1197</a>
                          </td>
                          <td class="PosixTime">1340020357000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">AFAIK there isn't a ticket for that, it was something originally requested as part of the demo site, but since the devs think it's a horrible idea I don't think it's going to happen, easiest way to make a CKAN tour would be a series of static pages like the one we already have on ckan.org, I think that combined with a real functioning demo site probably meets the requirement.

Anyway, closing this as wontfix
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1198.html">#1198</a>
                          </td>
                          <td class="PosixTime">1308821489000000
                          </td>
                          <td class="author">pudo
                          </td>
                          <td class="newvalue">This ticket is essential I think. I would propose we should be a bit more radical here, though: 

 * Introduce an "Agent" SQLAlchemy object and derive both publishers and users via single table inheritance. 
 * Make agent the central object of authorization, e.g. by introducing c.agencies including the user account, visitor, logged_in, etc. 
 * Abolish AuthorizationGroups in favor of publishers. Yes, they are different but the use case for what AuthzGroups do and Publishers don't is just nerdery. 
 * Restructure URLs to be /&lt;agent&gt;/&lt;package_name&gt; rather than /package/&lt;package_name&gt; and have /&lt;agent&gt; be a useful list of managed resources rather than a revision list (users current home page).
 * Make Agents a primary facet for all kinds of navigation. 

Of course this would be done incrementally but I think we should agree on some such scheme as a marching direction.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1198.html">#1198</a>
                          </td>
                          <td class="PosixTime">1308824870000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">I think it is a good idea to allow both users and publishers to be the object of authorization. The user_object_role table and all logic surrounding it would be simpler.

I deliberately didn't suggest any detail on the authz front because I know other related changes are afoot so it would be useful for David Raznick to contribute here.

I really like the url ideas - more like github. /&lt;agent&gt; having a list of packages and a search box, plus a link to the latest revisions would be great. /package/&lt;package_name&gt; would usefully redirect to /&lt;agent&gt;/&lt;package_name&gt;. I do think this should be split off into a separate ticket though. What do you think?
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1199.html">#1199</a>
                          </td>
                          <td class="PosixTime">1308822557000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Not sure we need exposure this via the API (at least at this point) as things like auto mass emailing could be in done in separate component (that talks to CKAN).
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1199.html">#1199</a>
                          </td>
                          <td class="PosixTime">1308922389000000
                          </td>
                          <td class="author">pudo
                          </td>
                          <td class="newvalue">merged to default with password reset forms
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1199.html">#1199</a>
                          </td>
                          <td class="PosixTime">1310555589000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This was done in branch feature-1198-mailer. No tests - ticketed here: #1222.

Additional feature in this branch 'password reset' was ticket #1186.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1200.html">#1200</a>
                          </td>
                          <td class="PosixTime">1311180218000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">This is a duplicate of #1108. Let's have the discussion there please.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1202.html">#1202</a>
                          </td>
                          <td class="PosixTime">1314030352000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">The CKAN package page links to datapkg at: http://blog.okfn.org/2010/02/23/introducing-datapkg/ (it has always been this link).

I think Rolf is referring to the three links to knowledgeforge.net in the blog post itself. These need to be edited by Rufus. Note datapkg has moved again to github.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1202.html">#1202</a>
                          </td>
                          <td class="PosixTime">1315821804000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">This now irrelevant and relevant content has gone from thedatahub theme.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1204.html">#1204</a>
                          </td>
                          <td class="PosixTime">1311179980000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">Sorry, is this a CKAN issue or a datacatalogs.org one? If it is datacatalogs.org do you mean a catalog rather than a package? If so, can you give an example of the sort of change you've made?

Marking as invalid until we get more information.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1205.html">#1205</a>
                          </td>
                          <td class="PosixTime">1309768720000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed in default cset:5e2070688e54

The upgrade now works locally, so the upgrade should work now.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1205.html">#1205</a>
                          </td>
                          <td class="PosixTime">1310568631000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This worked - cheers David.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1206.html">#1206</a>
                          </td>
                          <td class="PosixTime">1309450216000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed with cset:149be76faabc on default branch, aiming for ckan 1.4.2.

Thanks for help from Eric Lemoine.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1207.html">#1207</a>
                          </td>
                          <td class="PosixTime">1311325343000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This has been fixed.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1208.html">#1208</a>
                          </td>
                          <td class="PosixTime">1310124599000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">Rufus and Friedrich are working on this at the moment so putting into the current sprint. I'm considering this as preliminary investigation to inform the wider project that David Raznick is leading on.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1208.html">#1208</a>
                          </td>
                          <td class="PosixTime">1311525306000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Propose this ticket can be closed as webstore is now functional and being used. Can open new tickets for specific improvements / adaptations as the need arises.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1208.html">#1208</a>
                          </td>
                          <td class="PosixTime">1312191646000000
                          </td>
                          <td class="author">pudo
                          </td>
                          <td class="newvalue">This should be closed: 

 * https://github.com/okfn/webstore - See README for details
 * Python client lib: https://github.com/okfn/webstore-client
 * http://webstore.thedatahub.org/ - Demo install
 * http://wiki.ckan.net/Webstore - Overview
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1209.html">#1209</a>
                          </td>
                          <td class="PosixTime">1310571715000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Was fixed in cset:d959a70a19ea. Bug was introduced and fixed before a release took place.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1210.html">#1210</a>
                          </td>
                          <td class="PosixTime">1309974781000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fix in ckan for AssertionError in cset:8f6ba8ef63f3 lined up for CKAN release 1.4.2.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1211.html">#1211</a>
                          </td>
                          <td class="PosixTime">1315910650000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">I've listed what was checked into this branch 6 weeks ago and is going into release 1.4.3. Is this ticket ready to close now or are there future plans?
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1211.html">#1211</a>
                          </td>
                          <td class="PosixTime">1315948703000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Let's close and re-open (or open a new ticket) for future work.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1214.html">#1214</a>
                          </td>
                          <td class="PosixTime">1309982828000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">I'm working through these on branch defect-1214-api-improvements.

"Server returns text/html for errors" - now fixed in cset:0a533a8da3df
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1214.html">#1214</a>
                          </td>
                          <td class="PosixTime">1310041083000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Aron, 
I've fixed the second item (on my branch), so you can DELETE a package without Content-Length. But I'm not sure what you mean here: "Should be 405 Method Not Allowed?" DELETE should be allowed. Or is that a response you're getting?
David
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1214.html">#1214</a>
                          </td>
                          <td class="PosixTime">1310041605000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">"Tag returned as a JSON object when updating but as a string when requesting."
I'm not sure what you mean.

http://test.ckan.net/api/2/rest/package/reference-example
gives tags: {{{"tags": ["country-uk", "example-package"],}}}

Is it this - returning package names, rather than ids? Here is certainly a bug I'll fix.
http://test.ckan.net/api/2/rest/tag/country-uk
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1214.html">#1214</a>
                          </td>
                          <td class="PosixTime">1310042268000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed tag entity returning package names for apiv2 - it now gives IDs.

The problem mentioned about "Extras" content - I'm not sure what's meant here. Package extras are just strings. You might choose to store a package name in an extra, but there is no magic to convert it to a package id should you retrieve the package via apiv2. Is this just a misunderstanding or have I missed your point?
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1214.html">#1214</a>
                          </td>
                          <td class="PosixTime">1310044531000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Deleting an extra using 'null' works for me:
{{{
$ curl -d '{"name":"dtest2", "extras":{"1":"1", "2":"2", "3":"3"}}' http://test.ckan.net/api/rest/package -H "Authorization: tester" 
...
$ curl -d '{"name":"dtest2", "extras":{"1":"1", "2":"2", "3":null}}' http://test.ckan.net/api/rest/package -H "Authorization: tester" 
{"maintainer": null, "name": "dtest2", "relationships_as_subject": [], "author": null, "url": null, "relationships_as_object": [], "notes": null, "title": "dtest2", "maintainer_email": null, "revision_timestamp": "2011-07-07T12:57:18.454890", "author_email": null, "state": "active", "version": null, "groups": [], "license_id": null, "revision_id": "f0ff31c0-027b-49ce-9daf-94a73d96a913", "tags": [], "id": "fdeeb287-2783-4aac-9fc7-a6717e54e22f", "resources": [], "extras": [{"state": "active", "value": "\"1\"", "revision_timestamp": "2011-07-07T12:57:18.454890", "package_id": "fdeeb287-2783-4aac-9fc7-a6717e54e22f", "key": "1", "revision_id": "f0ff31c0-027b-49ce-9daf-94a73d96a913", "id": "d1937073-7bfc-48c5-b6ff-b00d90b451ae"}, {"state": "active", "value": "\"2\"", "revision_timestamp": "2011-07-07T12:57:18.454890", "package_id": "fdeeb287-2783-4aac-9fc7-a6717e54e22f", "key": "2", "revision_id": "f0ff31c0-027b-49ce-9daf-94a73d96a913", "id": "8147886f-9769-440c-8c35-b7d6a2f46de7"}]}
}}}
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1214.html">#1214</a>
                          </td>
                          <td class="PosixTime">1310045026000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Ok I see the problem with extras. When you create a package you get back 'simple' extras:
{{{
$ curl -d '{"name":"dtest3", "extras":{"1":"1"}, "tags":["australia", "barbeque"]}' http://test.ckan.net/api/rest/package -H "Authorization: tester" --trace log
{"maintainer": null, "maintainer_email": null, "id": "33d75910-ae5e-45b0-a154-d00022555a43", "metadata_created": "2007-04-10T21:19:38", "relationships": [], "metadata_modified": "2011-07-07T13:06:06.228718", "author": null, "author_email": null, "state": "active", "version": null, "license_id": null, "resources": [], "tags": ["australia", "barbeque"], "groups": [], "name": "dtest3", "license": null, "notes_rendered": "", "url": null, "ckan_url": "http://test.ckan.net/package/dtest3", "notes": null, "title": "dtest3", "ratings_average": null, "extras": {"1": "1"}, "ratings_count": 0, "revision_id": "31cb22d4-3452-4adc-b572-cd173aea7d
}}}
i.e. "extras": {"1": "1"}
and that's what you get if you GET the package:
{{{
$ curl http://test.ckan.net/api/rest/package/dtest3
{"maintainer": null, "maintainer_email": null, "id": "33d75910-ae5e-45b0-a154-d00022555a43", "metadata_created": "2007-04-10T21:19:38", "relationships": [], "metadata_modified": "2011-07-07T13:06:06.228718", "author": null, "author_email": null, "state": "active", "version": null, "license_id": null, "resources": [], "tags": ["australia", "barbeque"], "groups": [], "name": "dtest3", "license": null, "notes_rendered": "", "url": null, "ckan_url": "http://test.ckan.net/package/dtest3", "notes": null, "title": "dtest3", "ratings_average": null, "extras": {"1": "1"}, "ratings_count": 0, "revision_id": "31cb22d4-3452-4adc-b572-cd173aea7d11"}
}}}
but if you then edit it you get them expressed much more verbosely:
{{{
$ curl -d '{"name":"dtest3", "extras":{"1":"2"}, "tags":["australia", "barbeque"]}' http://test.ckan.net/api/rest/package/dtest3 -H "Authorization: tester" --trace log
{"maintainer": null, "name": "dtest3", "relationships_as_subject": [], "author": null, "url": null, "relationships_as_object": [], "notes": null, "title": "dtest3", "maintainer_email": null, "revision_timestamp": "2011-07-07T13:06:06.228718", "author_email": null, "state": "active", "version": null, "groups": [], "license_id": null, "revision_id": "31cb22d4-3452-4adc-b572-cd173aea7d11", "tags": [{"revision_timestamp": "2011-07-07T13:06:06.228718", "state": "active", "id": "4aa0e776-ac2a-4a8b-82ba-d80237d35596", "name": "australia"}, {"revision_timestamp": "2011-07-07T13:06:06.228718", "state": "active", "id": "e890354d-e170-44c1-94b1-f0d8b38a49fc", "name": "barbeque"}], "id": "33d75910-ae5e-45b0-a154-d00022555a43", "resources": [], "extras": [{"state": "active", "value": "\"2\"", "revision_timestamp": "2011-07-07T13:21:02.220368", "package_id": "33d75910-ae5e-45b0-a154-d00022555a43", "key": "1", "revision_id": "61703821-a2f1-41f8-8f39-71130c5e6c1b", "id": "87d7d4fc-7eb7-4760-b199-e460ce505632"}]}
}}}
I'm going to ask David Raznick about what's best here. It would be good to make them uniform.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1214.html">#1214</a>
                          </td>
                          <td class="PosixTime">1310053225000000
                          </td>
                          <td class="author">aron
                          </td>
                          <td class="newvalue">Replying to [comment:2 dread]:
&gt; Aron, 
&gt; I've fixed the second item (on my branch), so you can DELETE a package without Content-Length. But I'm not sure what you mean here: "Should be 405 Method Not Allowed?" DELETE should be allowed. Or is that a response you're getting?
&gt; David

If I send a HEAD request to the server eg.

{{{
curl -i -XHEAD http://test.ckan.net:80/api/2/rest/package/ec9cb930-d15f-441f-a1e1-36f4d5df19bf
}}}

I get the following in the  Access-Control-Allow-Methods header

{{{
Access-Control-Allow-Methods: POST, PUT, GET, OPTIONS
}}}

I've just realised that the "Access-Control" headers are for cross origin browser requests so I think you can ignore my comments about the correct response being 405 Method Not Allowed but perhaps DELETE should be added to the Access-Control-Allow-Methods list?
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1214.html">#1214</a>
                          </td>
                          <td class="PosixTime">1310054305000000
                          </td>
                          <td class="author">aron
                          </td>
                          <td class="newvalue">Replying to [comment:3 dread]:
&gt; "Tag returned as a JSON object when updating but as a string when requesting."
&gt; I'm not sure what you mean.
&gt; 
&gt; http://test.ckan.net/api/2/rest/package/reference-example
&gt; gives tags: {{{"tags": ["country-uk", "example-package"],}}}

I'm getting back objects for each tag in the response body from a PUT request. For example "country-uk" would be something like.

{{{
{ 
        "id" : "600dc72e-6127-4704-b801-bee00474ec0c",
        "name" : "country-uk",
        "revision_timestamp" : "2011-07-06T09:09:21.578034",
        "state" : "active"
}
}}}

Hopefully this gist &lt;https://gist.github.com/97447d0b28bf52f3e06b&gt; will illustrate the issue.

&gt; Is it this - returning package names, rather than ids? Here is certainly a bug I'll fix.
&gt; http://test.ckan.net/api/2/rest/tag/country-uk

That was the fifth point on the list.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1214.html">#1214</a>
                          </td>
                          <td class="PosixTime">1310054863000000
                          </td>
                          <td class="author">aron
                          </td>
                          <td class="newvalue">Replying to [comment:5 dread]:
&gt; Deleting an extra using 'null' works for me:
Hmm, it works for me too when there are other keys remaining in the "extras" object. However I can't seem to delete the last one. Take the following example.

{{{
curl -i -XPUT -d'{"extras": {"Tester": null}}' -H"X-CKAN-Type: application/json" http://test.ckan.net:80/api/2/rest/package/ec9cb930-d15f-441f-a1e1-36f4d5df19bf
}}}

Gives:

{{{
{ "author" : "",
  "author_email" : "",
  "extras" : [ { "id" : "88cc50ca-9e29-4499-a542-09d364f5f64f",
        "key" : "Tester",
        "package_id" : "ec9cb930-d15f-441f-a1e1-36f4d5df19bf",
        "revision_id" : "e5c3ca9c-1dae-4a86-837f-b8c19ac31964",
        "revision_timestamp" : "2011-07-07T16:01:05.696025",
        "state" : "active",
        "value" : "\"Test Value\""
      } ],
  "groups" : [  ],
  "id" : "ec9cb930-d15f-441f-a1e1-36f4d5df19bf",
  "license_id" : "",
  "maintainer" : "aron",
  "maintainer_email" : "",
  "name" : "my-test-package",
  "notes" : "Heading\r\n===\r\nThis _is_ some text",
  "relationships_as_object" : [  ],
  "relationships_as_subject" : [  ],
  "resources" : [  ],
  "revision_id" : "688d33fb-5629-4ab3-9f59-a649fc7caa00",
  "revision_timestamp" : "2011-07-06T10:37:50.182894",
  "state" : "active",
  "tags" : [ { "id" : "600dc72e-6127-4704-b801-bee00474ec0c",
        "name" : "test-tag",
        "revision_timestamp" : "2011-07-06T09:09:21.578034",
        "state" : "active"
      } ],
  "title" : "My Test Package",
  "url" : "",
  "version" : ""
}
}}}
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1214.html">#1214</a>
                          </td>
                          <td class="PosixTime">1310055169000000
                          </td>
                          <td class="author">aron
                          </td>
                          <td class="newvalue">Another edge case that popped up while verifying the above issues. A PUT request without a body throws a 500 Internal Sever Error

{{{
curl -i -XPUT  -H"X-CKAN-API-KEY: tester" -H"Content-Type: application/json" http://test.ckan.net:80/api/2/rest/package/ec9cb930-d15f-441f-a1e1-36f4d5df19bf
}}}
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1214.html">#1214</a>
                          </td>
                          <td class="PosixTime">1310057942000000
                          </td>
                          <td class="author">aron
                          </td>
                          <td class="newvalue">One more for today. Please do let me know if I should be filing these as separate tickets?

For some reason performing a search query for packages with an underscore "_ " as a query string key fails to return any results.

{{{
curl "http://test.ckan.net/api/2/search/package?q=osm"
}}}

Gives me 4 results.

{{{
curl "http://test.ckan.net/api/2/search/package?q=osm&amp;_=1310056826904"
}}}

Gives me none.

The underscore is generally used by JavaScript libraries as a way of bypassing the browser cache when making JSONP calls. It's easily worked around but is odd none the less.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1214.html">#1214</a>
                          </td>
                          <td class="PosixTime">1310062570000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixes have gone into the branch for "Tag returned as a JSON object when updating but as a string when requesting. Same with "extras" content." and "Doesn't return rendered_text property on package update.".

I've added DELETE to the Access-Control-Allow-Methods on the server, so you can try that now.

I've added a failing test for the problem of deleting the last extra. Am discussing with David Raznick how to fix that best.

I think the only other ones left to address are: 
 * Relationships use "object" key rather than id or package_id.
 * underscore in search parameters
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1214.html">#1214</a>
                          </td>
                          <td class="PosixTime">1310062621000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">I believe "A PUT request without a body throws a 500 Internal Sever Error" was fixed yesterday in the code. (Not deployed to test.ckan.net yet though)
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1214.html">#1214</a>
                          </td>
                          <td class="PosixTime">1310067327000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">  Relationships use "object" key rather than id or package_id.
I'm not totally clear on this one. The URLs for relationship editing can be package ids or names. When you GET a relationship packages are referred to in IDs for v2 API. When you create or update a relationship it returns package IDs for v2 API. Are you referring to the relationships listed in the response when you PUT a package? (If so that would be fixed by my previous fix.)
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1214.html">#1214</a>
                          </td>
                          <td class="PosixTime">1310067831000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">  underscore in search parameters
I think its trying to filter search results by values of an extra field called "_", even though this probably doesn't occur. If it is not too ugly, I suggest using one of your other ideas for solving the cache issue. I suggest you bring it up with Rufus or the ckan-dev list to get opinions.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1214.html">#1214</a>
                          </td>
                          <td class="PosixTime">1310072808000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">I've put the fixes onto test.ckan.net - repoen the ticket if there are any issues.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1214.html">#1214</a>
                          </td>
                          <td class="PosixTime">1310396399000000
                          </td>
                          <td class="author">aron
                          </td>
                          <td class="newvalue">The groups property in the package resource is always empty (or is for all packages I have viewed).

The following group lists one package.

{{{
http://test.ckan.net/api/2/rest/group/0ac963e7-ba29-49bc-83c8-98f8c1991649
}}}

But when viewing the package the groups array is empty.

{{{
http://test.ckan.net/api/2/rest/package/758c26d4-5949-4347-8b4d-023374146d94
}}}

                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1214.html">#1214</a>
                          </td>
                          <td class="PosixTime">1314029628000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This appears to have been fixed by version 1.4.3.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1215.html">#1215</a>
                          </td>
                          <td class="PosixTime">1310335541000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed cset: 8a317eadbb36

If you delete the last row then it just clears it instead of deleting the row.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1215.html">#1215</a>
                          </td>
                          <td class="PosixTime">1310385485000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This is now deployed on ckan.net (requires Ctrl-R to reload js).
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1217.html">#1217</a>
                          </td>
                          <td class="PosixTime">1320663277000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">I haven't seen this for a while - could have been due to database corruption which has been fixed.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1218.html">#1218</a>
                          </td>
                          <td class="PosixTime">1310385419000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This has been done in cset:bd0f83a2e287 for release 1.4.2. Deployed to ckan.net.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1219.html">#1219</a>
                          </td>
                          <td class="PosixTime">1310471415000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This is a known issue and of low importance.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1219.html">#1219</a>
                          </td>
                          <td class="PosixTime">1310670324000000
                          </td>
                          <td class="author">erilem
                          </td>
                          <td class="newvalue">The issue is due to IE7 (and IE6) not supporting {{{inline-block}}}. [attachment:patch-1219-A0.diff] works around the issue.

I'm reopening this ticket in case you want to consider my patch.

But note that I won't be offended if you close it as wontfix again. I agree this is pretty minor, and that working around old browsers' limitations isn't always a good idea.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1219.html">#1219</a>
                          </td>
                          <td class="PosixTime">1310740534000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Patch applied in cset:8c05d27db224 for 1.4.2 release.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1221.html">#1221</a>
                          </td>
                          <td class="PosixTime">1310475683000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Exception details:
{{{
Module ckan.controllers.user:194 in request_reset
&lt;&lt;                  h.flash_error(_('No such user: %s') % id)
                   try:
                       mailer.send_reset_link(user)
                       h.flash_success(_('Please check your inbox for a reset code.'))
                       redirect('/')
&gt;&gt;  mailer.send_reset_link(user)
Module ckan.lib.mailer:69 in send_reset_link
&lt;&lt;  def send_reset_link(user):
           user.reset_key = make_key()
           model.Session.add(user)
           model.Session.commit()
&gt;&gt;  user.reset_key = make_key()
AttributeError: 'NoneType' object has no attribute 'reset_key'
}}}
                          </td>
              </tr>
          </tbody>
      </table>
      <div class="paging">
    <span class="previous">
      <a href="23%3Fsort=ticket&amp;asc=1&amp;page=20.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=11.html" title="Page 11">11</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=12.html" title="Page 12">12</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=13.html" title="Page 13">13</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=14.html" title="Page 14">14</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=15.html" title="Page 15">15</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=16.html" title="Page 16">16</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=17.html" title="Page 17">17</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=18.html" title="Page 18">18</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=19.html" title="Page 19">19</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=20.html" title="Page 20">20</a>
      </span>
      <span>
        <span class="current">21</span>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=22.html" title="Page 22">22</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=23.html" title="Page 23">23</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=24.html" title="Page 24">24</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=25.html" title="Page 25">25</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=26.html" title="Page 26">26</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=27.html" title="Page 27">27</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=28.html" title="Page 28">28</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=29.html" title="Page 29">29</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=30.html" title="Page 30">30</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=31.html" title="Page 31">31</a>
      </span>
    <span class="next">
      <a href="23%3Fsort=ticket&amp;asc=1&amp;page=22.html" title="Next Page">→</a>
    </span>
</div>
      <div id="help"><strong>Note:</strong>
        See <a href="../wiki/TracReports.html">TracReports</a> for help on using and creating reports.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="23%3Fsort=ticket&amp;asc=1&amp;format=rss" class="rss">RSS Feed</a>
        </li><li>
          <a rel="nofollow" href="23%3Fsort=ticket&amp;asc=1&amp;format=csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="23%3Fsort=ticket&amp;asc=1&amp;format=tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="../report%3Fid=23&amp;format=sql">SQL Query</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.3</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>