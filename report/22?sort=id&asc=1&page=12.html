<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      {22} Trac tickets – CKAN
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">window.location.hash = window.location.hash;</script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="22%3Fsort=id&amp;asc=1&amp;format=rss" type="application/rss+xml" class="rss" title="RSS Feed" /><link rel="alternate" href="22%3Fsort=id&amp;asc=1&amp;format=csv" type="text/plain" title="Comma-delimited Text" /><link rel="alternate" href="22%3Fsort=id&amp;asc=1&amp;format=tab" type="text/plain" title="Tab-delimited Text" /><link rel="alternate" href="../report%3Fid=22&amp;format=sql" type="text/plain" title="SQL Query" />
        <link rel="up" href="../report.html" title="Available Reports" />
        <link rel="next" href="22%3Fsort=id&amp;asc=1&amp;page=13.html" title="Next Page" />
        <link rel="start" href="../wiki.1.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/report.css" type="text/css" />
        <link rel="prev" href="22%3Fsort=id&amp;asc=1&amp;page=11.html" title="Previous Page" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search CKAN" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://ckan.org/"><img src="http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png" alt="CKAN Trac" height="70" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../login.html">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li><a href="../about.html">About Trac</a></li><li class="last"><a href="../register.html">Register</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li><a href="../search.html">Search</a></li><li class="last"><a href="../wiki.1.html">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="../report.html">Available Reports</a></li><li class="last"><a href="../query.html">Custom Query</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="report">
      <h1>{22} Trac tickets
        <span class="numrows">(2647 matches)</span>
      </h1>
      <form method="get" action="22%3Fsort=id&amp;asc=1&amp;page=12.html">
        <div id="prefs">
          <div>
            <label>
              Max items per page
              <input type="text" name="max" size="10" value="100" />
            </label>
          </div>
          <div class="buttons">
            <input type="submit" value="Update" />
          </div>
        </div>
      </form>
      <div id="description">
        <p>
<a class="ext-link" href="https://github.com/roskakori/tratihubis/blob/master/query_tickets.sql"><span class="icon">​</span>https://github.com/roskakori/tratihubis/blob/master/query_tickets.sql</a>
</p>

      </div>
      <div class="buttons">
      </div>
      <h2 class="report-result">
        Results <span class="numresults">(1101 - 1200 of 2647)</span>
      </h2>
      <div class="paging">
    <span class="previous">
      <a href="22%3Fsort=id&amp;asc=1&amp;page=11.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=2.html" title="Page 2">2</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=3.html" title="Page 3">3</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=4.html" title="Page 4">4</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=5.html" title="Page 5">5</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=6.html" title="Page 6">6</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=7.html" title="Page 7">7</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=8.html" title="Page 8">8</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=9.html" title="Page 9">9</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=10.html" title="Page 10">10</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=11.html" title="Page 11">11</a>
      </span>
      <span>
        <span class="current">12</span>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=13.html" title="Page 13">13</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=14.html" title="Page 14">14</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=15.html" title="Page 15">15</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=16.html" title="Page 16">16</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=17.html" title="Page 17">17</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=18.html" title="Page 18">18</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=19.html" title="Page 19">19</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=20.html" title="Page 20">20</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=21.html" title="Page 21">21</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=22.html" title="Page 22">22</a>
      </span>
    <span class="next">
      <a href="22%3Fsort=id&amp;asc=1&amp;page=13.html" title="Next Page">→</a>
    </span>
</div>
      <table class="listing tickets">
          <thead>
        <tr class="trac-columns">
          <th class="asc">
            <a href="22%3Fsort=id&amp;asc=0&amp;page=12.html">
              Id
            </a>
          </th><th>
            <a href="22%3Fsort=type&amp;asc=1&amp;page=12.html">
              Type
            </a>
          </th><th>
            <a href="22%3Fsort=owner&amp;asc=1&amp;page=12.html">
              Owner
            </a>
          </th><th>
            <a href="22%3Fsort=reporter&amp;asc=1&amp;page=12.html">
              Reporter
            </a>
          </th><th>
            <a href="22%3Fsort=milestone&amp;asc=1&amp;page=12.html">
              Milestone
            </a>
          </th><th>
            <a href="22%3Fsort=status&amp;asc=1&amp;page=12.html">
              Status
            </a>
          </th><th>
            <a href="22%3Fsort=resolution&amp;asc=1&amp;page=12.html">
              Resolution
            </a>
          </th><th>
            <a href="22%3Fsort=summary&amp;asc=1&amp;page=12.html">
              Summary
            </a>
          </th><th>
            <a href="22%3Fsort=description&amp;asc=1&amp;page=12.html">
              Description
            </a>
          </th><th>
            <a href="22%3Fsort=PosixTime&amp;asc=1&amp;page=12.html">
              Posixtime
            </a>
          </th><th colspan="100">
            <a href="22%3Fsort=ModifiedTime&amp;asc=1&amp;page=12.html">
              Modifiedtime
            </a>
          </th>
        </tr>
          </thead>
          <tbody>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1110.html">#1110</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1110.html">profile ckan</a>
                          </td>
                          <td class="description">
                            <p>
We need to see what areas of ckan are slow.
</p>

                            
                          </td>
                          <td class="PosixTime">1303840041000000
                          </td>
                          <td class="ModifiedTime">1340034394000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1111.html">#1111</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">lucychambers
                          </td>
                          <td class="reporter">lucychambers
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1111.html">FAQ - For CKAN</a>
                          </td>
                          <td class="description">
                            <p>
Write CKAN FAQ (Basis can be: <a class="ext-link" href="http://wiki.ckan.net/FAQ"><span class="icon">​</span>http://wiki.ckan.net/FAQ</a>) 
</p>
<p>
Post preliminary questions on: 
</p>
<p>
<a class="ext-link" href="http://notebook.okfn.org/"><span class="icon">​</span>http://notebook.okfn.org/</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1303906561000000
                          </td>
                          <td class="ModifiedTime">1305881039000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1112.html">#1112</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-7.html">ckan-v1.4-sprint-7</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1112.html">Allow searching for all packages</a>
                          </td>
                          <td class="description">
                            <pre class="wiki">GET api/search/package?q=
</pre><p>
returns all packages. This is so you can filter them e.g. by openness, which is not currently possible.
</p>

                            
                          </td>
                          <td class="PosixTime">1304007852000000
                          </td>
                          <td class="ModifiedTime">1304358643000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1113.html">#1113</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1113.html">lists in extras serialized wrongly on get with the api.</a>
                          </td>
                          <td class="description">
                            <p>
Lists are being converted to unicode and then translated into a json when getting from the api.
</p>

                            
                          </td>
                          <td class="PosixTime">1304017353000000
                          </td>
                          <td class="ModifiedTime">1304024611000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1114.html">#1114</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-7.html">ckan-v1.4-sprint-7</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1114.html">CLI for viewing search index of a package</a>
                          </td>
                          <td class="description">
                            <p>
To see what lexemes are generated for debug purposes.
</p>

                            
                          </td>
                          <td class="PosixTime">1304078353000000
                          </td>
                          <td class="ModifiedTime">1304085484000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1115.html">#1115</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1115.html">can have two authzgroups with the same name</a>
                          </td>
                          <td class="description">
                            <p>
If you've got edit permission on an authzgroup, then you can change its name to be the same as another existing authzgroup.
</p>
<p>
This causes some strange UI effects at worst, and probably causes worse problems somewhere else.
</p>
<p>
Is there any reason why changing the names of existing authzgroups should be allowed? And if so, name collisions should presumably be guarded against in both the name-changing and creation functions
</p>

                            
                          </td>
                          <td class="PosixTime">1304085120000000
                          </td>
                          <td class="ModifiedTime">1324054704000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1116.html">#1116</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-7.html">ckan-v1.4-sprint-7</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1116.html">api search loses boolean q options</a>
                          </td>
                          <td class="description">
                            <p>
filter_by_openness and filter_by_downloadable options don't work when specified as URI parameters. (They do work in qjson parameters)
</p>

                            
                          </td>
                          <td class="PosixTime">1304086823000000
                          </td>
                          <td class="ModifiedTime">1304358664000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1117.html">#1117</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">thejimmyg
                          </td>
                          <td class="reporter">nils.toedtmann
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1117.html">Depend deb package "ckan" against ubuntu package "python-pastescript"</a>
                          </td>
                          <td class="description">
                            <p>
... otherwise the scripts fails.
</p>

                            
                          </td>
                          <td class="PosixTime">1304089619000000
                          </td>
                          <td class="ModifiedTime">1304277240000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1118.html">#1118</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1118.html">tests are testing something other than the behaviour seen in the browser</a>
                          </td>
                          <td class="description">
                            <p>
I'm finding that if I try to take an action with insufficient credentials from a test then I often (but not always) get a 401 error, whereas in the browser I get redirected to the login page.
</p>
<p>
It's a bit worrying that the program in its test environment doesn't behave like it does in the browser.
</p>

                            
                          </td>
                          <td class="PosixTime">1304093017000000
                          </td>
                          <td class="ModifiedTime">1311174062000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1119.html">#1119</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-7.html">ckan-v1.4-sprint-7</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1119.html">Fully functional storage extension with file upload</a>
                          </td>
                          <td class="description">
                            <p>
Previous work in <a class="closed ticket" href="../ticket/877.html" title="enhancement: File upload in WUI (extension) (closed: fixed)">#877</a> and <a class="closed ticket" href="../ticket/879.html" title="enhancement: Storage auth API (closed: fixed)">#879</a> + <a class="closed ticket" href="../ticket/853.html" title="enhancement: Client upload to storage without having primary storage keys (closed: fixed)">#853</a> (storage API). In this ticket:
</p>
<ul><li>Improve authorization
</li><li>Establish convention for laying out files on disk
</li><li>Add documentation
</li><li>Fix bugs with <a class="closed ticket" href="../ticket/879.html" title="enhancement: Storage auth API (closed: fixed)">#879</a> (does not currently work -- boto may have changed)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1304094382000000
                          </td>
                          <td class="ModifiedTime">1305037201000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1120.html">#1120</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">tsm
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1120.html">Atom feeds of each tag</a>
                          </td>
                          <td class="description">
                            <p>
Tags could/should have an Atom feed. This would mean that every edit to relevant packages could be easily monitored. See <a class="missing changeset" title="No default repository defined">[1]</a>.
</p>
<p>
<a class="missing changeset" title="No default repository defined">[1]</a> <a class="ext-link" href="http://lists.okfn.org/pipermail/ckan-discuss/2011-May/001162.html"><span class="icon">​</span>http://lists.okfn.org/pipermail/ckan-discuss/2011-May/001162.html</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1304309285000000
                          </td>
                          <td class="ModifiedTime">1339774568000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1121.html">#1121</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1121.html">JSON extras appear in package edit form mangled</a>
                          </td>
                          <td class="description">
                            <p>
It is possible to use the CKAN API to insert JSON format data into package extra values, but this data is displayed in the package edit form.
</p>
<p>
Example: Package <a class="ext-link" href="http://ckan.net/package/hbz_unioncatalog"><span class="icon">​</span>http://ckan.net/package/hbz_unioncatalog</a> in the API the extra value as a list:
</p>
<pre class="wiki">"extras": {"publishingInstitution": ["http://lobid.org/organisation/DE-605", "http://lobid.org/organisation/DE-290"...
</pre><p>
yet when you edit the package it loses all the quotes and brackets: <a class="ext-link" href="http://ckan.net/package/edit/hbz_unioncatalog"><span class="icon">​</span>http://ckan.net/package/edit/hbz_unioncatalog</a>
{{{<a class="ext-link" href="http://lobid.org/organisation/DE-605http://lobid.org/organisation/DE-290"><span class="icon">​</span>http://lobid.org/organisation/DE-605http://lobid.org/organisation/DE-290</a>...
}}}
so when you save the package, the list is mangled into a bad string.
</p>

                            
                          </td>
                          <td class="PosixTime">1304367504000000
                          </td>
                          <td class="ModifiedTime">1307358426000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1122.html">#1122</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1122.html">JSON Extra data not searchable</a>
                          </td>
                          <td class="description">
                            <p>
It is possible to use the CKAN API to insert JSON format data into package extra values, but this data is not found on searching.
</p>
<p>
Full text from Pascal:
</p>
<pre class="wiki">we encountered a Problem concerning accessing Arrays/Lists.

curl -XGET 'http://ckan.net/api/rest/package/hbz_unioncatalog'

will get you amongst others:

 "extras": {"publishingInstitution":
"[u'http://lobid.org/organisation/DE-605',
u'http://lobid.org/organisation/DE-290',
u'http://lobid.org/organisation/DE-38M',
u'http://lobid.org/organisation/DE-98',
u'http://lobid.org/organisation/DE-38',
u'http://lobid.org/organisation/DE-Kn41',
u'http://lobid.org/organisation/DE-82',
u'http://lobid.org/organisation/DE-107',
u'http://lobid.org/organisation/DE-929',
u'http://lobid.org/organisation/DE-Zw1',
u'http://lobid.org/organisation/DE-832']"}

but if I try to query this:

wget
'http://ckan.net/api/search/package?q=lobid&amp;publishingInstitution="http://lobid.org/organisation/DE-605"'

I get only two packages, among the package "hbz_unioncatalog" is
missing. (These two packages have only one value for
"publishingInstitution").

The "extra/publishingInstitution"-Array was uploaded through a "curl
-XPUT ...
 "extras": {
   "publishingInstitution":[
     "http://lobid.org/organisation/DE-605",
     "http://lobid.org/organisation/DE-290",
     "http://lobid.org/organisation/DE-38M",
     "http://lobid.org/organisation/DE-98",
     "http://lobid.org/organisation/DE-38",
     "http://lobid.org/organisation/DE-Kn41",
     "http://lobid.org/organisation/DE-82",
     "http://lobid.org/organisation/DE-107",
     "http://lobid.org/organisation/DE-929",
     "http://lobid.org/organisation/DE-Zw1",
     "http://lobid.org/organisation/DE-832"
   ]
   },
...
</pre>
                            
                          </td>
                          <td class="PosixTime">1304367510000000
                          </td>
                          <td class="ModifiedTime">1306747714000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1123.html">#1123</a>
                          </td>
                          <td class="type">requirement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">nils.toedtmann
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1123.html">Please re-package CKAN packages as "noarch"</a>
                          </td>
                          <td class="description">
                            <p>
... or, if the CKAN packages do contain architecture-specific binary code, build packages for i386 too. 
</p>
<p>
Currently, <a class="ext-link" href="http://apt-alpha.ckan.org/debian"><span class="icon">​</span>http://apt-alpha.ckan.org/debian</a> only offers packages for amd64, but e.g. "m1.small" EC2 instances are i386.
</p>
<p>
We would need this in order to migrate the community instances to a packaged based CKAN.
</p>
<p>
Rufus, pls prioritise.
</p>

                            
                          </td>
                          <td class="PosixTime">1304530050000000
                          </td>
                          <td class="ModifiedTime">1311863806000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1124.html">#1124</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">thejimmyg
                          </td>
                          <td class="reporter">nils.toedtmann
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-12-05.html">ckan-sprint-2011-12-05</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1124.html">push apt package python-ckanext-solr into our debian repository</a>
                          </td>
                          <td class="description">
                            <p>
python-ckanext-solr is already available in <a class="ext-link" href="http://apt-alpha.ckan.org/datanl-dev"><span class="icon">​</span>http://apt-alpha.ckan.org/datanl-dev</a>, but not yet in <a class="ext-link" href="http://apt-alpha.ckan.org/debian"><span class="icon">​</span>http://apt-alpha.ckan.org/debian</a> (that is why we had to [pip-install it for DataGM). Please push into main repo.
</p>

                            
                          </td>
                          <td class="PosixTime">1304537793000000
                          </td>
                          <td class="ModifiedTime">1323168156000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1125.html">#1125</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">nils.toedtmann
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1125.html">Debian package "ckan" should not depend on "postgresql"</a>
                          </td>
                          <td class="description">
                            <p>
The debian package "ckan" with the two scripts "ckan-create-instance" and "ckan-instance-maintenance" depends against "postgresql". But "ckan-create-instance" is quite handy even when the DB is remote: it creates all the data dirs with the correct permissions, and the ckan and apache configs.
</p>
<p>
Please add a flag "--without-local-db" to "ckan-create-instance" and remove the postgres dependancy from the debain package.
</p>

                            
                          </td>
                          <td class="PosixTime">1304538095000000
                          </td>
                          <td class="ModifiedTime">1310134813000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1126.html">#1126</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-7.html">ckan-v1.4-sprint-7</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1126.html">Exceptions arising from error page</a>
                          </td>
                          <td class="description">
                            <p>
I'm not completely clear what the use case is for loading the error page in this way, but somehow original_request is None and that creates an unnecessary exception with the logic refactor.
</p>
<pre class="wiki">http://ckan.net/error/document?__cache=39020485
...
Module ckan.controllers.error:29 in document
&lt;&lt;          original_response = request.environ.get('pylons.original_response')
               # Bypass error template for API operations.
               if original_request.path.startswith('/api'):
                   return original_response.body
               # Otherwise, decorate original response with error template.
&gt;&gt;  if original_request.path.startswith('/api'):
AttributeError: 'NoneType' object has no attribute 'path'
</pre>
                            
                          </td>
                          <td class="PosixTime">1304586683000000
                          </td>
                          <td class="ModifiedTime">1304587078000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1127.html">#1127</a>
                          </td>
                          <td class="type">CREP
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">sebbacon
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1127.html">CREP0001: Formalise new feature discussion and definition using CREPs</a>
                          </td>
                          <td class="description">
                            <p>
<strong>Proposer:</strong> Seb Bacon<br />
<strong>Seconder:</strong> Rufus Pollock<br />
<br />
</p>
<h2 id="Abstract">Abstract</h2>
<p>
When adding major new features to CKAN, a longer, more formal discussion 
will improve software design quality and documentation, better engage
the wider community, and ensure the core team are up to date with
latest developments.  
</p>
<p>
I propose a formal process (CREP -- CKAN Revision and Enhancement Proposal) for making this happen.
</p>
<h2 id="TheProblem">The Problem</h2>
<p>
The current workflow for introducing major new features into CKAN is
very informal, typically based around one person's great idea, which
they've discussed with one or two other people in the team.  The
originator of the idea is typically the only person with access to 
all the input they've had through such discussions.  Often, the only 
location of this information is  in that person's head.
</p>
<p>
However, there is a lot of experience embodied in the CKAN community
which should be drawn on before making large design decisions.  This
will lead to better software.  Additionally, building consensus in the
community around a proposal before implementation ensures positive
community engagement and buy-in to new features, making them more
likely to be a success.
</p>
<p>
We aren't great at documenting new features.  Documentation after
coding is complete is an unrewarding experience for most programmers.
Requiring skeleton documentation before code is written is a good
discipline that can form the basis of better documentation in the
future (e.g. by a writer rather than a programmer).
</p>
<h2 id="Specification">Specification</h2>
<p>
Minor features don't require a CREP, and can just be entered in the
issue tracking system as a bug or feature.  As a rule of thumb, a
feature is major if it will take more than a day to implement, or is
likely to involve matters of opinion in its design.
</p>
<p>
A developer may decide that a CREP is too formal and long-winded. The 
decision to write a CREP is at at their discretion; however, new 
features MUST always be proposed via email, even if this is just a 
couple of sentences.
</p>
<p>
If a feature requires a CREP, the proposer should find a seconder
for their idea.  This sanity check step happens before a CREP is
written to ensure at least the possibility of consensus on the CREP.
</p>
<p>
Next the proposer should write a CREP, starting by copying and pasting
the <a class="ext-link" href="http://wiki.ckan.net/CKAN_Revision_and_Enhancement_Proposals"><span class="icon">​</span>template on the wiki</a> into a new Trac ticket.  This will be with a status of "new" and Type of "CREP".  The proposer should notify
the <a class="ext-link" href="http://lists.okfn.org/mailman/listinfo/ckan-dev"><span class="icon">​</span>ckan-dev</a> mailing
list, and possibly the
<a class="ext-link" href="http://lists.okfn.org/mailman/listinfo/ckan-discuss"><span class="icon">​</span>ckan-discuss</a>
list for less technical CREPs.
</p>
<p>
The draft can be discussed via email, verbally, or via the trac
ticket.  In any case, it is the proposer's responsibility to keep the
CREP updated to reflect the current consensus.
</p>
<p>
Once consensus has been reached, the ticket should be marked with the
"accepted" status and assigned to a CKAN release milestone.
</p>
<p>
When an accepted CREP has been implemented, it should be resolved as
"fixed".
</p>
<p>
If no consensus can be reached on a draft CREP, or for some reason an
accepted CREP doesn't get completed, it should be marked as or "wontfix".
</p>
<p>
If a completed CREP becomes obsolete, it should be marked as "invalid", 
with a note pointing to the obsoleting ticket(s)
</p>
<h2 id="Whydoitthisway">Why do it this way</h2>
<p>
Given the distributed nature of the core team plus other volunteers,
some kind of written procedure is necessary to ensure a fully
documented and discussed proposal.
</p>
<p>
The idea of "Enhancement Proposals" which can be semi-formally
proposed and discussed prior to implementation is common in the Open
Source world (<a class="ext-link" href="http://www.python.org/dev/peps/pep-0001/"><span class="icon">​</span>PEPs</a>,
<a class="ext-link" href="http://dep.debian.net/"><span class="icon">​</span>DEPs</a>,
<a class="ext-link" href="http://plone.org/documentation/glossary/plip"><span class="icon">​</span>PLIPs</a>, to name three).
</p>
<p>
Existing historic proposals exist, called CEPs.  The proposed system
is called CREP (CKAN revision or enhancement proposal) to disambiguate
it from the legacy proposals, and from the delicious fungus <em>Boletus
Edulis</em>.
</p>
<p>
Giving a formal structure to the proposal is useful as it gives the
community a means to identify a CREP that's not had sufficient thought
or discussion.  An informal email thread can easily be lost and
important questions (such as backwards compatibility) overlooked.  The
use of the proposed template empowers any community member to ask the
proposer to expand on rationale, deliverables, etc.
</p>
<p>
The structure chosen is somewhere between Debian's and Plone's.  It
aims to give a structure to the debate, a clear start at
documentation, and also prompt some thinking about implementation and
timescales.
</p>
<p>
All this policy about structure should not be construed as mandatory.  
In particular, the later fields in the CREP template regarding 
Implementation Plan may be omitted if the author doesn't find them 
helpful.
</p>
<p>
Some projects (e.g. Debian) keep their enhancement proposals in a
versioning repository; others (e.g. Plone) keep them in an issue
tracking system.  Trac is proposed for CKAN because we already use it
for small feature proposals and for team planning.  It seems unlikely
that change tracking on an individual CREP will be useful; a CREP that
changes sufficiently from its original form should probably be marked
"obselete" and a new CREP started.  Using an issue tracking system also
means we can easily track CREPs by state.
</p>
<h2 id="BackwardsCompatibility">Backwards Compatibility</h2>
<p>
Some [<a class="ext-link" href="https://bitbucket.org/okfn/ceps/src/76b274888bcf/cep/"><span class="icon">​</span>https://bitbucket.org/okfn/ceps/src/76b274888bcf/cep/</a> legacy 
enhancement proposals], called CEPs, have previously been started.
</p>
<p>
They are currently all marked as "active".  Any which require
discussion should be altered by the proposer to match the new CREP
specification and submitted to trac.  The original CEP should be
updated with a banner at the top pointing a reader to the new CREP.
</p>
<p>
Any that are now obselete should be clearly marked as such in a banner
at the top, pointing a reader to the trac for new CREPs.
</p>
<h2 id="Implementationplan">Implementation plan</h2>
<h3 id="Deliverables">Deliverables</h3>
<ul><li>This CREP, agreed
</li><li>Support for proposed statuses in Trac
</li><li>Canned reports for listing CREPs in Trac
</li></ul><h3 id="Risksandmitigations">Risks and mitigations</h3>
<ul><li>That this CREP is agreed, but rarely acted on.  This risk can be
mitigated by nominating a CREP champion in the community or core
team, whose job it is to say "where's the CREP for that?" and
generally own the quality of CREPS
</li></ul><h3 id="Participants">Participants</h3>
<p>
Seb Bacon: as current Documentation Czar (May 2011), responsible for 
ensuring CREPs are up to date.
</p>
<h3 id="Progress">Progress</h3>
<p>
This document is the entire proposal.
</p>

                            
                          </td>
                          <td class="PosixTime">1304601313000000
                          </td>
                          <td class="ModifiedTime">1305622850000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1128.html">#1128</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1128.html">Upload Scotland gov data</a>
                          </td>
                          <td class="description">
                            <p>
Upload to ckan.net:
<a class="ext-link" href="https://sites.google.com/site/scotlandsdata/"><span class="icon">​</span>https://sites.google.com/site/scotlandsdata/</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1304712293000000
                          </td>
                          <td class="ModifiedTime">1310568028000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1129.html">#1129</a>
                          </td>
                          <td class="type">CREP
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1129.html">CREP0002: Moderated  Edits</a>
                          </td>
                          <td class="description">
                            <p>
<strong>Proposer:</strong> David Raznick<br />
</p>
<h2 id="Abstract.">Abstract.</h2>
<p>
We are trying to achieve these goals.
</p>
<ul><li>To get people involved with making edits to CKAN metadata. 
</li><li>To have an ownership model as to who can moderate and validate these changes
</li><li>To not put too huge a burden on these owners.
</li></ul><p>
In order to achieve this, a feature which lets anyone edit a package but only let the moderator/owner accept it.  The moderator should be able to look at a list of changes and accept the ones that
</p>
<p>
This cep is not about 'if' we need such a feature, it is about 'how' we go about implementing it. Another cep may needed for the 'if' case.
</p>
<h2 id="TheProblem">The Problem</h2>
<p>
We need the following to be possible.
</p>
<ul><li>Storing revision of objects that are not the current active one.
</li><li>A way of the user viewing past revisions.
</li><li>Accessing not only the history of a particular object but also of related objects at that time. i.e If a resource related to a package changes we need a way to see this when looking at the package.
</li><li>A robust way of doing this in the face of database schema changes.
</li><li>Make sure database queries are quick.
</li></ul><h2 id="Solutions.">Solutions.</h2>
<ol><li> Store the whole dictization of the package and all its related objects every time you change anything in its dictized representation and only save to the database proper if accepted.
</li></ol><blockquote>
<p>
Pros
</p>
</blockquote>
<ul><li>Easy to implement, we already have a preview which makes the dictized form of a package without actually saving it.  This will just need to be persisted in some way.
</li><li>Fast retrieval.
</li><li>Potential to store a branching revision tree of changes.
</li></ul><blockquote>
<p>
Cons
</p>
</blockquote>
<ul><li>No easy way to remake the dictized packages historically or if there is an there a change in the way we represent packages, i.e schema changes.
</li><li>Will only work for the particular objects we decide to store these changes for.
</li><li>Stores a lot of repeated information
</li></ul><ol start="2"><li> Write specialized queries for every read of the database looking only at the revision tables.
</li></ol><p>
This method requires there to be a change in the way we use VDM, so that we manage statefulness ourselves. We will need to add other states such as 'waiting for approval'.
</p>
<blockquote>
<p>
Pros
</p>
</blockquote>
<ul><li>No specialized storage required
</li><li>Only need to change queries when schema changes
</li><li>Can be made to work easily for other objects
</li></ul><blockquote>
<p>
Cons
</p>
</blockquote>
<ul><li>Slower query time on read, as even looking at the last active package will need to do a fairly complicated query.
</li></ul><h2 id="Implementationdetails.">Implementation details.</h2>
<p>
1.
</p>
<blockquote>
<p>
A new table with columns  id, user, package_id, timestamp, revision_id, parent_id, dictized_package.
revision_id should be null unless it is actually persisted to the database.  parent_id is the id that this package_dict was changed from.
</p>
</blockquote>
<blockquote>
<p>
We could store only the diffs of the dictized_package as long as we assure that everything inside the json is stably sorted, this will make getting the historical data out slower.
</p>
</blockquote>
<blockquote>
<p>
Getting out the history of the dictized packages is an intensive task, as it will require replaying the whole history of all the changes and creating the dict for each change.  This re-caching will need to be redone for every change we make to dictized representation of a package.
</p>
</blockquote>
<p>
2.
</p>
<blockquote>
<p>
Every normal packages read needs to look at the revision table to see the last accepted change in the dictized representation of the package. 
We also need to way to get what the dictized representation of the package was like at any point of its revision history.  This querying is non-trivial in sql.
</p>
</blockquote>
<h3 id="Participants">Participants</h3>
<p>
David Raznick to do it.
</p>
<h2 id="Progress.">Progress.</h2>
<p>
Decided to go with option 2. However we will change the revisioning system to be like the schema attached.
This gets rid of difficult querying problems caused by querying the revision tables by adding an end date, meaning you can do range queries.
</p>
<p>
The better and more normalized version of a revisioning system is outlined <a class="ext-link" href="https://docs.google.com/drawings/d/1Y7nMgVsrs081Pame2RdbZHlCAlV33ddTZ8VAsab1j-0/edit?hl=en_GB&amp;authkey=CJfd8vsB"><span class="icon">​</span>https://docs.google.com/drawings/d/1Y7nMgVsrs081Pame2RdbZHlCAlV33ddTZ8VAsab1j-0/edit?hl=en_GB&amp;authkey=CJfd8vsB</a>. 
We will be a step closer to that, with this change, but we will keep the current vdm more or less, intact.
</p>

                            
                          </td>
                          <td class="PosixTime">1304851498000000
                          </td>
                          <td class="ModifiedTime">1325268100000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1130.html">#1130</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">lucychambers
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1130.html">First time users</a>
                          </td>
                          <td class="description">
                            <p>
Send users to FAQ first time on CKAN
</p>

                            
                          </td>
                          <td class="PosixTime">1304938761000000
                          </td>
                          <td class="ModifiedTime">1340633514000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1131.html">#1131</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-7.html">ckan-v1.4-sprint-7</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1131.html">Search param validation exception not caught</a>
                          </td>
                          <td class="description">
                            <p>
Example request:
</p>
<pre class="wiki">http://nl.ckan.net/api/2/search/package?q=delft&amp;order_by=&amp;offset=&amp;limit=&amp;tags=
</pre><p>
Gives 500 error:
</p>
<pre class="wiki">&lt;type 'exceptions.ValueError'&gt;: invalid literal for int() with base 10: ''
</pre>
                            
                          </td>
                          <td class="PosixTime">1304942023000000
                          </td>
                          <td class="ModifiedTime">1305537897000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1132.html">#1132</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1132.html">test_authz doesn't run</a>
                          </td>
                          <td class="description">
                            <p>
Trying to run the tests in test_authz.py with
</p>
<p>
$ nosetests --ckan ckan/tests/functional/test_authz.py
results in no tests being run:
</p>
<hr />
<p>
Ran 0 tests in 0.840s
</p>
<p>
OK (SKIP=3)
</p>

                            
                          </td>
                          <td class="PosixTime">1304966923000000
                          </td>
                          <td class="ModifiedTime">1307352675000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1133.html">#1133</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">worksforme
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1133.html">command line rights manipulation doesn't work</a>
                          </td>
                          <td class="description">
                            <p>
It appears that the command
</p>
<p>
$ paster rights add russianfan admin warandpeace
</p>
<p>
has no effect, even though
</p>
<p>
$ paster rights remove russianfan admin warandpeace
</p>
<p>
works fine. This may be specific to something I've done, could someone confirm?
</p>
<p>
If it's the case more generally, then I'm assuming this behaviour is untested? Tests should probably be added.
</p>

                            
                          </td>
                          <td class="PosixTime">1305054948000000
                          </td>
                          <td class="ModifiedTime">1324057072000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1134.html">#1134</a>
                          </td>
                          <td class="type">CREP
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1134.html">CREP0003: Description and Configuration of Harvesters</a>
                          </td>
                          <td class="description">
                            <p>
<strong>Proposer</strong>: Adrià Mercader
</p>
<h2 id="Abstract">Abstract</h2>
<p>
The new harvester interface allows to create harvesters for different
sources, but right now harvesters don't have many ways to describe and
configure themselves. We need a way of allowing them to:
</p>
<ul><li>Expose their type and other details so they can be used internally
and on the UI.
</li><li>Define configuration settings for particular harvester instances.
</li></ul><h2 id="TheProblem">The Problem</h2>
<h3 id="Harvesterdescription">Harvester description</h3>
<p>
The current UI for adding and editing harvest sources is the same used
in ckanext-dgu, and thus the 3 harvester types used in DGU to harvest
various GEMINI realted sources are hardcoded in the form. The form will 
be migrated to a DGU-independent one, so we need the harvesters to 
provide all the necessary data. There is a current <tt>get_type</tt> method
that returns the harvester type, but for make it compatible with the DGU
forms, it returns a machine-readable string (e.g. "CSW Server"), making
it error prone.
</p>
<h3 id="Arbitraryconfiguration">Arbitrary configuration</h3>
<p>
In the current implementation, when the harvest process is started,
ckanext-harvest looks for all the available plugins that implement the 
<tt>IHarvester</tt> interface and calls the appropiate methods for the
current stage (<tt>gather_stage</tt>,<tt>fetch_stage</tt>,<tt>import_stage</tt>).
At these stages, harvesters have no way of applying arbitrary
configuration options, so all harvesters of the same type behave on the
same way.
For instance, the CKAN harvester needs a way to define the API version
to use when harvesting remote instances (Right now, the version 2 is
hardcoded on the code).
</p>
<h2 id="Specification">Specification</h2>
<h3 id="Harvesterdescription1">Harvester description</h3>
<p>
Harvesters will need to provide the following information so the UI form
can be built:
</p>
<ul><li>name: machine-readable name (e.g. "waf"). This will be the value
stored in the database, and the one used by ckanext-harvest to
call the appropiate harvester.
</li><li>title: human-readable name (e.g. "Web Accessible Folder (WAF)").
This will appear in the form's select box.
</li><li>description: a description of what the harvester does (e.g. "A Web 
Accessible Folder (WAF) displaying a list of GEMINI 2.1 
documents"). This will appear on the form as a guidance to the
user.
</li></ul><p>
The way to provide it will be an <tt>info</tt> method that all harvesters
must implement, which will return a dictionary with the previous
elements:
</p>
<pre class="wiki">    {
        'name': 'csw',
        'title': 'CSW Server',
        'description': 'A server that implements OGC's Catalog Service 
                        for the Web (CSW) standard'
    }
</pre><h3 id="Arbitraryconfiguration1">Arbitrary configuration</h3>
<p>
As different harvesters will have very different needs, we need to
provide a way to persist arbitrary configuration flags for each harvest
source. The more flexible way given the current architecture in my
opinion would be to store the configuration options as a JSON encoded
object as a property of the harvest source (There already is an unused
DB field called <tt>config</tt> in the database) (Maybe using <a class="missing wiki">JsonType?</a>?).
</p>
<p>
This will mean adding an extra field in the harvest source form to allow
entering the configuration. This could be just a simple text field where
users enter the JSON encoded object or a more clever mechanism (i.e an 
"Add a configuration flag" link that adds two new text fields for the
key and value for each flag, and a mechanism to later build the JSON 
object). In any case, this should probably be hidden in an "Advance
options" section.
</p>
<h2 id="Whydoitthisway">Why do it this way</h2>
<h3 id="Harvesterdescription2">Harvester description</h3>
<p>
The <tt>info</tt> method would provide a single point to get all the
information related to the harvester, and future properties could be 
added to the dictionary returned without having to modify the interface.
</p>
<h3 id="Arbitraryconfiguration2">Arbitrary configuration</h3>
<p>
There is an already existing <tt>config</tt> field in the database, so we
won't need to change the model. 
Harvesters could access the config object at any of the stages. Of
course they could provide default values in their implementations so
users don't need to enter them everytime.
</p>
<h2 id="Implementationplan">Implementation plan</h2>
<h3 id="Deliverables">Deliverables</h3>
<h3 id="Risksandmitigations">Risks and mitigations</h3>
<p>
The highest risk on the harvesters <tt>info</tt> method side is that 
harvester implementation don't offer one of the necessary properties
(namely name and title). This could fire a warning when showing the 
UI form or using the CLI.
</p>
<h3 id="Participants">Participants</h3>
<p>
Adrià Mercader to do it.
</p>
<h3 id="Progress">Progress</h3>
<p>
None yet.
</p>

                            
                          </td>
                          <td class="PosixTime">1305108868000000
                          </td>
                          <td class="ModifiedTime">1339774554000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1135.html">#1135</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1135.html">Changeset model for vdm</a>
                          </td>
                          <td class="description">
                            <p>
Move to Changeset model for vdm.
</p>
<p>
A changeset model is like an Audit-Log model in which we just record Changesets with Change-Objects rather than have Revision-Objects for each Object that is revisioned.
</p>
<p>
This change would also incorporate significant simplication of vdm.
</p>

                            
                          </td>
                          <td class="PosixTime">1305209986000000
                          </td>
                          <td class="ModifiedTime">1340632267000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1136.html">#1136</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1136.html">Move to SessionExtension in vdm</a>
                          </td>
                          <td class="description">
                            <p>
When vdm was created there was no SessionExtension so we use MapperExtension for doing revisioning. Now that <a class="missing wiki">SessionExtension?</a> exists we should use it. We can also follow the existing SQLAlchemy recipe: &lt;<a class="ext-link" href="http://www.sqlalchemy.org/docs/orm/examples.html?highlight=versioning#versioned-objects"><span class="icon">​</span>http://www.sqlalchemy.org/docs/orm/examples.html?highlight=versioning#versioned-objects</a>&gt;
</p>

                            
                          </td>
                          <td class="PosixTime">1305210855000000
                          </td>
                          <td class="ModifiedTime">1340632980000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1137.html">#1137</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1137.html">Remove need for statefulness in vdm</a>
                          </td>
                          <td class="description">
                            <p>
Statefulness, especially statefulness for relation (esp m2m) is cause of most of the complexity in vdm. It is <em>required</em> because, atm, revision objects have FKs to continuity objects.
</p>
<p>
This ticket proposes the following changes:
</p>
<p>
NB: this could be limited just to case of join tables (leaving state stuff on other tables)
</p>
<ul><li>Remove FKs from revision to continuity (or allow for them to be nullable).
<ul><li>We could just limit this to m2m stuff
</li></ul></li><li>Delete of an object leads to:
<ul><li>Deletion of continuity object
</li><li>Adding an entry in revision table with state set to deleted (we retain state on revision table)
</li></ul></li></ul><p>
If this is done we will no longer need to worry about filtering on state on relationships as join table will only contain "active" relationships.
</p>
<p>
If we do this on all tables we remove need for any state awareness in client (e.g. no need to filter tables on active state).
</p>
<p>
The only disadvantage of this change is that undeletion becomes more problematic (we have to recreate some continuity objects).
</p>

                            
                          </td>
                          <td class="PosixTime">1305211628000000
                          </td>
                          <td class="ModifiedTime">1340631974000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1138.html">#1138</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1138.html">minor navigations behave inconsistently</a>
                          </td>
                          <td class="description">
                            <p>
For Authorization Groups, if you have admin privileges you see view, edit and authz tabs, and if you don't have the necessary privileges you only see the view tab.
</p>
<p>
For Packages, you see all tabs whatever your permissions, so there's a link you can click on which will redirect you to the login page.
</p>

                            
                          </td>
                          <td class="PosixTime">1305279888000000
                          </td>
                          <td class="ModifiedTime">1316965357000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1139.html">#1139</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">lucychambers
                          </td>
                          <td class="reporter">lucychambers
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1139.html">Create CKAN Theme Gallery</a>
                          </td>
                          <td class="description">
                            <p>
Take screenshots of existing ckan instances esp those mentioned
&lt;<a class="ext-link" href="http://wiki.ckan.net/Theming"><span class="icon">​</span>http://wiki.ckan.net/Theming</a>&gt; and put on flickr in ckan or ckan-theme
group so we can create a gallery ... (both to illustrate theming but
also to show ckan instances that are around -- could add to
<a class="ext-link" href="http://wiki.ckan.net/Instances"><span class="icon">​</span>http://wiki.ckan.net/Instances</a>)
</p>

                            
                          </td>
                          <td class="PosixTime">1305645859000000
                          </td>
                          <td class="ModifiedTime">1306941356000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1140.html">#1140</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1140.html">Adding the package to the group is not search indexed</a>
                          </td>
                          <td class="description">
                            <p>
To reproduce:
</p>
<ol><li><tt>paster db init</tt>
</li><li><tt>paster create-test-data</tt>
</li><li>In Web UI: create new group 'tilo', which includes package 'annakarenina'
</li><li><tt>curl http://localhost:5000/api/search/package?groups=tilo</tt>  results in 0 results (WRONG)
</li><li><tt>paster search-index rebuild</tt>
</li><li><tt>curl http://localhost:5000/api/search/package?groups=tilo</tt>  results in 1 result
</li></ol>
                            
                          </td>
                          <td class="PosixTime">1305718290000000
                          </td>
                          <td class="ModifiedTime">1312537257000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1141.html">#1141</a>
                          </td>
                          <td class="type">CREP
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnglover
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1141.html">[super] Moderated Edits User Interface</a>
                          </td>
                          <td class="description">
                            <p>
<strong>Proposer</strong>: John Glover<br />
<strong>Seconder</strong>: James Gardner
</p>
<h2 id="Abstract">Abstract</h2>
<p>
We are trying to achieve these goals:
</p>
<ul><li>To get people involved with making edits to CKAN metadata.
</li><li>To have an ownership model as to who can moderate and validate these changes
</li><li>To not put too huge a burden on these owners.
</li></ul><p>
This feature allows anyone to edit a package and create a new revision, but requires an owner/moderator to approve a revision before it is are made "official".
</p>
<p>
There have been a lot of discussions around the revisioning system side of this ticket (CREP 0002) and I think these are now largely resolved. We now want to discuss the user interface.
</p>
<h2 id="TheProblem">The Problem</h2>
<p>
We require the following functionality:
</p>
<ul><li>Allow a group of changes to be stored as a new revision.
</li><li>Allow a linear stack of "community" revisions. 
</li><li>Provide a way for the editor and moderator to compare previous revisions to the current one.
</li><li>When a moderator approves a change it creates a new revision flagged "moderated" (this is analogous to a merge commit)
</li><li>Provide a way for the editor and moderator comment on revisions if necessary.
</li></ul><p>
Extra features:
</p>
<ul><li>Need a way to summarise the changes (as part of the preview perhaps)
</li><li>Sysadmin needs to purge a revision completely
</li></ul><h2 id="Specification">Specification</h2>
<h3 id="UIUX">UI/UX</h3>
<p>
UI Mockup:
</p>
<p>
<a style="padding:0; border:none" href="../attachment/ticket/1141/ModeratedEdits2.png.html"><img src="../raw-attachment/ticket/1141/ModeratedEdits2.png" /></a>
</p>
<p>
Revisions:
</p>
<ul><li>Revisions are per package rather than per field.
</li><li>Internally CKAN has separate revisions for resources, extras and package metadata.  From a user's point of view this could be confusing to expose, so everything that they see on a package form when they hit save is a single revision.
</li></ul><p>
On the Edit page:
</p>
<ul><li>We have a panel on the right, listing all the revisions with the current moderated one selected. Moderated revisions are highligted in some way (red and bold?).
</li><li>The values displayed in the form are by default populated from the latest revision (whether community or moderated)
</li><li>Under each field is a "shadow", showing the value of the field in the revision selected in the panel, if it is different from the value in the field. By default the shadow values are populated from the latest moderated revision which is the one selected in the revision panel by default too.
</li><li>When you change the value of a field, a shadow may appear or disappear accordingly. If they disappear a box saying that they are the same replaces it
</li><li>If you want to edit values from a previous revision, you first select that revision to get the shadows populated. There is a button named "Replace fields with values from this revision" under the revision list. You click this, a warning pops up and then you say "Yes". You then select the moderated revision again.
</li><li>We also allow package comments the same way as the todo extension works at the moment. Additionally, we need to be able to differentiate between what the moderator wrote and what a community member wrote, and so we may need to make a small change to the todo extension to facilitate this.
</li><li>In addition to package comments, each revision will have a revision log (analogous to a commit message).
</li></ul><h3 id="TechnicalDetails">Technical Details</h3>
<ul><li>This CREP will result in a new CKAN extension.
</li><li>It depends heavily on the new revisioning system (CREP0002), some of the details of which are yet to be finalised. 
</li><li>This CREP therefore requires working closely with David Raznick to come up with an API that the UI AJAX calls can use.
</li><li>We will then use suitable test data to mimic these API calls until CREP0002 is ready.
</li></ul><h2 id="Whydoitthisway">Why do it this way</h2>
<p>
This hopefully provides a clear and consistent mechanism allowing both a community member to make new revisions and a moderator to view and approve revisions, with largely the same UI/UX.
</p>
<h2 id="Implementationplan">Implementation plan</h2>
<h3 id="Deliverables">Deliverables</h3>
<p>
A new CKAN extension, consisting of:
</p>
<ul><li>Code: Python, HTML, CSS, Javascript
</li><li>Unit tests
</li><li>Localization
</li><li>Documentation
</li></ul><h3 id="Participants">Participants</h3>
<p>
John Glover to do it.
</p>
<h3 id="Progress">Progress</h3>
<p>
John has implemented the bulk of this UI. Just some things to tidy up before it is complete:
</p>
<ul><li>Genshi stream filters to be updated with CKAN 1.5 / 1.5.1 templates
</li><li>history_ajax / read_ajax to be replaced with calls to Action API (or Util REST API)
</li></ul><p>
I've split these two off into a new ticket <a class="new ticket" href="../ticket/1604.html" title="enhancement: Get ckanext-moderatededits working with CKAN 1.5+ templates (new)">#1604</a>.
</p>
<h3 id="RelatedProgress">Related Progress</h3>
<p>
The Todo extension is written and available at: <a class="ext-link" href="https://bitbucket.org/johnglover/ckanext-todo"><span class="icon">​</span>https://bitbucket.org/johnglover/ckanext-todo</a>.
</p>
<p>
In the section 'The Problem', under extra features, we mention a need for the sysadmin to be able to purge a revision already. This is already done.
</p>
<h3 id="Seealso">See also</h3>
<p>
<a class="closed ticket" href="../ticket/1129.html" title="CREP: CREP0002: Moderated  Edits (closed: fixed)">#1129</a> Backend work
</p>

                            
                          </td>
                          <td class="PosixTime">1305721003000000
                          </td>
                          <td class="ModifiedTime">1325352507000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1142.html">#1142</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">annapowellsmith
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1142.html">[super] Major Overhaul and Extension of CKAN Documentation</a>
                          </td>
                          <td class="description">
                            <p>
Child tickets:
</p>
<ul><li><a class="assigned ticket" href="../ticket/1041.html" title="enhancement: Start Using the CKAN Wiki for Tutorial-style documentation (assigned)">#1041</a> Start Using the CKAN Wiki for Tutorial-style documentation
</li><li><a class="closed ticket" href="../ticket/1192.html" title="task: Convert CKAN Sphinx docs into admin/reference manual (closed: fixed)">#1192</a> Convert CKAN Sphinx docs into admin/reference manual
</li></ul><p>
Previous super ticket (from 3m ago): <a class="ext-link" href="http://trac.ckan.org/ticket/927"><span class="icon">​</span>http://trac.ckan.org/ticket/927</a>
</p>
<ul><li>CKAN 1-page overview (for enterprise and for data hackers)
</li><li>Administrator's Guide (including install)
</li><li>Extensions Guide
</li><li>Separate CKAN.net info from Software Documentation (?)
</li></ul><p>
Also now a wiki page with more detail: <a class="ext-link" href="http://wiki.ckan.net/Documentation_Plans"><span class="icon">​</span>http://wiki.ckan.net/Documentation_Plans</a>
</p>
<h2 id="MinorItems">Minor Items</h2>

                            
                          </td>
                          <td class="PosixTime">1305727452000000
                          </td>
                          <td class="ModifiedTime">1313775665000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1143.html">#1143</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5-sprint-2.html">ckan-v1.5-sprint-2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1143.html">Improve stats page</a>
                          </td>
                          <td class="description">
                            <ul><li>Ensure we don't include deleted packages in the stats
</li><li>Some visual improvements:
<ul><li>Number of packages:
<ul><li>fix x axis to start at first revision
</li><li>fix y axis to start at zero
</li></ul></li><li>Fix problem with legend to 'Revisions to packages' graph.
</li><li>Hide sidebar in the template, so it isn't right-cropped in the DGU theme
</li></ul></li><li>Add some testing of the stats lib - results of basic stats
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1305734836000000
                          </td>
                          <td class="ModifiedTime">1307024681000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1144.html">#1144</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">timmcnamara
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1144.html">Support DSPL</a>
                          </td>
                          <td class="description">
                            <p>
DSPL, the Dataset Publishing Language, is being promoted by Google for its "Google Public Data Explorer" system. It is an XML format with metadata.
</p>
<p>
The format is described on the <a class="ext-link" href="http://code.google.com/apis/publicdata/docs/developer_guide.html"><span class="icon">​</span>developer docs ofthe Google Code site</a>.
</p>
<p>
Google provides a <a class="ext-link" href="http://code.google.com/apis/publicdata/docs/dsplgen.html"><span class="icon">​</span>Python script which reads CSV data and generates DSPL</a>
</p>
<p>
Sample from <a class="ext-link" href="http://code.google.com/apis/publicdata/docs/dspl_sample.html"><span class="icon">​</span>http://code.google.com/apis/publicdata/docs/dspl_sample.html</a>:
</p>
<div class="code"><pre>
<span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;dspl</span> <span class="na">xmlns=</span><span class="s">"http://schemas.google.com/dspl/2010"</span>
    <span class="na">xmlns:geo=</span><span class="s">"http://www.google.com/publicdata/dataset/google/geo"</span>
    <span class="na">xmlns:geo_usa=</span><span class="s">"http://www.google.com/publicdata/dataset/google/geo/us"</span>
    <span class="na">xmlns:time=</span><span class="s">"http://www.google.com/publicdata/dataset/google/time"</span>
    <span class="na">xmlns:quantity=</span><span class="s">"http://www.google.com/publicdata/dataset/google/quantity"</span>
    <span class="na">xmlns:entity=</span><span class="s">"http://www.google.com/publicdata/dataset/google/entity"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;import</span> <span class="na">namespace=</span><span class="s">"http://www.google.com/publicdata/dataset/google/time"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;import</span> <span class="na">namespace=</span><span class="s">"http://www.google.com/publicdata/dataset/google/quantity"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;import</span> <span class="na">namespace=</span><span class="s">"http://www.google.com/publicdata/dataset/google/entity"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;import</span> <span class="na">namespace=</span><span class="s">"http://www.google.com/publicdata/dataset/google/geo"</span><span class="nt">/&gt;</span>
  
  <span class="nt">&lt;info&gt;</span>
    <span class="nt">&lt;name&gt;</span>
      <span class="nt">&lt;value&gt;</span>My statistics<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;description&gt;</span>
      <span class="nt">&lt;value&gt;</span>Some very interesting statistics about countries<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;url&gt;</span>
      <span class="nt">&lt;value&gt;</span>http://www.stats-bureau.com/mystats/info.html<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/url&gt;</span>
  <span class="nt">&lt;/info&gt;</span>

  <span class="nt">&lt;provider&gt;</span>
    <span class="nt">&lt;name&gt;</span>
      <span class="nt">&lt;value&gt;</span>Bureau of Statistics<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;url&gt;</span>
      <span class="nt">&lt;value&gt;</span>http://www.stats-bureau.com<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/url&gt;</span>
  <span class="nt">&lt;/provider&gt;</span>

  <span class="nt">&lt;topics&gt;</span>
    <span class="nt">&lt;topic</span> <span class="na">id=</span><span class="s">"geography"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;info&gt;</span>
        <span class="nt">&lt;name&gt;&lt;value&gt;</span>Geography<span class="nt">&lt;/value&gt;&lt;/name&gt;</span>
      <span class="nt">&lt;/info&gt;</span>
    <span class="nt">&lt;/topic&gt;</span>
    <span class="nt">&lt;topic</span> <span class="na">id=</span><span class="s">"social_indicators"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;info&gt;</span>
        <span class="nt">&lt;name&gt;&lt;value&gt;</span>Social indicators<span class="nt">&lt;/value&gt;&lt;/name&gt;</span>
      <span class="nt">&lt;/info&gt;</span>
      <span class="nt">&lt;topic</span> <span class="na">id=</span><span class="s">"population_indicators"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;info&gt;</span>
          <span class="nt">&lt;name&gt;&lt;value&gt;</span>Population indicators<span class="nt">&lt;/value&gt;&lt;/name&gt;</span>
        <span class="nt">&lt;/info&gt;</span>
      <span class="nt">&lt;/topic&gt;</span>
      <span class="nt">&lt;topic</span> <span class="na">id=</span><span class="s">"poverty_and_income"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;info&gt;</span>
          <span class="nt">&lt;name&gt;&lt;value&gt;</span>Poverty <span class="err">&amp;</span> income<span class="nt">&lt;/value&gt;&lt;/name&gt;</span>
        <span class="nt">&lt;/info&gt;</span>
      <span class="nt">&lt;/topic&gt;</span>
      <span class="nt">&lt;topic</span> <span class="na">id=</span><span class="s">"health"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;info&gt;</span>
          <span class="nt">&lt;name&gt;&lt;value&gt;</span>Health<span class="nt">&lt;/value&gt;&lt;/name&gt;</span>
        <span class="nt">&lt;/info&gt;</span>
      <span class="nt">&lt;/topic&gt;</span>
    <span class="nt">&lt;/topic&gt;</span>
  <span class="nt">&lt;/topics&gt;</span>

  <span class="nt">&lt;concepts&gt;</span>
    <span class="c">&lt;!-- As noted in the tutorial, this concept should extend quantity:amount.--&gt;</span>
    <span class="nt">&lt;concept</span> <span class="na">id=</span><span class="s">"population"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;info&gt;</span>
        <span class="nt">&lt;name&gt;</span>
          <span class="nt">&lt;value&gt;</span>Population<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;description&gt;</span>
          <span class="nt">&lt;value&gt;</span>Size of the resident population.<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/description&gt;</span>
      <span class="nt">&lt;/info&gt;</span>
      <span class="nt">&lt;topic</span> <span class="na">ref=</span><span class="s">"population_indicators"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;type</span> <span class="na">ref=</span><span class="s">"integer"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/concept&gt;</span>

    <span class="c">&lt;!-- This country concept is defined for educational purposes only. A country
    concept exists in the Google geo dataset. See:

    http://code.google.com/apis/publicdata/docs/canonical/geo.html --&gt;</span> 
    <span class="nt">&lt;concept</span> <span class="na">id=</span><span class="s">"country"</span> <span class="na">extends=</span><span class="s">"geo:location"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;info&gt;</span>
        <span class="nt">&lt;name&gt;</span>
          <span class="nt">&lt;value&gt;</span>Country<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;description&gt;</span>
          <span class="nt">&lt;value&gt;</span>My list of countries<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/description&gt;</span>
      <span class="nt">&lt;/info&gt;</span>
      <span class="nt">&lt;type</span> <span class="na">ref=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">id=</span><span class="s">"name"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;info&gt;</span>
          <span class="nt">&lt;name&gt;&lt;value</span> <span class="na">xml:lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>Country name<span class="nt">&lt;/value&gt;&lt;/name&gt;</span>
          <span class="nt">&lt;description&gt;</span>
            <span class="nt">&lt;value</span> <span class="na">xml:lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>The official name of the country<span class="nt">&lt;/value&gt;</span>
          <span class="nt">&lt;/description&gt;</span>
        <span class="nt">&lt;/info&gt;</span>
        <span class="nt">&lt;type</span> <span class="na">ref=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/property&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">ref=</span><span class="s">"countries_table"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/concept&gt;</span>

    <span class="c">&lt;!-- This US state concept is defined for educational purposes only. A US state
      concept exists in the Google geo US dataset. See:

      http://code.google.com/apis/publicdata/docs/canonical/geo.us.html --&gt;</span> 
    <span class="nt">&lt;concept</span> <span class="na">id=</span><span class="s">"state"</span> <span class="na">extends=</span><span class="s">"geo:location"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;info&gt;</span>
        <span class="nt">&lt;name&gt;</span>
          <span class="nt">&lt;value&gt;</span>State<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;description&gt;</span>
          <span class="nt">&lt;value&gt;</span>US states<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/description&gt;</span>
      <span class="nt">&lt;/info&gt;</span>
      <span class="nt">&lt;type</span> <span class="na">ref=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">concept=</span><span class="s">"country"</span> <span class="na">isParent=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">ref=</span><span class="s">"states_table"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/concept&gt;</span>

    <span class="nt">&lt;concept</span> <span class="na">id=</span><span class="s">"gender"</span> <span class="na">extends=</span><span class="s">"entity:entity"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;info&gt;</span>
          <span class="nt">&lt;name&gt;</span>
          <span class="nt">&lt;value&gt;</span>Gender<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;description&gt;</span>
          <span class="nt">&lt;value&gt;</span>Gender, Male or Female<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/description&gt;</span>
        <span class="nt">&lt;pluralName&gt;&lt;value&gt;</span>Genders<span class="nt">&lt;/value&gt;&lt;/pluralName&gt;</span>
        <span class="nt">&lt;totalName&gt;&lt;value&gt;</span>Both genders<span class="nt">&lt;/value&gt;&lt;/totalName&gt;</span>
      <span class="nt">&lt;/info&gt;</span>
      <span class="nt">&lt;type</span> <span class="na">ref=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">ref=</span><span class="s">"genders_table"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/concept&gt;</span>

    <span class="nt">&lt;concept</span> <span class="na">id=</span><span class="s">"unemployment_rate"</span> <span class="na">extends=</span><span class="s">"quantity:rate"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;info&gt;</span>
        <span class="nt">&lt;name&gt;</span>
          <span class="nt">&lt;value&gt;</span>unemployment rate<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;description&gt;</span>
          <span class="nt">&lt;value&gt;</span>The percent of the labor force that is unemployed, not seasonally
            adjusted.<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/description&gt;</span>
        <span class="nt">&lt;url&gt;&lt;value&gt;</span>http://www.bls.gov/cps/cps_htgm.htm<span class="nt">&lt;/value&gt;&lt;/url&gt;</span>
      <span class="nt">&lt;/info&gt;</span>
      <span class="nt">&lt;topic</span> <span class="na">ref=</span><span class="s">"social_indicators"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;type</span> <span class="na">ref=</span><span class="s">"float"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;attribute</span> <span class="na">id=</span><span class="s">"is_percentage"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;type</span> <span class="na">ref=</span><span class="s">"boolean"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
      <span class="nt">&lt;/attribute&gt;</span>
    <span class="nt">&lt;/concept&gt;</span>

  <span class="nt">&lt;/concepts&gt;</span>

  <span class="nt">&lt;slices&gt;</span>
    <span class="nt">&lt;slice</span> <span class="na">id=</span><span class="s">"countries_slice"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;dimension</span> <span class="na">concept=</span><span class="s">"country"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;dimension</span> <span class="na">concept=</span><span class="s">"time:year"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;metric</span> <span class="na">concept=</span><span class="s">"population"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">ref=</span><span class="s">"countries_slice_table"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/slice&gt;</span>

    <span class="nt">&lt;slice</span> <span class="na">id=</span><span class="s">"states_slice"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;dimension</span> <span class="na">concept=</span><span class="s">"state"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;dimension</span> <span class="na">concept=</span><span class="s">"time:year"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;metric</span> <span class="na">concept=</span><span class="s">"population"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;metric</span> <span class="na">concept=</span><span class="s">"unemployment_rate"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">ref=</span><span class="s">"states_slice_table"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/slice&gt;</span>

    <span class="nt">&lt;slice</span> <span class="na">id=</span><span class="s">"countries_gender_slice"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;dimension</span> <span class="na">concept=</span><span class="s">"country"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;dimension</span> <span class="na">concept=</span><span class="s">"gender"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;dimension</span> <span class="na">concept=</span><span class="s">"time:year"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;metric</span> <span class="na">concept=</span><span class="s">"population"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">ref=</span><span class="s">"countries_gender_slice_table"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/slice&gt;</span>

  <span class="nt">&lt;/slices&gt;</span>

  <span class="nt">&lt;tables&gt;</span>
    <span class="nt">&lt;table</span> <span class="na">id=</span><span class="s">"countries_table"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"country"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"name"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"latitude"</span> <span class="na">type=</span><span class="s">"float"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"longitude"</span> <span class="na">type=</span><span class="s">"float"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;data&gt;</span>
        <span class="nt">&lt;file</span> <span class="na">format=</span><span class="s">"csv"</span> <span class="na">encoding=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>countries.csv<span class="nt">&lt;/file&gt;</span>
      <span class="nt">&lt;/data&gt;</span>
    <span class="nt">&lt;/table&gt;</span>

    <span class="nt">&lt;table</span> <span class="na">id=</span><span class="s">"countries_slice_table"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"country"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"year"</span> <span class="na">type=</span><span class="s">"date"</span> <span class="na">format=</span><span class="s">"yyyy"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"population"</span> <span class="na">type=</span><span class="s">"integer"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;data&gt;</span>
        <span class="nt">&lt;file</span> <span class="na">format=</span><span class="s">"csv"</span> <span class="na">encoding=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>country_slice.csv<span class="nt">&lt;/file&gt;</span>
      <span class="nt">&lt;/data&gt;</span>
    <span class="nt">&lt;/table&gt;</span>

    <span class="nt">&lt;table</span> <span class="na">id=</span><span class="s">"states_table"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"state"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"name"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"country"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;value&gt;</span>US<span class="nt">&lt;/value&gt;</span>
      <span class="nt">&lt;/column&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"latitude"</span> <span class="na">type=</span><span class="s">"float"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"longitude"</span> <span class="na">type=</span><span class="s">"float"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;data&gt;</span>
        <span class="nt">&lt;file</span> <span class="na">format=</span><span class="s">"csv"</span> <span class="na">encoding=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>states.csv<span class="nt">&lt;/file&gt;</span>
      <span class="nt">&lt;/data&gt;</span>
    <span class="nt">&lt;/table&gt;</span>

    <span class="nt">&lt;table</span> <span class="na">id=</span><span class="s">"states_slice_table"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"state"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"year"</span> <span class="na">type=</span><span class="s">"date"</span> <span class="na">format=</span><span class="s">"yyyy"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"population"</span> <span class="na">type=</span><span class="s">"integer"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"unemployment_rate"</span> <span class="na">type=</span><span class="s">"float"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;data&gt;</span>
        <span class="nt">&lt;file</span> <span class="na">format=</span><span class="s">"csv"</span> <span class="na">encoding=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>state_slice.csv<span class="nt">&lt;/file&gt;</span>
      <span class="nt">&lt;/data&gt;</span>
    <span class="nt">&lt;/table&gt;</span>

    <span class="nt">&lt;table</span> <span class="na">id=</span><span class="s">"genders_table"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"gender"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"name"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;data&gt;</span>
        <span class="nt">&lt;file</span> <span class="na">format=</span><span class="s">"csv"</span> <span class="na">encoding=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>genders.csv<span class="nt">&lt;/file&gt;</span>
      <span class="nt">&lt;/data&gt;</span>
    <span class="nt">&lt;/table&gt;</span>

    <span class="nt">&lt;table</span> <span class="na">id=</span><span class="s">"countries_gender_slice_table"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"country"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"gender"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"year"</span> <span class="na">type=</span><span class="s">"date"</span> <span class="na">format=</span><span class="s">"yyyy"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"population"</span> <span class="na">type=</span><span class="s">"integer"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;data&gt;</span>
        <span class="nt">&lt;file</span> <span class="na">format=</span><span class="s">"csv"</span> <span class="na">encoding=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>gender_country_slice.csv<span class="nt">&lt;/file&gt;</span>
      <span class="nt">&lt;/data&gt;</span>
    <span class="nt">&lt;/table&gt;</span>
  <span class="nt">&lt;/tables&gt;</span>

<span class="nt">&lt;/dspl&gt;</span>
</pre></div>
                            
                          </td>
                          <td class="PosixTime">1305763609000000
                          </td>
                          <td class="ModifiedTime">1339774517000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1145.html">#1145</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">timmcnamara
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1145.html">Support the Handle System</a>
                          </td>
                          <td class="description">
                            <p>
The Handle System is an initiative to provide persistent references for resources. That is, it's basically a proxy system for preventing link rot.
</p>
<p>
Its documentation is here: <a class="ext-link" href="http://www.handle.net/"><span class="icon">​</span>http://www.handle.net/</a>. Servers running CKAN could host a "Local Handle Service", which redirects a hash of a resource to an actual URL.
</p>
<p>
Some suggested use cases:
</p>
<ul><li>Researcher would like to cite where data came from
</li><li>Agencies would like to have a way to prevent vendor
lock-in from CKAN if they decide to move to another
platform
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1305764775000000
                          </td>
                          <td class="ModifiedTime">1339774502000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1146.html">#1146</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5-sprint-1.html">ckan-v1.5-sprint-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1146.html">make logic layer control its own state</a>
                          </td>
                          <td class="description">
                            <p>
Logic layer should not use any vdm defined state and should manage it itself.
</p>

                            
                          </td>
                          <td class="PosixTime">1305829117000000
                          </td>
                          <td class="ModifiedTime">1307957527000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1147.html">#1147</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5-sprint-1.html">ckan-v1.5-sprint-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1147.html">Add expired_id to all revision tables.</a>
                          </td>
                          <td class="description">
                            <p>
Revision tables need expired_id to make querying history AND pending changes more efficient.
</p>
<p>
This involves making a session extension and a large table migration.
</p>

                            
                          </td>
                          <td class="PosixTime">1305839833000000
                          </td>
                          <td class="ModifiedTime">1307957556000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1148.html">#1148</a>
                          </td>
                          <td class="type">refactor
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5-sprint-1.html">ckan-v1.5-sprint-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1148.html">test speed improvements and cleanup</a>
                          </td>
                          <td class="description">
                            <p>
The tests have been running slower recently and need fixing.  They also could do with a bit more consistency to them.
</p>

                            
                          </td>
                          <td class="PosixTime">1305969223000000
                          </td>
                          <td class="ModifiedTime">1305969925000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1149.html">#1149</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5-sprint-1.html">ckan-v1.5-sprint-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1149.html">Change domain object modification plugin to use Session extension.</a>
                          </td>
                          <td class="description">
                            <p>
This should make it more efficient as it currently does a lot of repeating work.  i.e if you change a package and a resource in the same commit it sends out 2 notifications and should only really send out 1.   
</p>

                            
                          </td>
                          <td class="PosixTime">1305969863000000
                          </td>
                          <td class="ModifiedTime">1306090663000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1150.html">#1150</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">timmcnamara
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1150.html">Non-ASCII chars prevent data preview</a>
                          </td>
                          <td class="description">
                            <p>
Characters outside of ASCII range are not supported within data previews.
</p>
<p>
Steps to reproduce:
</p>
<ol><li>Visit <a class="ext-link" href="http://ckan.net/package/kivele2010"><span class="icon">​</span>http://ckan.net/package/kivele2010</a>
</li><li>Click on [preview] for any of the resources
</li></ol>
                            
                          </td>
                          <td class="PosixTime">1306019914000000
                          </td>
                          <td class="ModifiedTime">1311774141000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1151.html">#1151</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">timmcnamara
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-03-05.html">ckan-sprint-2012-03-05</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1151.html">Preview for geographic data should be a map</a>
                          </td>
                          <td class="description">
                            <p>
Data viewer / previewer for a resource that has a KML file, or others, such as GeoRSS and GeoJSON, we should provide a map.
</p>
<ul><li>Support for KML files: <a class="assigned ticket" href="../ticket/1458.html" title="enhancement: Support previewing kml files in data viewer (assigned)">#1458</a>
</li></ul><p>
This is non-trivial for external files as we need a way to jsonify. For files stored locally this is more of a recline issue (and will require a bit of work to either guess columns or allow user to specify them).
</p>

                            
                          </td>
                          <td class="PosixTime">1306043217000000
                          </td>
                          <td class="ModifiedTime">1330908188000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1152.html">#1152</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1152.html">True support for generic CSW servers</a>
                          </td>
                          <td class="description">
                            <p>
The CSW harvesters implemented at the moment were developed with the DGU
project in mind, and they assume all remote CSW servers to implement the
Gemini 2 specification. Gemini 2 is the profile defined in the UK for
INSPIRE complying metadata, so obviously catalogs from other countries
or non-INSPIRE complying ones won't be able to be harvested.
</p>
<p>
The changes needed to support generic CSW servers (i.e. those
implementing the ISO 19139 profile) are:
</p>
<ul><li>Handling the validators (right now are hardcoded in the harvester
</li></ul><p>
code). This probably involves issues discussed in the CREP 3
(ticket <a class="new ticket" href="../ticket/1134.html" title="CREP: CREP0003: Description and Configuration of Harvesters (new)">#1134</a>)
</p>
<ul><li>Changes in the model to adapt the specification to ISO 19139
</li></ul><ul><li>Renaming objects and classes which are now Gemini-centric
</li></ul><p>
List of CSW servers tested:
</p>
<p>
<a class="ext-link" href="https://spreadsheets.google.com/spreadsheet/ccc?key=0Atp3cZFjuIOAdDBVQWRINnlfN1d0b2lleHVEdjBSb2c&amp;hl=en_US&amp;authkey=CNu4hsEB#gid=0"><span class="icon">​</span>https://spreadsheets.google.com/spreadsheet/ccc?key=0Atp3cZFjuIOAdDBVQWRINnlfN1d0b2lleHVEdjBSb2c&amp;hl=en_US&amp;authkey=CNu4hsEB#gid=0</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1306141334000000
                          </td>
                          <td class="ModifiedTime">1313411822000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1153.html">#1153</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">lucychambers
                          </td>
                          <td class="reporter">lucychambers
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1153.html">Update CKAN wiki front page</a>
                          </td>
                          <td class="description">
                            <p>
Update CKAN wiki front page - a la <a class="missing wiki">OpenSpending?</a>: <a class="ext-link" href="http://wiki.openspending.org/Main_Page"><span class="icon">​</span>http://wiki.openspending.org/Main_Page</a>
</p>
<p>
Sections should relate to different types of people using the site: 
</p>
<p>
Developers, Users etc..
</p>

                            
                          </td>
                          <td class="PosixTime">1306155211000000
                          </td>
                          <td class="ModifiedTime">1306941386000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1154.html">#1154</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">nils.toedtmann
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1154.html">Make ckan robust against solr failure</a>
                          </td>
                          <td class="description">
                            <p>
According to pudo, a ckan with activated solr extension throws a 5xx when solr is unreachable. Instead, it should behave more like a ckan without ckanext-solr when this happens.
</p>

                            
                          </td>
                          <td class="PosixTime">1306254472000000
                          </td>
                          <td class="ModifiedTime">1314287519000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1155.html">#1155</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/pdeu-1.html">pdeu-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1155.html">Harvester for data.london.gov.uk</a>
                          </td>
                          <td class="description">
                            <p>
Write a harvester for data.london.gov.uk to import catalogue metadata into PDEU. API (or at least documentation) is available at: <a class="ext-link" href="http://sourceforge.net/projects/londondatastore/files/"><span class="icon">​</span>http://sourceforge.net/projects/londondatastore/files/</a> 
</p>

                            
                          </td>
                          <td class="PosixTime">1306337318000000
                          </td>
                          <td class="ModifiedTime">1306773174000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1156.html">#1156</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/pdeu-1.html">pdeu-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1156.html">Scraping harvesters for Paris and Vienna Catalogues</a>
                          </td>
                          <td class="description">
                            <p>
Import metadata from both sources into PDEU via the Harvesting framework but by scraping their respective catalogue pages. 
</p>
<ul><li><a class="ext-link" href="http://data.wien.gv.at/katalog/"><span class="icon">​</span>http://data.wien.gv.at/katalog/</a>
</li><li><a class="ext-link" href="http://opendata.paris.fr/opendata/jsp/site/Portal.jsp"><span class="icon">​</span>http://opendata.paris.fr/opendata/jsp/site/Portal.jsp</a>
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1306337428000000
                          </td>
                          <td class="ModifiedTime">1306855111000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1157.html">#1157</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/pdeu-1.html">pdeu-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1157.html">A simple theme for publicdata.eu, CKAN</a>
                          </td>
                          <td class="description">
                            <p>
Change the visual style of CKAN to be more like these sites: 
</p>
<ul><li><a class="missing wiki">GitHub?</a>
</li><li>Quora 
</li><li>Google Projects
</li></ul><p>
This does not include major UX work. 
</p>

                            
                          </td>
                          <td class="PosixTime">1306337573000000
                          </td>
                          <td class="ModifiedTime">1309804029000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1158.html">#1158</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/pdeu-1.html">pdeu-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1158.html">Put PDEU into read-only mode and remove unneeded functions</a>
                          </td>
                          <td class="description">
                            <p>
PDEU should be in a mode where: 
</p>
<ul><li>Users cannot edit or create packages
</li><li>Users cannot sign up on their own
</li><li><a class="missing wiki">AuthorizationGroups?</a> and <a class="missing wiki">RevisionHistory?</a> is completely gone from the UI 
</li><li>Groups have been repurposed as Subjects
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1306337786000000
                          </td>
                          <td class="ModifiedTime">1309804060000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1159.html">#1159</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/pdeu-1.html">pdeu-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1159.html">Add RDFa to CKAN package pages</a>
                          </td>
                          <td class="description">
                            <p>
RDFa can be used as a simple way to expose linked data or at least sameAs the API version of the data but we need to make sure we do not expose anything different from the "official" representation.
</p>

                            
                          </td>
                          <td class="PosixTime">1306337907000000
                          </td>
                          <td class="ModifiedTime">1307615133000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1160.html">#1160</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/pdeu-1.html">pdeu-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1160.html">Havest CSW servers on PDEU</a>
                          </td>
                          <td class="description">
                            <p>
It could be interesting for the publicdata.eu project to add some CSW datasources. Thanks to the INSPIRE directive, there are quite a few national catalogs of geodata that could be worth harvesting.
Work on this should include:
</p>
<ul><li>Compose Endpoint List (1d)
</li><li>Harvest on staging system and evaluate which sources have useful material (2d)
</li></ul><p>
First point is being performed in this GDoc:
<a class="ext-link" href="https://spreadsheets.google.com/spreadsheet/ccc?key=0Atp3cZFjuIOAdDBVQWRINnlfN1d0b2lleHVEdjBSb2c&amp;authkey=CNu4hsEB&amp;hl=en_US#gid=0"><span class="icon">​</span>https://spreadsheets.google.com/spreadsheet/ccc?key=0Atp3cZFjuIOAdDBVQWRINnlfN1d0b2lleHVEdjBSb2c&amp;authkey=CNu4hsEB&amp;hl=en_US#gid=0</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1306407271000000
                          </td>
                          <td class="ModifiedTime">1309804038000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1161.html">#1161</a>
                          </td>
                          <td class="type">requirement
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/pdeu-1.html">pdeu-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1161.html">Build a simplified theme for PDEU</a>
                          </td>
                          <td class="description">
                            <p>
We need to offer a strongly simplified version, read-only of CKAN under publicdata.eu, with a focus on its role as search engine instead of a data catalogue.
</p>
<p>
This ticket relates to work on the PDEU theme only!
</p>

                            
                          </td>
                          <td class="PosixTime">1306407835000000
                          </td>
                          <td class="ModifiedTime">1306408026000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1162.html">#1162</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/pdeu-1.html">pdeu-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1162.html">Define a common extra for storing the geographic extent</a>
                          </td>
                          <td class="description">
                            <p>
We need a common extra across the different harvested sources that defines the extent of the data. We will have mainly national level catalogues, but also at a lower level (region, city).
</p>
<p>
Relevant discussion:
<a class="ext-link" href="http://lists.okfn.org/pipermail/ckan-discuss/2011-May/001245.html"><span class="icon">​</span>http://lists.okfn.org/pipermail/ckan-discuss/2011-May/001245.html</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1306408704000000
                          </td>
                          <td class="ModifiedTime">1308647187000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1163.html">#1163</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1163.html">Improvements to Storage Extension</a>
                          </td>
                          <td class="description">
                            <p>
Storage is now working but there are 
</p>
<ul><li>Integrate with Resources (e.g. create a resource for each file upload and give option to associate with a package)
<ul><li>Should we introduce rule that files *not* associated with a Resource are periodically deleted?
</li></ul></li><li>Allow setting of a file name/path before upload
</li><li>Allow for file overwriting/deleting etc (how should this work -- do we want to allow this sort of thing)
</li><li>Integrate local file upload stuff in api/auth/*
</li></ul><h2 id="DifferentBackendIssues">Different Backend Issues</h2>
<p>
Local file store is rather different from 'remote' storage in various ways:
</p>
<ul><li>For remote you don't want to use many buckets as there are bucket limits while for local you want to. Should we there have a single path that users provide which we then partition differently for different backends.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1306408778000000
                          </td>
                          <td class="ModifiedTime">1310133808000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1164.html">#1164</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/pdeu-1.html">pdeu-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1164.html">Cloropleth Map of European Data Availability for PDEU</a>
                          </td>
                          <td class="description">
                            <p>
A nice map in the homepage showing the availability of data across Europe
</p>

                            
                          </td>
                          <td class="PosixTime">1306408824000000
                          </td>
                          <td class="ModifiedTime">1308647224000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1165.html">#1165</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">nils.toedtmann
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-future.html">ckan-future</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1165.html">Add multi-site support to ckan</a>
                          </td>
                          <td class="description">
                            <p>
Currently, each ckan site needs its own ckan wsgi process. That eats a lot of resources where many ckan sites are served from one machine (e.g. eu3). 
</p>
<p>
That would dramatically change if a ckan process could behave like multiple ckans (e.g. like Apache's "&lt;<a class="missing wiki">VirtualHost?</a>&gt;", or tracd). Depending on the "Host:" header in the HTTP1.1 request, it would choose which local ckan ini file to obey.
</p>
<p>
I see two ways to constitute the map hostname-to-ini-file map:
</p>
<ul><li>ckan reads a set of ini files, and each ini file declares which servers names it is responsible for
</li><li>In a global ini file, there are directives mapping servernames to ini files.
</li></ul><p>
In either case there should be a global ckan ini having the default settings for all local ckan sites. Each site ini could be very short then, just having e.g. title, name, database credentials, active plugins etc.
</p>

                            
                          </td>
                          <td class="PosixTime">1306413667000000
                          </td>
                          <td class="ModifiedTime">1339774466000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1166.html">#1166</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-10.html">ckan-sprint-2011-10-10</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1166.html">Less stringent filters for displaying the WMS preview</a>
                          </td>
                          <td class="description">
                            <p>
Right now, for the "View available WMS layers" link to be displayed, the package needs to have an "INSPIRE=True" extra, a "resource-type=service" extra and a resource of type "WMS".
</p>
<p>
This is due to DGU (the project this was developed for) related reasons, but for a generic support, the resource type should probably be enough.
</p>
<p>
(The repository for this is ckanext-spatial, but it's not on the list)
</p>

                            
                          </td>
                          <td class="PosixTime">1306422646000000
                          </td>
                          <td class="ModifiedTime">1317381932000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1167.html">#1167</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">nils.toedtmann
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1167.html">Create a standard CKAN system image for Amazon EC2 (AMI)</a>
                          </td>
                          <td class="description">
                            <p>
We should create a public AMI with CKAN pre-installed and configured such that users can easily create their own EC2 machine with a running CKAN to play with.
</p>
<p>
There are three phases:
</p>
<ol><li>[nils] Deploy an empty EC2 instance to become the CKAN image master instance
</li><li>Install a CKAN and give it a standard configuration.
</li><li>[nils] Create a AMI from the CKAN image master instance and publish it.
</li></ol><p>
I am happy to do first and last. Who is installing and configuring CKAN?
</p>
<p>
Unfortunately AMIs are specific to region, architecture and storage type. We cannot maintain too many images, so a number of choices have to be made:
</p>
<ul><li>Which distribution/version? <strong>Ubuntu 10.04 LTS</strong>
</li><li>Which architecture/instance-type? I suggest 64-bit/t1.micro
</li><li>Which region? I suggest us-east-1 and maybe eu-west-1
</li><li>Which storage type? <strong>EBS</strong> (way easier to make an AMI from than instance-store)
</li><li>Install CKAN from deb packages via mercurial/virtualenv? I assume the latter because the AMI is targeted to developers?
</li></ul><hr />
<p>
<a class="ext-link" href="http://alestic.com/2009/06/ec2-ami-bundle"><span class="icon">​</span>1</a>
<a class="ext-link" href="http://uec-images.ubuntu.com/releases/10.04/release/"><span class="icon">​</span>2</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1306423016000000
                          </td>
                          <td class="ModifiedTime">1311178516000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1168.html">#1168</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">thejimmyg
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1168.html">Test system for deb packaging</a>
                          </td>
                          <td class="description">
                            <p>
Get buildbot to:
</p>
<ul><li>build the deb packages
</li><li>install them into a fresh virtual machine
</li><li>run smoke tests on the installed ckan
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1306441994000000
                          </td>
                          <td class="ModifiedTime">1330990423000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1169.html">#1169</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5-sprint-2.html">ckan-v1.5-sprint-2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1169.html">Link to csv/json dumps on ckan.net</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1306749768000000
                          </td>
                          <td class="ModifiedTime">1306754833000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1170.html">#1170</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5-sprint-2.html">ckan-v1.5-sprint-2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1170.html">Production deployment docs out of date</a>
                          </td>
                          <td class="description">
                            <p>
Need to cover pip-requirements.txt on different branches in the doc/deployment.rst. 
</p>
<p>
Also could do with tidying up upgrade.txt into this document too.
</p>

                            
                          </td>
                          <td class="PosixTime">1306864171000000
                          </td>
                          <td class="ModifiedTime">1306864422000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1171.html">#1171</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">mark.wainwright
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan&#32;2.0.html">ckan 2.0</a>
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1171.html">Citation instructions on dataset and resource view pages</a>
                          </td>
                          <td class="description">
                            <p>
Some sort of citation helper. Something small on the dataset and resource page that would show how to cite.
</p>
<p>
wwaites: Some related thoughts on this from opb: <a class="ext-link" href="http://homepages.inf.ed.ac.uk/opb/papers/ssdbm2006.pdf"><span class="icon">​</span>http://homepages.inf.ed.ac.uk/opb/papers/ssdbm2006.pdf</a>
</p>
<p>
timclicks: I'm looking at Dataverse for the first time<a class="missing changeset" title="No default repository defined">[0]</a>. It seems very popular in the social sciences. I noticed that there is a recommended citation for each dataset. For example, <a class="missing changeset" title="No default repository defined">[1]</a> is has this one: "Targeted Input Programme (TIP) 2000-01", <a class="ext-link" href="http://hdl.handle.net/1902.1/SSC-MWI-TIP2000-01-M1"><span class="icon">​</span>http://hdl.handle.net/1902.1/SSC-MWI-TIP2000-01-M1</a> V1 [Version]"
</p>
<h2 id="Implementation">Implementation</h2>
<p>
Add a small box at bottom of dataset / resource page (or in sidebar on dataset page) with title "Cite this" with contents like:
</p>
<p>
%title. %author. Retrieved %date. %site_title.
</p>
<p>
For resource: %title = %dataset_title. %resource_name.
</p>
<p>
Could also add export to ref managers (e.g. to bibtex) but that is for later.
</p>

                            
                          </td>
                          <td class="PosixTime">1306920799000000
                          </td>
                          <td class="ModifiedTime">1347358705000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1172.html">#1172</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">thejimmyg
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1172.html">Remove all try: except: blocks that don't re-raise the original exception</a>
                          </td>
                          <td class="description">
                            <p>
The current codebase has one or two try: except; blocks that don't catch specific exceptions. Under no circumstances should any broad try: except: blocks be allowed unless the exceptions they catch are immediately re-raised. Uncaught exceptions are wasting us quite a lot of time when trying to track down problems.
</p>

                            
                          </td>
                          <td class="PosixTime">1306926049000000
                          </td>
                          <td class="ModifiedTime">1314118883000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1173.html">#1173</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/pdeu-1.html">pdeu-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1173.html">Offer a DCat representation for packages in the API</a>
                          </td>
                          <td class="description">
                            <p>
/api/rest/package/foo.rdf should return a DCat representation of the package. To create it, we will use the functions in ckanext-rdf.
</p>

                            
                          </td>
                          <td class="PosixTime">1306939639000000
                          </td>
                          <td class="ModifiedTime">1307615271000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1174.html">#1174</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/pdeu-1.html">pdeu-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1174.html">API Representation Registry</a>
                          </td>
                          <td class="description">
                            <p>
As CKAN grows, more and more optional representations of packages will become used. Besides RDF (which is the motivation for this ticket), support for DSPL, home-grown XML, or CSV listings is imaginable. 
</p>
<p>
To properly support this CKAN should have an extensible representation registry that can be extended when new output types become available (and without changing the API in the process). This needs to integrate in two places: 
</p>
<ul><li>We need to add support for file format extensions to the package handler and REST API. 
</li><li>We need to add HTTP content type negotiation (Accept headers).
</li></ul><p>
To support this we should have a registry with two registers: 
</p>
<ul><li>to map format extensions to mime types (e.g. "json" -&gt; "application/json")
</li><li>to map mime types and entity types to converter functions (e.g. 8"application/json", ckan.model.Package) -&gt; func(obj, mime_type) )
</li></ul><p>
This should be set up on load_environment so that IConfigurer plugins can feed into it. 
</p>
<p>
The registry should then first be added to _finish in the REST API (which needs to be refactored to be passed the {format} part of the URL if one is given. Based on the format part and HTTP headers, an appropriate representation can be generated by the registry and then be returned to the user. 
</p>
<p>
Forwarding of requests to the regular WUI controllers with Accept headers set or a format specified can be implemented in a separate effort. 
</p>

                            
                          </td>
                          <td class="PosixTime">1307050992000000
                          </td>
                          <td class="ModifiedTime">1307615200000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1175.html">#1175</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">fccoelho@…
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1175.html">Stats extension not working</a>
                          </td>
                          <td class="description">
                            <p>
Hi,
I get a 500, Internal server error when I enable ckanext-stats.
Flavio
</p>

                            
                          </td>
                          <td class="PosixTime">1307350823000000
                          </td>
                          <td class="ModifiedTime">1325355170000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1176.html">#1176</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">thejimmyg
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1176.html">unicode_body exception</a>
                          </td>
                          <td class="description">
                            <p>
We seem to occasionally get this exception on ckan.net. 
</p>
<p>
User agents causing this include:
</p>
<ul><li>Alexa ia_archiver (3/6/11)
</li><li>Maxthon browser (17/5/11)
</li></ul><pre class="wiki">Module ckan.controllers.error:32 in document
&lt;&lt;              return original_response.body
               # Otherwise, decorate original response with error template.
               c.content = literal(original_response.unicode_body) or cgi.escape(request.GET.get('message', ''))
               c.prefix=request.environ.get('SCRIPT_NAME', ''),
               c.code=cgi.escape(request.GET.get('code', str(original_response.status_int))),
&gt;&gt;  c.content = literal(original_response.unicode_body) or cgi.escape(request.GET.get('message', ''))
AttributeError: 'NoneType' object has no attribute 'unicode_body'
</pre>
                            
                          </td>
                          <td class="PosixTime">1307351562000000
                          </td>
                          <td class="ModifiedTime">1314273012000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1177.html">#1177</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">fccoelho
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1177.html">routes.util.GenerationException</a>
                          </td>
                          <td class="description">
                            <blockquote>
<p>
Hello,
</p>
</blockquote>
<p>
I have done a recent update to mu ckan install, and I am now getting this error for all my packages:
</p>
<pre class="wiki">URL: http://ckan.emap.fgv.br/package/dengue-net
Module weberror.errormiddleware:162 in __call__
&lt;&lt;              __traceback_supplement__ = Supplement, self, environ
                   sr_checker = ResponseStartChecker(start_response)
                   app_iter = self.application(environ, sr_checker)
                   return self.make_catching_iter(app_iter, environ, sr_checker)
               except:
&gt;&gt;  app_iter = self.application(environ, sr_checker)
Module beaker.middleware:73 in __call__
&lt;&lt;                                                     self.cache_manager)
               environ[self.environ_key] = self.cache_manager
               return self.app(environ, start_response)
&gt;&gt;  return self.app(environ, start_response)
Module beaker.middleware:152 in __call__
&lt;&lt;                          headers.append(('Set-cookie', cookie))
                   return start_response(status, headers, exc_info)
               return self.wrap_app(environ, session_start_response)
          
           def _get_session(self):
&gt;&gt;  return self.wrap_app(environ, session_start_response)
Module routes.middleware:130 in __call__
&lt;&lt;                  environ['SCRIPT_NAME'] = environ['SCRIPT_NAME'][:-1]
              
               response = self.app(environ, start_response)
              
               # Wrapped in try as in rare cases the attribute will be gone already
&gt;&gt;  response = self.app(environ, start_response)
Module pylons.wsgiapp:125 in __call__
&lt;&lt;         
               controller = self.resolve(environ, start_response)
               response = self.dispatch(controller, environ, start_response)
              
               if 'paste.testing_variables' in environ and hasattr(response,
&gt;&gt;  response = self.dispatch(controller, environ, start_response)
Module pylons.wsgiapp:324 in dispatch
&lt;&lt;          if log_debug:
                   log.debug("Calling controller class with WSGI interface")
               return controller(environ, start_response)
          
           def load_test_env(self, environ):
&gt;&gt;  return controller(environ, start_response)
Module ckan.lib.base:118 in __call__
&lt;&lt;          # available in environ['pylons.routes_dict']   
               try:
                   return WSGIController.__call__(self, environ, start_response)
               finally:
                   model.Session.remove()
&gt;&gt;  return WSGIController.__call__(self, environ, start_response)
Module pylons.controllers.core:221 in __call__
&lt;&lt;                  return response(environ, self.start_response)
              
               response = self._dispatch_call()
               if not start_response_called:
                   self.start_response = start_response
&gt;&gt;  response = self._dispatch_call()
Module pylons.controllers.core:172 in _dispatch_call
&lt;&lt;              req.environ['pylons.action_method'] = func
                  
                   response = self._inspect_call(func)
               else:
                   if log_debug:
&gt;&gt;  response = self._inspect_call(func)
Module pylons.controllers.core:107 in _inspect_call
&lt;&lt;                        func.__name__, args)
               try:
                   result = self._perform_call(func, args)
               except HTTPException, httpe:
                   if log_debug:
&gt;&gt;  result = self._perform_call(func, args)
Module pylons.controllers.core:60 in _perform_call
&lt;&lt;          """Hide the traceback for everything above this method"""
               __traceback_hide__ = 'before_and_this'
               return func(**args)
          
           def _inspect_call(self, func):
&gt;&gt;  return func(**args)
Module ?:2 in read
Module ckan.lib.cache:167 in wrapper
&lt;&lt;      log = __import__("logging").getLogger("proxy_cache")
           def wrapper(func, *args, **kwargs):
               result = func(*args, **kwargs)
      
               pylons = get_pylons(args)
&gt;&gt;  result = func(*args, **kwargs)
Module ckan.controllers.package:208 in read
&lt;&lt;          #render the package
               PackageSaver().render_package(c.pkg)
               return render('package/read.html')
      
           def comments(self, id):
&gt;&gt;  return render('package/read.html')
Module ckan.lib.base:74 in render
&lt;&lt;     
           return cached_template(template_name, render_template, cache_key=cache_key,
                                  cache_type=cache_type, cache_expire=cache_expire)
                                  #, ns_options=('method'), method=method)
&gt;&gt;  cache_type=cache_type, cache_expire=cache_expire)
Module pylons.templating:249 in cached_template
&lt;&lt;          return content
           else:
               return render_func()
&gt;&gt;  return render_func()
Module ckan.lib.base:63 in render_template
&lt;&lt;              stream = item.filter(stream)
              
               return literal(stream.render(method=method, encoding=None))
          
           if 'Pragma' in response.headers:
&gt;&gt;  return literal(stream.render(method=method, encoding=None))
Module genshi.core:183 in render
&lt;&lt;              method = self.serializer or 'xml'
               generator = self.serialize(method=method, **kwargs)
               return encode(generator, method=method, encoding=encoding, out=out)
      
           def select(self, path, namespaces=None, variables=None):
&gt;&gt;  return encode(generator, method=method, encoding=encoding, out=out)
Module genshi.output:57 in encode
&lt;&lt;          _encode = lambda string: string
           if out is None:
               return _encode(''.join(list(iterator)))
           for chunk in iterator:
               out.write(_encode(chunk))
&gt;&gt;  return _encode(''.join(list(iterator)))
Module genshi.output:339 in __call__
&lt;&lt;          for filter_ in self.filters:
                   stream = filter_(stream)
               for kind, data, pos in stream:
                   cached = cache_get((kind, data))
                   if cached is not None:
&gt;&gt;  for kind, data, pos in stream:
Module genshi.output:670 in __call__
&lt;&lt;          _gen_prefix = _gen_prefix().next
      
               for kind, data, pos in stream:
                   output = cache_get((kind, data))
                   if output is not None:
&gt;&gt;  for kind, data, pos in stream:
Module genshi.output:771 in __call__
&lt;&lt;          push_text = textbuf.append
               pop_text = textbuf.pop
               for kind, data, pos in chain(stream, [(None, None, None)]):
      
                   if kind is TEXT:
&gt;&gt;  for kind, data, pos in chain(stream, [(None, None, None)]):
Module genshi.output:586 in __call__
&lt;&lt;      def __call__(self, stream):
               prev = (None, None, None)
               for ev in stream:
                   if prev[0] is START:
                       if ev[0] is END:
&gt;&gt;  for ev in stream:
Module genshi.core:288 in _ensure
&lt;&lt;      # unchanged
           yield event
           for event in stream:
               yield event
&gt;&gt;  for event in stream:
Module genshi.template.base:618 in _include
&lt;&lt;                      tmpl = self.loader.load(href, relative_to=event[2][0],
                                                   cls=cls or self.__class__)
                           for event in tmpl.generate(ctxt, **vars):
                               yield event
                       except TemplateNotFound:
&gt;&gt;  for event in tmpl.generate(ctxt, **vars):
Module genshi.template.base:618 in _include
&lt;&lt;                      tmpl = self.loader.load(href, relative_to=event[2][0],
                                                   cls=cls or self.__class__)
                           for event in tmpl.generate(ctxt, **vars):
                               yield event
                       except TemplateNotFound:
&gt;&gt;  for event in tmpl.generate(ctxt, **vars):
Module genshi.template.base:618 in _include
&lt;&lt;                      tmpl = self.loader.load(href, relative_to=event[2][0],
                                                   cls=cls or self.__class__)
                           for event in tmpl.generate(ctxt, **vars):
                               yield event
                       except TemplateNotFound:
&gt;&gt;  for event in tmpl.generate(ctxt, **vars):
Module genshi.template.base:605 in _include
&lt;&lt;          from genshi.template.loader import TemplateNotFound
      
               for event in stream:
                   if event[0] is INCLUDE:
                       href, cls, fallback = event[1]
&gt;&gt;  for event in stream:
Module genshi.template.markup:378 in _match
&lt;&lt;                      for event in self._match(self._flatten(template, ctxt,
                                                                  **vars),
                                                    ctxt, start=idx + 1, **vars):
                               yield event
&gt;&gt;  ctxt, start=idx + 1, **vars):
Module genshi.template.markup:327 in _match
&lt;&lt;                      break
      
               for event in stream:
      
                   # We (currently) only care about start and end events for matching
&gt;&gt;  for event in stream:
Module genshi.template.base:565 in _flatten
&lt;&lt;                  elif kind is EXPR:
                           result = _eval_expr(data, ctxt, vars)
                           if result is not None:
                               # First check for a string, otherwise the iterable test
&gt;&gt;  result = _eval_expr(data, ctxt, vars)
Module genshi.template.base:277 in _eval_expr
&lt;&lt;      if vars:
               ctxt.push(vars)
           retval = expr.evaluate(ctxt)
           if vars:
               ctxt.pop()
&gt;&gt;  retval = expr.evaluate(ctxt)
Module genshi.template.eval:178 in evaluate
&lt;&lt;          __traceback_hide__ = 'before_and_this'
               _globals = self._globals(data)
               return eval(self.code, _globals, {'__data__': data})
&gt;&gt;  return eval(self.code, _globals, {'__data__': data})
Module ?:16 in &lt;Expression u"h.subnav_link(c, h.icon('comments') + _('Comments &amp; Questions'), controller='package', action='comments', id=c.pkg.name)"&gt;
&lt;&lt;        &lt;/li&gt;
             &lt;li py:if="g.has_commenting"&gt;
                 ${h.subnav_link(c, h.icon('comments') + _('Comments &amp;amp; Questions'), controller='package', action='comments', id=c.pkg.name)}
             &lt;/li&gt;
             &lt;li&gt;${h.subnav_link(c, h.icon('page_white_stack') + _('History'), controller='package', action='history', id=c.pkg.name)}&lt;/li&gt;
&gt;&gt;  ${h.subnav_link(c, h.icon('comments') + _('Comments &amp;amp; Questions'), controller='package', action='comments', id=c.pkg.name)}
Module ckan.lib.helpers:126 in subnav_link
&lt;&lt;      return link_to(
               text,
               url_for(action=action, **kwargs),
               class_=('active' if c.action == action else '')
           )
&gt;&gt;  url_for(action=action, **kwargs),
Module routes.util:280 in url_for
&lt;&lt;          raise GenerationException(
                   "url_for could not generate URL. Called with args: %s %s" % \
                   (args, kargs))
           return url
&gt;&gt;  (args, kargs))
GenerationException: url_for could not generate URL. Called with args: () {'action': 'comments', 'controller': 'package', 'id': 'dengue-net'}
CGI Variables
AUTH_TYPE 	'cookie'
DOCUMENT_ROOT 	'/etc/apache2/htdocs'
GATEWAY_INTERFACE 	'CGI/1.1'
HTTP_ACCEPT 	'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'
HTTP_ACCEPT_CHARSET 	'ISO-8859-1,utf-8;q=0.7,*;q=0.7'
HTTP_ACCEPT_ENCODING 	'gzip, deflate'
HTTP_ACCEPT_LANGUAGE 	'pt-br,pt;q=0.8,en-us;q=0.5,en;q=0.3'
HTTP_CONNECTION 	'keep-alive'
HTTP_COOKIE 	'__utma=4669863.1260802706.1295364409.1306935693.1306960483.86; __utmz=4669863.1295364409.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); SESS61faf7f7d2406929b2f9eb4cbfff17d2=a3306f5d1194cf0d8a51dbf7b42c1259; ckan=d4951177ef995d92f0f987d481bd9180aa0f89e4518921db9cd9b6ac75fdd3fab4a25d06; auth_tkt="c6c3c3e0b3fe7bb765356659992760b24da43221flavio!userid_type:unicode"; auth_tkt="c6c3c3e0b3fe7bb765356659992760b24da43221flavio!userid_type:unicode"; ckan_user="flavio"; ckan_display_name="Fl\xc3\xa1vio Code\xc3\xa7o Coelho"; ckan_apikey="c139718d-918f-4a2b-b219-e33cb05cbe23"; __utmc=4669863'
HTTP_HOST 	'ckan.emap.fgv.br'
HTTP_KEEP_ALIVE 	'115'
HTTP_REFERER 	'http://ckan.emap.fgv.br/'
HTTP_USER_AGENT 	'Mozilla/5.0 (X11; Linux x86_64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1'
PATH_INFO 	'/package/dengue-net'
PATH_TRANSLATED 	'/home/flavio/var/srvc/ckan.emap.fgv.br/pyenv/bin/ckan.emap.fgv.br.py/package/dengue-net'
REMOTE_ADDR 	'10.250.48.110'
REMOTE_PORT 	'47624'
REMOTE_USER 	u'flavio'
REMOTE_USER_DATA 	'userid_type:unicode'
REMOTE_USER_TOKENS 	['']
REQUEST_METHOD 	'GET'
REQUEST_URI 	'/package/dengue-net'
SCRIPT_FILENAME 	'/home/flavio/var/srvc/ckan.emap.fgv.br/pyenv/bin/ckan.emap.fgv.br.py'
SERVER_ADDR 	'10.252.2.60'
SERVER_ADMIN 	'[no address given]'
SERVER_NAME 	'ckan.emap.fgv.br'
SERVER_PORT 	'80'
SERVER_PROTOCOL 	'HTTP/1.1'
SERVER_SIGNATURE 	'&lt;address&gt;Apache/2.2.16 (Debian) Server at ckan.emap.fgv.br Port 80&lt;/address&gt;\n'
SERVER_SOFTWARE 	'Apache/2.2.16 (Debian)'
WSGI Variables
application 	&lt;beaker.middleware.CacheMiddleware object at 0x7f051c802690&gt;
beaker.cache 	&lt;beaker.cache.CacheManager object at 0x7f051c802750&gt;
beaker.get_session 	&lt;bound method SessionMiddleware._get_session of &lt;beaker.middleware.SessionMiddleware object at 0x7f051c8026d0&gt;&gt;
beaker.session 	{'locale': u'pt_BR', '_accessed_time': 1307358102.6266389, '_creation_time': 1302605470.0245121}
mod_wsgi.application_group 	'dck093|'
mod_wsgi.callable_object 	'application'
mod_wsgi.handler_script 	''
mod_wsgi.input_chunked 	'0'
mod_wsgi.listener_host 	''
mod_wsgi.listener_port 	'80'
mod_wsgi.process_group 	'ckan'
mod_wsgi.request_handler 	'wsgi-script'
mod_wsgi.script_reloading 	'1'
mod_wsgi.version 	(3, 3)
paste.cookies 	(&lt;SimpleCookie: SESS61faf7f7d2406929b2f9eb4cbfff17d2='a3306f5d1194cf0d8a51dbf7b42c1259' __utma='4669863.1260802706.1295364409.1306935693.1306960483.86' __utmc='4669863' __utmz='4669863.1295364409.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)' auth_tkt='c6c3c3e0b3fe7bb765356659992760b24da43221flavio!userid_type:unicode' ckan='d4951177ef995d92f0f987d481bd9180aa0f89e4518921db9cd9b6ac75fdd3fab4a25d06' ckan_apikey='c139718d-918f-4a2b-b219-e33cb05cbe23' ckan_display_name='Fl\xc3\xa1vio Code\xc3\xa7o Coelho' ckan_user='flavio'&gt;, '__utma=4669863.1260802706.1295364409.1306935693.1306960483.86; __utmz=4669863.1295364409.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); SESS61faf7f7d2406929b2f9eb4cbfff17d2=a3306f5d1194cf0d8a51dbf7b42c1259; ckan=d4951177ef995d92f0f987d481bd9180aa0f89e4518921db9cd9b6ac75fdd3fab4a25d06; auth_tkt="c6c3c3e0b3fe7bb765356659992760b24da43221flavio!userid_type:unicode"; auth_tkt="c6c3c3e0b3fe7bb765356659992760b24da43221flavio!userid_type:unicode";... __utmc=4669863')
paste.registry 	&lt;paste.registry.Registry object at 0x7f051d7e5710&gt;
paste.throw_errors 	True
pylons.action_method 	&lt;bound method PackageController.read of &lt;ckan.controllers.package.PackageController object at 0x7f051d7e5b10&gt;&gt;
pylons.controller 	&lt;ckan.controllers.package.PackageController object at 0x7f051d7e5b10&gt;
pylons.environ_config 	{'session': 'beaker.session', 'cache': 'beaker.cache'}
pylons.pylons 	&lt;pylons.util.PylonsContext object at 0x7f051d7e5a50&gt;
pylons.routes_dict 	{'action': u'read', 'controller': u'package', 'id': u'dengue-net'}
repoze.who.identity 	&lt;repoze.who identity (hidden, dict-like) at 139659946193344&gt;
repoze.who.logger 	&lt;logging.Logger instance at 0x7f051c801128&gt;
repoze.who.plugins 	{'openid': &lt;OpenIdIdentificationPlugin 139659931643152&gt;, 'friendlyform': &lt;FriendlyFormPlugin 139659929725584&gt;, 'ckan.lib.authenticator:UsernamePasswordAuthenticator': &lt;ckan.lib.authenticator.UsernamePasswordAuthenticator object at 0x7f051c9e7610&gt;, 'auth_tkt': &lt;AuthTktCookiePlugin 139659931643280&gt;, 'ckan.lib.authenticator:OpenIDAuthenticator': &lt;ckan.lib.authenticator.OpenIDAuthenticator object at 0x7f051c9dcfd0&gt;}
routes.route 	&lt;routes.route.Route object at 0x7f051c69fd50&gt;
routes.url 	&lt;routes.util.URLGenerator object at 0x7f051d7e57d0&gt;
webob._parsed_cookies 	({'ckan': 'd4951177ef995d92f0f987d481bd9180aa0f89e4518921db9cd9b6ac75fdd3fab4a25d06', '__utmz': '4669863.1295364409.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'auth_tkt': 'c6c3c3e0b3fe7bb765356659992760b24da43221flavio!userid_type:unicode', 'ckan_display_name': 'Fl\xc3\xa1vio Code\xc3\xa7o Coelho', 'ckan_apikey': 'c139718d-918f-4a2b-b219-e33cb05cbe23', 'ckan_user': 'flavio', '__utma': '4669863.1260802706.1295364409.1306935693.1306960483.86', '__utmc': '4669863', 'SESS61faf7f7d2406929b2f9eb4cbfff17d2': 'a3306f5d1194cf0d8a51dbf7b42c1259'}, '__utma=4669863.1260802706.1295364409.1306935693.1306960483.86; __utmz=4669863.1295364409.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); SESS61faf7f7d2406929b2f9eb4cbfff17d2=a3306f5d1194cf0d8a51dbf7b42c1259; ckan=d4951177ef995d92f0f987d481bd9180aa0f89e4518921db9cd9b6ac75fdd3fab4a25d06; auth_tkt="c6c3c3e0b3fe7bb765356659992760b24da43221flavio!userid_type:unicode"&lt; wbr&gt;; auth_tkt="c6c3c3e0b3fe7bb765356659992760b24da43221flavio!... __utmc=4669863')
webob._parsed_query_vars 	(GET([]), '')
webob.adhoc_attrs 	{'language': 'en-us'}
wsgi process 	'Multi process AND threads (?)'
wsgi.file_wrapper 	&lt;built-in method file_wrapper of mod_wsgi.Adapter object at 0x7f051cc1ad50&gt;
wsgi.version 	(1, 1)
wsgiorg.routing_args 	(&lt;routes.util.URLGenerator object at 0x7f051d7e57d0&gt;, {'action': u'read', 'controller': u'package', 'id': u'dengue-net'})
</pre>
                            
                          </td>
                          <td class="PosixTime">1307358586000000
                          </td>
                          <td class="ModifiedTime">1307374897000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1178.html">#1178</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">fccoelho
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1178.html">Local storage issue with ckanext-storage</a>
                          </td>
                          <td class="description">
                            <p>
I have followed the instruction for installation a configuration of ckanext-storage, but I am getting this error when I try to access the /storage/upload url:
</p>
<p>
URL: <a class="ext-link" href="http://ckan.emap.fgv.br/storage/upload"><span class="icon">​</span>http://ckan.emap.fgv.br/storage/upload</a>
Module weberror.errormiddleware:162 in <span class="underline">call</span>
&lt;&lt;              <span class="underline">traceback_supplement</span> = Supplement, self, environ
</p>
<blockquote>
<p>
sr_checker = <a class="missing wiki">ResponseStartChecker?</a>(start_response)
app_iter = self.application(environ, sr_checker)
return self.make_catching_iter(app_iter, environ, sr_checker)
</p>
</blockquote>
<blockquote>
<p>
except:
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
app_iter = self.application(environ, sr_checker)
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module beaker.middleware:73 in <span class="underline">call</span>
&lt;&lt;                                                     self.cache_manager)
</p>
<blockquote>
<p>
environ[self.environ_key] = self.cache_manager
return self.app(environ, start_response)
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
return self.app(environ, start_response)
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module beaker.middleware:152 in <span class="underline">call</span>
&lt;&lt;                          headers.append(('Set-cookie', cookie))
</p>
<blockquote>
<p>
return start_response(status, headers, exc_info)
</p>
</blockquote>
<blockquote>
<p>
return self.wrap_app(environ, session_start_response)
</p>
</blockquote>
<p>
          
</p>
<blockquote>
<p>
def _get_session(self):
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
return self.wrap_app(environ, session_start_response)
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module routes.middleware:130 in <span class="underline">call</span>
&lt;&lt;                  environ<a class="missing wiki">SCRIPT_NAME?</a> = environ<a class="missing wiki">SCRIPT_NAME?</a>[:-1]
              
</p>
<blockquote>
<p>
response = self.app(environ, start_response)
</p>
</blockquote>
<p>
              
</p>
<blockquote>
<p>
# Wrapped in try as in rare cases the attribute will be gone already
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
response = self.app(environ, start_response)
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module pylons.wsgiapp:124 in <span class="underline">call</span>
&lt;&lt;                  return <a class="missing wiki">% paste.registry.restorer.get_request_id(environ)?</a>
              
</p>
<blockquote>
<p>
controller = self.resolve(environ, start_response)
response = self.dispatch(controller, environ, start_response)
</p>
</blockquote>
<p>
              
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
controller = self.resolve(environ, start_response)
</p>
</blockquote>
</blockquote>
</blockquote>
<p>
Module pylons.wsgiapp:263 in resolve
&lt;&lt;          if self.log_debug:
</p>
<blockquote>
<p>
log.debug("Resolved URL to controller: %r", controller)
</p>
</blockquote>
<blockquote>
<p>
return self.find_controller(controller)
</p>
</blockquote>
<p>
          
</p>
<blockquote>
<p>
def find_controller(self, controller):
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
return self.find_controller(controller)
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module ckan.config.environment:39 in find_controller
&lt;&lt;          # Check to see if its a dotted name
</p>
<blockquote>
<p>
if '.' in controller or ':' in controller:
</p>
<blockquote>
<p>
mycontroller = pkg_resources.<a class="missing wiki">EntryPoint?</a>.parse('x=%s' % controller).load(False)
self.controller_classes[controller] = mycontroller
return mycontroller
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
mycontroller = pkg_resources.<a class="missing wiki">EntryPoint?</a>.parse('x=%s' % controller).load(False)
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module pkg_resources:1954 in load
&lt;&lt;      def load(self, require=True, env=None, installer=None):
</p>
<blockquote>
<p>
if require: self.require(env, installer)
entry = <span class="underline">import</span>(self.module_name, globals(),globals(), <a class="missing wiki">__name__?</a>)
for attr in self.attrs:
</p>
<blockquote>
<p>
try:
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
entry = <span class="underline">import</span>(self.module_name, globals(),globals(), <a class="missing wiki">__name__?</a>)
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module ?:87 in &lt;module&gt;
&lt;&lt;  class StorageAPIController(<a class="missing wiki">BaseController?</a>):
</p>
<blockquote>
<p>
ofs = get_ofs()
</p>
</blockquote>
<p>
          
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
class StorageAPIController(<a class="missing wiki">BaseController?</a>):
</p>
</blockquote>
</blockquote>
</blockquote>
<p>
Module ?:88 in StorageAPIController
&lt;&lt;  class StorageAPIController(<a class="missing wiki">BaseController?</a>):
</p>
<blockquote>
<p>
ofs = get_ofs()
</p>
</blockquote>
<p>
          
</p>
<blockquote>
<p>
@jsonpify
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
ofs = get_ofs()
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module ?:69 in get_ofs
&lt;&lt;              continue
</p>
<blockquote>
<p>
kw[k[4:]] = v
</p>
</blockquote>
<blockquote>
<p>
ofs = get_impl(storage_backend)(<strong>kw)
return ofs
</strong></p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
ofs = get_impl(storage_backend)(<strong>kw)
</strong></p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module ofs.local.pairtreestore:26 in <span class="underline">init</span>
&lt;&lt;          self.hashing_type = hashing_type
</p>
<blockquote>
<p>
self.shorty_length = shorty_length
self._open_store()
</p>
</blockquote>
<p>
          
</p>
<blockquote>
<p>
def _open_store(self):
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
self._open_store()
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module ofs.local.pairtreestore:30 in _open_store
&lt;&lt;      def _open_store(self):
</p>
<blockquote>
<p>
if self.hashing_type:
</p>
<blockquote>
<p>
self._store = <a class="missing wiki">PairtreeStorageClient?</a>(self.uri_base, self.storage_dir, shorty_length=self.shorty_length, hashing_type=self.hashing_type)
</p>
</blockquote>
<p>
else:
</p>
<blockquote>
<p>
self._store = <a class="missing wiki">PairtreeStorageClient?</a>(self.uri_base, self.storage_dir, shorty_length=shorty_length)
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
self._store = <a class="missing wiki">PairtreeStorageClient?</a>(self.uri_base, self.storage_dir, shorty_length=self.shorty_length, hashing_type=self.hashing_type)
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module pairtree.pairtree_client:91 in <span class="underline">init</span>
&lt;&lt;          self._decode = re.compile(r"\<sup>(..)", re.U)
              
</sup></p>
<blockquote>
<p>
self._init_store()
</p>
</blockquote>
<p>
      
</p>
<blockquote>
<p>
def <span class="underline">char2hex(self, m):
</span></p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
self._init_store()
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module pairtree.pairtree_client:264 in _init_store
&lt;&lt;                      self.uri_base = prefix
</p>
<blockquote>
<p>
else:
</p>
<blockquote>
<p>
raise NotAPairtreeStoreException
</p>
</blockquote>
</blockquote>
<p>
      
</p>
<blockquote>
<p>
if not os.path.isdir(self.store_dir):
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
raise NotAPairtreeStoreException
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
NotAPairtreeStoreException:
CGI Variables
AUTH_TYPE         'cookie'
DOCUMENT_ROOT         '/etc/apache2/htdocs'
GATEWAY_INTERFACE         'CGI/1.1'
HTTP_ACCEPT         'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'
HTTP_ACCEPT_CHARSET         'ISO-8859-1,utf-8;q=0.7,*;q=0.7'
HTTP_ACCEPT_ENCODING         'gzip, deflate'
HTTP_ACCEPT_LANGUAGE         'pt-br,pt;q=0.8,en-us;q=0.5,en;q=0.3'
HTTP_CONNECTION         'keep-alive'
HTTP_COOKIE         '<span class="underline">utma=4669863.1260802706.1295364409.1306935693.1306960483.86; </span>utmz=4669863.1295364409.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); SESS61faf7f7d2406929b2f9eb4cbfff17d2=a3306f5d1194cf0d8a51dbf7b42c1259; ckan=d4951177ef995d92f0f987d481bd9180aa0f89e4518921db9cd9b6ac75fdd3fab4a25d06; auth_tkt="c6c3c3e0b3fe7bb765356659992760b24da43221flaviouserid_type:unicode"; auth_tkt="c6c3c3e0b3fe7bb765356659992760b24da43221flaviouserid_type:unicode"; ckan_user="flavio"; ckan_display_name="Fl\xc3\xa1vio Code\xc3\xa7o Coelho"; ckan_apikey="c139718d-918f-4a2b-b219-e33cb05cbe23"; <span class="underline">utmc=4669863; hide_welcome_message=1'
HTTP_HOST         'ckan.emap.fgv.br'
HTTP_KEEP_ALIVE         '115'
HTTP_USER_AGENT         'Mozilla/5.0 (X11; Linux x86_64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1'
PATH_INFO         '/storage/upload'
PATH_TRANSLATED         '/home/flavio/var/srvc/ckan.emap.fgv.br/pyenv/bin/ckan.emap.fgv.br.py/storage/upload'
REMOTE_ADDR         '10.250.48.110'
REMOTE_PORT         '57426'
REMOTE_USER         u'flavio'
REMOTE_USER_DATA         'userid_type:unicode'
REMOTE_USER_TOKENS         [<em>]
REQUEST_METHOD         'GET'
REQUEST_URI         '/storage/upload'
SCRIPT_FILENAME         '/home/flavio/var/srvc/ckan.emap.fgv.br/pyenv/bin/ckan.emap.fgv.br.py'
SERVER_ADDR         '10.252.2.60'
SERVER_ADMIN         '[no address given]'
SERVER_NAME         'ckan.emap.fgv.br'
SERVER_PORT         '80'
SERVER_PROTOCOL         'HTTP/1.1'
SERVER_SIGNATURE         '&lt;address&gt;Apache/2.2.16 (Debian) Server at ckan.emap.fgv.br Port 80&lt;/address&gt;\n'
SERVER_SOFTWARE         'Apache/2.2.16 (Debian)'
WSGI Variables
application         &lt;beaker.middleware.<a class="missing wiki">CacheMiddleware?</a> object at 0x7fc2999a6cd0&gt;
beaker.cache         &lt;beaker.cache.<a class="missing wiki">CacheManager?</a> object at 0x7fc2999a6d90&gt;
beaker.get_session         &lt;bound method <a class="missing wiki">SessionMiddleware?</a>._get_session of &lt;beaker.middleware.<a class="missing wiki">SessionMiddleware?</a> object at 0x7fc2999a6d10&gt;&gt;
beaker.session         {'locale': u'pt_BR', '_accessed_time': 1307373458.4790759, '_creation_time': 1302605470.0245121}
mod_wsgi.application_group         'dck093|'
mod_wsgi.callable_object         'application'
mod_wsgi.handler_script         </em>
mod_wsgi.input_chunked         '0'
mod_wsgi.listener_host         <em>
mod_wsgi.listener_port         '80'
mod_wsgi.process_group         'ckan'
mod_wsgi.request_handler         'wsgi-script'
mod_wsgi.script_reloading         '1'
mod_wsgi.version         (3, 3)
paste.cookies         (&lt;SimpleCookie: SESS61faf7f7d2406929b2f9eb4cbfff17d2='a3306f5d1194cf0d8a51dbf7b42c1259' __utma='4669863.1260802706.1295364409.1306935693.1306960483.86' __utmc='4669863' __utmz='4669863.1295364409.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)' auth_tkt='c6c3c3e0b3fe7bb765356659992760b24da43221flavio!userid_type:unicode' ckan='d4951177ef995d92f0f987d481bd9180aa0f89e4518921db9cd9b6ac75fdd3fab4a25d06' ckan_apikey='c139718d-918f-4a2b-b219-e33cb05cbe23' ckan_display_name='Fl\xc3\xa1vio Code\xc3\xa7o Coelho' ckan_user='flavio' hide_welcome_message='1'&gt;, '</em></span><em>utma=4669863.1260802706.1295364409.1306935693.1306960483.86; <span class="underline">utmz=4669863.1295364409.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); SESS61faf7f7d2406929b2f9eb4cbfff17d2=a3306f5d1194cf0d8a51dbf7b42c1259; ckan=d4951177ef995d92f0f987d481bd9180aa0f89e4518921db9cd9b6ac75fdd3fab4a25d06; auth_tkt="c6c3c3e0b3fe7bb765356659992760b24da43221flavio!userid _type:unicode"; auth_tkt="c6c3c3e0b3fe7bb765356659992760b24da43221fla...lcome_message=1')
paste.registry         &lt;paste.registry.Registry object at 0x7fc299de4f50&gt;
paste.throw_errors         True
pylons.environ_config         {'session': 'beaker.session', 'cache': 'beaker.cache'}
pylons.pylons         &lt;pylons.util.<a class="missing wiki">PylonsContext?</a> object at 0x7fc299e27d50&gt;
pylons.routes_dict         {'action': u'index', 'controller': u'ckanext.storage.controller:StorageController'}
repoze.who.identity         &lt;repoze.who identity (hidden, dict-like) at 140473773131872&gt;
repoze.who.logger         &lt;logging.Logger instance at 0x7fc2999a3b48&gt;
repoze.who.plugins         {'openid': &lt;<a class="missing wiki">OpenIdIdentificationPlugin?</a> 140473779397008&gt;, 'friendlyform': &lt;<a class="missing wiki">FriendlyFormPlugin?</a> 140473777417040&gt;, 'ckan.lib.authenticator:UsernamePasswordAuthenticator': &lt;ckan.lib.authenticator.<a class="missing wiki">UsernamePasswordAuthenticator?</a> object at 0x7fc299b93a50&gt;, 'auth_tkt': &lt;<a class="missing wiki">AuthTktCookiePlugin?</a> 140473779397136&gt;, 'ckan.lib.authenticator:OpenIDAuthenticator': &lt;ckan.lib.authenticator.OpenIDAuthenticator object at 0x7fc299b934d0&gt;}
routes.route         &lt;routes.route.Route object at 0x7fc299864090&gt;
routes.url         &lt;routes.util.URLGenerator object at 0x7fc299e27ed0&gt;
webob._parsed_query_vars         (GET([]), </span></em><span class="underline">)
webob.adhoc_attrs         {'language': 'en-us'}
wsgi process         'Multi process AND threads (?)'
wsgi.file_wrapper         &lt;built-in method file_wrapper of mod_wsgi.Adapter object at 0x7fc299dae4e0&gt;
wsgi.version         (1, 1)
wsgiorg.routing_args         (&lt;routes.util.URLGenerator object at 0x7fc299e27ed0&gt;, {'action': u'index', 'controller': u'ckanext.storage.controller:StorageController'})
Reply
        
Reply to all
        
Forward
                
        
Reply to all
paste@localhost to fccoelho
        
show details 10:17 (2 hours ago)
        
</span></p>
<ul><li>Show quoted text -
</li></ul><p>
CGI Variables
AUTH_TYPE         'cookie'
DOCUMENT_ROOT         '/etc/apache2/htdocs'
GATEWAY_INTERFACE         'CGI/1.1'
HTTP_ACCEPT         'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'
HTTP_ACCEPT_CHARSET         'ISO-8859-1,utf-8;q=0.7,*;q=0.7'
HTTP_ACCEPT_ENCODING         'gzip, deflate'
HTTP_ACCEPT_LANGUAGE         'pt-br,pt;q=0.8,en-us;q=0.5,en;q=0.3'
HTTP_CONNECTION         'keep-alive'
HTTP_COOKIE         '<span class="underline">utma=4669863.1260802706.1295364409.1306935693.1306960483.86; </span>utmz=4669863.1295364409.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); SESS61faf7f7d2406929b2f9eb4cbfff17d2=a3306f5d1194cf0d8a51dbf7b42c1259; ckan=d4951177ef995d92f0f987d481bd9180aa0f89e4518921db9cd9b6ac75fdd3fab4a25d06; auth_tkt="c6c3c3e0b3fe7bb765356659992760b24da43221flaviouserid_type:unicode"; auth_tkt="c6c3c3e0b3fe7bb765356659992760b24da43221flaviouserid_type:unicode"; ckan_user="flavio"; ckan_display_name="Fl\xc3\xa1vio Code\xc3\xa7o Coelho"; ckan_apikey="c139718d-918f-4a2b-b219-e33cb05cbe23"; <span class="underline">utmc=4669863; hide_welcome_message=1'
HTTP_HOST         'ckan.emap.fgv.br'
HTTP_KEEP_ALIVE         '115'
HTTP_USER_AGENT         'Mozilla/5.0 (X11; Linux x86_64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1'
PATH_INFO         '/storage/upload'
PATH_TRANSLATED         '/home/flavio/var/srvc/ckan.emap.fgv.br/pyenv/bin/ckan.emap.fgv.br.py/storage/upload'
REMOTE_ADDR         '10.250.48.110'
REMOTE_PORT         '57429'
REMOTE_USER         u'flavio'
REMOTE_USER_DATA         'userid_type:unicode'
REMOTE_USER_TOKENS         [<em>]
REQUEST_METHOD         'GET'
REQUEST_URI         '/storage/upload'
SCRIPT_FILENAME         '/home/flavio/var/srvc/ckan.emap.fgv.br/pyenv/bin/ckan.emap.fgv.br.py'
SERVER_ADDR         '10.252.2.60'
SERVER_ADMIN         '[no address given]'
SERVER_NAME         'ckan.emap.fgv.br'
SERVER_PORT         '80'
SERVER_PROTOCOL         'HTTP/1.1'
SERVER_SIGNATURE         '&lt;address&gt;Apache/2.2.16 (Debian) Server at ckan.emap.fgv.br Port 80&lt;/address&gt;\n'
SERVER_SOFTWARE         'Apache/2.2.16 (Debian)'
WSGI Variables
application         &lt;beaker.middleware.<a class="missing wiki">CacheMiddleware?</a> object at 0x7fc2999a6cd0&gt;
beaker.cache         &lt;beaker.cache.<a class="missing wiki">CacheManager?</a> object at 0x7fc2999a6d90&gt;
beaker.get_session         &lt;bound method <a class="missing wiki">SessionMiddleware?</a>._get_session of &lt;beaker.middleware.<a class="missing wiki">SessionMiddleware?</a> object at 0x7fc2999a6d10&gt;&gt;
beaker.session         {'locale': u'pt_BR', '_accessed_time': 1307373466.085686, '_creation_time': 1302605470.0245121}
mod_wsgi.application_group         'dck093|'
mod_wsgi.callable_object         'application'
mod_wsgi.handler_script         </em>
mod_wsgi.input_chunked         '0'
mod_wsgi.listener_host         <em>
mod_wsgi.listener_port         '80'
mod_wsgi.process_group         'ckan'
mod_wsgi.request_handler         'wsgi-script'
mod_wsgi.script_reloading         '1'
mod_wsgi.version         (3, 3)
paste.cookies         (&lt;SimpleCookie: SESS61faf7f7d2406929b2f9eb4cbfff17d2='a3306f5d1194cf0d8a51dbf7b42c1259' __utma='4669863.1260802706.1295364409.1306935693.1306960483.86' __utmc='4669863' __utmz='4669863.1295364409.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)' auth_tkt='c6c3c3e0b3fe7bb765356659992760b24da43221flavio!userid_type:unicode' ckan='d4951177ef995d92f0f987d481bd9180aa0f89e4518921db9cd9b6ac75fdd3fab4a25d06' ckan_apikey='c139718d-918f-4a2b-b219-e33cb05cbe23' ckan_display_name='Fl\xc3\xa1vio Code\xc3\xa7o Coelho' ckan_user='flavio' hide_welcome_message='1'&gt;, '</em></span><em>utma=4669863.1260802706.1295364409.1306935693.1306960483.86; <span class="underline">utmz=4669863.1295364409.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); SESS61faf7f7d2406929b2f9eb4cbfff17d2=a3306f5d1194cf0d8a51dbf7b42c1259; ckan=d4951177ef995d92f0f987d481bd9180aa0f89e4518921db9cd9b6ac75fdd3fab4a25d06; auth_tkt="c6c3c3e0b3fe7bb765356659992760b24da43221flavio!userid _type:unicode"; auth_tkt="c6c3c3e0b3fe7bb765356659992760b24da43221fla...lcome_message=1')
paste.registry         &lt;paste.registry.Registry object at 0x7fc29a9da850&gt;
paste.throw_errors         True
pylons.environ_config         {'session': 'beaker.session', 'cache': 'beaker.cache'}
pylons.pylons         &lt;pylons.util.<a class="missing wiki">PylonsContext?</a> object at 0x7fc29a9ef950&gt;
pylons.routes_dict         {'action': u'index', 'controller': u'ckanext.storage.controller:StorageController'}
repoze.who.identity         &lt;repoze.who identity (hidden, dict-like) at 140473790084352&gt;
repoze.who.logger         &lt;logging.Logger instance at 0x7fc2999a3b48&gt;
repoze.who.plugins         {'openid': &lt;<a class="missing wiki">OpenIdIdentificationPlugin?</a> 140473779397008&gt;, 'friendlyform': &lt;<a class="missing wiki">FriendlyFormPlugin?</a> 140473777417040&gt;, 'ckan.lib.authenticator:UsernamePasswordAuthenticator': &lt;ckan.lib.authenticator.<a class="missing wiki">UsernamePasswordAuthenticator?</a> object at 0x7fc299b93a50&gt;, 'auth_tkt': &lt;<a class="missing wiki">AuthTktCookiePlugin?</a> 140473779397136&gt;, 'ckan.lib.authenticator:OpenIDAuthenticator': &lt;ckan.lib.authenticator.OpenIDAuthenticator object at 0x7fc299b934d0&gt;}
routes.route         &lt;routes.route.Route object at 0x7fc299864090&gt;
routes.url         &lt;routes.util.URLGenerator object at 0x7fc29a9efcd0&gt;
webob._parsed_query_vars         (GET([]), </span></em><span class="underline">)
webob.adhoc_attrs         {'language': 'en-us'}
wsgi process         'Multi process AND threads (?)'
wsgi.file_wrapper         &lt;built-in method file_wrapper of mod_wsgi.Adapter object at 0x7fc29a9d7d50&gt;
wsgi.version         (1, 1)
wsgiorg.routing_args         (&lt;routes.util.URLGenerator object at 0x7fc29a9efcd0&gt;, {'action': u'index', 'controller': u'ckanext.storage.controller:StorageController'})
</span></p>

                            
                          </td>
                          <td class="PosixTime">1307373810000000
                          </td>
                          <td class="ModifiedTime">1308045351000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1179.html">#1179</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">timmcnamara
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1179.html">Support tag aliases</a>
                          </td>
                          <td class="description">
                            <p>
A small number of tags are near-duplicates of each other.
</p>
<p>
Perhaps we could support word stemming from NLTK and/or manual tag aliases:
</p>
<blockquote>
<p>
statistics
statistik
...
survey
surveying
surveys
</p>
</blockquote>

                            
                          </td>
                          <td class="PosixTime">1307429221000000
                          </td>
                          <td class="ModifiedTime">1339774332000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1180.html">#1180</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5-sprint-3.html">ckan-v1.5-sprint-3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1180.html">Links in markdown can be badly formed</a>
                          </td>
                          <td class="description">
                            <p>
User can insert bad anchor tags into the User-About and Package-Notes fields and when you view them (web interface) it causes a 500 error.
</p>
<p>
Need to improve filtering for anchors in markdown.
</p>
<pre class="wiki">&lt;a href="http://xxxsex.com&gt;nasty/website
</pre><p>
Also check this related exception:
</p>
<pre class="wiki">Module ckan.controllers.user:59 in read
&lt;&lt;          c.is_myself = user.name == c.user
               c.api_key = user.apikey
               c.about_formatted = self._format_about(user.about)
               revisions_q = model.Session.query(model.Revision
                       ).filter_by(author=user.name)
&gt;&gt;  c.about_formatted = self._format_about(user.about)
Module ckan.controllers.user:167 in _format_about
&lt;&lt;      def _format_about(self, about):
               about_formatted = ckan.misc.MarkdownFormat().to_html(about)
               return genshi.HTML(about_formatted) 
       
           def _get_form_password(self):
&gt;&gt;  return genshi.HTML(about_formatted)
WebApp Error: &lt;class 'genshi.input.ParseError'&gt;: junk characters in start tag: u'\u201dhttp://www.settingu': line 1, column 3
</pre>
                            
                          </td>
                          <td class="PosixTime">1307469037000000
                          </td>
                          <td class="ModifiedTime">1307544223000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1181.html">#1181</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1181.html">Link spam vulnerability in Notes and User-About fields</a>
                          </td>
                          <td class="description">
                            <p>
When viewing a user and a package, the about/notes fields contain Markdown, which may have links. These should have rel="nofollow" to discourage link spam.
</p>

                            
                          </td>
                          <td class="PosixTime">1307523160000000
                          </td>
                          <td class="ModifiedTime">1307532816000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1182.html">#1182</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">timmcnamara
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1182.html">Comments from deleted packages appear in "Recent Comments" feed</a>
                          </td>
                          <td class="description">
                            <p>
When a package has been deleted, say for spam moderation, comments still appear in the recent comments section.
</p>
<p>
This is a problem because non-admin users will be shown a warning that they're not authorised to view the package if they click on the link.
</p>
<p>
At CKAN.net currently, this affects the most recent comment.
</p>

                            
                          </td>
                          <td class="PosixTime">1307658251000000
                          </td>
                          <td class="ModifiedTime">1339774319000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1183.html">#1183</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">nickstenning
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1183.html">Downloads "Preview" button doesn't preview.</a>
                          </td>
                          <td class="description">
                            <p>
The "Preview" button is a nice idea, but it doesn't seem to actually "preview" anything if the file MIME type would ordinarily cause the browser to download the file. If so, the browser does indeed just download the file.
</p>
<p>
This is notable in the context of most hosted file services (including Google Storage) which will deliberately serve a MIME type of <tt>application/x-some-junk-here</tt> in order to force a download.
</p>

                            
                          </td>
                          <td class="PosixTime">1307701669000000
                          </td>
                          <td class="ModifiedTime">1311771069000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1184.html">#1184</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">timmcnamara
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1184.html">Support Wuala as CKAN storage option</a>
                          </td>
                          <td class="description">
                            <p>
Most of CKANs storage options are tied to the USA. This brings concerns of data security for some organisations who may wish to adopt the system. <a class="ext-link" href="http://wua.la"><span class="icon">​</span>Wuala</a> is a distributed file system that stores data in a peer-to-peer manner. The company behind it, <a class="missing wiki">LaCie?</a> sells storage for a fee. However, they also enable clients to have 'free' storage space when machines act as a storage node. 
</p>
<p>
In order to be a storage node, a machine needs to be online for more than 14% of the time - roughly 4h per day. Most CKAN servers are likely to have a far greater uptime than this.
</p>
<p>
Supporting Wuala would go some way to enabling CKAN to be used in a secure manner. That is, CKAN could be promoted for organisational use where there is lots of data to be stored and large geographic distances to be managed. There is a <a class="ext-link" href="http://www.wuala.com/Wuala%20API/Sample%20Clients/Python/wualaAPI/"><span class="icon">​</span>Python client available</a> and a fairly <a class="ext-link" href="http://www.youtube.com/watch?v=3xKZ4KGkQY8"><span class="icon">​</span>long Google Tech Talk</a> that overviews the system.
</p>

                            
                          </td>
                          <td class="PosixTime">1308034751000000
                          </td>
                          <td class="ModifiedTime">1339774306000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1185.html">#1185</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">timmcnamara
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1185.html">Administrators can't delete packages from web UI</a>
                          </td>
                          <td class="description">
                            <p>
Administrators have "View", "Edit" and "History" tabs. However, I can't see a way to delete a package from the web UI.
</p>
<p>
Version: CKAN.net as of today
</p>

                            
                          </td>
                          <td class="PosixTime">1308111818000000
                          </td>
                          <td class="ModifiedTime">1339774289000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1186.html">#1186</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1186.html">Password reset facility</a>
                          </td>
                          <td class="description">
                            <p>
You can register a user with password and (optional) email address. But if you forget the password you can't then log in again. We need a password reset facility that sends and email with a new password.
</p>

                            
                          </td>
                          <td class="PosixTime">1308142766000000
                          </td>
                          <td class="ModifiedTime">1310556519000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1187.html">#1187</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5-sprint-3.html">ckan-v1.5-sprint-3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1187.html">Stop spam users with links in the 'about' field</a>
                          </td>
                          <td class="description">
                            <p>
When you edit a user, you should be stopped from putting links in the 'about' field, because this is a common tactic by spammers.
</p>

                            
                          </td>
                          <td class="PosixTime">1308142999000000
                          </td>
                          <td class="ModifiedTime">1308143605000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1188.html">#1188</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">nickstenning
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1188.html">Allow diffing against initial (blank) package version</a>
                          </td>
                          <td class="description">
                            <p>
Currently the history page only allows diffing between different versions of a package, but there doesn't appear to be any easy way to see the changes introduced by the first version of a package.
</p>
<p>
I'm requesting the ability to diff against a "blank slate" initial state of a project, so I can see the content of the first project commit.
</p>
<p>
Not sure if this is a vdm feature, so I'm putting this ticket in against ckan.
</p>

                            
                          </td>
                          <td class="PosixTime">1308153160000000
                          </td>
                          <td class="ModifiedTime">1339774275000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1189.html">#1189</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">timmcnamara
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1189.html">Spideroak support in CKAN Storage</a>
                          </td>
                          <td class="description">
                            <p>
<a class="ext-link" href="http://spideroak.com"><span class="icon">​</span>Spideroak</a> is a bulk storage platform by a company that releases quite a lot of <a class="ext-link" href="https://spideroak.com/code"><span class="icon">​</span>free software</a>, has an extensive <a class="ext-link" href="https://spideroak.com/diy/"><span class="icon">​</span>developer API</a> with pricing of $10/100GB/month.
</p>
<p>
The data store is optimised for bulk data storage and retrieval. This is the kind of use case that CKAN packages require. We don't need low latency. We are after low cost, high reliability solution.
</p>

                            
                          </td>
                          <td class="PosixTime">1308187104000000
                          </td>
                          <td class="ModifiedTime">1323173227000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1190.html">#1190</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1190.html">[super] CREP 0004 Data API and Data Processing System</a>
                          </td>
                          <td class="description">
                            <p>
For some time (e.g. 1y+!) we have known that we want to integrate some kind of datastore / data processing system with CKAN. We've had a CREP in progress on this for some months (may copy that here at some point):
</p>
<p>
<a class="ext-link" href="http://wiki.ckan.org/CEP0004"><span class="icon">​</span>http://wiki.ckan.org/CEP0004</a>
</p>
<p>
We can distinguish 3 modules that are needed:
</p>
<ol><li>"Webstore": A datastore with dataapi - <a class="closed ticket" href="../ticket/1208.html" title="enhancement: Webstore: a datastore with web API (closed: fixed)">#1208</a>
</li></ol><p>
Suggestion is this would be sqlite based with a simple sql based API. <a class="ext-link" href="http://ckan.net/api/data/{user|org}/{datastore_name}?q={some-read-sql-query"><span class="icon">​</span>http://ckan.net/api/data/{user|org}/{datastore_name}?q={some-read-sql-query</a>}
</p>
<ol start="2"><li>Automated conversion of suitable resources into datastore upon resource creation so that e.g. they are accessible via the API. <a class="closed ticket" href="../ticket/1398.html" title="enhancement: Automated conversion of resource data into webstore (closed: fixed)">#1398</a>
</li></ol><ol start="3"><li>A data processing system which utilizes this datastore. One could
</li></ol><p>
get a long way with simple javascript running in the browser for development with this javascript then run offline using something like nodejs. Alternatively one could allow one to specify a url to e.g. a python file which would then be run in a sandbox (with access to some specified set of python modules) - <a class="new ticket" href="../ticket/1432.html" title="enhancement: [super] Data processing system for CKAN and Webstore (new)">#1432</a>
</p>
<h2 id="Moreinfo">More info</h2>
<ul><li>Overview diagram: <a class="ext-link" href="https://docs.google.com/drawings/d/1XK7dcpFXNlMzVFgLPYPZUXOsFRPzgCEvS-w7FcvydEQ/edit?hl=en_GB"><span class="icon">​</span>https://docs.google.com/drawings/d/1XK7dcpFXNlMzVFgLPYPZUXOsFRPzgCEvS-w7FcvydEQ/edit?hl=en_GB</a>
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1308227611000000
                          </td>
                          <td class="ModifiedTime">1323270522000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1191.html">#1191</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5-sprint-3.html">ckan-v1.5-sprint-3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1191.html">Unicode in user password gives 500 error on user registration</a>
                          </td>
                          <td class="description">
                            <p>
Create/register a user with a unicode character in the password. It creates the user, but the redirect to the user page doesn't work and results in 500 error.
</p>

                            
                          </td>
                          <td class="PosixTime">1308312895000000
                          </td>
                          <td class="ModifiedTime">1308650930000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1192.html">#1192</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">annapowellsmith
                          </td>
                          <td class="reporter">annapowellsmith
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1192.html">Convert CKAN Sphinx docs into admin/reference manual</a>
                          </td>
                          <td class="description">
                            <p>
As part of the general documentation overhaul (<a class="closed ticket" href="../ticket/1142.html" title="enhancement: [super] Major Overhaul and Extension of CKAN Documentation (closed: fixed)">ticket:1142</a>) we (APS and RGRP) want to convert the current Sphinx docs into:
</p>
<ul><li>An Admin Manual which is task-based and aims to cover everything a developer would need to know to set up and customize a CKAN install. 
</li><li>A Reference Manual which is the primary source of reference for CKAN software - this includes API docs. 
</li></ul><p>
The current chapters of the Sphinx docs should be moved as follows:
</p>
<ul><li>index.rst - copy some stuff from README.txt, keep short
</li><li>README.txt - split out installation - stop symlinking in, keep separate, write new intro in index.rst 
</li><li>[NEW] install.rst - new file on installation
</li><li>[NEW] theming.rst - move over from wiki
</li><li>api - will stay (gradually move tutorials/getting started to wiki.ckan.net user guide)
</li><li>i18n.rst: internationlization. say we have x langauges. just set lang config option. if your lang not there yet see wiki page for how to prepare a translation file
</li><li>design.rst - REMOVE (can copy some over if you can be bothered to <a class="ext-link" href="http://wiki.ckan.net/Vision"><span class="icon">​</span>http://wiki.ckan.net/Vision</a> (all philosophical stuff should go!))
</li><li>loaders.rst: move to wiki.ckan.net/Using_Loaders
</li><li>feeds.rst: move to User Manual (CKAN_Feeds or just Feeds)
</li><li>importer.rst: remove (don't even copy)
</li><li>forms.rst: remove (ping david read and ckan-dev asking for replacement documentation -- do we need this in core ckan -- do we want pure js ...?). Suggest we start with (stub out) <a class="ext-link" href="http://wiki.ckan.net/Customizing_Forms"><span class="icon">​</span>http://wiki.ckan.net/Customizing_Forms</a>
</li><li>forms-integration.rst: remove
</li><li>model.rst: leave but move to reference (only for core devs)
</li><li>load-testing.rst -&gt; move to <a class="ext-link" href="http://wiki.ckan.net/Load_Testing"><span class="icon">​</span>http://wiki.ckan.net/Load_Testing</a>
</li><li>distributed.rst -&gt; remove
</li><li>admin.html should consolidate with authorization.html (some of authorization.html is probably in ref section but howto in main manual) &lt;-- high priority
</li><li>deb.html -&gt; go into reference (query james gardner on list about moving this to wiki?)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1308324593000000
                          </td>
                          <td class="ModifiedTime">1312191462000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1193.html">#1193</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1193.html">bug with new formalchemy causing all resouces to be deleted</a>
                          </td>
                          <td class="description">
                            <p>
The new formalchemy stores dict in a new format.
</p>

                            
                          </td>
                          <td class="PosixTime">1308525655000000
                          </td>
                          <td class="ModifiedTime">1309768960000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1194.html">#1194</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1194.html">"Welcome back" message for newly registered user</a>
                          </td>
                          <td class="description">
                            <ol><li>Register a new user (/user/register)
</li><li>It redirects you to user page and displays "Welcome back" even though you are a new user.
</li></ol>
                            
                          </td>
                          <td class="PosixTime">1308563392000000
                          </td>
                          <td class="ModifiedTime">1317053688000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1195.html">#1195</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1195.html">Storage extension to handle incorrect routes better</a>
                          </td>
                          <td class="description">
                            <p>
We've seen exceptions caused by people getting the file storage link wrong, adding a slash to the end.
</p>
<p>
e.g.
<a class="ext-link" href="http://ckan.net/storage/f/file/e696d857-e997-41c8-be08-408697168ca8/"><span class="icon">​</span>http://ckan.net/storage/f/file/e696d857-e997-41c8-be08-408697168ca8/</a>
</p>
<p>
We should aim to handle all requests better than causing exception. 404 (or even 302 in this case) is better than 500.
</p>

                            
                          </td>
                          <td class="PosixTime">1308576769000000
                          </td>
                          <td class="ModifiedTime">1311964374000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1196.html">#1196</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5-sprint-3.html">ckan-v1.5-sprint-3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1196.html">Markdown logging ignores config settings</a>
                          </td>
                          <td class="description">
                            <p>
Markdown produces Debug logging, even when the pylons logging config is set to level of Info or Warning. This clogs up the logfile.
</p>

                            
                          </td>
                          <td class="PosixTime">1308743476000000
                          </td>
                          <td class="ModifiedTime">1308743857000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1197.html">#1197</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">timmcnamara
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1197.html">Add JavaScript guide for CKAN</a>
                          </td>
                          <td class="description">
                            <p>
A new library, <a class="ext-link" href="http://blog.optimizely.com/introducing-guidersjs-an-open-source-guider-e"><span class="icon">​</span>guiders.js</a>, has been open sourced that seems to be great at unobtrusively introducing new users to features of websites.
</p>
<p>
The library drives Optimizely's website. The GitHub repo is here: <a class="ext-link" href="https://github.com/jeff-optimizely/Guiders-JS"><span class="icon">​</span>https://github.com/jeff-optimizely/Guiders-JS</a>
</p>
<p>
Some examples:
</p>
<p>
<a style="padding:0; border:none" href="http://posterous.com/getfile/files.posterous.com/temp-2011-06-22/BnlgHDvhjpFfqbwvprsIaklqrpdgJyebfuhxajbDhmvnFgzdzzCJdvluJFki/Screen_shot_2011-06-22_at_6.42.21_PM.png.scaled500.png"><img src="http://posterous.com/getfile/files.posterous.com/temp-2011-06-22/BnlgHDvhjpFfqbwvprsIaklqrpdgJyebfuhxajbDhmvnFgzdzzCJdvluJFki/Screen_shot_2011-06-22_at_6.42.21_PM.png.scaled500.png" alt="http://posterous.com/getfile/files.posterous.com/temp-2011-06-22/BnlgHDvhjpFfqbwvprsIaklqrpdgJyebfuhxajbDhmvnFgzdzzCJdvluJFki/Screen_shot_2011-06-22_at_6.42.21_PM.png.scaled500.png" title="http://posterous.com/getfile/files.posterous.com/temp-2011-06-22/BnlgHDvhjpFfqbwvprsIaklqrpdgJyebfuhxajbDhmvnFgzdzzCJdvluJFki/Screen_shot_2011-06-22_at_6.42.21_PM.png.scaled500.png" /></a>
</p>
<p>
<a style="padding:0; border:none" href="http://s3.amazonaws.com/files.posterous.com/temp-2011-06-22/CpvlcinkrxhtnAHfGtEHhxyGkraqlFmCjcnztFuugagBGxmBjCdwuquHpvEB/promo_gmail.png?AWSAccessKeyId=AKIAJFZAE65UYRT34AOQ&amp;Expires=1308801019&amp;Signature=DJWDgj7fmyq7K3ve177H7DPwKdw%3D"><img src="http://s3.amazonaws.com/files.posterous.com/temp-2011-06-22/CpvlcinkrxhtnAHfGtEHhxyGkraqlFmCjcnztFuugagBGxmBjCdwuquHpvEB/promo_gmail.png?AWSAccessKeyId=AKIAJFZAE65UYRT34AOQ&amp;Expires=1308801019&amp;Signature=DJWDgj7fmyq7K3ve177H7DPwKdw%3D" alt="http://s3.amazonaws.com/files.posterous.com/temp-2011-06-22/CpvlcinkrxhtnAHfGtEHhxyGkraqlFmCjcnztFuugagBGxmBjCdwuquHpvEB/promo_gmail.png" title="http://s3.amazonaws.com/files.posterous.com/temp-2011-06-22/CpvlcinkrxhtnAHfGtEHhxyGkraqlFmCjcnztFuugagBGxmBjCdwuquHpvEB/promo_gmail.png" /></a>
</p>

                            
                          </td>
                          <td class="PosixTime">1308801032000000
                          </td>
                          <td class="ModifiedTime">1340020357000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1198.html">#1198</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1198.html">Publisher hierarchy</a>
                          </td>
                          <td class="description">
                            <p>
'Publisher' entities in the model. They are hierarchical. 
</p>
<p>
'User-Publisher' connections with one or more roles (e.g. drafter, moderator). 
</p>
<p>
Authorization settings can control who can set what values in a 'published by' type field.
</p>
<p>
Publishers and User-Publishers available to read in the API.
</p>
<p>
Future tickets will provide:
</p>
<ul><li>API to write Publishers and User-Publishers
</li><li>UI to edit Publishers and User-Publishers
</li></ul><p>
(This feature deprecates authorization groups)
</p>

                            
                          </td>
                          <td class="PosixTime">1308820592000000
                          </td>
                          <td class="ModifiedTime">1339774200000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1199.html">#1199</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1199.html">Implement an email function for users.</a>
                          </td>
                          <td class="description">
                            <p>
We need an email function in CKAN to accept messages sent to users. The basic signature will be: 
</p>
<ul><li>mail_user(user_obj, subject, body, mime_type='text/plain', headers={})
</li></ul><p>
This has a number of use cases: 
</p>
<ul><li>Retrieval of lost passwords
</li><li>E-Mail confirmation 
</li></ul><p>
Finally, the mail function should be exposed in the API for sysadmin clients. This way we can have scripts traverse CKAN for 404s, invalid data or missing fields and ping users about that automatically (requires traversal by revision, not package, to get the associated users). 
</p>
<h2 id="Implementation">Implementation</h2>
<p>
Note we have already written code like this (*and* tested it) in isitopen:
</p>
<ul><li><a class="ext-link" href="https://bitbucket.org/okfn/isitopen/src/bb2cbd146fa5/isitopen/lib/mailer.py"><span class="icon">​</span>https://bitbucket.org/okfn/isitopen/src/bb2cbd146fa5/isitopen/lib/mailer.py</a>
</li><li><a class="ext-link" href="https://bitbucket.org/okfn/isitopen/src/bb2cbd146fa5/isitopen/tests/lib/test_mailer.py"><span class="icon">​</span>https://bitbucket.org/okfn/isitopen/src/bb2cbd146fa5/isitopen/tests/lib/test_mailer.py</a>
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1308821986000000
                          </td>
                          <td class="ModifiedTime">1310555589000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1200.html">#1200</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1200.html">Port PDEU theme to CKAN.net</a>
                          </td>
                          <td class="description">
                            <p>
PDEU has a newer layout which could be adapted to also be used on ckan.net. For this, things should be cleaned up, copied to the ckanext-ckan.net repo as needed and re-colored the core CKAN color scheme. 
</p>
<p>
Maybe we could have this coincide with a CKAN rename? 
</p>

                            
                          </td>
                          <td class="PosixTime">1308824017000000
                          </td>
                          <td class="ModifiedTime">1311180218000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1201.html">#1201</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1201.html">seperate out logic in atom feeds to logic layer.</a>
                          </td>
                          <td class="description">
                            <p>
Simplify the logic in the atom feed an make all feeds use logic layer to return lists.
</p>

                            
                          </td>
                          <td class="PosixTime">1308928892000000
                          </td>
                          <td class="ModifiedTime">1310124297000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1202.html">#1202</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rolf
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1202.html">Links to datapkg utility don't lead to info about it</a>
                          </td>
                          <td class="description">
                            <p>
In the presentation of data packages, the link in "The information on this page and the downloads / resources are also available using the datapkg command line utility." (<a class="ext-link" href="http://knowledgeforge.net/ckan/doc/datapkg/install.html"><span class="icon">​</span>http://knowledgeforge.net/ckan/doc/datapkg/install.html</a>) ends up at the home page of ckan.org
</p>
<p>
Perhaps link it to <a class="ext-link" href="https://bitbucket.org/okfn/datapkg/overview"><span class="icon">​</span>https://bitbucket.org/okfn/datapkg/overview</a> for now, to save some searching for people who want to find out more?
</p>

                            
                          </td>
                          <td class="PosixTime">1309263613000000
                          </td>
                          <td class="ModifiedTime">1315821804000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1203.html">#1203</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">rolf
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1203.html">Moderated edits: html code shows as "changed" although it is not</a>
                          </td>
                          <td class="description">
                            <p>
I've installed the Moderated Edits extension (ckanext-moderatededits) and am editing a package imported from IATIregistry.org, with an extra field which contains a bit of HTML.
</p>
<p>
The editor indicates the field has changed, although the content hasn't (see screenshot). All I can find so far is a minor difference: in the field content, there is a code &amp;#8212 and in the rendered table that is an &amp;mdash;
</p>

                            
                          </td>
                          <td class="PosixTime">1309274970000000
                          </td>
                          <td class="ModifiedTime">1313401579000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1204.html">#1204</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">timmcnamara
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1204.html">renaming packages seems to result in a server error</a>
                          </td>
                          <td class="description">
                            <p>
When renaming a package, and doing other changes at the same time an error is reported. However, the changes seem to go through fine.
</p>
<p>
ENV:
</p>
<ul><li>datacatalogs.org as of 29 June 2011
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1309303816000000
                          </td>
                          <td class="ModifiedTime">1311179980000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1205.html">#1205</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1205.html">db upgrade problem on cz.ckan.net</a>
                          </td>
                          <td class="description">
                            <p>
When upgrading database for cz.ckan.net (psql.okfn.org/cz.okfn.org) an error occurred (see below).
</p>
<p>
cz.ckan.net has been running on eu3 and this updrade was part of moving it to eu19, with a more recent version of ckan.
</p>
<p>
In the meantime I've reverted the db to the old version (pre-upgrade). 
</p>
<p>
cz.ckan.net is not working properly until this is fixed.
</p>
<pre class="wiki">okfn@eu19:~$ paster --plugin ckan db upgrade --config=/etc/ckan/cz/cz.ini
/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/url.py:105: SADeprecationWarning: The SQLAlchemy PostgreSQL dialect has been renamed from 'postgres' to 'postgresql'. The new URL format is postgresql[+driver]://&lt;user&gt;:&lt;pass&gt;@&lt;host&gt;/&lt;dbname&gt;
  module = __import__('sqlalchemy.dialects.%s' % (dialect, )).dialects
2011-06-29 09:07:41,294 INFO  [migrate.versioning.api] 28 -&gt; 29... 
/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/reflection.py:46: SAWarning: Skipped unsupported reflection of expression-based index idx_pkg_lname
  ret = fn(self, con, *args, **kw)
/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/reflection.py:46: SAWarning: Skipped unsupported reflection of expression-based index idx_pkg_slname
  ret = fn(self, con, *args, **kw)
/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/reflection.py:46: SAWarning: Skipped unsupported reflection of expression-based index idx_pkg_suname
  ret = fn(self, con, *args, **kw)
/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/reflection.py:46: SAWarning: Skipped unsupported reflection of expression-based index idx_pkg_uname
  ret = fn(self, con, *args, **kw)
Traceback (most recent call last):
  File "/usr/bin/paster", line 18, in &lt;module&gt;
    command.run()
  File "/usr/lib/pymodules/python2.6/paste/script/command.py", line 84, in run
    invoke(command, command_name, options, args[1:])
  File "/usr/lib/pymodules/python2.6/paste/script/command.py", line 123, in invoke
    exit_code = runner.run(args)
  File "/usr/lib/pymodules/python2.6/paste/script/command.py", line 218, in run
    result = self.command()
  File "/usr/lib/pymodules/python2.6/ckan/lib/cli.py", line 84, in command
    model.repo.upgrade_db()
  File "/usr/lib/pymodules/python2.6/ckan/model/__init__.py", line 163, in upgrade_db
    mig.upgrade(self.metadata.bind, self.migrate_repository, version=version)
  File "/usr/lib/pymodules/python2.6/ckan_deps/migrate/versioning/api.py", line 185, in upgrade
    return _migrate(url, repository, version, upgrade=True, err=err, **opts)
  File "&lt;string&gt;", line 2, in _migrate
  File "/usr/lib/pymodules/python2.6/ckan_deps/migrate/versioning/util/__init__.py", line 160, in with_engine
    return f(*a, **kw)
  File "/usr/lib/pymodules/python2.6/ckan_deps/migrate/versioning/api.py", line 364, in _migrate
    schema.runchange(ver, change, changeset.step)
  File "/usr/lib/pymodules/python2.6/ckan_deps/migrate/versioning/schema.py", line 83, in runchange
    change.run(self.engine, step)
  File "/usr/lib/pymodules/python2.6/ckan_deps/migrate/versioning/script/py.py", line 140, in run
    script_func(engine)
  File "/usr/lib/pymodules/python2.6/ckan/migration/versions/029_version_groups.py", line 152, in upgrade
    migrate_engine.execute(q)
  File "/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/base.py", line 1788, in execute
    return connection.execute(statement, *multiparams, **params)
  File "/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/base.py", line 1191, in execute
    params)
  File "/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/base.py", line 1271, in _execute_clauseelement
    return self.__execute_context(context)
  File "/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/base.py", line 1302, in __execute_context
    context.parameters[0], context=context)
  File "/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/base.py", line 1401, in _cursor_execute
    context)
  File "/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/base.py", line 1394, in _cursor_execute
    context)
  File "/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/default.py", line 299, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (IntegrityError) insert or update on table "package_group_revision" violates foreign key constraint "package_group_revision_continuity_id_fkey"
DETAIL:  Key (continuity_id)=(7f373978-40a0-4848-bdc9-018ad213aa0b) is not present in table "package_group".
 'INSERT INTO package_group_revision (id, package_id, group_id, state, revision_id, continuity_id) VALUES (%(id)s, %(package_id)s, %(group_id)s, %(state)s, %(revision_id)s, %(continuity_id)s)' {'state': u'active', 'package_id': u'14d76e9e-028c-49c1-955b-ef30d4abb970', 'continuity_id': u'7f373978-40a0-4848-bdc9-018ad213aa0b', 'revision_id': u'24a11f58-2ff9-46f3-b113-0bf7f0baf254', 'group_id': u'4b832199-b8e3-4989-9b5d-de8dd6322612', 'id': u'7a3863bd-3054-40c8-bb3d-68b73096c108'}
</pre>
                            
                          </td>
                          <td class="PosixTime">1309339700000000
                          </td>
                          <td class="ModifiedTime">1310568631000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1206.html">#1206</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">wwaites
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1206.html">"Content-Type json" header scuppers package POST</a>
                          </td>
                          <td class="description">
                            <p>
Compare these two requests to create a package:
</p>
<pre class="wiki">curl http://test.ckan.net/api/rest/package -d '{name:"test"}' -H 'Content-Type: application/json' -H 'X-CKAN-API-KEY: tester'
curl http://test.ckan.net/api/rest/package -d '{name:"test"}' -H 'X-CKAN-API-KEY: tester'
</pre><p>
The second one gets the payload through (ckan log):
</p>
<pre class="wiki">Retrieving request params: UnicodeMultiDict([('{name:"test"}', u'')])
</pre><p>
But the first one causes a <a class="missing wiki">ServerError?</a> because the payload (name:&#34;test&#34;) doesn't make it to request.POST or request.params:
</p>
<pre class="wiki">Retrieving request params: UnicodeMultiDict([])
</pre><p>
The only difference is the "<a class="missing wiki">ContentType?</a>: application/json" header, which seems a reasonable thing to include. Javascript lib backbone.js (for example) inserts this automatically.
</p>
<p>
So why does this header cause the payload to not get through to the request object?
</p>

                            
                          </td>
                          <td class="PosixTime">1309344348000000
                          </td>
                          <td class="ModifiedTime">1309450216000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1207.html">#1207</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1207.html">ckanclient.package_entity_get should raise more specific exception</a>
                          </td>
                          <td class="description">
                            <p>
When package does not exist in ckan catalogue, ckanclient.package_entity_get should raise more specific exception, such as <a class="missing wiki">CkanNotFoundError?</a> instead of generic <a class="missing wiki">CkanApiError?</a>.
</p>

                            
                          </td>
                          <td class="PosixTime">1309515582000000
                          </td>
                          <td class="ModifiedTime">1311325343000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1208.html">#1208</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1208.html">Webstore: a datastore with web API</a>
                          </td>
                          <td class="description">
                            <ul><li>SQLite based
</li><li>Use Cyclone for async http server on top with auth
</li><li>Designed to not be specific to CKAN or anything else
</li></ul><p>
Current code is here: <a class="ext-link" href="https://github.com/okfn/webstore"><span class="icon">​</span>https://github.com/okfn/webstore</a>.
</p>
<h2 id="APISpec">API Spec</h2>
<h4 id="Read">Read</h4>
<p>
Two basic ways to query::
</p>
<pre class="wiki">    GET: /{owner}/{db-name}/?sql=...
    GET: /{owner}/{db-name}/?table=...&amp;attr=value&amp;attr=value&amp;limit=...
</pre><p>
Returns::
</p>
<pre class="wiki">  {
      u'keys': [u'id', u'name'],
      u'data': [
          [1, u'jones'],
          [u'aaa', u'jones']
          ]
  }
</pre><h4 id="Write">Write</h4>
<p>
POST to::
</p>
<blockquote>
<p>
/{owner/{database}/{table}
</p>
</blockquote>
<p>
Payload is json data structured as follows::
</p>
<blockquote>
<p>
{
</p>
<blockquote>
<p>
unique_keys: [list of key attributes]
data: {dict of values}
</p>
</blockquote>
<p>
}
</p>
</blockquote>
<h3 id="AuthenticationandAuthorization">Authentication and Authorization</h3>
<p>
Authentication: use basic auth header.
</p>
<p>
Authorization:
</p>
<ul><li>Default: all read, owner can write
</li><li>Restricted: owner can read and write, everyone can do nothing
</li></ul><p>
Possible future: config file can specify a python method (TODO: method
signature)
</p>
<h3 id="IntegrationwithOtherSystems">Integration with Other Systems</h3>
<p>
TODO: Specify how to delegate authenatication to user database in some other system.
</p>

                            
                          </td>
                          <td class="PosixTime">1309804460000000
                          </td>
                          <td class="ModifiedTime">1312191646000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1209.html">#1209</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1209.html">sort out rendering of formalchemy package preview</a>
                          </td>
                          <td class="description">
                            <p>
Got broken due to the moderated edits changes <a class="closed ticket" href="../ticket/1141.html" title="CREP: [super] Moderated Edits User Interface (closed: fixed)">#1141</a>.
</p>
<p>
Need to make sure preview works.
</p>

                            
                          </td>
                          <td class="PosixTime">1309817240000000
                          </td>
                          <td class="ModifiedTime">1310571715000000
                          </td>
              </tr>
          </tbody>
      </table>
      <div class="paging">
    <span class="previous">
      <a href="22%3Fsort=id&amp;asc=1&amp;page=11.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=2.html" title="Page 2">2</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=3.html" title="Page 3">3</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=4.html" title="Page 4">4</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=5.html" title="Page 5">5</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=6.html" title="Page 6">6</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=7.html" title="Page 7">7</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=8.html" title="Page 8">8</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=9.html" title="Page 9">9</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=10.html" title="Page 10">10</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=11.html" title="Page 11">11</a>
      </span>
      <span>
        <span class="current">12</span>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=13.html" title="Page 13">13</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=14.html" title="Page 14">14</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=15.html" title="Page 15">15</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=16.html" title="Page 16">16</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=17.html" title="Page 17">17</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=18.html" title="Page 18">18</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=19.html" title="Page 19">19</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=20.html" title="Page 20">20</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=21.html" title="Page 21">21</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=1&amp;page=22.html" title="Page 22">22</a>
      </span>
    <span class="next">
      <a href="22%3Fsort=id&amp;asc=1&amp;page=13.html" title="Next Page">→</a>
    </span>
</div>
      <div id="help"><strong>Note:</strong>
        See <a href="../wiki/TracReports.html">TracReports</a> for help on using and creating reports.</div>
    </div>
    <script type="text/javascript">
        jQuery.loadStyleSheet("/pygments/trac.css", "text/css");
    </script>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="22%3Fsort=id&amp;asc=1&amp;format=rss" class="rss">RSS Feed</a>
        </li><li>
          <a rel="nofollow" href="22%3Fsort=id&amp;asc=1&amp;format=csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="22%3Fsort=id&amp;asc=1&amp;format=tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="../report%3Fid=22&amp;format=sql">SQL Query</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.3</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>