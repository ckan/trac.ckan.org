<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      {22} Trac tickets – CKAN
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">window.location.hash = window.location.hash;</script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="22%3Fsort=description&amp;asc=1&amp;format=rss" type="application/rss+xml" class="rss" title="RSS Feed" /><link rel="alternate" href="22%3Fsort=description&amp;asc=1&amp;format=csv" type="text/plain" title="Comma-delimited Text" /><link rel="alternate" href="22%3Fsort=description&amp;asc=1&amp;format=tab" type="text/plain" title="Tab-delimited Text" /><link rel="alternate" href="../report%3Fid=22&amp;format=sql" type="text/plain" title="SQL Query" />
        <link rel="up" href="../report.html" title="Available Reports" />
        <link rel="next" href="22%3Fsort=description&amp;asc=1&amp;page=25.html" title="Next Page" />
        <link rel="start" href="../wiki.1.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/report.css" type="text/css" />
        <link rel="prev" href="22%3Fsort=description&amp;asc=1&amp;page=23.html" title="Previous Page" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search CKAN" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://ckan.org/"><img src="http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png" alt="CKAN Trac" height="70" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../login.html">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li><a href="../about.html">About Trac</a></li><li class="last"><a href="../register.html">Register</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li><a href="../search.html">Search</a></li><li class="last"><a href="../wiki.1.html">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="../report.html">Available Reports</a></li><li class="last"><a href="../query.html">Custom Query</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="report">
      <h1>{22} Trac tickets
        <span class="numrows">(2647 matches)</span>
      </h1>
      <form method="get" action="22%3Fsort=description&amp;asc=1&amp;page=24.html">
        <div id="prefs">
          <div>
            <label>
              Max items per page
              <input type="text" name="max" size="10" value="100" />
            </label>
          </div>
          <div class="buttons">
            <input type="submit" value="Update" />
          </div>
        </div>
      </form>
      <div id="description">
        <p>
<a class="ext-link" href="https://github.com/roskakori/tratihubis/blob/master/query_tickets.sql"><span class="icon">​</span>https://github.com/roskakori/tratihubis/blob/master/query_tickets.sql</a>
</p>

      </div>
      <div class="buttons">
      </div>
      <h2 class="report-result">
        Results <span class="numresults">(2301 - 2400 of 2647)</span>
      </h2>
      <div class="paging">
    <span class="previous">
      <a href="22%3Fsort=description&amp;asc=1&amp;page=23.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=14.html" title="Page 14">14</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=15.html" title="Page 15">15</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=16.html" title="Page 16">16</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=17.html" title="Page 17">17</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=18.html" title="Page 18">18</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=19.html" title="Page 19">19</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=20.html" title="Page 20">20</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=21.html" title="Page 21">21</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=22.html" title="Page 22">22</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=23.html" title="Page 23">23</a>
      </span>
      <span>
        <span class="current">24</span>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=25.html" title="Page 25">25</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=26.html" title="Page 26">26</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=27.html" title="Page 27">27</a>
      </span>
    <span class="next">
      <a href="22%3Fsort=description&amp;asc=1&amp;page=25.html" title="Next Page">→</a>
    </span>
</div>
      <table class="listing tickets">
          <thead>
        <tr class="trac-columns">
          <th>
            <a href="22%3Fsort=id&amp;asc=1&amp;page=24.html">
              Id
            </a>
          </th><th>
            <a href="22%3Fsort=type&amp;asc=1&amp;page=24.html">
              Type
            </a>
          </th><th>
            <a href="22%3Fsort=owner&amp;asc=1&amp;page=24.html">
              Owner
            </a>
          </th><th>
            <a href="22%3Fsort=reporter&amp;asc=1&amp;page=24.html">
              Reporter
            </a>
          </th><th>
            <a href="22%3Fsort=milestone&amp;asc=1&amp;page=24.html">
              Milestone
            </a>
          </th><th>
            <a href="22%3Fsort=status&amp;asc=1&amp;page=24.html">
              Status
            </a>
          </th><th>
            <a href="22%3Fsort=resolution&amp;asc=1&amp;page=24.html">
              Resolution
            </a>
          </th><th>
            <a href="22%3Fsort=summary&amp;asc=1&amp;page=24.html">
              Summary
            </a>
          </th><th class="asc">
            <a href="22%3Fsort=description&amp;asc=0&amp;page=24.html">
              Description
            </a>
          </th><th>
            <a href="22%3Fsort=PosixTime&amp;asc=1&amp;page=24.html">
              Posixtime
            </a>
          </th><th colspan="100">
            <a href="22%3Fsort=ModifiedTime&amp;asc=1&amp;page=24.html">
              Modifiedtime
            </a>
          </th>
        </tr>
          </thead>
          <tbody>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1195.html">#1195</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1195.html">Storage extension to handle incorrect routes better</a>
                          </td>
                          <td class="description">
                            <p>
We've seen exceptions caused by people getting the file storage link wrong, adding a slash to the end.
</p>
<p>
e.g.
<a class="ext-link" href="http://ckan.net/storage/f/file/e696d857-e997-41c8-be08-408697168ca8/"><span class="icon">​</span>http://ckan.net/storage/f/file/e696d857-e997-41c8-be08-408697168ca8/</a>
</p>
<p>
We should aim to handle all requests better than causing exception. 404 (or even 302 in this case) is better than 500.
</p>

                            
                          </td>
                          <td class="PosixTime">1308576769000000
                          </td>
                          <td class="ModifiedTime">1311964374000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1210.html">#1210</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5-sprint-4.html">ckan-v1.5-sprint-4</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1210.html">POST application/json error handling with newer WebOb</a>
                          </td>
                          <td class="description">
                            <p>
<a class="missing wiki">WebOb?</a> from v1.0.7 has some interesting new behaviour with reading request data for different Content-Types:
</p>
<ul><li>It seems that looking at request.body mangles request.POST. See fix in ckan cset:e83bad9caa1b (problem with <a class="missing wiki">WebOb?</a> v1.0.7 but may go back to v1.0.4?)
</li></ul><ul><li>A particular request caused an <a class="missing wiki">AssertionError?</a> during looking at request.body, so we need to enclose this in a try/except. I couldn't recreate it in a test unfortunately (problem with <a class="missing wiki">WebOb?</a> v1.0.7 but may go back to v1.0.2?)
</li></ul><p>
Example:
</p>
<pre class="wiki">Module ckan.controllers.api:206 in create
&lt;&lt;          log.debug('create: %s' % (context))
               try:
                   request_data = self._get_request_data()
               except ValueError, inst:
                   response.status_int = 400
&gt;&gt;  request_data = self._get_request_data()
Module ckan.lib.base:149 in _get_request_data
&lt;&lt;          cls.log.debug('Retrieving request params: %r' % request.params)
               cls.log.debug('Retrieving request POST: %r' % request.POST)
               cls.log.debug('Retrieving request POST body: %r' % request.body)
               if request.POST:
                   try:
&gt;&gt;  cls.log.debug('Retrieving request POST body: %r' % request.body)
Module paste.registry:137 in __getattr__
&lt;&lt;      
           def __getattr__(self, attr):
               return getattr(self._current_obj(), attr)
           
           def __setattr__(self, attr, value):
&gt;&gt;  return getattr(self._current_obj(), attr)
Module webob.request:470 in _body__get
&lt;&lt;          Return the content of the request body.
               """
               self.make_body_seekable() # we need this to have content_length
               r = self.body_file.read(self.content_length)
               self.body_file.seek(0)
&gt;&gt;  self.make_body_seekable() # we need this to have content_length
Module webob.request:697 in make_body_seekable
&lt;&lt;              self.body_file_raw.seek(0)
               else:
                   self.copy_body()
&gt;&gt;  self.copy_body()
Module webob.request:714 in copy_body
&lt;&lt;                  self.body = self.body_file_raw.read(length)
               elif self.is_body_readable:
                   self.body = self.body_file_raw.read()
                   self._copy_body_tempfile()
               else:
&gt;&gt;  self.body = self.body_file_raw.read()
Module webob.request:1190 in read
&lt;&lt;      def read(self, size=-1):
               body = self._get_body()
               if size &lt; 0:
                   v = body[self.position:]
&gt;&gt;  body = self._get_body()
Module webob.request:1207 in _get_body
&lt;&lt;                  self._body = _encode_multipart(self.vars, self.content_type)
                   else:
                       assert 0, ('Bad content type: %r' % self.content_type)
               return self._body
&gt;&gt;  assert 0, ('Bad content type: %r' % self.content_type)
AssertionError: Bad content type: '; charset=utf-8'
</pre>
                            
                          </td>
                          <td class="PosixTime">1309949451000000
                          </td>
                          <td class="ModifiedTime">1309974781000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1551.html">#1551</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">ross
                          </td>
                          <td class="reporter">ross
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1551.html">CKAN auth for webstore changes</a>
                          </td>
                          <td class="description">
                            <p>
Webstore should use auth api ( <a class="assigned ticket" href="../ticket/1550.html" title="enhancement: Allow simple auth via the API (assigned)">#1550</a> ) for authenticating users accessing webstore rather than talking directly to the CKAN database. We also need it to suppose /user/  urls and /userid/ for accessing databases.
</p>

                            
                          </td>
                          <td class="PosixTime">1324049966000000
                          </td>
                          <td class="ModifiedTime">1346662048000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2294.html">#2294</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.9.html">ckan-v1.9</a>
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2294.html">Unauthorized action on Data API gets 302 rather than 401 or similar</a>
                          </td>
                          <td class="description">
                            <p>
Well known issue that 401 *in API* end up with 302 redirect to login page (which makes no sense and is very confusing for clients).
</p>
<p>
Fix this by ensuring that error messsages on API get passed through correctly.
</p>
<p>
Minor because affect is annoying but not terminal
</p>

                            
                          </td>
                          <td class="PosixTime">1334432104000000
                          </td>
                          <td class="ModifiedTime">1340624003000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2932.html">#2932</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan&#32;2.0.html">ckan 2.0</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2932.html">Add docstring to system_info.py</a>
                          </td>
                          <td class="description">
                            <p>
What is the system_info table for? It looks like a way to override config file settings in the database, perhaps so that admins can use a web interface to change site title etc. Could do with a docstring explaining the intended purpose of the table.
</p>

                            
                          </td>
                          <td class="PosixTime">1347893429000000
                          </td>
                          <td class="ModifiedTime">1347893429000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2296.html">#2296</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">icmurray
                          </td>
                          <td class="reporter">icmurray
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-04-16.html">ckan-sprint-2012-04-16</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2296.html">Initial analysis of moderated edits</a>
                          </td>
                          <td class="description">
                            <p>
What needs doing, and how long will it take?
</p>

                            
                          </td>
                          <td class="PosixTime">1334567077000000
                          </td>
                          <td class="ModifiedTime">1334567150000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2365.html">#2365</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">ross
                          </td>
                          <td class="reporter">ross
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-06-25.html">ckan-sprint-2012-06-25</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2365.html">Investigation of multisite</a>
                          </td>
                          <td class="description">
                            <p>
What would as a multisite CKAN look like?
</p>
<p>
This is really part of the work around turnkey/hosted CKAN
</p>

                            
                          </td>
                          <td class="PosixTime">1335889911000000
                          </td>
                          <td class="ModifiedTime">1340266964000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/904.html">#904</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">Stiivi
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-3.html">ckan-v1.4-sprint-3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/904.html">Review CKAN documentation</a>
                          </td>
                          <td class="description">
                            <p>
What's bad at the moment?
</p>
<ul><li>lack of documentation e.g. config (very poorly documented)
</li><li>too many sources of documentation
</li><li>no common theming
</li></ul><p>
Sources:
</p>
<ul><li><a href="http://ckan.org/">http://ckan.org/</a>
</li><li><a class="ext-link" href="http://packages.python.org/ckan"><span class="icon">​</span>http://packages.python.org/ckan</a> 
</li><li><a class="ext-link" href="http://wiki.okfn.org/ckan/"><span class="icon">​</span>http://wiki.okfn.org/ckan/</a> - user
</li><li>Deprecate: <a class="ext-link" href="http://knowledgeforge.net/ckan/doc/ckan/"><span class="icon">​</span>http://knowledgeforge.net/ckan/doc/ckan/</a>
</li></ul><p>
Resulting meta-ticket with things to do: <a class="closed ticket" href="../ticket/927.html" title="enhancement: [super] Improvements to CKAN documentation (closed: fixed)">ticket:927</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1294832610000000
                          </td>
                          <td class="ModifiedTime">1299840539000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/321.html">#321</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">thejimmyg
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/321.html">Delegate authentication to Drupal</a>
                          </td>
                          <td class="description">
                            <p>
When CKAN is included in a Drupal front-end, CKAN edit pages are used in a slave-mode, such that authentication is delegated to the Drupal front-end user model.
</p>
<p>
The Drupal front-end shall have:
</p>
<ol><li>Login page - fixed location, can authenticate users, on successful  authentication sets auth cookie and redirects to HTTP_REFERER.
</li></ol><ol start="2"><li>Access control resource - fixed location, can authorise users, on receipt of valid auth cookie return message listing account details and permitted actions.
</li></ol><ol start="3"><li>Access denied page - fixed location, static resource, gently 
</li></ol><p>
indicates what has happened, and how to ask for permission.
</p>
<p>
The CKAN slave edit page shall:
</p>
<ol><li>Try to detect a Drupal session key (passed as cookie or as request param).
</li></ol><ol start="2"><li>Redirect to Drupal login page if no session key.
</li></ol><ol start="3"><li>Check authorisation if session key is found.
</li></ol><ol start="4"><li>Redirect to access denied page if session key not authorised.
</li></ol><ol start="5"><li>Present the Package edit page.
</li></ol><ol start="6"><li>Reject unauthenticated or unauthorised edit submissions.
</li></ol><ol start="7"><li>Snag invalid edit submissions from authenticated and authorised users.
</li></ol><ol start="8"><li>Respond to valid edit submissions from authenticated and authorised users, by saving the new package state, and redirecting to Package read page in Drupal front-end.
</li></ol>
                            
                          </td>
                          <td class="PosixTime">1274705234000000
                          </td>
                          <td class="ModifiedTime">1291831399000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1468.html">#1468</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">thejimmyg
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-12-05.html">ckan-sprint-2011-12-05</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1468.html">Update the search index for individual packages</a>
                          </td>
                          <td class="description">
                            <p>
When I delete a package from the pylons shell I need to remove that package's entry from the Solr search index. That doesn't happen at the moment.
</p>
<p>
It would be useful if the search-index rebuild command could take a list of package IDs to rebuild.
</p>

                            
                          </td>
                          <td class="PosixTime">1321376195000000
                          </td>
                          <td class="ModifiedTime">1322591997000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/280.html">#280</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/280.html">Disappearing extra fields</a>
                          </td>
                          <td class="description">
                            <p>
When I edit a package on no.ckan.net with lots of extra fields, lots of them completely disappear.
</p>
<p>
Metastable branch.
</p>

                            
                          </td>
                          <td class="PosixTime">1270209684000000
                          </td>
                          <td class="ModifiedTime">1271173769000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/35.html">#35</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.4.html">v0.4</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/35.html">IP Address for non-logged in users is always 127.0.0.1 when deployed behind a proxy (e.g. on ckan.net)</a>
                          </td>
                          <td class="description">
                            <p>
When IP address is used to identify non-logged in users (for example on create and editing of packages) it is always 127.0.0.1 when using a reverse proxy (standard deployment configuration on a production machine and used e.g. on <a class="ext-link" href="http://www.ckan.net"><span class="icon">​</span>http://www.ckan.net</a>).
</p>
<p>
This could be corrected by using HTTP_X_FORWARDED_FOR when available.
</p>

                            
                          </td>
                          <td class="PosixTime">1177006633000000
                          </td>
                          <td class="ModifiedTime">1185471537000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2942.html">#2942</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2942.html">API POST barfs on interesting Content-Type headers</a>
                          </td>
                          <td class="description">
                            <p>
When POSTing to the API, if specified, the 'Content-Type' header must be blank or 'application/x-www-form-urlencoded'. Otherwise we get an error like: "Bad request - JSON Error: Could not extract request body data: Bad content type: \'; charset=utf-8\'""
</p>
<p>
The problem is that this is a very reasonable header to send. Indeed requests 0.14 sends this particular header.
</p>
<p>
This affects all versions of CKAN.
</p>
<p>
This is due to webob/requests.py:1248 being pretty basic.
</p>

                            
                          </td>
                          <td class="PosixTime">1348593156000000
                          </td>
                          <td class="ModifiedTime">1348611144000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/948.html">#948</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-future.html">ckan-future</a>
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/948.html">Highlight (to a sysadmin) which packages are deleted</a>
                          </td>
                          <td class="description">
                            <p>
When a customer logs in as a sysadmin then he/she see all packages, including deleted and pending ones. These are hidden to the average user, but the sysadmin has no idea of this until he clicks on the package and sees at the bottom 'state: deleted'. 
</p>
<p>
It should be more obvious than that on the search view - an icon, message or crossed-out name to packages are deleted.
</p>

                            
                          </td>
                          <td class="PosixTime">1296646369000000
                          </td>
                          <td class="ModifiedTime">1338206280000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1182.html">#1182</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">timmcnamara
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1182.html">Comments from deleted packages appear in "Recent Comments" feed</a>
                          </td>
                          <td class="description">
                            <p>
When a package has been deleted, say for spam moderation, comments still appear in the recent comments section.
</p>
<p>
This is a problem because non-admin users will be shown a warning that they're not authorised to view the package if they click on the link.
</p>
<p>
At CKAN.net currently, this affects the most recent comment.
</p>

                            
                          </td>
                          <td class="PosixTime">1307658251000000
                          </td>
                          <td class="ModifiedTime">1339774319000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/39.html">#39</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.7.html">v0.7</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/39.html">When listing packages show more information than just name.</a>
                          </td>
                          <td class="description">
                            <p>
When a package listing is shown (as on <a class="ext-link" href="http://ckan.net/package/list"><span class="icon">​</span>http://ckan.net/package/list</a>) more information than just name should be shown. For example package titles should be shown as well as names (could also list tags and other stuff but simplest is just title).
</p>
<p>
Cost: 1
</p>

                            
                          </td>
                          <td class="PosixTime">1194608920000000
                          </td>
                          <td class="ModifiedTime">1223908298000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/282.html">#282</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">thejimmyg
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/282.html">Provide diverts when package name changes</a>
                          </td>
                          <td class="description">
                            <p>
When a package's name is changed, references to the old name (in the WUI and REST) are redirected to the new name (assuming the old name is not being reused by another package).
</p>

                            
                          </td>
                          <td class="PosixTime">1270659003000000
                          </td>
                          <td class="ModifiedTime">1338206417000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2649.html">#2649</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">ross
                          </td>
                          <td class="reporter">ross
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.8.html">ckan-v1.8</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2649.html">Description on resources not rendered as markdown</a>
                          </td>
                          <td class="description">
                            <p>
When a resource doesn't have a description, it is rendered as markdown from the description of the dataset.
</p>
<p>
If the resource does have a description it isn't rendered as markdown ..
</p>
<p>
See <a class="ext-link" href="http://thedatahub.org/dataset/wikipedia-e3-timestamp-position-modification/resource/d883ab44-07f4-4992-800a-3e4bf5d53a96"><span class="icon">​</span>http://thedatahub.org/dataset/wikipedia-e3-timestamp-position-modification/resource/d883ab44-07f4-4992-800a-3e4bf5d53a96</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1341923135000000
                          </td>
                          <td class="ModifiedTime">1342084280000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2650.html">#2650</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">ross
                          </td>
                          <td class="reporter">ross
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.8.html">ckan-v1.8</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2650.html">Description on resources not rendered as markdown</a>
                          </td>
                          <td class="description">
                            <p>
When a resource doesn't have a description, it is rendered as markdown from the description of the dataset.
</p>
<p>
If the resource does have a description it isn't rendered as markdown ..
</p>
<p>
See <a class="ext-link" href="http://thedatahub.org/dataset/wikipedia-e3-timestamp-position-modification/resource/d883ab44-07f4-4992-800a-3e4bf5d53a96"><span class="icon">​</span>http://thedatahub.org/dataset/wikipedia-e3-timestamp-position-modification/resource/d883ab44-07f4-4992-800a-3e4bf5d53a96</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1341923137000000
                          </td>
                          <td class="ModifiedTime">1341943716000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1024.html">#1024</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-3.html">ckan-v1.4-sprint-3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1024.html">Lock down all controller actions in CKAN</a>
                          </td>
                          <td class="description">
                            <p>
When a user visits the site, he/she may only see a login box. 
</p>

                            
                          </td>
                          <td class="PosixTime">1299493428000000
                          </td>
                          <td class="ModifiedTime">1299668648000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2912.html">#2912</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.8.1.html">ckan-v1.8.1</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2912.html">ckanext/organizations: Neither public or private initially selected when adding dataset</a>
                          </td>
                          <td class="description">
                            <p>
When adding a dataset with the organizations extension on, neither the Public or the Private radio button is initially selected. Public should be selected.
</p>

                            
                          </td>
                          <td class="PosixTime">1347271076000000
                          </td>
                          <td class="ModifiedTime">1350303897000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2740.html">#2740</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">toby
                          </td>
                          <td class="reporter">shevski
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/demo&#32;phase&#32;2.html">demo phase 2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2740.html">misleading breadcrumbs</a>
                          </td>
                          <td class="description">
                            <p>
When adding a resource, the breadcrumb should say "add data" or "add resource" not "create dataset" as you see here:
<a class="ext-link" href="http://s031.okserver.org:2375/dataset/new_resource/frere"><span class="icon">​</span>http://s031.okserver.org:2375/dataset/new_resource/frere</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1343123274000000
                          </td>
                          <td class="ModifiedTime">1343137576000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1754.html">#1754</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">seanh
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-02-06.html">ckan-sprint-2012-02-06</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1754.html">Add activities for extras</a>
                          </td>
                          <td class="description">
                            <p>
When an extra is added to or removed from a dataset or is updated, an activity should go in the dataset's and user's activity streams.
</p>

                            
                          </td>
                          <td class="PosixTime">1328528318000000
                          </td>
                          <td class="ModifiedTime">1328528330000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2412.html">#2412</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">zephod
                          </td>
                          <td class="reporter">icmurray
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-06-25.html">ckan-sprint-2012-06-25</a>
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2412.html">More than one resource invalidatiing breaks dataset edit form</a>
                          </td>
                          <td class="description">
                            <p>
When attempting to add more than one resource at once, if more than one resource invalidates, this results in a js error, leaving the form in an inconsistent state.
</p>
<p>
Repro:
</p>
<ol><li>Go to /dataset/new
</li><li>Add a new resource.  Fill in one of the fields with an invalid value. eg - last_modified, or size...
</li><li>Add another resource, doing the same thing: make one of the fields invalid.
</li><li>Try to save the dataset.
</li><li>The entered resource information will be lost, and a js error "Uncaught Error: Can't add the same model to a set twice,: backbone.js:586" will be thrown.
</li></ol>
                            
                          </td>
                          <td class="PosixTime">1337717148000000
                          </td>
                          <td class="ModifiedTime">1338203234000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2489.html">#2489</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">johnglover
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-06-25.html">ckan-sprint-2012-06-25</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2489.html">Select publisher when dataset created via 'publisher &gt; add dataset'</a>
                          </td>
                          <td class="description">
                            <p>
When clicking 'add dataset' on a publisher/group page, the new dataset form should select the appropriate group.
</p>

                            
                          </td>
                          <td class="PosixTime">1338809595000000
                          </td>
                          <td class="ModifiedTime">1338886578000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1375.html">#1375</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-10.html">ckan-sprint-2011-10-10</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1375.html">Define new package id before sending it to the IPackageController plugins</a>
                          </td>
                          <td class="description">
                            <p>
When creating a package, the package_create logic function sends the newly created package object to all plugins implementing the IPackageController interface
</p>
<p>
<a class="ext-link" href="https://bitbucket.org/okfn/ckan/src/93194933ea75/ckan/logic/action/create.py#cl-64"><span class="icon">​</span>https://bitbucket.org/okfn/ckan/src/93194933ea75/ckan/logic/action/create.py#cl-64</a>
</p>
<p>
At this point, the changes have not yet been commited and the id of the package is not set (It has a default value of make_uuid, which is set when commited). For this reason, plugins have no way of knowing the package id. E.g. the spatial query plugin needs to know this id to link the package extent to the actual package.
</p>
<p>
One possible solution would be to set the package id in the data dict received by package_create (if it's not defined):
</p>
<pre class="wiki">from ckan.model.types import make_uuid
if not 'id' in data or not data['id']:
   data['id'] = make_uuid()
</pre>
                            
                          </td>
                          <td class="PosixTime">1317910441000000
                          </td>
                          <td class="ModifiedTime">1318260008000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/997.html">#997</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/997.html">change create on cli to upgrade</a>
                          </td>
                          <td class="description">
                            <p>
When doing create on the cli upgrade should be run instead of create to make sure that every database is initiated in the same way.
</p>

                            
                          </td>
                          <td class="PosixTime">1298287981000000
                          </td>
                          <td class="ModifiedTime">1298288665000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/998.html">#998</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/998.html">change create on cli to upgrade</a>
                          </td>
                          <td class="description">
                            <p>
When doing create on the cli upgrade should be run instead of create to make sure that every database is initiated in the same way.
</p>

                            
                          </td>
                          <td class="PosixTime">1298287981000000
                          </td>
                          <td class="ModifiedTime">1300364423000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/36.html">#36</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.4.html">v0.4</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/36.html">Edit package page should support previews</a>
                          </td>
                          <td class="description">
                            <p>
When editing a package one would like to be able to preview one's changes before saving.
</p>

                            
                          </td>
                          <td class="PosixTime">1177007112000000
                          </td>
                          <td class="ModifiedTime">1185470035000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2748.html">#2748</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">shevski
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/demo&#32;phase&#32;5.html">demo phase 5</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2748.html">add 'add new resource' button to sidebar</a>
                          </td>
                          <td class="description">
                            <p>
When editing a resource you see the current and any other existing resources in sidebar
</p>
<p>
(e.g. see <a class="ext-link" href="http://s031.okserver.org:2375/en/dataset/format-error-test/resource_edit/d1eac556-c16f-44af-8148-5e3467b57cf8?inner_span=True"><span class="icon">​</span>http://s031.okserver.org:2375/en/dataset/format-error-test/resource_edit/d1eac556-c16f-44af-8148-5e3467b57cf8?inner_span=True</a>)
</p>
<p>
Would be good to have a pretty 'add new' slightly transparent resource folder/pointer undearneath - letting you add resources from the end resource page
</p>

                            
                          </td>
                          <td class="PosixTime">1343212878000000
                          </td>
                          <td class="ModifiedTime">1344503744000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/699.html">#699</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">TimDavies
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/699.html">Paging search results re-sets Open Only and Downloadable Only flags</a>
                          </td>
                          <td class="description">
                            <p>
When getting a search results page (e.g. <a class="ext-link" href="http://ckan.net/package/search?q=development&amp;open_only=1&amp;downloadable_only=1"><span class="icon">​</span>http://ckan.net/package/search?q=development&amp;open_only=1&amp;downloadable_only=1</a>) and then using the on-page links to page through results, the next link / numbered page links go to <a class="ext-link" href="http://ckan.net/package/search?q=development&amp;page=2"><span class="icon">​</span>http://ckan.net/package/search?q=development&amp;page=2</a> rather than <a class="ext-link" href="http://ckan.net/package/search?q=development&amp;open_only=1&amp;downloadable_only=1&amp;page=2"><span class="icon">​</span>http://ckan.net/package/search?q=development&amp;open_only=1&amp;downloadable_only=1&amp;page=2</a> meaning that the filter flags set (Download Only; Open Only) are not respected on the second page of listings. 
</p>

                            
                          </td>
                          <td class="PosixTime">1287143698000000
                          </td>
                          <td class="ModifiedTime">1296499061000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2577.html">#2577</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">ross
                          </td>
                          <td class="reporter">ross
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.9.html">ckan-v1.9</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2577.html">Dataproxy raises 500 when it can't get CSV</a>
                          </td>
                          <td class="description">
                            <p>
When given a url parameter for a file it cannot fetch, the app raises a 500 instead of something useful.
</p>
<p>
Better error reporting in the JSON would be useful
</p>

                            
                          </td>
                          <td class="PosixTime">1340207124000000
                          </td>
                          <td class="ModifiedTime">1346669735000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2271.html">#2271</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-04-16.html">ckan-sprint-2012-04-16</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2271.html">IATI: Some datasets not being indexed</a>
                          </td>
                          <td class="description">
                            <p>
When importing a CSV file for a certain publisher, records don't come up on the search index. 
After some investigation this has tunrn out to be caused by the records being deleted. We need to investigate if this was caused by the import or just made by the users.
</p>

                            
                          </td>
                          <td class="PosixTime">1333375469000000
                          </td>
                          <td class="ModifiedTime">1334567582000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1290.html">#1290</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1290.html">Better error when blank database</a>
                          </td>
                          <td class="description">
                            <p>
When installing CKAN, when doing "paster serve development.ini", lots of users encounter the error for every request: 
</p>
<pre class="wiki">ProgrammingError: (ProgrammingError) relation "user" does not exist
</pre><p>
This is because the database tables have not been created - they have forgotten or missed the "paster db init" step.
</p>
<p>
Can we provide a better error to say that the database is not initialised yet?
</p>
<h2 id="Implementationoptions">Implementation options</h2>
<ol><li>At the start of every request we reflect the database tables and check they are there. This is rather expensive!
</li></ol><ol start="2"><li>Uncached requests to the home page start with a cheap database query. If there is an exception then return this error about database setup. I really like Drupal's page for this that has in large letters that the site is currently off-line. Below a line, in small letters, there are developer suggestions on what is wrong and where to look to fix it.
</li></ol>
                            
                          </td>
                          <td class="PosixTime">1314264255000000
                          </td>
                          <td class="ModifiedTime">1314270894000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/68.html">#68</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.9.html">v0.9</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/68.html">Show affected packages in revision list view</a>
                          </td>
                          <td class="description">
                            <p>
When listing revisions (at /revision/ or in atom feed) show affected packages. Minor but v. useful UI improvement.
</p>
<p>
Cost: 1h
</p>

                            
                          </td>
                          <td class="PosixTime">1245656153000000
                          </td>
                          <td class="ModifiedTime">1245697554000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/3010.html">#3010</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan&#32;2.0.html">ckan 2.0</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/3010.html">Pin images don't appear in data explorer</a>
                          </td>
                          <td class="description">
                            <p>
When minified files are in use (set debug = false in ini file) the pin images for points don't show up in the data explorer map view when viewing a resource with geolocation data.
</p>
<p>
set debug = true will fix the problem by using unminified files instead but also turns on a bunch of debug stuff you wouldn't want on a production site.
</p>
<p>
middleware.py, around line 73, is where the decision to turn minified files on or off based on the debug setting is made. This can be hacked on a production site to run with unminified files but otherwise run on production mode thereby getting around the issue with the pins. But that doesn't fix the underlying bug.
</p>

                            
                          </td>
                          <td class="PosixTime">1351705506000000
                          </td>
                          <td class="ModifiedTime">1351705506000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2752.html">#2752</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">toby
                          </td>
                          <td class="reporter">ross
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/demo&#32;phase&#32;2.html">demo phase 2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2752.html">Navigation highlight missing</a>
                          </td>
                          <td class="description">
                            <p>
When navigating to <a class="ext-link" href="http://s031.okserver.org:2375/group"><span class="icon">​</span>http://s031.okserver.org:2375/group</a> on the demo server, the Group link in the navbar is not highlighted in the same was as the other links are when visiting those pages.
</p>

                            
                          </td>
                          <td class="PosixTime">1343216582000000
                          </td>
                          <td class="ModifiedTime">1343222618000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1207.html">#1207</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1207.html">ckanclient.package_entity_get should raise more specific exception</a>
                          </td>
                          <td class="description">
                            <p>
When package does not exist in ckan catalogue, ckanclient.package_entity_get should raise more specific exception, such as <a class="missing wiki">CkanNotFoundError?</a> instead of generic <a class="missing wiki">CkanApiError?</a>.
</p>

                            
                          </td>
                          <td class="PosixTime">1309515582000000
                          </td>
                          <td class="ModifiedTime">1311325343000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1362.html">#1362</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">johnglover
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-10.html">ckan-sprint-2011-10-10</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1362.html">Clearing the database should also clear the search index</a>
                          </td>
                          <td class="description">
                            <p>
When paster db clean is run, the search index should also be cleared.
</p>

                            
                          </td>
                          <td class="PosixTime">1317121861000000
                          </td>
                          <td class="ModifiedTime">1318256546000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/653.html">#653</a>
                          </td>
                          <td class="type">requirement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/653.html">Trackback links for packages</a>
                          </td>
                          <td class="description">
                            <p>
When people link to a package, a track-back link is auto-created. (Similar system as for blogs). 
</p>
<p>
As suggested by Tim Davies: 
</p>
<p>
Allowing some form of ‘track back’ against datasets
When a non-technical user comes to look at a dataset it would be really useful for them to be able to see if anyone has created an interface interpretation of it already.
</p>
<p>
I found quite a few cases in research of end-users struggling to make sense of a dataset when good interfaces to that data had already been built and blogged about, but without there being any link from the dataset listing to those data uses.
 
Accepting track backs could also make it easier for technical users to find blog posts / shared code etc. relating to a given dataset.
</p>

                            
                          </td>
                          <td class="PosixTime">1285062025000000
                          </td>
                          <td class="ModifiedTime">1339774636000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/441.html">#441</a>
                          </td>
                          <td class="type">requirement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.3.html">ckan-v1.3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/441.html">CKAN read-only state</a>
                          </td>
                          <td class="description">
                            <p>
When performing maintenance on CKAN it may be necessary to make CKAN obviously read-only, telling the users and restricting access to 'edit' pages.
</p>
<p>
Examples of use:
</p>
<ul><li>Administrator wants to upgrade CKAN or move it to another server. During this time the database is being administered and either edits are lost or can't be done.
</li><li>A CKAN is used just for distributing metadata and so is always read-only. Updates may still arrive through direct db manipulation, e.g.:
<ul><li>another (but writable) CKAN instance is connected to the same db
</li><li>restoring database dumps from another CKAN db
</li></ul></li><li>Should a security be breached, all editing could be stopped
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1282227314000000
                          </td>
                          <td class="ModifiedTime">1292586309000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1204.html">#1204</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">timmcnamara
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1204.html">renaming packages seems to result in a server error</a>
                          </td>
                          <td class="description">
                            <p>
When renaming a package, and doing other changes at the same time an error is reported. However, the changes seem to go through fine.
</p>
<p>
ENV:
</p>
<ul><li>datacatalogs.org as of 29 June 2011
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1309303816000000
                          </td>
                          <td class="ModifiedTime">1311179980000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/377.html">#377</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">glen@…
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-future.html">ckan-future</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/377.html">API Should return JSON in all cases</a>
                          </td>
                          <td class="description">
                            <p>
When the API returns any response it should always retunr JSON. For example a 404 response should return something like
</p>
<pre class="wiki">{'status': 404, 'message': 'package somename not found'}

</pre><p>
When errors are encountered when creating a package: 
</p>
<pre class="wiki">{'status': nnn, 'message': 'Validation Errors', 'errors':['description':'name cannot be
blank', 'description':'license code must be an integer']}

</pre><p>
Not authorised:
</p>
<pre class="wiki">{'status': 503, 'message': 'You are not authorised to create this package.'}

</pre><p>
The reason being that screeds of html coming back in the response just makes it harder to debug and understand. Having the proper error codes/messages means that you can see why your package was not created.
</p>

                            
                          </td>
                          <td class="PosixTime">1280268158000000
                          </td>
                          <td class="ModifiedTime">1338206349000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2350.html">#2350</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">icmurray
                          </td>
                          <td class="reporter">icmurray
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.9.html">ckan-v1.9</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2350.html">Hooks  in package controller for validating form data</a>
                          </td>
                          <td class="description">
                            <p>
When the validation schema was moved from the package controller into the logic layer, the schema's role was changed from that of processing a form and validating data; to just validating data.  Whilst is makes sense to have a schema for validating data as it comes in and leaves the logic layer; there's no longer the hook available to <a class="missing wiki">PackageController?</a> subclasses to do form validation/processing.
</p>
<p>
Add a hook into _save_new() and save_edit() prior to the logic-layer call which subclasses can then override.
</p>
<p>
NB - form processing/validation *is* different to validating data.  For example, many data can be inferred from a user's input; or there may be aspects of the form that need to be filled in, but do not make sense to pass as data into the logic-layer, eg. agreeing to T&amp;Cs.
</p>
<ul><li>[ ] Add hooks
</li><li>[ ] Use in ckanext-example
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1335881761000000
                          </td>
                          <td class="ModifiedTime">1340635966000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1228.html">#1228</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1228.html">Display OpenID login errors</a>
                          </td>
                          <td class="description">
                            <p>
When there are errors when logging into OpenID, these don't get displayed. You just get the login screen again.
</p>

                            
                          </td>
                          <td class="PosixTime">1311086562000000
                          </td>
                          <td class="ModifiedTime">1311325161000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2540.html">#2540</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">seanh
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckanbuild.html">ckanbuild</a>
                          </td>
                          <td class="status">accepted
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2540.html">Implement a way of upgrading ckan sites using ckanbuild</a>
                          </td>
                          <td class="description">
                            <p>
When there are multiple ckan sites installed on a single server via ckanbuild, there needs to be some way of upgrading them all to a new ckan version at once.
</p>

                            
                          </td>
                          <td class="PosixTime">1339775740000000
                          </td>
                          <td class="ModifiedTime">1340639850000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1205.html">#1205</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1205.html">db upgrade problem on cz.ckan.net</a>
                          </td>
                          <td class="description">
                            <p>
When upgrading database for cz.ckan.net (psql.okfn.org/cz.okfn.org) an error occurred (see below).
</p>
<p>
cz.ckan.net has been running on eu3 and this updrade was part of moving it to eu19, with a more recent version of ckan.
</p>
<p>
In the meantime I've reverted the db to the old version (pre-upgrade). 
</p>
<p>
cz.ckan.net is not working properly until this is fixed.
</p>
<pre class="wiki">okfn@eu19:~$ paster --plugin ckan db upgrade --config=/etc/ckan/cz/cz.ini
/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/url.py:105: SADeprecationWarning: The SQLAlchemy PostgreSQL dialect has been renamed from 'postgres' to 'postgresql'. The new URL format is postgresql[+driver]://&lt;user&gt;:&lt;pass&gt;@&lt;host&gt;/&lt;dbname&gt;
  module = __import__('sqlalchemy.dialects.%s' % (dialect, )).dialects
2011-06-29 09:07:41,294 INFO  [migrate.versioning.api] 28 -&gt; 29... 
/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/reflection.py:46: SAWarning: Skipped unsupported reflection of expression-based index idx_pkg_lname
  ret = fn(self, con, *args, **kw)
/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/reflection.py:46: SAWarning: Skipped unsupported reflection of expression-based index idx_pkg_slname
  ret = fn(self, con, *args, **kw)
/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/reflection.py:46: SAWarning: Skipped unsupported reflection of expression-based index idx_pkg_suname
  ret = fn(self, con, *args, **kw)
/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/reflection.py:46: SAWarning: Skipped unsupported reflection of expression-based index idx_pkg_uname
  ret = fn(self, con, *args, **kw)
Traceback (most recent call last):
  File "/usr/bin/paster", line 18, in &lt;module&gt;
    command.run()
  File "/usr/lib/pymodules/python2.6/paste/script/command.py", line 84, in run
    invoke(command, command_name, options, args[1:])
  File "/usr/lib/pymodules/python2.6/paste/script/command.py", line 123, in invoke
    exit_code = runner.run(args)
  File "/usr/lib/pymodules/python2.6/paste/script/command.py", line 218, in run
    result = self.command()
  File "/usr/lib/pymodules/python2.6/ckan/lib/cli.py", line 84, in command
    model.repo.upgrade_db()
  File "/usr/lib/pymodules/python2.6/ckan/model/__init__.py", line 163, in upgrade_db
    mig.upgrade(self.metadata.bind, self.migrate_repository, version=version)
  File "/usr/lib/pymodules/python2.6/ckan_deps/migrate/versioning/api.py", line 185, in upgrade
    return _migrate(url, repository, version, upgrade=True, err=err, **opts)
  File "&lt;string&gt;", line 2, in _migrate
  File "/usr/lib/pymodules/python2.6/ckan_deps/migrate/versioning/util/__init__.py", line 160, in with_engine
    return f(*a, **kw)
  File "/usr/lib/pymodules/python2.6/ckan_deps/migrate/versioning/api.py", line 364, in _migrate
    schema.runchange(ver, change, changeset.step)
  File "/usr/lib/pymodules/python2.6/ckan_deps/migrate/versioning/schema.py", line 83, in runchange
    change.run(self.engine, step)
  File "/usr/lib/pymodules/python2.6/ckan_deps/migrate/versioning/script/py.py", line 140, in run
    script_func(engine)
  File "/usr/lib/pymodules/python2.6/ckan/migration/versions/029_version_groups.py", line 152, in upgrade
    migrate_engine.execute(q)
  File "/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/base.py", line 1788, in execute
    return connection.execute(statement, *multiparams, **params)
  File "/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/base.py", line 1191, in execute
    params)
  File "/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/base.py", line 1271, in _execute_clauseelement
    return self.__execute_context(context)
  File "/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/base.py", line 1302, in __execute_context
    context.parameters[0], context=context)
  File "/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/base.py", line 1401, in _cursor_execute
    context)
  File "/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/base.py", line 1394, in _cursor_execute
    context)
  File "/usr/lib/pymodules/python2.6/ckan_deps/sqlalchemy/engine/default.py", line 299, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (IntegrityError) insert or update on table "package_group_revision" violates foreign key constraint "package_group_revision_continuity_id_fkey"
DETAIL:  Key (continuity_id)=(7f373978-40a0-4848-bdc9-018ad213aa0b) is not present in table "package_group".
 'INSERT INTO package_group_revision (id, package_id, group_id, state, revision_id, continuity_id) VALUES (%(id)s, %(package_id)s, %(group_id)s, %(state)s, %(revision_id)s, %(continuity_id)s)' {'state': u'active', 'package_id': u'14d76e9e-028c-49c1-955b-ef30d4abb970', 'continuity_id': u'7f373978-40a0-4848-bdc9-018ad213aa0b', 'revision_id': u'24a11f58-2ff9-46f3-b113-0bf7f0baf254', 'group_id': u'4b832199-b8e3-4989-9b5d-de8dd6322612', 'id': u'7a3863bd-3054-40c8-bb3d-68b73096c108'}
</pre>
                            
                          </td>
                          <td class="PosixTime">1309339700000000
                          </td>
                          <td class="ModifiedTime">1310568631000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1001.html">#1001</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-4.html">ckan-v1.4-sprint-4</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1001.html">API should use normal user credentials if available</a>
                          </td>
                          <td class="description">
                            <p>
When using the API 'locally' i.e. from the CKAN instance (as would be the case with an ajax interface) the API, especially that allowing READ requests should use the normal user credentials if they are available prior to looking for an API key.
</p>
<p>
The key change appears to be to change _get_user_for_apikey method in lib/base.py <a class="missing wiki">BaseController?</a> to check the c.user attribute (may wish to rename as the name may now be a bit misleading ...).
</p>
<p>
This is critical to incorporating any ajax editing into the frontend.
</p>
<p>
As part of this ticket we should do a general consolidation of the identification system in lib/base.py so that both api_key and normal user auth lead to the same set of auth-related objects being available (suggest c.user and c.userobj and c.author).
</p>

                            
                          </td>
                          <td class="PosixTime">1298489705000000
                          </td>
                          <td class="ModifiedTime">1301310351000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1535.html">#1535</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1535.html">Plump for auth header of: X-CKAN-API-KEY</a>
                          </td>
                          <td class="description">
                            <p>
When using the API, the apikey needs to be supplied in a header called 'Authorization'. Because some proxys / deployments use this header for other things, a configurable header was provided as an alternative, with default "X-CKAN-API-KEY".
</p>
<p>
Rufus suggests having *one* way for this.
a) making this not configurable any more
b) making X-CKAN-API-KEY the default
</p>
<p>
(keep Authorization allowed, but not documented, for backwards compatibility)
</p>

                            
                          </td>
                          <td class="PosixTime">1323279082000000
                          </td>
                          <td class="ModifiedTime">1339774019000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1136.html">#1136</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1136.html">Move to SessionExtension in vdm</a>
                          </td>
                          <td class="description">
                            <p>
When vdm was created there was no SessionExtension so we use MapperExtension for doing revisioning. Now that <a class="missing wiki">SessionExtension?</a> exists we should use it. We can also follow the existing SQLAlchemy recipe: &lt;<a class="ext-link" href="http://www.sqlalchemy.org/docs/orm/examples.html?highlight=versioning#versioned-objects"><span class="icon">​</span>http://www.sqlalchemy.org/docs/orm/examples.html?highlight=versioning#versioned-objects</a>&gt;
</p>

                            
                          </td>
                          <td class="PosixTime">1305210855000000
                          </td>
                          <td class="ModifiedTime">1340632980000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2265.html">#2265</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-future.html">ckan-future</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2265.html">'More Like This' for a dataset</a>
                          </td>
                          <td class="description">
                            <p>
When viewing a dataset, it would be nice to show a couple of 'Related Datasets'. i.e. ones that are similar.
</p>
<p>
SOLR has a feature for finding documents similar to a particular document, called 'More Like This'.
</p>
<p>
We would like this for DGU.
</p>

                            
                          </td>
                          <td class="PosixTime">1332865220000000
                          </td>
                          <td class="ModifiedTime">1339771350000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1646.html">#1646</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">zephod
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-01-23.html">ckan-sprint-2012-01-23</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">worksforme
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1646.html">Resource navigator options display spuriously</a>
                          </td>
                          <td class="description">
                            <p>
When viewing a dataset, the "Resources" navigation button contained the Resource titles on the Resource navigator button, instead of in a drop-down mouse-hover menu.
</p>
<p>
<a class="ext-link" href="http://thedatahub.org/dataset/realtime-birth-data-in-bulgaria/resource/66fc5831-ce01-4954-9beb-e2889ef8a20f"><span class="icon">​</span>http://thedatahub.org/dataset/realtime-birth-data-in-bulgaria/resource/66fc5831-ce01-4954-9beb-e2889ef8a20f</a>
</p>
<p>
<a class="missing wiki">Chrome/Linux?</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1326452700000000
                          </td>
                          <td class="ModifiedTime">1327407044000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/145.html">#145</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.11.html">v0.11</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/145.html">Group shows its administrators</a>
                          </td>
                          <td class="description">
                            <p>
When viewing a group you see a list of the users who have admin rights to it. (Akin to owners / moderators)
</p>

                            
                          </td>
                          <td class="PosixTime">1255010403000000
                          </td>
                          <td class="ModifiedTime">1265294041000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1181.html">#1181</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1181.html">Link spam vulnerability in Notes and User-About fields</a>
                          </td>
                          <td class="description">
                            <p>
When viewing a user and a package, the about/notes fields contain Markdown, which may have links. These should have rel="nofollow" to discourage link spam.
</p>

                            
                          </td>
                          <td class="PosixTime">1307523160000000
                          </td>
                          <td class="ModifiedTime">1307532816000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1799.html">#1799</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-03-05.html">ckan-sprint-2012-03-05</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1799.html">To login as a different user or register, you need to logout first</a>
                          </td>
                          <td class="description">
                            <p>
When you are logged in, you cannot login as a different user before first logging out. (This is a restricting in repoze.who, which gives priority to an existing recognised identity over another one you supply.)
</p>
<p>
Yet, the CKAN login form appears when you try to do something you're not allowed to, even if you are logged in already. You login with a different identity and nothing happens - you remain as the first identity - this is incorrect.
</p>
<p>
(It is also a little confusing to be sent to the log-in page, although we do have a flash message explaining, and you might want to relogin as a superuser if you can.)
</p>
<p>
Whilst in this area, it would be worth fixing the problem for developers where you are logged in, do "paster db clean" and then try to log in - <a class="missing wiki">AuthTkt?</a> recognises your old cookie but the User object doesn't exist, so you get an error logging in. In this instance we should tell people to log-out.
</p>

                            
                          </td>
                          <td class="PosixTime">1329402820000000
                          </td>
                          <td class="ModifiedTime">1330002176000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1791.html">#1791</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-02-20.html">ckan-sprint-2012-02-20</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1791.html">Changing locale on /dataset/new causes exception</a>
                          </td>
                          <td class="description">
                            <p>
When you are on the /dataset/new page and you try and change locale then you get a 500 error. 
</p>
<p>
This is because it adds the '<span class="underline">cache' parameter, to ensure any proxy cache in the chain does not just send the cached page.
</span></p>
<p>
e.g. 
<a class="ext-link" href="http://127.0.0.1:5000/dataset/new?__cache=37713707"><span class="icon">​</span>http://127.0.0.1:5000/dataset/new?__cache=37713707</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1329134556000000
                          </td>
                          <td class="ModifiedTime">1329138315000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1281.html">#1281</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1281.html">Locale change flash message in wrong language</a>
                          </td>
                          <td class="description">
                            <p>
When you change the locale, it displays a flash message "Language has been set to: English" in the original language, not the one we have just changed to.
</p>

                            
                          </td>
                          <td class="PosixTime">1314021656000000
                          </td>
                          <td class="ModifiedTime">1314021919000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/514.html">#514</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/514.html">Inconsistent use of 'location' header in API</a>
                          </td>
                          <td class="description">
                            <p>
When you create a package then the 'location' header gets set. This doesn't happen for any other domain objects. I think this should be consistent - either none or all.
</p>
<p>
I've removed the info about the header in the docs in the meantime.
</p>

                            
                          </td>
                          <td class="PosixTime">1282757357000000
                          </td>
                          <td class="ModifiedTime">1282757391000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/515.html">#515</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-6.html">ckan-v1.4-sprint-6</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/515.html">Inconsistent use of 'location' header in API</a>
                          </td>
                          <td class="description">
                            <p>
When you create a package then the 'location' header gets set. This doesn't happen for any other domain objects. I think this should be consistent - either none or all.
</p>
<p>
I've removed the info about the header in the docs in the meantime.
</p>

                            
                          </td>
                          <td class="PosixTime">1282757360000000
                          </td>
                          <td class="ModifiedTime">1302774268000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/513.html">#513</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/513.html">Creating a package with API should warn if there are incorrect fields</a>
                          </td>
                          <td class="description">
                            <p>
When you create a package using the API, you might get a core field name wrong e.g. 'title' mispelt as 'titel' or 'groups' (which can't be specified in package creation). Currently that field will be ignored by the API. It should warn or give an error, rather than give 200 OK.
</p>

                            
                          </td>
                          <td class="PosixTime">1282754802000000
                          </td>
                          <td class="ModifiedTime">1302774329000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1287.html">#1287</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">thejimmyg
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1287.html">NAVL validation errors - Junk fields should be listed explicitly</a>
                          </td>
                          <td class="description">
                            <p>
When you create a package, but specify a key that is not allowed (e.g. 'relationships') then you get error message:
</p>
<pre class="wiki">{"__junk": ["The input field __junk was not expected."]}
</pre><p>
It should mention the actual key which is not expected. e.g.
</p>
<pre class="wiki">{"relationships": ["The input field 'relationships' was not expected."]}
</pre><p>
Kindly said that James' version of NAVL was better in this respect, so this might be best solved by moving to that.
</p>

                            
                          </td>
                          <td class="PosixTime">1314203102000000
                          </td>
                          <td class="ModifiedTime">1330990459000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1288.html">#1288</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1288.html">Package edit/creation can't include 'relationships' field</a>
                          </td>
                          <td class="description">
                            <p>
When you create or edit a package (via the API), you aren't able to specify the relationships it has. (If you do you get 409 <tt> {"__junk": ["The input field __junk was not expected."]} </tt>)
</p>
<p>
The normal way to create relationships is via /api/rest/relationships/ and this works. But when you GET a package, the dictionary lists all relationship details. So this bug creates a problem for editing a package that has relationships - you want to GET it, make any edits and then PUT it back. The work-around is to delete the 'relationships' key from the dict before you PUT it back.
</p>
<h2 id="Options">Options</h2>
<p>
Ideally, CKAN would read the 'relationships' key and make the necessary changes. This is a chunk of work.
</p>
<p>
Another good option is to allow an unchanged 'relationships' value, but barf it is edited. This is also a chunk of work.
</p>
<p>
A bad option would be to just ignore the 'relationships' value, since users will get frustrated changing this value and wonder why it never saves, not understanding it is different to all the rest, without error message.
</p>
<p>
A final option is to get rid of relationships altogether.
</p>

                            
                          </td>
                          <td class="PosixTime">1314203695000000
                          </td>
                          <td class="ModifiedTime">1339774098000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/343.html">#343</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/343.html">Packages referred by ID in API</a>
                          </td>
                          <td class="description">
                            <p>
When you do a Package Search or query a Package Relationship in the API version 2, the responses have relationships which refer to packages by name, not by ID.
</p>

                            
                          </td>
                          <td class="PosixTime">1276180179000000
                          </td>
                          <td class="ModifiedTime">1278066420000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1455.html">#1455</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-12-05.html">ckan-sprint-2011-12-05</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1455.html">Search results when 'all_fields' don't include 'extra' fields</a>
                          </td>
                          <td class="description">
                            <p>
When you do a search like this:
</p>
<pre class="wiki">http://thedatahub.org/api/search/package?q=tauberer+census&amp;all_fields=1
</pre><p>
the "extra" fields (e.g. "triples", "shortname") get missed off the results. The docs say it should be a "full record" and I don't see any reason why this is missed off.
</p>
<p>
This is a problem because search all_fields is the only way for clients and front-ends to get packages in bulk. They end up (like lodcloud) doing thousands of requests to get packages individually.
</p>
<p>
The full record is:
</p>
<pre class="wiki">http://thedatahub.org/api/rest/dataset/2000-us-census-rdf
{"count": 1, "results": [{"res_description": ["Download", "XML Sitemap", "SPARQL enpdoint", "Example (RDF/XML)"], "name": "2000-us-census-rdf", "license": "Non-OKD Compliant::Creative Commons Non-Commercial (Any)", "author": "Joshua Tauberer", "author_email": "http://razor.occams.info/", "ckan_url": "http://thedatahub.org/dataset/2000-us-census-rdf", "notes": "2000 U.S. Census converted into over a billion RDF triples.\n\nPopulation statistics at various geographic levels, from the U.S. as a whole, down through states, counties, sub-counties (roughly, cities and incorporated towns)\n\nNotes: also found in the of SPARQL Endpoints.\n\nFrom home page:\n\n&gt; * For the detailed Census statistics, you'll have to download the raw Census data files from the Census Bureau, my Perl script and the patch file below and run it yourself because the files are too big for me to offer as a download!\n&gt; \n&gt; * The data and scripts can be reused under Creative Commons Attribution-NonCommercial-ShareAlike.\n", "entity_type": "package", "site_id": "www.ckan.net", "download_url": "http://www.rdfabout.com/demo/census/", "indexed_ts": "2011-11-01T12:52:36.034Z", "url": "http://www.rdfabout.com/demo/census/", "state": "active", "title": "2000 U.S. Census in RDF (rdfabout.com)", "groups": ["lod", "lodcloud"], "res_format": ["", "meta/sitemap", "api/sparql", "example/rdf+xml"], "license_id": "cc-nc", "revision_id": "fcbad0de-79ea-41bd-8e01-eb832a05b732", "res_url": ["http://www.rdfabout.com/demo/census/", "http://www.rdfabout.com/sitemap.xml", "http://www.rdfabout.com/sparql", "http://www.rdfabout.com/rdf/usgov/geo/us/ny"], "id": "551ec435-f198-4d52-9b56-ec0b0be6aec9", "tags": ["census", "data", "demographics", "deref-vocab", "format-dc", "format-geonames", "format-politico", "format-rdf", "geographic", "linkeddata", "lod", "lodcloud.nolinks", "no-license-metadata", "no-provenance-metadata", "no-vocab-mappings", "population", "published-by-third-party", "rdf", "statistics", "us"]}]}
</pre>
                            
                          </td>
                          <td class="PosixTime">1320858265000000
                          </td>
                          <td class="ModifiedTime">1324474466000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1244.html">#1244</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1244.html">Notes field carriage-returns converted to CRLF</a>
                          </td>
                          <td class="description">
                            <p>
When you edit a package in the web form, if the notes field had <tt>\n</tt> as the End Of Line symbol, it gets lost when you preview or save the package, and the notes field is displayed all on one line.
</p>
<p>
This can be seen when editing annakarenina (as created by 'paster create-test-data'). The diff shows for example:
</p>
<pre class="wiki">- Some test notes
+ Some test notes
?                +
</pre><p>
but it would more clearly be shown as:
</p>
<pre class="wiki">- Some test notes\n
+ Some test notes
?                ++
</pre><p>
This is a significant problem with DGU, since a lot comes in via the API.
</p>
<p>
It's not clear what we should do about it. We could standardise on \n or \r\n when the form submission comes in. Do different browsers on different platforms do different things with EOLs?
</p>
<h2 id="Analysis">Analysis</h2>
<p>
Displaying the package: the Markdown processor respects both EOLs when displaying the field, putting each line in a &lt;p&gt; tag.
</p>
<p>
Creating the package edit form: placed into &lt;textfield&gt;. 
</p>
<p>
Browser displaying package edit form: &lt;textfield&gt; displays \n and \r\n as EOL. But \n\n gets compressed to one EOL. But on submission, both are returned as \r\n.
</p>
<p>
Receiving the edited package: Somewhere along the line the EOL gets converted to \n\n.
</p>

                            
                          </td>
                          <td class="PosixTime">1311689456000000
                          </td>
                          <td class="ModifiedTime">1340191253000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/292.html">#292</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/292.html">PackageResources are created new on every package edit</a>
                          </td>
                          <td class="description">
                            <p>
When you edit a package, all of its resources are deleted and a fresh set created. This causes all history of them to be lost.
</p>

                            
                          </td>
                          <td class="PosixTime">1271755964000000
                          </td>
                          <td class="ModifiedTime">1272286005000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1187.html">#1187</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5-sprint-3.html">ckan-v1.5-sprint-3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1187.html">Stop spam users with links in the 'about' field</a>
                          </td>
                          <td class="description">
                            <p>
When you edit a user, you should be stopped from putting links in the 'about' field, because this is a common tactic by spammers.
</p>

                            
                          </td>
                          <td class="PosixTime">1308142999000000
                          </td>
                          <td class="ModifiedTime">1308143605000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1553.html">#1553</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">aron.carroll
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/demo&#32;phase&#32;5.html">demo phase 5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1553.html">Upload handles non-logged in user badly</a>
                          </td>
                          <td class="description">
                            <p>
When you install ckanext-store (Storage extension) then CKAN displays 'Upload a file' button in the dataset/resource edit tab.
</p>
<p>
If you are not logged in, then this feature doesn't work, but there is nothing to indicate this. The button should be disabled.
</p>
<p>
Furthermore, it lets you think you are starting the upload process, the spinner spins, it says 'Uploading...' and stays like that for a long while.
</p>
<p>
This is a problem CKAN 1.4.3(ish) - 1.5.1 (current version) when you install the current ckanext-storage.
</p>

                            
                          </td>
                          <td class="PosixTime">1324056405000000
                          </td>
                          <td class="ModifiedTime">1343226756000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/78.html">#78</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/78.html">Extend login cookie lifetime</a>
                          </td>
                          <td class="description">
                            <p>
When you login you get given a cookie but it is very short (life of your browser session I think). 
</p>
<p>
Work out how to extend to something reasonable (30 days or perhaps forever with logout unsetting cookie).
</p>
<ol><li>A quick investigation to see whether this is possible
</li><li>If possible do it
</li></ol><p>
Cost: ?
</p>

                            
                          </td>
                          <td class="PosixTime">1247829310000000
                          </td>
                          <td class="ModifiedTime">1314877169000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1318.html">#1318</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1318.html">'Register user' doesn't log you in</a>
                          </td>
                          <td class="description">
                            <p>
When you register a user, it doesn't seem to be logged in properly straight away. Top-right it invites you to "log in" and "register". Also the "create package" menu option doesn't appear. Going to /user/me sends you to login page. If you then login, then all these things are corrected.
</p>

                            
                          </td>
                          <td class="PosixTime">1315415783000000
                          </td>
                          <td class="ModifiedTime">1315569362000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2918.html">#2918</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnmartin
                          </td>
                          <td class="reporter">ross
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan&#32;2.0.html">ckan 2.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2918.html">Can't remove users from organizations</a>
                          </td>
                          <td class="description">
                            <p>
When you remove someone, without adding them, the text box at the bottom (which should probably autocomplete) is empty, and this causes problems on the server.
</p>
<p>
Ideally when you add a user (select from the autocomplete) it would add another row to the table, defaulting the user to editor and setting the names to user<span class="underline">{{X}}</span>name and user<span class="underline">{{X}}</span>capacity where X is $('tr').size()
</p>

                            
                          </td>
                          <td class="PosixTime">1347455572000000
                          </td>
                          <td class="ModifiedTime">1347970735000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1321.html">#1321</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-24.html">ckan-sprint-2011-10-24</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1321.html">Flash message deferred</a>
                          </td>
                          <td class="description">
                            <p>
When you reset a password, the flash message saying "check your email" sometimes doesn't display on the next page. You then click on the link in your email and it displays on that page (i.e. too late).
</p>
<p>
Seen this on thedatahub.org. To do with the proxy caching?
</p>

                            
                          </td>
                          <td class="PosixTime">1315474657000000
                          </td>
                          <td class="ModifiedTime">1319814460000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/195.html">#195</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.11.html">v0.11</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/195.html">Association listings should be alphabetically sorted (e.g. a group's packages)</a>
                          </td>
                          <td class="description">
                            <p>
Where an item has an association listing (e.g. package's tags or group's packages) these should be sorted in a sensible way. For present choose to sort alphabetically by name.
</p>
<p>
Cost: 2h
</p>

                            
                          </td>
                          <td class="PosixTime">1258475448000000
                          </td>
                          <td class="ModifiedTime">1258585500000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/712.html">#712</a>
                          </td>
                          <td class="type">story
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.3.html">ckan-v1.3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/712.html">Model government data package with "v0.4" of the attributes</a>
                          </td>
                          <td class="description">
                            <p>
Where said "v0.4" would be the result of converging four lists mentioned in requirement <a class="closed ticket" href="../ticket/711.html" title="requirement: Packages shall support both UK government and location information with a ... (closed: fixed)">#711</a>.
</p>

                            
                          </td>
                          <td class="PosixTime">1287581039000000
                          </td>
                          <td class="ModifiedTime">1294408364000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1764.html">#1764</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">seanh
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.7.html">ckan-v1.7</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1764.html">Move activity streams API tests into tests/logic</a>
                          </td>
                          <td class="description">
                            <p>
Which is where the other API tests have now been moved.
</p>

                            
                          </td>
                          <td class="PosixTime">1328536499000000
                          </td>
                          <td class="ModifiedTime">1335878051000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1380.html">#1380</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">zephod
                          </td>
                          <td class="reporter">zephod
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-11-07.html">ckan-sprint-2011-11-07</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1380.html">Making customizing CSS easier</a>
                          </td>
                          <td class="description">
                            <p>
While integrating the new theme and making a large number of UX tweaks, I've allowed the CSS file to bloat out of control with some very specific rules and subtle hacks, as well as a couple of clearfix &lt;div&gt; objects in the markup which isn't really good practice.
</p>
<p>
In general we want a logical CSS structure which is as easy to modify as possible. You should not find yourself being overwritten by highly specific rules all the time!
</p>
<h2 id="Actions">Actions</h2>
<ol><li>Clean up css
</li><li>Add a config option ckan.template_head_end - arbitrary string inserted at end of &lt;head&gt; tag so you can add custom css etc (may also want to update theming docs to reflect possibility of using this)
</li><li>(While we're at it): Add ckan.template_footer_end config option to deployment.ini_template. (This already exists, we just haven't told anybody)
</li><li>The /users index page isn't linked anywhere. Clean it up and link it in the footer next to Groups etc.
</li><li>package/new, package/edit, group/new and group/edit all include their forms differently. Use h.literal in all cases.
</li><li>Fix the padding on minornavigation.
</li></ol><h2 id="Background">Background</h2>
<p>
David Read sent me the following as background:
</p>
<ol class="upperalpha" start="22"><li>basic theming is described here: <a class="ext-link" href="http://docs.ckan.org/en/latest/theming.html"><span class="icon">​</span>http://docs.ckan.org/en/latest/theming.html</a>
</li></ol><p>
Deep customisation of the templates is done by creating an extension, with this as a template: <a class="ext-link" href="https://bitbucket.org/okfn/ckanext-exampletheme/overview"><span class="icon">​</span>https://bitbucket.org/okfn/ckanext-exampletheme/overview</a>
</p>
<p>
That's what Augusto and the Brazilians have done <a class="ext-link" href="http://alpha.dados.gov.br/dados/"><span class="icon">​</span>http://alpha.dados.gov.br/dados/</a> and their code is here:
hg clone <a class="ext-link" href="http://dev.dados.gov.br/codigo/dev/tema-ckan"><span class="icon">​</span>http://dev.dados.gov.br/codigo/dev/tema-ckan</a>
&lt;snip&gt;
Another thing of interest was us becoming compatible with Wordpress themes last December. Richard Pope worked with Rufus on this. I believe the base theme is 'twentyten' and I'm guessing that one would swap that css file with another to change theme, but I don't know. I don't know if this feature has been dropped since then.
<a class="ext-link" href="http://lists.okfn.org/pipermail/ckan-dev/2010-December/000073.html"><span class="icon">​</span>http://lists.okfn.org/pipermail/ckan-dev/2010-December/000073.html</a>
</p>
<p>
Dave
</p>

                            
                          </td>
                          <td class="PosixTime">1318263956000000
                          </td>
                          <td class="ModifiedTime">1324048324000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1099.html">#1099</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1099.html">strange interactions between two browsers while playing with authz groups</a>
                          </td>
                          <td class="description">
                            <p>
While playing with the authorization groups, trying to design tests, I found that it was necessary to log in as two different users with two different browsers. Often actions of one user would cause server errors in the other user's browser.
</p>
<p>
I don't have a reproducible test case, but it happens fairly often so it shouldn't be too difficult to get one.
</p>

                            
                          </td>
                          <td class="PosixTime">1303380824000000
                          </td>
                          <td class="ModifiedTime">1324057106000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/764.html">#764</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">thejimmyg
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/764.html">Read-only CKAN Web UI</a>
                          </td>
                          <td class="description">
                            <p>
Whilse using CKAN web interface, you are not tempted to edit stuff:
</p>
<ul><li>You know at all times this CKAN is read-only
</li><li>All editing facilities are still seen but greyed-out with an indication why it is.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1288091619000000
                          </td>
                          <td class="ModifiedTime">1310133334000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/346.html">#346</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.3.html">ckan-v1.3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/346.html">Revision search API (response data format and documentation issue)</a>
                          </td>
                          <td class="description">
                            <p>
Whilst going through the API docs for the revision search API, it was noticed that the "Gdu" SoS doc doesn't match up. It returns revision IDs (perhaps this is useful to note in the spec?) so the format is probably not 'limitedstring'. Also, they appear to be ordered youngest first, not oldest as stated.
</p>
<p>
And in the revision model, it refers to 'simplestring' which it
doesn't define - I guess the names should be 'limitedstring'?
</p>
<p>
Could this be checked out?
</p>

                            
                          </td>
                          <td class="PosixTime">1276523517000000
                          </td>
                          <td class="ModifiedTime">1296477510000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2330.html">#2330</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">icmurray
                          </td>
                          <td class="reporter">icmurray
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-05-15.html">ckan-sprint-2012-05-15</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2330.html">Make api read-actions GETable</a>
                          </td>
                          <td class="description">
                            <p>
Whitelist any GETable api actions, and optionally construct the query from url params rather than body.
</p>

                            
                          </td>
                          <td class="PosixTime">1335460585000000
                          </td>
                          <td class="ModifiedTime">1337073314000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2738.html">#2738</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">toby
                          </td>
                          <td class="reporter">shevski
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2738.html">Data API</a>
                          </td>
                          <td class="description">
                            <p>
Why is datastore not enabled for this resource <a class="ext-link" href="http://s031.okserver.org:2375/dataset/frere/resource/cdeddb39-b0cb-4762-aa5b-f80fc892d4dd"><span class="icon">​</span>http://s031.okserver.org:2375/dataset/frere/resource/cdeddb39-b0cb-4762-aa5b-f80fc892d4dd</a> ?
</p>
<p>
Is this going to be a site wide setting? How do new resources get added to datastore? Or are we just using the dataproxy for demo?
</p>

                            
                          </td>
                          <td class="PosixTime">1343123012000000
                          </td>
                          <td class="ModifiedTime">1343125335000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2882.html">#2882</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.8.1.html">ckan-v1.8.1</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2882.html">Remove User Stories Overview from docs?</a>
                          </td>
                          <td class="description">
                            <p>
Why is this here? Is it up to date? Is anyone keeping it up to date? Does this belong in some sort of CKAN planning or roadmap document rather than in the documentation?
</p>
<p>
<a class="ext-link" href="http://docs.ckan.org/en/latest/user-stories.html"><span class="icon">​</span>http://docs.ckan.org/en/latest/user-stories.html</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1345540723000000
                          </td>
                          <td class="ModifiedTime">1345540723000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1433.html">#1433</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-11-21.html">ckan-sprint-2011-11-21</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1433.html">Support SQLAlchemy 0.7</a>
                          </td>
                          <td class="description">
                            <p>
Why: current stable version of sqlalchemy. geoalchemy stuff required 0.7 and likely that some other things will require it soon.
</p>
<p>
Probably requires work on vdm <a class="ext-link" href="https://bitbucket.org/okfn/vdm"><span class="icon">​</span>https://bitbucket.org/okfn/vdm</a>
</p>
<p>
NB: should have discussion before making 0.7 the default required version in CKAN core.
</p>

                            
                          </td>
                          <td class="PosixTime">1320143453000000
                          </td>
                          <td class="ModifiedTime">1324472583000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2223.html">#2223</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">zephod
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-03-19.html">ckan-sprint-2012-03-19</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2223.html">Switch to bootstrap from blueprint</a>
                          </td>
                          <td class="description">
                            <p>
Why?
</p>
<ul><li>We already use quite a bit of boostrap
</li><li>We already plan to use bootstrap JS
</li><li>Bootstrap is excellent and pretty light
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1331384974000000
                          </td>
                          <td class="ModifiedTime">1332842692000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/922.html">#922</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/922.html">Make Resources first class entity.</a>
                          </td>
                          <td class="description">
                            <p>
Why?
</p>
<ul><li>Will make it easier to give resources their own form, independent of packages.
</li><li>Makes uploading, harvesting and previewing data cleaner as its separate from the packages.
</li><li>Gives the option of sharing a resource between packages.
</li><li>Leads the way to supporting storing richer semantic information against them.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1295713858000000
                          </td>
                          <td class="ModifiedTime">1320664187000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/690.html">#690</a>
                          </td>
                          <td class="type">requirement
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/690.html">The system shall support Gemini2 service records</a>
                          </td>
                          <td class="description">
                            <p>
Wish to fold service records into package resources. Trouble is that service records don't necessarily refer to a data record, so should this be a new package?
</p>

                            
                          </td>
                          <td class="PosixTime">1286822613000000
                          </td>
                          <td class="ModifiedTime">1288013718000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/725.html">#725</a>
                          </td>
                          <td class="type">story
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/iati-3.html">iati-3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/725.html">Change to allow anyone (logged in) to create a publisher</a>
                          </td>
                          <td class="description">
                            <p>
With a pending state set ("unapproved") 
</p>

                            
                          </td>
                          <td class="PosixTime">1287584630000000
                          </td>
                          <td class="ModifiedTime">1289296038000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2893.html">#2893</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.8.1.html">ckan-v1.8.1</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2893.html">Tags missing from form_to_db_package_schema()</a>
                          </td>
                          <td class="description">
                            <p>
With an IDatasetForm plugin active with a form_to_db_package_schema() method that returns a schema based on ckan/logic/schema.py:form_to_db_package_schema() I'm getting validation errors like this:
</p>
<p>
[ckan.controllers.api] Validation error: "{'<span class="underline">type': 'Validation Error', '</span>junk': [u'The input field <span class="underline">junk was not expected.']}"
</span></p>
<p>
They seem to be caused when a data dict with key 'tags' is passed to e.g. the package_update API, for example in ckan/tests/functional/api/model/test_vocabulary.py there are various tests that get this error when they call package_update (if you run the tests with a suitable IDatasetForm plugin active).
</p>
<p>
In ckan/logic/schema.py:form_to_db_package_schema() 'tags' is for some reason deliberately removed from the schema.
</p>

                            
                          </td>
                          <td class="PosixTime">1346155864000000
                          </td>
                          <td class="ModifiedTime">1346155864000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/279.html">#279</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/279.html">Ensure package's license is an option when it's edited</a>
                          </td>
                          <td class="description">
                            <p>
With forms configurable to show a subset of licenses and ckan instances moving packages from server to server, there is a chance that a user will edit a package and the existing package's license is not displayed in the form. If the user submits this form without touching the license dropdown, then the value is lost. 
</p>
<p>
So for this case we should add the package's license to the list displayed.
</p>

                            
                          </td>
                          <td class="PosixTime">1270205931000000
                          </td>
                          <td class="ModifiedTime">1272451384000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1462.html">#1462</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">thejimmyg
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-12-19.html">ckan-sprint-2011-12-19</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1462.html">Multi-Instance CKAN Solr Search Issues</a>
                          </td>
                          <td class="description">
                            <p>
With the 1.5 package release, CKAN instances over-write each other's indexes. Adria has a fix.
</p>
<p>
I'd like to see a new CKAN 1.5.1 release with the Solr changes merged and the Solr site ID set up as part of the install ckan.site_id = dgu-os.okfn.org. I'd also like the ability to search on ID and to have the ID directly visible on the package page.
</p>
<p>
We need to decide how to do this upgrade without affecting existing CKAN solr indexes.
</p>

                            
                          </td>
                          <td class="PosixTime">1321375470000000
                          </td>
                          <td class="ModifiedTime">1330083671000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1102.html">#1102</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1102.html">searching broken in development setup</a>
                          </td>
                          <td class="description">
                            <p>
With the default test data created by
</p>
<p>
paster db clean
paster db init
paster create-test-data
</p>
<p>
going to the front page shows two recently changed packages
A Wonderful Story
A Novel by Tolstoy
</p>
<p>
But none of those words "Wonderful", etc produce search hits.
In fact as far as I can tell, nothing produces any search hits.
</p>
<p>
That isn't true on ckan.net, where searching seems to work.
</p>

                            
                          </td>
                          <td class="PosixTime">1303491912000000
                          </td>
                          <td class="ModifiedTime">1303744552000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1103.html">#1103</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1103.html">searching broken in development setup</a>
                          </td>
                          <td class="description">
                            <p>
With the default test data created by
</p>
<p>
paster db clean
paster db init
paster create-test-data
</p>
<p>
going to the front page shows two recently changed packages
A Wonderful Story
A Novel by Tolstoy
</p>
<p>
But none of those words "Wonderful", etc produce search hits.
In fact as far as I can tell, nothing produces any search hits.
</p>
<p>
That isn't true on ckan.net, where searching seems to work.
</p>

                            
                          </td>
                          <td class="PosixTime">1303494538000000
                          </td>
                          <td class="ModifiedTime">1303744575000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1104.html">#1104</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-7.html">ckan-v1.4-sprint-7</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1104.html">create-test-data doesn't index the packages it creates</a>
                          </td>
                          <td class="description">
                            <p>
With the default test data created by
</p>
<p>
paster db clean
paster db init
paster create-test-data
</p>
<p>
going to the front page shows two recently changed packages
A Wonderful Story
A Novel by Tolstoy
</p>
<p>
But none of those words "Wonderful", etc produce search hits.
In fact as far as I can tell, nothing produces any search hits.
</p>
<p>
That isn't true on ckan.net, where searching seems to work.
</p>

                            
                          </td>
                          <td class="PosixTime">1303494635000000
                          </td>
                          <td class="ModifiedTime">1303920791000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2950.html">#2950</a>
                          </td>
                          <td class="type">requirement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">icmurray
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan&#32;2.0.html">ckan 2.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2950.html">paster command to minify javascript and css</a>
                          </td>
                          <td class="description">
                            <p>
With the latest template, css and js changes in 2.0, there are a number of things that need preparation prior to a production deployment.  One of these is:
</p>
<ul><li>the fanstatic_resources defined in <tt>ckan/lib/fanstatic_resources.py</tt> (bottom of module) should be prepared, and minified.
</li></ul><p>
This ticket is to:
</p>
<ul><li>provide a paster command which when run will generate the minified javascript as css files.
</li><li>stop the auto-minification of files when CKAN starts up.
</li><li>remove reference to the minified files in the <tt>.gitignore</tt> file.
</li><li>add instruction to the release process to run this command, and check-in the minified files to the repo.
</li></ul><p>
## Background
</p>
<p>
Currently, minification works seamlessly without the need for any preparation when CKAN is started in a development setup.  But on a production site, the webserver will (almost certainly) not have write-access to the directories that will contain the minified files.  And so the minification will fail, and the site will end up serving the un-minified media, or even *old* minified media.
</p>
<p>
One way around this would be to allow webserver write access to the directory its serving out of.  But this is not generally considered good practice.
</p>
<p>
Another method would be to distribute the minified files with CKAN.  This ticket describes how to do this without causing a lot of noise in the commit history of the repo.
</p>
<p>
The auto-minifcation occurs when importing <tt>ckan/lib/fanstatic_resources.py</tt>.
</p>
<p>
## Changing the process slightly
</p>
<p>
The reason for moving away from auto-minifying files at start-up, to minifying files when running a paster command is:
</p>
<ul><li>we should be distributing the minified files when we make a release (as we do with translation files).  This makes it easier to install CKAN from source.
</li></ul><ul><li>if we distribute the minified files, then they need to be checked-in to the repo.
</li></ul><ul><li>if they are auto-minified, whenever small changes are made, then this will create a lot of noise in the repo.  It will be clearer to have the minified-files generated manually as part of the release process. (Or whever we make a deployment internally).
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1349118376000000
                          </td>
                          <td class="ModifiedTime">1349189654000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2951.html">#2951</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">icmurray
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan&#32;2.0.html">ckan 2.0</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2951.html">Paster command for building css from less</a>
                          </td>
                          <td class="description">
                            <p>
With the latest template, css and js changes in 2.0, there are a number of things that need preparation prior to a production deployment. One of these is:
</p>
<ul><li>the less files should be compiled to css (main.css, not just main.debug.css)
</li></ul><p>
This ticket is to provide a paster command which will compile the .less into the main.css file.  The idea of the paster command is that it will be run by developers, and they will check in the resulting .css files.  It will also provide a convenient mechanism for production scenarios with node.js installed on the production server, as they will be able to compile the .less there as well.
</p>
<p>
## Background
</p>
<p>
The .css files that need to be served are built using <tt>less</tt>.  The css files that are generated *are* checked-in to the repo; but they are a build artifact.  So the general workflow is:
</p>
<ul><li>commit changes to the less files
</li><li>build the main.css file and commit
</li></ul><p>
This paster command slots into the above workflow for convenience.
</p>
<p>
## Notes
</p>
<ul><li>doc/frontend-development.rst
</li><li>bin/less
</li></ul><p>
to run this paster command, <tt>Node</tt> will be required.  So that dependency should be checked.
</p>
<p>
## The paster command
</p>
<p>
This is the proposed behaviour of the paster command:
</p>
<ul><li>ensure <tt>custom.less</tt> does not exist
</li><li>for each colour in{fuchsia,green,maroon,red}:
<ul><li>generate a <tt>custom.less</tt> file for $colour.  There's a paster command that does this already: `paster color &lt;color name&gt;.
</li><li>generate the <tt>css</tt> from the <tt>less</tt> files.  ie - the equivelant of running <tt>bin/less --production</tt>.
<ul><li>this will generate a <tt>main.css</tt> file, which should be renamed to <tt>$color.css</tt>.
</li></ul></li></ul></li></ul><ul><li>ensure <tt>custom.less</tt> does not exist
</li><li>generate the <tt>css</tt> from the <tt>less</tt> files.  This will create a <tt>main.css</tt> with the default colour scheme.
</li></ul><ul><li>call the paster command that minifies css and js files.  (This command does not exist yet, see <a class="closed ticket" href="../ticket/2950.html" title="requirement: paster command to minify javascript and css (closed: fixed)">#2950</a>)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1349118740000000
                          </td>
                          <td class="ModifiedTime">1349175030000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2602.html">#2602</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2602.html">Users can set a dataset's organization to None, and then they cannot edit it</a>
                          </td>
                          <td class="description">
                            <p>
With the organizations and organizations_dataset plugins enabled login and create a new dataset, adding it to a group that you are a member of. Edit the dataset and set the group to none. Now you can no longer edit your own dataset. (You can also specify None for the organization when first creating the dataset, same problem.)
</p>

                            
                          </td>
                          <td class="PosixTime">1340722892000000
                          </td>
                          <td class="ModifiedTime">1340805904000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2789.html">#2789</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">aron.carroll
                          </td>
                          <td class="reporter">toby
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/demo&#32;phase&#32;3.html">demo phase 3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2789.html">logo fixups</a>
                          </td>
                          <td class="description">
                            <p>
With the text logo I'd like the tag line to be under the site name so some css like
</p>
<p>
<tt>float:left;clear:left;font-size:13px;line-height:0.1;</tt>
</p>
<p>
Also the site name can be larger if no tagline
</p>
<p>
commit daac54dbd856  I've added a new global g.header_css that sets the hgroup class to
</p>
<p>
'header-image'
'header-text-logo'
'header-text-logo-tagline'
</p>
<p>
I think maybe we should also have 'header-image-css'  for the equivalent of the class="logo" in the link to allow/stop the image replacement 
</p>

                            
                          </td>
                          <td class="PosixTime">1343835141000000
                          </td>
                          <td class="ModifiedTime">1343835904000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/181.html">#181</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">jwyg
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/181.html">New 'stats' box on right hand sidebar</a>
                          </td>
                          <td class="description">
                            <p>
With up to date statistics such as:
</p>
<ul><li>total packages
</li><li>total tags
</li><li>total users
</li><li>most active users
</li><li>last update
</li><li>etc.
</li></ul><p>
Could also be nice to have a more dedicated stats page - with information such as graphs showing rate of packages being added and such like. See <a class="closed ticket" href="../ticket/184.html" title="enhancement: Stats page (closed: fixed)">ticket:184</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1257534385000000
                          </td>
                          <td class="ModifiedTime">1296339510000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/273.html">#273</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.1.html">v1.1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/273.html">Investigate search index options and create tickets</a>
                          </td>
                          <td class="description">
                            <p>
Work already here: <a class="ext-link" href="http://knowledgeforge.net/ckan/trac/wiki/SearchEngine"><span class="icon">​</span>http://knowledgeforge.net/ckan/trac/wiki/SearchEngine</a>
</p>
<p>
Add knowledge there or to:
</p>
<p>
<a class="ext-link" href="http://wiki.okfn.org/SoftwareTools/Search"><span class="icon">​</span>http://wiki.okfn.org/SoftwareTools/Search</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1268996933000000
                          </td>
                          <td class="ModifiedTime">1278578527000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1361.html">#1361</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1361.html">Simple search support</a>
                          </td>
                          <td class="description">
                            <p>
Would be nice if CKAN could work out of the box without the need for SOLR (solr is great but complex and heavyweight to install).
</p>
<p>
Propose:
</p>
<ul><li>ckan.simple_search config option
</li><li>If set:
<ul><li>query via simple query to database backend
</li><li>do no specialized indexing
</li></ul></li></ul><h2 id="Extras">Extras</h2>
<p>
Remove
</p>
<ul><li><a class="missing wiki">TagSearchQuery?</a> from lib/search (just do a search directly)?
</li><li><a class="closed ticket" href="../ticket/1360.html" title="enhancement: Remove support for filter by download and filter by openness in search (closed: fixed)">#1360</a>: filter by downloadable and filter by open search options
</li></ul><h2 id="PossibleExtras">Possible Extras</h2>
<p>
(Probably future improvements)
</p>
<ul><li>Re-introduce full-text search indexing where supported in e.g. postgres and use for querying
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1317078276000000
                          </td>
                          <td class="ModifiedTime">1317082893000000
                          </td>
              </tr>
          </tbody>
      </table>
      <div class="paging">
    <span class="previous">
      <a href="22%3Fsort=description&amp;asc=1&amp;page=23.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=14.html" title="Page 14">14</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=15.html" title="Page 15">15</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=16.html" title="Page 16">16</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=17.html" title="Page 17">17</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=18.html" title="Page 18">18</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=19.html" title="Page 19">19</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=20.html" title="Page 20">20</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=21.html" title="Page 21">21</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=22.html" title="Page 22">22</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=23.html" title="Page 23">23</a>
      </span>
      <span>
        <span class="current">24</span>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=25.html" title="Page 25">25</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=26.html" title="Page 26">26</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=1&amp;page=27.html" title="Page 27">27</a>
      </span>
    <span class="next">
      <a href="22%3Fsort=description&amp;asc=1&amp;page=25.html" title="Next Page">→</a>
    </span>
</div>
      <div id="help"><strong>Note:</strong>
        See <a href="../wiki/TracReports.html">TracReports</a> for help on using and creating reports.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="22%3Fsort=description&amp;asc=1&amp;format=rss" class="rss">RSS Feed</a>
        </li><li>
          <a rel="nofollow" href="22%3Fsort=description&amp;asc=1&amp;format=csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="22%3Fsort=description&amp;asc=1&amp;format=tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="../report%3Fid=22&amp;format=sql">SQL Query</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.3</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>