<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      {23} Trac comments – CKAN
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">window.location.hash = window.location.hash;</script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="23%3Fsort=author&amp;asc=0&amp;format=rss" type="application/rss+xml" class="rss" title="RSS Feed" /><link rel="alternate" href="23%3Fsort=author&amp;asc=0&amp;format=csv" type="text/plain" title="Comma-delimited Text" /><link rel="alternate" href="23%3Fsort=author&amp;asc=0&amp;format=tab" type="text/plain" title="Tab-delimited Text" /><link rel="alternate" href="../report%3Fid=23&amp;format=sql" type="text/plain" title="SQL Query" />
        <link rel="up" href="../report.html" title="Available Reports" />
        <link rel="next" href="23%3Fsort=author&amp;asc=0&amp;page=21.html" title="Next Page" />
        <link rel="start" href="../wiki.1.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/report.css" type="text/css" />
        <link rel="prev" href="23%3Fsort=author&amp;asc=0&amp;page=19.html" title="Previous Page" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search CKAN" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://ckan.org/"><img src="http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png" alt="CKAN Trac" height="70" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../login.html">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li><a href="../about.html">About Trac</a></li><li class="last"><a href="../register.html">Register</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li><a href="../search.html">Search</a></li><li class="last"><a href="../wiki.1.html">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="../report.html">Available Reports</a></li><li class="last"><a href="../query.html">Custom Query</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="report">
      <h1>{23} Trac comments
        <span class="numrows">(3729 matches)</span>
      </h1>
      <form method="get" action="23%3Fsort=author&amp;asc=0&amp;page=20.html">
        <div id="prefs">
          <div>
            <label>
              Max items per page
              <input type="text" name="max" size="10" value="100" />
            </label>
          </div>
          <div class="buttons">
            <input type="submit" value="Update" />
          </div>
        </div>
      </form>
      <div id="description">
        <p>
<a class="ext-link" href="https://github.com/roskakori/tratihubis/blob/master/query_comments.sql"><span class="icon">​</span>https://github.com/roskakori/tratihubis/blob/master/query_comments.sql</a>
</p>

      </div>
      <div class="buttons">
      </div>
      <h2 class="report-result">
        Results <span class="numresults">(1901 - 2000 of 3729)</span>
      </h2>
      <div class="paging">
    <span class="previous">
      <a href="23%3Fsort=author&amp;asc=0&amp;page=19.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=10.html" title="Page 10">10</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=11.html" title="Page 11">11</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=12.html" title="Page 12">12</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=13.html" title="Page 13">13</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=14.html" title="Page 14">14</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=15.html" title="Page 15">15</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=16.html" title="Page 16">16</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=17.html" title="Page 17">17</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=18.html" title="Page 18">18</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=19.html" title="Page 19">19</a>
      </span>
      <span>
        <span class="current">20</span>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=21.html" title="Page 21">21</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=22.html" title="Page 22">22</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=23.html" title="Page 23">23</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=24.html" title="Page 24">24</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=25.html" title="Page 25">25</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=26.html" title="Page 26">26</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=27.html" title="Page 27">27</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=28.html" title="Page 28">28</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=29.html" title="Page 29">29</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=30.html" title="Page 30">30</a>
      </span>
    <span class="next">
      <a href="23%3Fsort=author&amp;asc=0&amp;page=21.html" title="Next Page">→</a>
    </span>
</div>
      <table class="listing tickets">
          <thead>
        <tr class="trac-columns">
          <th>
            <a href="23%3Fsort=ticket&amp;asc=1&amp;page=20.html">
              Ticket
            </a>
          </th><th>
            <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=20.html">
              Posixtime
            </a>
          </th><th class="desc">
            <a href="23%3Fsort=author&amp;asc=1&amp;page=20.html">
              Author
            </a>
          </th><th colspan="100">
            <a href="23%3Fsort=newvalue&amp;asc=1&amp;page=20.html">
              Newvalue
            </a>
          </th>
        </tr>
          </thead>
          <tbody>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/868.html">#868</a>
                          </td>
                          <td class="PosixTime">1292890251000000
                          </td>
                          <td class="author">kindly@gmail.com
                          </td>
                          <td class="newvalue">Below is a patch to make the tests run at least 2.5 times faster (about 15 mins on my old laptop).  Instead of dropping the tables each time, it just deletes everything in them, using a low level connection.  All the tests pass this way. It's a surprisingly clean patch.  Here are a few points concerning it.

 * I tested truncating the tables but it's slower. If there are any big tables in the tests this way is the fastest (faster than drop).
 * The sequences (id columns) will start from where they left off.
 * I also investigated making postgres template database and cloning it, but the complication was not worth it. 
 * sqlalchemy iterates the tables in reverse dependency order, which make this possible.
 * I targeted rebuild_db as that what most of the tests I saw where using, however I have not checked all tests to see if they all are. 
 * There is a slight hack on the repo object to make sure it knows that "clean_db" is coming from the tests.
 * I refactored init_db for code reuse.
 * I have not done a version check. sqlalchemy &gt;= 0.5 do this in a different way as outlined in the comments.


{{{
diff -r 7f2239b0f743 ckan/model/__init__.py
--- a/ckan/model/__init__.py	Fri Dec 17 10:34:47 2010 +0000
+++ b/ckan/model/__init__.py	Mon Dec 20 23:25:04 2010 +0000
@@ -41,6 +41,9 @@
 
     def init_db(self):
         super(Repository, self).init_db()
+        self.add_initial_data()
+
+    def add_initial_data(self):
         # assume if this exists everything else does too
         if not User.by_name(PSEUDO_USER__VISITOR):
             visitor = User(name=PSEUDO_USER__VISITOR)
@@ -69,6 +72,26 @@
         import migrate.versioning.api as mig
         version = mig.version(self.migrate_repository)
         return version
+    
+    def clean_db(self):
+        # delete only added for tests
+        if hasattr(self, "delete_only") and self.delete_only:
+            self.delete_all()
+        else:
+            super(Repository, self).clean_db()
+    
+    def delete_all(self):
+        
+        self.session.remove()
+        ## use raw connection for performance
+        connection = self.session.connection()
+        ## sqla sorts in reverse dependancy order.
+        ## in &gt;= 0.5 use reversed(metadata.sorted_tables()) instead of table_iterator
+        for table in self.metadata.table_iterator():
+            connection.execute('delete from "%s"' % table.name)
+        self.session.commit()
+
+        self.add_initial_data()
 
     def setup_migration_version_control(self, version=None):
         import migrate.versioning.exceptions
diff -r 7f2239b0f743 ckan/tests/__init__.py
--- a/ckan/tests/__init__.py	Fri Dec 17 10:34:47 2010 +0000
+++ b/ckan/tests/__init__.py	Mon Dec 20 23:25:04 2010 +0000
@@ -55,6 +55,7 @@
 
 import ckan.model as model
 model.repo.rebuild_db()
+model.repo.delete_only = True
 
 class BaseCase(object):
}}}

 
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/870.html">#870</a>
                          </td>
                          <td class="PosixTime">1294862485000000
                          </td>
                          <td class="author">kindly@gmail.com
                          </td>
                          <td class="newvalue">A patch is available here.

https://bitbucket.org/kindly/ckan/changeset/9a1d6f55587b
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/876.html">#876</a>
                          </td>
                          <td class="PosixTime">1292891133000000
                          </td>
                          <td class="author">kindly@gmail.com
                          </td>
                          <td class="newvalue">I have looked into this already so I can give you a head start.  I am working on a project that uses many backends so I have some experience. So here is what I have found so far. 

== nested transactions ==

VDM does not support sqlite, as it uses nested transactions.  I do not think vdm needs nested transactions. It can use a flush instead.  Here is the patch that works. All vdm tests pass.

{{{
--- a/vdm/sqlalchemy/base.py	Sat Sep 11 23:06:26 2010 +0000
+++ b/vdm/sqlalchemy/base.py	Mon Dec 20 16:16:34 2010 +0000
@@ -40,9 +40,8 @@
         self.setattr(session, 'HEAD', True)
         self.setattr(session, 'revision', revision)
         if revision.id is None:
-            session.begin_nested()
             session.add(revision)
-            session.commit()
+            session.flush()
}}}

== indexes ==

The index file 021_postgres_upgrade.sql in the migrate repository will not run as it uses syntax particular to postgres. Another will need to be made thats similar. sqlite does not support complex indexes like upper(text), so a work around will need to be found.

== unicode ==

The harvesting returns utf8 encoded strings and pysqlite dbapi only supports python unicode objects (as far as I can tell).  There will need to be a process in converting all strings that get into the database with string.decode("utf8")

== dates ==

Have not looked into this one too much. However, as sqlite stores everything as strings the timestamps appear to be failing on conversion back into python.

I have solved the above two issues before by adding attribute extensions to sqlalchemy mappers to do the conversions without effecting too much code.

== in memory sqlite ==

Some tests need to change in order to make sure the database is created first because the database gets lost each time.  In the tests that I have made pass, they run in about a seventh of the time as they do on postgres. 

== Other things to keep in mind. ==

 * Need a new flag in test.ini to remove full text indexing completely, or always use it with solr.
 * There are enough incompatibilities between the databases that you would also want to test against postgres as well, at least before a release.  
 * I would probably upgrade sqlalchemy first, so you will not have to the changes twice. The new versions are significantly faster too.
 * I have submitted a patch to #868 that makes the tests run about 2.5 times as fast and I think there are more low hanging fruit if the aim is test speed. 

                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/876.html">#876</a>
                          </td>
                          <td class="PosixTime">1292939711000000
                          </td>
                          <td class="author">kindly@gmail.com
                          </td>
                          <td class="newvalue">I have read quite a lot of people having problems with savepoints with sqlite and thought they were not supported on sqlalchemy.  They are at least not consistant with postgres ones.  I may well be out of date on this.  
Here is an [http://groups.google.com/group/sqlalchemy/browse_thread/thread/dc9d1b61044bf730/65a62a33ec313842?lnk=gst&amp;q=no+such+savepoint#65a62a33ec313842 example] even though its a bit old. 

I did get some non deterninistic errors, the above seemed to fix them. A failed subtransaction is not handled well by sqlalchemy and I think this causes knockon effects due to the unresolved transaction.  I would stay well clear of them entirely if possible.

What are the errors you are getting??


My 2 cents. ignore me at will...

I would think about using a different backend for testing than production. [http://stackoverflow.com/questions/2716847/sqlalchemy-sqlite-for-testing-and-postgresql-for-development-how-to-port look here].
If you want to support both then you should test on both. 
There are simple ways to scrape a few more minutes off the tests.  If you want real speed, then a multiprocess solution (with a database per core) would be sensible if a bit tricky.

                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/277.html">#277</a>
                          </td>
                          <td class="PosixTime">1296470458000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">I think generally this is a bad idea. 
I think in a few controlled circumstances some configuration is worth changing at runtime, however looking through the development.ini file I do not see hardly anything in there that does not require a restart anyway.
It would be good to have some clear examples of things that would be in the extension.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/358.html">#358</a>
                          </td>
                          <td class="PosixTime">1303122109000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">This ticket needs to have a more thorough spec which needs to include.

* Examples of put/post requests to resources and if they are needed.
* Dealing with resources that do not have a related packages in terms of authorization. Do they have a new action? how granular is the authorization? per resource? system level? etc.
* The rules related to authorization for resources attached to packages. i.e you only get read permissions when the related package has read permissions? do they have their own rules? 

                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/363.html">#363</a>
                          </td>
                          <td class="PosixTime">1298840718000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">revision objects are made everytime a new revision is made even if their are no changes.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/560.html">#560</a>
                          </td>
                          <td class="PosixTime">1297084192000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">changeset

https://bitbucket.org/okfn/ckan/changeset/b899085071a8
cset:b899085071a8
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/663.html">#663</a>
                          </td>
                          <td class="PosixTime">1298913603000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">cset:76a77439ecd0
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/664.html">#664</a>
                          </td>
                          <td class="PosixTime">1300371645000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed

cset:a5f4a49190e2
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/826.html">#826</a>
                          </td>
                          <td class="PosixTime">1297416879000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">There is nothing to stop anyone from putting any extra attributes in the extra_info field dict.  So any have the flexibility you need.

The config option is to add some fields that act in exactly the same way as python attributes, having the same semantics as them.  i.e if you have an extra field called alturl, you can do obj.alturl = 'fdsffs'.   

This is the best of both worlds as far as I can tell.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/826.html">#826</a>
                          </td>
                          <td class="PosixTime">1297417900000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">I forgot to mention that he main advantage of the fixed fields, is that we can make them properly searchable i.e the values searchable.  This currently does not work for package extra values as they are jsons.

I have added this searchability for the sql backend.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/826.html">#826</a>
                          </td>
                          <td class="PosixTime">1297423342000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">This would be too much of a hack.  You do not want users overwriting any attributes on the object.  If they called the attribute "__init__" it would write over the actual __init__.


                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/890.html">#890</a>
                          </td>
                          <td class="PosixTime">1318599247000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">Invalid due to #1397, We will be using celery instead.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/920.html">#920</a>
                          </td>
                          <td class="PosixTime">1300319140000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">The only issue here is that we are listing tags that relate to 'inactive' packages. We are already not listing tags that relate to NO packages.

I have fixed this. 

cset:cd0347eed69f

The tag in the example is related to a deleted package so should not be deleted.  With this patch it no longer gets displayed.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/954.html">#954</a>
                          </td>
                          <td class="PosixTime">1320142744000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">This is basically the complete now with documentation.  The child tickets no longer seem to fit and are not essential for completion.

                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/956.html">#956</a>
                          </td>
                          <td class="PosixTime">1299489084000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">cset:1305b9192d49
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/965.html">#965</a>
                          </td>
                          <td class="PosixTime">1297682632000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">added with cset:553421d05ce8
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/981.html">#981</a>
                          </td>
                          <td class="PosixTime">1297682773000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed see cset:3d1f720a2e5b
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/984.html">#984</a>
                          </td>
                          <td class="PosixTime">1297628554000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">These are the errors listed in severity order.

 * group revision tables joins wrong in many ways. 
 * changemask table not added. 
 * licence_id wrong type. 
 * package_revision.download_url and changset.status not dropped.
 * package.name and tag.name unique constraint not added.
 * update cascaded defined wrongly.

Attached are the fixes that will need to be run in ckan_migration_fixes.sql
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/984.html">#984</a>
                          </td>
                          <td class="PosixTime">1297682116000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed see https://bitbucket.org/okfn/ckan/changeset/d56ea86d4303
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/989.html">#989</a>
                          </td>
                          <td class="PosixTime">1297700363000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">It would be nice to know some use cases.   I think that plugins should control their own storage, or share a storage that is designed to be flexible (mongo, redis ...).   

We do not seem to be able to keep our current migrate repository in sync let alone add plugins to the mix.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/989.html">#989</a>
                          </td>
                          <td class="PosixTime">1297706620000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">I do not think we need to 'extend the model' if you intend to make the migrations separate. If the schema is decoupled, then there are no problems.  So each plugin can have its own model and use sqlalchemy independently i.e have their own metadata, classes and mappers.  They do not have to even use sqlalchemy.

What I mean is that there is no need to do anything apart from.

 * Agree on a naming convention of the plugin tables (including their own migrate table each)
 * Agree to the rule that no plugin can add a column to an existing table.
 * Agree that no table can have a (database level) foreign key constraint between the core tables and itself in either direction.  They *can* have implied sqlalchemy level joins.
 * Maybe have a hook that on db upgrade all plugins are upgraded.

Each plugin will have to redefine the tables, classes and mappers they need to join onto the core tables themselves. reusing/extending the core model will not be worth the trouble.

This seems to cover your use cases and this way everything is nicely decoupled. Best of all there is very little work to do...
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/994.html">#994</a>
                          </td>
                          <td class="PosixTime">1298912830000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">see cset:93188d42fc12
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1000.html">#1000</a>
                          </td>
                          <td class="PosixTime">1298912726000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed cset:630513f550d5
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1012.html">#1012</a>
                          </td>
                          <td class="PosixTime">1300352334000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">This is entirely not trivial at the moment.  Hopefully after the dictization it will become more so.
Simply putting in the package revision object in place of the package does not work.
It will obviously work for changes to the package object itself. However, there are no  mappers on that object for getting out the related package_tags, resources and extras at that revision.  You will have to construct a fake pkg object with some messy and painful queries using dates.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1012.html">#1012</a>
                          </td>
                          <td class="PosixTime">1300362584000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">cset:5649d6e761fc

The basic revision history is merged. I will keep this ticket open if it is not sufficient.

All it does is give a list with the most recent first of revision_ids, authors and timestamps.

i.e

{{{
[{"timestamp": "2011-03-16T15:55:19.941961", 
  "author": "southampton-ac-uk", 
  "revision": "202e9eb8-afaa-4bc9-b8a1-a317561547ea"},
 {"timestamp": "2011-03-15T17:59:16.430804",
 "author": "southampton-ac-uk",
 "revision": "8235bd0a-d39a-49e0-887a-b0f231be8a92"}]
}}}
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1015.html">#1015</a>
                          </td>
                          <td class="PosixTime">1298902753000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">The migration fixes should sort this out, but I will keep the ticket open to check.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1043.html">#1043</a>
                          </td>
                          <td class="PosixTime">1300321033000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">cset:c894f92c5b9a

Sesion.remove() needed to be run before configure as we want the original session made not to be used over the newly configured ones.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1046.html">#1046</a>
                          </td>
                          <td class="PosixTime">1302777668000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">cset:35ba6ad033ae
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1054.html">#1054</a>
                          </td>
                          <td class="PosixTime">1301002995000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">Looks great.  Had a look and changed a minor thing because I was not confident with the handling of the null values.  I made a fake resource and did an asdict on that to make the identity.

Part of my patch I reverted as I mucked up my version of the vdm, so it was not needed.

                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1078.html">#1078</a>
                          </td>
                          <td class="PosixTime">1305828965000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">complete: cset:843b78bae016
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1079.html">#1079</a>
                          </td>
                          <td class="PosixTime">1302777496000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">Complete see cset:35ba6ad033ae
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1092.html">#1092</a>
                          </td>
                          <td class="PosixTime">1305570822000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">completed cset: ca1ac4112ea2
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1109.html">#1109</a>
                          </td>
                          <td class="PosixTime">1303862352000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">It is fixed now in 1.3.4.1.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1109.html">#1109</a>
                          </td>
                          <td class="PosixTime">1305124697000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">I am happy this is fixed in cset:445fc04333dd.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1113.html">#1113</a>
                          </td>
                          <td class="PosixTime">1304024611000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">cset: 52a3fb230074
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1129.html">#1129</a>
                          </td>
                          <td class="PosixTime">1305212467000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">&gt;  * There seems some misunderstanding: change to have logic layer has almost nothing to do with being able to remove main stateful stuff in vdm. To be able to remove most of stateful stuff in vdm requires us to make some other changes (re foreign keys from revision objects to continuity)

The logic layer does not automatically help out, however it makes our life easier if we want to handle state ourselves.  For example take package tags, if we remove the stateful_m2m properties and just use normal sqlalchemy relations. We will still want statefullness (i.e active, pending, deleted) on the package_tags table. We should update those on the table ourselves in the  logic layer.

&gt;  * There are other simplifications we should make to vdm before embarking on this (e.g. move to SessionExtension from MapperExtension). This is easy as that work has been done in changeset branch and can be backported.
I agree but event thought the MapperExtension way is not great, it is very well field tested.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1136.html">#1136</a>
                          </td>
                          <td class="PosixTime">1305216218000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">This would be nice but it is not necessary.  The current mapper implementation may be nice but not is battle tested..
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1136.html">#1136</a>
                          </td>
                          <td class="PosixTime">1305217553000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">Replying to [comment:2 kindly]:
&gt; This would be nice but it is not necessary.  The current mapper implementation may be nice but not is battle tested..

I meant the mapper extension "IS" battle tested.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1137.html">#1137</a>
                          </td>
                          <td class="PosixTime">1305217449000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">I am not sure this needs to be done.  I think we should keep the continuity object always in the table, even if it is deleted.  The querying should be done through the logic layer so the deleted state should not be an issue.

The clients should be entirely state aware.

The only thing that needs to be done is to remove all statefullness of relations.  These are the only things that are complicated.

This would make vdm just a simple copy on write mechanism, with the client controlling the state.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1140.html">#1140</a>
                          </td>
                          <td class="PosixTime">1312491320000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed cset:987da68ea4f6

The package group table needed to trigger a reindex of the package.

                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1148.html">#1148</a>
                          </td>
                          <td class="PosixTime">1305969925000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">complete cset:96a43c9d8bd7
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1149.html">#1149</a>
                          </td>
                          <td class="PosixTime">1305971672000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">cset:b1634d405066
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1149.html">#1149</a>
                          </td>
                          <td class="PosixTime">1306090663000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">Failed dgu tests due to as_dict not working on deleted objects.

fixed by cset:c9b9cf513e44
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1193.html">#1193</a>
                          </td>
                          <td class="PosixTime">1309768960000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed cset:87d6140e06ad
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1205.html">#1205</a>
                          </td>
                          <td class="PosixTime">1309768720000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed in default cset:5e2070688e54

The upgrade now works locally, so the upgrade should work now.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1215.html">#1215</a>
                          </td>
                          <td class="PosixTime">1310335541000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed cset: 8a317eadbb36

If you delete the last row then it just clears it instead of deleting the row.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1230.html">#1230</a>
                          </td>
                          <td class="PosixTime">1311154142000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">The standard way to add tables in a plugin has converged upon putting the tables in the iconfigurable plugin.

This runs at the correct point for when the application runs normally. For testing however there are issues due to the tables potentially being dropped, especially for the sqlite case.   The fix is to make sure the iconfigurables are run at the start of each set of tests, hence adding it to the ckan_nose_plugin.   This is not pretty, but good enough.

cset:8531b9fc1ee2
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1238.html">#1238</a>
                          </td>
                          <td class="PosixTime">1311583876000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">I cannot reproduce this, to me it looks like it does get the correct revision.  If you for example look at the package a millisecond before i.e
http://ckan.net/package/osm%402010-11-30%2000%3A21%3A49.627829
the tags are no longer there that were added in that revision.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1256.html">#1256</a>
                          </td>
                          <td class="PosixTime">1312409296000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">This has also caused problems in authorization for deleted packages.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1256.html">#1256</a>
                          </td>
                          <td class="PosixTime">1312813529000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed cset:357cf9377b25
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1258.html">#1258</a>
                          </td>
                          <td class="PosixTime">1312813614000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">cset:e22d4e385fc8
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1268.html">#1268</a>
                          </td>
                          <td class="PosixTime">1317212499000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed cset:eebbe6071741
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1316.html">#1316</a>
                          </td>
                          <td class="PosixTime">1338193724000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">now get_or_bust function handles this.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1339.html">#1339</a>
                          </td>
                          <td class="PosixTime">1316010607000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">I have fixed the isodata and made a slightly modified int_converter for this case.  In the correct place and raises invalids on not being an int.  cset:a4af115116bb

The thinking was that the input of these fields would be through the api so the empty string case did not arise.  These should clearly be converted to None (Null).

What issues in general?
Having done this lots of times before you always end up needing to write your own little validators as the standard ones never do what you want.  Thats the point of them. Look in ckan/lib/validators if you need examples.

So what you did was correct...
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1341.html">#1341</a>
                          </td>
                          <td class="PosixTime">1315996368000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">This was run to delete the users and their mistaken revisions that where created.
{{{
BEGIN;
delete from revision r where r.id in (
    select r.id from "user" join revision r on r.author = "user".name 
    left join resource_revision rr on rr.revision_id = r.id 
    left join package_revision pr on pr.revision_id = r.id 
    left join group_revision gr on gr.revision_id = r.id  
    where "user".created between '2011-08-15' and '2011-09-06'
    and gr.id is null and rr.id is null and pr.id is null 
    and ("user".name similar to '%[0-9]' or "user".fullname similar to '[A-Z][a-z]*[A-Z]%') 
    and "user".name not like 'http%'
);
delete from "user" u where u.id in (
    select "user".id from "user" 
    left join revision r on r.author = "user".name 
    where r.id is null and "user".created between '2011-08-15' and '2011-09-06' 
    and ("user".name similar to '%[0-9]' or "user".fullname similar to '[A-Z][a-z]*[A-Z]%') 
    and "user".name not like 'http%'
);
COMMIT;
}}}
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1344.html">#1344</a>
                          </td>
                          <td class="PosixTime">1316078757000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed cset:f08215845dab
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1356.html">#1356</a>
                          </td>
                          <td class="PosixTime">1317220284000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed cset:1defa48097f5
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1364.html">#1364</a>
                          </td>
                          <td class="PosixTime">1318199135000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed cset:294a0b6577b0

                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1376.html">#1376</a>
                          </td>
                          <td class="PosixTime">1318091245000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed cset:39acf62f30b0
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1383.html">#1383</a>
                          </td>
                          <td class="PosixTime">1319405579000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">We only added the Iresourceurlchange interface as we made the IDomainObjectModification include the Package.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1383.html">#1383</a>
                          </td>
                          <td class="PosixTime">1320141781000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed cset:ecfb0f8b633c
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1398.html">#1398</a>
                          </td>
                          <td class="PosixTime">1321826380000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">deployed on test.ckan.net

docs added cset:47216c49fcec881f4eacc7170cb02d0a443500a2
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1408.html">#1408</a>
                          </td>
                          <td class="PosixTime">1320141847000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed cset:51c7d51f3c17
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1433.html">#1433</a>
                          </td>
                          <td class="PosixTime">1320666509000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">Done but waiting to merge after 1.5 release.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1433.html">#1433</a>
                          </td>
                          <td class="PosixTime">1321827123000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">cset: 68c37312ef70349431213465005761edf434d27e
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1474.html">#1474</a>
                          </td>
                          <td class="PosixTime">1321826753000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed cset:8f3d917e24390f91db577fdbd8b8c6a1d6228505
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1477.html">#1477</a>
                          </td>
                          <td class="PosixTime">1328016209000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">This is done pending new superticket publihser_profile. (#1669)
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1478.html">#1478</a>
                          </td>
                          <td class="PosixTime">1323161054000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">completed in about 2.8 days.

cset:58b7a09328111b97da7d8ac65b4710b94dac54e3
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1487.html">#1487</a>
                          </td>
                          <td class="PosixTime">1322095808000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed cset:4160859c8c9786588dbf0893981b93d9621019a9
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1522.html">#1522</a>
                          </td>
                          <td class="PosixTime">1324333827000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed cset:060efe4a0e7e4ede3337623092848740c58107f9
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1531.html">#1531</a>
                          </td>
                          <td class="PosixTime">1326155226000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">final commit 8457a34dff227e50aed8833673600b22683a23a1
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1595.html">#1595</a>
                          </td>
                          <td class="PosixTime">1325604696000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">This will be fixed when the activity stream will be in place of the revision list.

There is no bug with the revisioning, it just is getting everything related to the group.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1603.html">#1603</a>
                          </td>
                          <td class="PosixTime">1338202654000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">Duplicate as new theme will implement this.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1612.html">#1612</a>
                          </td>
                          <td class="PosixTime">1325688886000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">finished a4d1f616caf3c3f2dcd963369c3e14299433097d
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1614.html">#1614</a>
                          </td>
                          <td class="PosixTime">1325689136000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">a1ca82bbc5cf89a0e308dee278f6d8ea23af8b7e
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1715.html">#1715</a>
                          </td>
                          <td class="PosixTime">1328494878000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">Mostly there, need to added types and stopfiles. Need to add actual multilingual fields.  Decided to translated title as well for relevance.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1738.html">#1738</a>
                          </td>
                          <td class="PosixTime">1328494709000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">cset: 117dce4d64de731e7b0a3c55175a1d093f2bf540
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1739.html">#1739</a>
                          </td>
                          <td class="PosixTime">1328495651000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">
fixed cset:117dce4d64de731e7b0a3c55175a1d093f2bf540
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1741.html">#1741</a>
                          </td>
                          <td class="PosixTime">1329750838000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">done cset:7825caed3361e88a245b5dd2f946da8bedb160e0
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1779.html">#1779</a>
                          </td>
                          <td class="PosixTime">1329393759000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">complete at 669a8e9f7a768b147b1668940842b72b2a302088
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1781.html">#1781</a>
                          </td>
                          <td class="PosixTime">1329393814000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">complete at 669a8e9f7a768b147b1668940842b72b2a302088
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1819.html">#1819</a>
                          </td>
                          <td class="PosixTime">1332163324000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">Currently using package_show_rest.  Should be moved to just use package_show but that is another ticket.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2198.html">#2198</a>
                          </td>
                          <td class="PosixTime">1339771453000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">Already in the docs.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2283.html">#2283</a>
                          </td>
                          <td class="PosixTime">1340623843000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">No super tickets anymore.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2317.html">#2317</a>
                          </td>
                          <td class="PosixTime">1340033433000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">Getting replace as part of new theme.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2331.html">#2331</a>
                          </td>
                          <td class="PosixTime">1337782689000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">This is a wontfix.  I think terms should be ored by default.  All modern search engines work like this.  
If there is an issue due to relevancy (i.e if you type mulitple words and your result not coming near the top) then we should use this examples so we can tweak the results.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2331.html">#2331</a>
                          </td>
                          <td class="PosixTime">1338455981000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">Scoring is primary in my opinion.  Who cares if you have 1000 results if the top few are yours.

If things are hard to find we need to change our relevancy first.  So if you have examples of where you think the scoring is wrong then please make a ticket for that.

Google, I imagine, just has a cutoff of anything under a certain score not being shown.  We could do that as well but it would take some working out what we wanted that score to be.

Full "And" queries also limit any accidental discovery, especially of rare terms.  If you do not get your search exactly correct then you get nothing, which is bad.

Obviously you can still AND things or +things.

The correct solution to this is adding a minimum match parameter which is a middle ground. eg you can say that you want to match over half of the terms.  "thing1 thing2 thing3 thing3"  means you have to match at least 2. There are many options described here. http://wiki.apache.org/solr/DisMaxQParserPlugin.   You can change this in an extension if you want it just requries adding an mm field to the before_search in the Ipackage controller.  I do not personally think we should change it as default.

I am closing it as wont fix as its trivial to change and is a philosophical difference not a technical one.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2331.html">#2331</a>
                          </td>
                          <td class="PosixTime">1343862230000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">As I said I do not not agree with it being a UX problem or *wierd*. *wierd* is not acceptable in response to a thought out comment. So I am closing it again.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2402.html">#2402</a>
                          </td>
                          <td class="PosixTime">1337302474000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">cset: 12da5e9effeeb1aca0df321c355d8438647ef426
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2403.html">#2403</a>
                          </td>
                          <td class="PosixTime">1337302700000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">cset: 05144f8621ee719c345373934e70719f46e87cf6
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2581.html">#2581</a>
                          </td>
                          <td class="PosixTime">1340711431000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">This looks fine, just make doubly sure that if this flag is set then whatever sets it explicitly sets the state i.e overrides what the user sent.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2581.html">#2581</a>
                          </td>
                          <td class="PosixTime">1340728155000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">No any state without active, pending or deleted in their name is fine.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2877.html">#2877</a>
                          </td>
                          <td class="PosixTime">1345600430000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">1.
This is fixed need to reload data to test though.

2.
Fixed as far as I am concerned, limit 0 now returns correct total.  If there are no results in filter return total of 0.

3.
Want to keep postgres types. This will stop the need for mappings in both directions and makes everything simpler.  We are currently not storing any metadata on tables and would like it to stay that way.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2446.html">#2446</a>
                          </td>
                          <td class="PosixTime">1352206530000000
                          </td>
                          <td class="author">johnmartin
                          </td>
                          <td class="newvalue">I can't get access to said project. Can someone please give me access so I can triage this?
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2451.html">#2451</a>
                          </td>
                          <td class="PosixTime">1352206567000000
                          </td>
                          <td class="author">johnmartin
                          </td>
                          <td class="newvalue">I can't get access to said project. Can someone please give me access so I can triage this?
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2457.html">#2457</a>
                          </td>
                          <td class="PosixTime">1352206516000000
                          </td>
                          <td class="author">johnmartin
                          </td>
                          <td class="newvalue">I can't get access to said project. Can someone please give me access so I can triage this?
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2471.html">#2471</a>
                          </td>
                          <td class="PosixTime">1352206679000000
                          </td>
                          <td class="author">johnmartin
                          </td>
                          <td class="newvalue">I can't context on this. Closing.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2562.html">#2562</a>
                          </td>
                          <td class="PosixTime">1352206599000000
                          </td>
                          <td class="author">johnmartin
                          </td>
                          <td class="newvalue">I'm closing this because I can't get context on this.
                          </td>
              </tr>
          </tbody>
      </table>
      <div class="paging">
    <span class="previous">
      <a href="23%3Fsort=author&amp;asc=0&amp;page=19.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=10.html" title="Page 10">10</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=11.html" title="Page 11">11</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=12.html" title="Page 12">12</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=13.html" title="Page 13">13</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=14.html" title="Page 14">14</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=15.html" title="Page 15">15</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=16.html" title="Page 16">16</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=17.html" title="Page 17">17</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=18.html" title="Page 18">18</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=19.html" title="Page 19">19</a>
      </span>
      <span>
        <span class="current">20</span>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=21.html" title="Page 21">21</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=22.html" title="Page 22">22</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=23.html" title="Page 23">23</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=24.html" title="Page 24">24</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=25.html" title="Page 25">25</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=26.html" title="Page 26">26</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=27.html" title="Page 27">27</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=28.html" title="Page 28">28</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=29.html" title="Page 29">29</a>
      </span>
      <span>
        <a href="23%3Fsort=author&amp;asc=0&amp;page=30.html" title="Page 30">30</a>
      </span>
    <span class="next">
      <a href="23%3Fsort=author&amp;asc=0&amp;page=21.html" title="Next Page">→</a>
    </span>
</div>
      <div id="help"><strong>Note:</strong>
        See <a href="../wiki/TracReports.html">TracReports</a> for help on using and creating reports.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="23%3Fsort=author&amp;asc=0&amp;format=rss" class="rss">RSS Feed</a>
        </li><li>
          <a rel="nofollow" href="23%3Fsort=author&amp;asc=0&amp;format=csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="23%3Fsort=author&amp;asc=0&amp;format=tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="../report%3Fid=23&amp;format=sql">SQL Query</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.3</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>