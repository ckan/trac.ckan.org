<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      {23} Trac comments – CKAN
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">window.location.hash = window.location.hash;</script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="23%3Fsort=PosixTime&amp;asc=0&amp;format=rss" type="application/rss+xml" class="rss" title="RSS Feed" /><link rel="alternate" href="23%3Fsort=PosixTime&amp;asc=0&amp;format=csv" type="text/plain" title="Comma-delimited Text" /><link rel="alternate" href="23%3Fsort=PosixTime&amp;asc=0&amp;format=tab" type="text/plain" title="Tab-delimited Text" /><link rel="alternate" href="../report%3Fid=23&amp;format=sql" type="text/plain" title="SQL Query" />
        <link rel="up" href="../report.html" title="Available Reports" />
        <link rel="next" href="23%3Fsort=PosixTime&amp;asc=0&amp;page=19.html" title="Next Page" />
        <link rel="start" href="../wiki.1.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/report.css" type="text/css" />
        <link rel="prev" href="23%3Fsort=PosixTime&amp;asc=0&amp;page=17.html" title="Previous Page" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search CKAN" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://ckan.org/"><img src="http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png" alt="CKAN Trac" height="70" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../login.html">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li><a href="../about.html">About Trac</a></li><li class="last"><a href="../register.html">Register</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li><a href="../search.html">Search</a></li><li class="last"><a href="../wiki.1.html">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="../report.html">Available Reports</a></li><li class="last"><a href="../query.html">Custom Query</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="report">
      <h1>{23} Trac comments
        <span class="numrows">(3729 matches)</span>
      </h1>
      <form method="get" action="23%3Fsort=PosixTime&amp;asc=0&amp;page=18.html">
        <div id="prefs">
          <div>
            <label>
              Max items per page
              <input type="text" name="max" size="10" value="100" />
            </label>
          </div>
          <div class="buttons">
            <input type="submit" value="Update" />
          </div>
        </div>
      </form>
      <div id="description">
        <p>
<a class="ext-link" href="https://github.com/roskakori/tratihubis/blob/master/query_comments.sql"><span class="icon">​</span>https://github.com/roskakori/tratihubis/blob/master/query_comments.sql</a>
</p>

      </div>
      <div class="buttons">
      </div>
      <h2 class="report-result">
        Results <span class="numresults">(1701 - 1800 of 3729)</span>
      </h2>
      <div class="paging">
    <span class="previous">
      <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=17.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=8.html" title="Page 8">8</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=9.html" title="Page 9">9</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=10.html" title="Page 10">10</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=11.html" title="Page 11">11</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=12.html" title="Page 12">12</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=13.html" title="Page 13">13</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=14.html" title="Page 14">14</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=15.html" title="Page 15">15</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=16.html" title="Page 16">16</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=17.html" title="Page 17">17</a>
      </span>
      <span>
        <span class="current">18</span>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=19.html" title="Page 19">19</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=20.html" title="Page 20">20</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=21.html" title="Page 21">21</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=22.html" title="Page 22">22</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=23.html" title="Page 23">23</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=24.html" title="Page 24">24</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=25.html" title="Page 25">25</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=26.html" title="Page 26">26</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=27.html" title="Page 27">27</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=28.html" title="Page 28">28</a>
      </span>
    <span class="next">
      <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=19.html" title="Next Page">→</a>
    </span>
</div>
      <table class="listing tickets">
          <thead>
        <tr class="trac-columns">
          <th>
            <a href="23%3Fsort=ticket&amp;asc=1&amp;page=18.html">
              Ticket
            </a>
          </th><th class="desc">
            <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=18.html">
              Posixtime
            </a>
          </th><th>
            <a href="23%3Fsort=author&amp;asc=1&amp;page=18.html">
              Author
            </a>
          </th><th colspan="100">
            <a href="23%3Fsort=newvalue&amp;asc=1&amp;page=18.html">
              Newvalue
            </a>
          </th>
        </tr>
          </thead>
          <tbody>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1284.html">#1284</a>
                          </td>
                          <td class="PosixTime">1315214358000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">I'm not sure this is the sort of thing we need tests for (we can have too many tests!). Something worse discussing ...
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1284.html">#1284</a>
                          </td>
                          <td class="PosixTime">1315212603000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">I've added tests for this (to prevent yet another regression!) in cset:1b77ce8ce560. Closing.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1284.html">#1284</a>
                          </td>
                          <td class="PosixTime">1315212258000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed by rgrp in cset:1952445d2802 on release-v1.4.3 and default. Comment: 

do not create revision for changes to users as they are not revisioned.

* This had already been removed in cset:8d6fde0e2196 (then in user controller) but Adria seems to have reinstated this when refactoring things into the logic layer. This 'bug' explains the huge number of empty revisions we have been seeing on ckan.net.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1108.html">#1108</a>
                          </td>
                          <td class="PosixTime">1315140879000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Completed in https://bitbucket.org/okfn/ckan/changeset/9be1ae232ec3 cset:9be1ae232ec3
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1303.html">#1303</a>
                          </td>
                          <td class="PosixTime">1314978842000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Adria fixed this in cset:7637d8694388 on default. I transplanted it to release-1.4.3 and have updated thedatahub.org.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1305.html">#1305</a>
                          </td>
                          <td class="PosixTime">1314971164000000
                          </td>
                          <td class="author">nils.toedtmann
                          </td>
                          <td class="newvalue">Always use "localhost" as mail relay. On all servers, the local MTA should be configured correctly (e.g. in this case to relay via mail.fry-it.com), also to be able to send rootmail.

I fixed it on IATI (s049.okserver.org = ex eu23) and thedatahub.org (s055.okserver.org). Please verify that it's working now.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1293.html">#1293</a>
                          </td>
                          <td class="PosixTime">1314905799000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Branch: feature-1293-rename-package-to-dataset

Routing and test editing should be finished (all tests passings). Have not added test for redirect yet.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1276.html">#1276</a>
                          </td>
                          <td class="PosixTime">1314886010000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Added to branch feature-1275-solr-search

Don't seem to be able to apply weighting to fields at index time using solrpy (see open issue: http://code.google.com/p/solrpy/issues/detail?id=6). So, switched to using the newer Solr edismax query parser and have applied weights to fields at search time.

Current weights are as follows:

name: 4
title: 4
group: 2
tag: 2
text (everything else): 1
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1108.html">#1108</a>
                          </td>
                          <td class="PosixTime">1314878772000000
                          </td>
                          <td class="author">zephod
                          </td>
                          <td class="newvalue">First, here is a repo with the new DataHub theme:
https://bitbucket.org/okfn/ckanext-datahub-theme

We plan to integrate this into ckan-core, thereby replacing the current theme.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/78.html">#78</a>
                          </td>
                          <td class="PosixTime">1314877151000000
                          </td>
                          <td class="author">zephod
                          </td>
                          <td class="newvalue">Fixed in cset:8638a0ac2255 (fifty year expiry time on the four cookies)
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1277.html">#1277</a>
                          </td>
                          <td class="PosixTime">1314868204000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Done in branch feature-1275-solr-search for all package searches (which use Solr). Resource and Tag searches still use the old ckan query parser.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1293.html">#1293</a>
                          </td>
                          <td class="PosixTime">1314701675000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">== Changes ==

 * All templates
 * Routing: /package/ -&gt; /dataset/ (including API)
 * Tests: h.url_for(controller='dataset') rather than package ...
  * One test to check redirect works?
 * Docs

== Leave ==

 * Stay with Package in code e.g. stay with 'PackageController'
  * also leave stuff like pkg = .... (gradual migration)
 * Leave extensions

== Notes ==

 * Package -&gt; Dataset
 * Data Package -&gt; Dataset
 * respect capitalization
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1251.html">#1251</a>
                          </td>
                          <td class="PosixTime">1314406332000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Really non-urgent and can be done once #1252 is done (which is dependent on v1.5)
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1264.html">#1264</a>
                          </td>
                          <td class="PosixTime">1314406294000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Nothing urgent about this so moving to backlog.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1252.html">#1252</a>
                          </td>
                          <td class="PosixTime">1314406271000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Move to v1.5 since this will coincide with release.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/979.html">#979</a>
                          </td>
                          <td class="PosixTime">1314404905000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Change from Edit Resource extras in the API to Edit Resource extras in the WUI as believe we already have API editing and reference to #978 implies this is about the WUI.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/978.html">#978</a>
                          </td>
                          <td class="PosixTime">1314404858000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Suggest we either a) get rid of columnar layout or b) (preferable) get a dedicated page for resource. That way summary on package page just shows main attributes.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/878.html">#878</a>
                          </td>
                          <td class="PosixTime">1314404621000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">A working version of this in ckanjs as of 2 weeks ago. Need to integrate into main CKAN.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1282.html">#1282</a>
                          </td>
                          <td class="PosixTime">1314404540000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Done in cset:4b6838a820bb.

Have not done either of the optional items. JS testing for what we have is relatively hard and of dubious value.

Re CDN stuff requires work and of doubtful of immediate value since can just configure cache or main site to serve static stuff directly. (Likely more value from compressing js and css ...).
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1279.html">#1279</a>
                          </td>
                          <td class="PosixTime">1314304326000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">In addition it appears that authz group was left out of the form refactoring so new and edit page use old formalchemy stuff. Should fix this.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1279.html">#1279</a>
                          </td>
                          <td class="PosixTime">1314303732000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Wow, that's a pretty big omission. authz groups are important and are used. I think we should discuss this in next planning meeting.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1074.html">#1074</a>
                          </td>
                          <td class="PosixTime">1314303581000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Closed in cset:18a5b48bbee6. Note the templating isn't completely reused but rather uses common methods from _util.html. Likely that a bit more refactoring could be done to share common code but not worth it at present.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1154.html">#1154</a>
                          </td>
                          <td class="PosixTime">1314287519000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">All attempts to index packages should now throw a SearchIndexError if Solr is unavailable and the create/update will be rolled back. These errors are caught in the main package controller (redirecting to an error page) and the API controller. I have added tests for both controllers.

Also updated the paster 'search-index check' command to work with solr.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1074.html">#1074</a>
                          </td>
                          <td class="PosixTime">1314283492000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Also work on branch feature-1074-authz-wui (that is primary one in fact)
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1074.html">#1074</a>
                          </td>
                          <td class="PosixTime">1314278296000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">johnlawrenceaspden did quite a bit on this in feature-1074-refactor-authz-wui branch (including implementing for package and group). However, did not implement for authzgroup and also repeated code a lot. Reassigning to me for completion.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1176.html">#1176</a>
                          </td>
                          <td class="PosixTime">1314273012000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This occurs when you browse {{{/error/document}}} directly, rather than being directed there on error. In this case there is no 'original_response'.

Fixed in cset:c67d5934fb0b for ckan 1.4.3 and merged to default.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1290.html">#1290</a>
                          </td>
                          <td class="PosixTime">1314270894000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Improved on option 2. For requests to Home controller, the first thing it does is check the user. I catch SQL errors that are to do with missing tables and that now produces a template-less error saying the site is off-line and then mentions database initialisation.

Done in cset:484e50c4f989 on default for ckan 1.4.4.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1285.html">#1285</a>
                          </td>
                          <td class="PosixTime">1314269414000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Another instance is when the database tables are not created and you want to both display a sensible error and have an email alert. #1290
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/957.html">#957</a>
                          </td>
                          <td class="PosixTime">1314218701000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">I'm closing this as wontfix as we now have arbitrary metadata for resources so probably won't need a specific field. That said we probably will want a schema but that is not yet finalized and would be a separate and wider ticket. For current proposal of the attributes generally wanted for resources see http://wiki.ckan.net/Domain_Model/Resource (recently updated).
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1154.html">#1154</a>
                          </td>
                          <td class="PosixTime">1314196683000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">&gt; Ok, I chatted to David about this and we feel it should go like this: notification to search indexer fails and raises an exception, 
&gt; this gets passed through the notification system back up to the code that creates the package, and you do a roll back. Does this 
&gt; tally with what you mentioned in the last comment or is what's there better?

This sounds good to me, definitely better than what is currently there.

&gt; Thanks for the info on the queue and ckanext-solr. It sounds like this isn't deployed successfully anywhere (or does pudo
&gt; know if it is?).

I'm not actually sure if the queue works or not, but if it does I'll have to write some tests for it before we could add it to core. A working queue system would be useful generally however, as there are other things that it would be useful for (such as QA), but yes, going forward the Solr extension should really be deprecated.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1154.html">#1154</a>
                          </td>
                          <td class="PosixTime">1314195684000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Ok, I chatted to David about this and we feel it should go like this: notification to search indexer fails and raises an exception, this gets passed through the notification system back up to the code that creates the package, and you do a roll back. Does this tally with what you mentioned in the last comment or is what's there better?

Thanks for the info on the queue and ckanext-solr. It sounds like this isn't deployed successfully anywhere (or does pudo know if it is?). In this case we should be clear that it is not what it says it is: "This extension adds support for package search using Apache Solr to CKAN" and maybe simply mark it as deprecated. Pudo what do you think?
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1154.html">#1154</a>
                          </td>
                          <td class="PosixTime">1314193633000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">RE search queries failing: Just having a look through the controller code and the package search controller and the search api  both perform option 2 already, so I'll just update the home controller.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1154.html">#1154</a>
                          </td>
                          <td class="PosixTime">1314192753000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Not in core, there is a queue feature in the extension still which I could add to core. I think though it was a case of using either the queue or synchronous search, I don't think it would automatically fall back to the queue if there was an indexing problem, but we could look at that. Was there not talk of changing the queue system recently though? There are also no tests for the Solr queue so that would take a bit of work as well.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1154.html">#1154</a>
                          </td>
                          <td class="PosixTime">1314192324000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Yes, forcing a retry may be possible, although I guess on these occasions you'd be looking at rolling back the creation of the package object too, which is not really in the spirit of the notifications system at present. This is why we had the queue for solr for occasions like this - is it here no longer?
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1154.html">#1154</a>
                          </td>
                          <td class="PosixTime">1314191496000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Ok I'll implement option 2 for search query issues.

Yes it is easy to get a list of IDs from Solr so I'll have a look at that command and make sure that it works. I think a case could be made for not allowing a package to be added if it cannot be indexed however, and making the user simply retry the request.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1240.html">#1240</a>
                          </td>
                          <td class="PosixTime">1314180488000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">I basically agree, but just thought I'd add a couple of comments into the mix.

&gt; GET at root returns whole package set (a *bad* idea)

Sure it has a cost, but I don't see what the problem with this is if the list is cached. Forcing developers to paging through the list of packages is putting unnecessary obligations. I'd say that the top two RESTful operations are listing objects and getting a particular one, and you'd be taking away one of those.

&gt; Unify on /api/v{version num}/... structure

Where is it not currently unified?
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1154.html">#1154</a>
                          </td>
                          <td class="PosixTime">1314179290000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Search requests - option one seems like a bad user experience, and option three seems too complicated. I should do option 2, explain it may well be a temporary problem, and let the user press reload, as per any normal web request.

A more difficult problem though is what to do about a failed search indexing. Because of the try/except catch we've had until the patch yesterday, we get no exception emails for this, but I'm worried that this has caused packages to not be indexed, and hence are essentially lost in CKAN (unless someone realises there is a problem and does a reindex at some point).

BTW I added paster command 'search-index check' for looking at this problem, but I don't think it was ever added to solr. Is it easy to add get_all_entity_ids for the purpose of checking for this problem?
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1154.html">#1154</a>
                          </td>
                          <td class="PosixTime">1314178325000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">&gt; Looking at the changeset, it now does a connection check at start-up of CKAN. If it fails then CKAN runs but doesn't show any
&gt; packages, apart from via the Tags interface, and the search page and widget on the front-page are removed. (BTW Is this a 
&gt; useful thing to do? Without search, perhaps CKAN should simply not start?)

When discussing the ticket we agreed that we should allow ckan to start without search. It is possible that people simply want to list/view information without searching for it and we decided not to prevent them from doing so.

&gt; I believe the problem pudo is referring to is temporary periods when the SOLR server is slow/overloaded/down. During this 
&gt; time pudo and I get exception emails saying connection failed for request.

Ok, other options then:

 * if an error occurs during search, return 0 results
 * if an error occurs during search, redirect to a generic 'search is unavailable' page
 * if an error occurs during search, retry the query a certain number of times before giving up and doing one of the above.

What do you suggest?
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1154.html">#1154</a>
                          </td>
                          <td class="PosixTime">1314177477000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Looking at the changeset, it now does a connection check at start-up of CKAN. If it fails then CKAN runs but doesn't show any packages, apart from via the Tags interface, and the search page and widget on the front-page are removed. (BTW Is this a useful thing to do? Without search, perhaps CKAN should simply not start?)

I believe the problem pudo is referring to is temporary periods when the SOLR server is slow/overloaded/down. During this time pudo and I get exception emails saying connection failed for request. e.g.
{{{
Module ckan.controllers.home:29 in index
&lt;&lt;          query = query_for(model.Package)
               query.run(query='*:*', facet_by=g.facets,
                         limit=0, offset=0, username=c.user)
               c.facets = query.facets
               c.fields = []
&gt;&gt;  limit=0, offset=0, username=c.user)
Module ckan.lib.search.common:115 in run
&lt;&lt;          self.query = QueryParser(query, terms, fields)
               self.query.validate()
               self._run()
               self._format_results()
               return {'results': self.results, 'count': self.count}
&gt;&gt;  self._run()
Module ckanext.solr.backend:63 in _run
&lt;&lt;              # this wrapping will be caught further up in the WUI.
                   log.exception(e)
                   raise SearchError(e)
               finally:
                   conn.close()
&gt;&gt;  raise SearchError(e)
SearchError: [Errno 111] Connection refused
}}} (recently from nl.ckan.net)
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1154.html">#1154</a>
                          </td>
                          <td class="PosixTime">1314120497000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Fixed in core (branch feature-1275-solr-search).
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1172.html">#1172</a>
                          </td>
                          <td class="PosixTime">1314118883000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">I took out "raise" by mistake in ckan/lib/search/worker.py:26 but John has added it in in the corresponding place in ckan/lib/search/__init__.py on branch feature-1275-solr-search anyway.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1172.html">#1172</a>
                          </td>
                          <td class="PosixTime">1314118281000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Is in cset:47225f03e2af and merged to default for 1.4.4.

It now barfs instead of failing silently:

* if the ckan config file has any errors
* search indexing error

There are some other "except Exception" statements
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/948.html">#948</a>
                          </td>
                          <td class="PosixTime">1314112642000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Note: Packages will now be excluded from the search view (see #1283). Also there is now no redirect requirement from DGU any more.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1275.html">#1275</a>
                          </td>
                          <td class="PosixTime">1314110016000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Completed in branch feature-1275-solr-search. Up to date with current default but not yet merged into default.

John
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/503.html">#503</a>
                          </td>
                          <td class="PosixTime">1314031851000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Relationships exist now on ckan.net. e.g. http://ckan.net/package/rkb-explorer-ibm

No current DGU interest.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/803.html">#803</a>
                          </td>
                          <td class="PosixTime">1314031451000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">We now use nose to test migrations instead.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/947.html">#947</a>
                          </td>
                          <td class="PosixTime">1314031310000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This was done in #1025 through configuration. Happily you can setup config in an extension, so covers this ticket's aims too.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/951.html">#951</a>
                          </td>
                          <td class="PosixTime">1314031006000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Specific problem explained by having two users with the same name - one was authorized and one wasn't. See: http://lists.okfn.org/pipermail/ckan-dev/2011-April/000550.html
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1175.html">#1175</a>
                          </td>
                          <td class="PosixTime">1314030683000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Hi Flavio, is this still a concern? I'd like to close this ticket unless you can provide details of the error from your logs or exception email.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1202.html">#1202</a>
                          </td>
                          <td class="PosixTime">1314030352000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">The CKAN package page links to datapkg at: http://blog.okfn.org/2010/02/23/introducing-datapkg/ (it has always been this link).

I think Rolf is referring to the three links to knowledgeforge.net in the blog post itself. These need to be edited by Rufus. Note datapkg has moved again to github.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1214.html">#1214</a>
                          </td>
                          <td class="PosixTime">1314029628000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This appears to have been fixed by version 1.4.3.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1226.html">#1226</a>
                          </td>
                          <td class="PosixTime">1314029434000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This appears to have gone away. No sign of it for two weeks on any OKF sites.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1263.html">#1263</a>
                          </td>
                          <td class="PosixTime">1314029279000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This was fixed in cset:8d293393a9f2 for release 1.4.3.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1262.html">#1262</a>
                          </td>
                          <td class="PosixTime">1314029150000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Pudo - I'm not sure what's meant here. Are you talking about moderation for new users? Or some other sort of enforcement? Is it spam you want to target?

The links you're concerned about - are they the spam ones in the User's 'about' field? If so, I think we *should* allow users to have links, although continue with applying them with 'nofollow' and attack spammers back in a concerted strategy across all editable fields - see ticket #1257.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1281.html">#1281</a>
                          </td>
                          <td class="PosixTime">1314021919000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Done by pudo in cset:eaf342823caf on default branch, so headed for release 1.4.4. 

"Work around the fact that locale changes do not affect
the running request and therefore led to an incorrect flashing
message. Now manually changing language."
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1142.html">#1142</a>
                          </td>
                          <td class="PosixTime">1313775665000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">This was completed 4 weeks ago and can now be marked as complete. See http://docs.ckan.org/ and http://wiki.ckan.net/ and http://ckan.org/
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1271.html">#1271</a>
                          </td>
                          <td class="PosixTime">1313753663000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Closed in cset:749cb3a087e3
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1272.html">#1272</a>
                          </td>
                          <td class="PosixTime">1313745867000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Assume these are the 3 spatial fields listed on http://wiki.ckan.net/Geospatial_Capabilities. I'm a big +1 here. Starting point would be a bit more documentation on that wiki page. Questions:

 * Is this work going in ckanext-spatial?
 * What is being proposed here, I assume, is to automatically index those fields in our geospatial search.
 * Should we develop a simple display widget using google maps or similar (this is orthogonal to the WMS preview i think) which *just* uses the core fields. This is probably a separate ticket and possibly separate from ckanext-spatial extension.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1172.html">#1172</a>
                          </td>
                          <td class="PosixTime">1312991332000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">I've started this on branch defect-1172-exceptions
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1270.html">#1270</a>
                          </td>
                          <td class="PosixTime">1312912188000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed in cset:ca5295c9c8cf and released as ckanclient version 0.9
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1267.html">#1267</a>
                          </td>
                          <td class="PosixTime">1312897724000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed in cset:db5bf5b45b4f for ckan 1.4.3.

Later versions of webob add the charset header for unicode errors (webob/exc.py:generate_response):
{{{
        extra_kw = {}
        if isinstance(body, unicode):
            extra_kw.update(charset='utf-8')
        resp = Response(body,
            status=self.status,
            headerlist=headerlist,
            content_type=content_type,
            **extra_kw
        )
}}}
This was fixed in webob cset:25fc14d49623 which went into WebOb 1.0. 

This problem affects versions from CKAN 1.4.2 back to 1.3.1. We had been avoiding this in CKAN previously by only doing abort() with a plain string.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1267.html">#1267</a>
                          </td>
                          <td class="PosixTime">1312894071000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Running tests with WebOb 0.9.7.1, we see the error! Am now trying to fix.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1267.html">#1267</a>
                          </td>
                          <td class="PosixTime">1312890962000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This error has been occurring on at.ckan.net which has webob 0.9.7.1-1
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1267.html">#1267</a>
                          </td>
                          <td class="PosixTime">1312889130000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">John thinks it is a problem with WebOb 1.0.6
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1258.html">#1258</a>
                          </td>
                          <td class="PosixTime">1312813614000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">cset:e22d4e385fc8
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1256.html">#1256</a>
                          </td>
                          <td class="PosixTime">1312813529000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed cset:357cf9377b25
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1266.html">#1266</a>
                          </td>
                          <td class="PosixTime">1312797477000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed in 987dc4fe078e on 1.4.3 branch and default.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1265.html">#1265</a>
                          </td>
                          <td class="PosixTime">1312566052000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed in cset:a1b8dd169f4e on 1.4.3 release and merged to default.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1140.html">#1140</a>
                          </td>
                          <td class="PosixTime">1312537257000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Broken since CKAN v1.1. I have added this fix to v1.4.2 and v1.4.3 releases.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1140.html">#1140</a>
                          </td>
                          <td class="PosixTime">1312491320000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed cset:987da68ea4f6

The package group table needed to trigger a reindex of the package.

                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1239.html">#1239</a>
                          </td>
                          <td class="PosixTime">1312453156000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed in 1.4.2 release. Broken in UI in 1.4.1 and API in 1.4 &amp; 1.4.1.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1256.html">#1256</a>
                          </td>
                          <td class="PosixTime">1312409296000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">This has also caused problems in authorization for deleted packages.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1041.html">#1041</a>
                          </td>
                          <td class="PosixTime">1312372367000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">James says this is not priority and he does not plan to do docs for debs until he has got that system functioning.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1250.html">#1250</a>
                          </td>
                          <td class="PosixTime">1312370201000000
                          </td>
                          <td class="author">pudo
                          </td>
                          <td class="newvalue">The issue is caused after search returns from solr and tries to get objects from the database. These are by default ordered by name and we need to restore the original order after fetching them from the database. 

Fixed in module.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/816.html">#816</a>
                          </td>
                          <td class="PosixTime">1312295371000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">I have implemented the resource autocomplete so am closing this for now.

I agree that more information on the resource would be a good addition. It seems a bit of a different issue to just adding autocomplete though, with potentially far more changes to the codebase, so maybe it would be better discussed in a separate ticket/CREP. However, any new fields would presumably want to either be constrained or have an autocomplete and so can reuse the work done on this feature.

Cheers,
John
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/816.html">#816</a>
                          </td>
                          <td class="PosixTime">1312212782000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">I like rgrp's idea to change the model. But since it's complicated it would be good to have a UI.

e.g. You might make format field simply a drop-down with only some common options: 'CSV, Excel, Zip, Other'. If you go for Other, then a more substantial UI appears, to cover more filetypes, APIs, services and a text box for Other. And if you select 'Zip' then another set of options appears to say what is in the zip. etc.etc.

Another approach would be to have a background process downloading the data file and filling this in for you.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/816.html">#816</a>
                          </td>
                          <td class="PosixTime">1312192499000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">What about idea of 'model' refactor for resource, specifically to have:

 * format: human created format string with possible nesting e.g. zip:csv
 * kind: file | api | example | service
 * mimetype: standard mimetype (e.g. for zipped csv would be application/zip)
 * mimetype-inner: mimetype of innermost object (so for example would be text/csv)

See http://lists.okfn.org/pipermail/ckan-discuss/2011-April/001139.html
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1208.html">#1208</a>
                          </td>
                          <td class="PosixTime">1312191646000000
                          </td>
                          <td class="author">pudo
                          </td>
                          <td class="newvalue">This should be closed: 

 * https://github.com/okfn/webstore - See README for details
 * Python client lib: https://github.com/okfn/webstore-client
 * http://webstore.thedatahub.org/ - Demo install
 * http://wiki.ckan.net/Webstore - Overview
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1229.html">#1229</a>
                          </td>
                          <td class="PosixTime">1312191530000000
                          </td>
                          <td class="author">amercader
                          </td>
                          <td class="newvalue">Done, except for Revision related stuff, which probably overlaps with work being done by David Raznick.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1192.html">#1192</a>
                          </td>
                          <td class="PosixTime">1312191462000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Marking this as closed as Anna has completed and this is now deployed at http://docs.ckan.org/.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1249.html">#1249</a>
                          </td>
                          <td class="PosixTime">1311959356000000
                          </td>
                          <td class="author">pudo
                          </td>
                          <td class="newvalue">fixed in cset:0398243111d4
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1247.html">#1247</a>
                          </td>
                          <td class="PosixTime">1311955176000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Done. See http://ckan.readthedocs.org/ and http://docs.ckan.org/ will propagate soon.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1246.html">#1246</a>
                          </td>
                          <td class="PosixTime">1311885360000000
                          </td>
                          <td class="author">pudo
                          </td>
                          <td class="newvalue">I'm afraid to say I don't understand any of this: the faulty display of openness is triggered as removing the brackets turns the isopen() check into a check for the existence of the method. Reverting the changes on the server seems to work without generating exceptions. What exactly is the issue that was supposed to be fixed originally? 
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1245.html">#1245</a>
                          </td>
                          <td class="PosixTime">1311864530000000
                          </td>
                          <td class="author">annapowellsmith
                          </td>
                          <td class="newvalue">Would be nice to list some extensions somewhere on this site (features page perhaps). 

Along the lines of: http://docs.ckan.org/extensions.html#finding-extensions

It wasn't until I wrote this list that I realised just how many extensions there were, and what it said about the CKAN community that there were so many... 

So I think it would be a good sales point.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1123.html">#1123</a>
                          </td>
                          <td class="PosixTime">1311863798000000
                          </td>
                          <td class="author">nils.toedtmann
                          </td>
                          <td class="newvalue">Looks like the packages on apt.okfn.org are now architecture "all" - great. 

To avoid future confusion, i change this ticket's solution to "fixed".
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1246.html">#1246</a>
                          </td>
                          <td class="PosixTime">1311863583000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">We have an unresolved issue with the display of the 'open data' icon that showed up when we upgraded ckan.net to the latest beta last week, but I didn't realise the search page http://ckan.net/package was showing all packages as open (the revision page and package pages seem fine).

Last week when I upgraded from 1.4.1 to 1.4.2beta, there was an exception thrown when loading the home page. The exception was in doing the isopen call. It was solved by making some code changes directly on the ckan.net server to make it an attribute query instead of function call. It was strange because this behaviour didn't occur on my machine and all the tests passed. Here are the manual patches on ckan.net (the application.js change is unrelated, by someone else):

{{{

diff -r adf254b7c507 ckan/public/scripts/application.js
--- a/ckan/public/scripts/application.js	Sat Jul 23 18:16:15 2011 +0100
+++ b/ckan/public/scripts/application.js	Thu Jul 28 14:10:23 2011 +0000
@@ -2,6 +2,7 @@
   $(document).ready(function () {
     CKAN.Utils.setupUserAutocomplete($('input.autocomplete-user'));
     CKAN.Utils.setupAuthzGroupAutocomplete($('input.autocomplete-authzgroup'));
+    // $('.resource-url').parent(
   });
 }(jQuery));
 
diff -r adf254b7c507 ckan/templates/_util.html
--- a/ckan/templates/_util.html	Sat Jul 23 18:16:15 2011 +0100
+++ b/ckan/templates/_util.html	Thu Jul 28 14:10:23 2011 +0000
@@ -43,7 +43,7 @@
         standard package listing --&gt;
   &lt;ul py:def="package_list(packages)" class="packages"&gt;
     &lt;li py:for="package in packages"
-        class="${'fullyopen' if (package.isopen() and package.resources) else None}"&gt;
+        class="${'fullyopen' if (package.isopen and package.resources) else None}"&gt;
         &lt;div class="header"&gt;
 			&lt;span class="title"&gt;
 				${h.link_to(package.title or package.name, h.url_for(controller='package', action='read', id=package.name))}
@@ -60,7 +60,7 @@
           &lt;/ul&gt;
         &lt;/py:if&gt;
         &lt;ul class="openness"&gt;
-          &lt;py:if test="package.isopen()"&gt;
+          &lt;py:if test="package.isopen"&gt;
             &lt;li&gt;
               &lt;a href="http://opendefinition.org/okd/" title="This package satisfies the Open Definition."&gt;
                   &lt;img src="http://assets.okfn.org/images/ok_buttons/od_80x15_blue.png" alt="[Open Data]" /&gt;
@@ -72,7 +72,7 @@
               &lt;/a&gt;
             &lt;/li&gt;
           &lt;/py:if&gt;
-          &lt;py:if test="not package.isopen()"&gt;
+          &lt;py:if test="not package.isopen"&gt;
             &lt;li&gt;
               &lt;span class="closed"&gt;
                 ${h.icon('lock')} Not Openly Licensed
diff -r adf254b7c507 ckan/templates/home/index.html
--- a/ckan/templates/home/index.html	Sat Jul 23 18:16:15 2011 +0100
+++ b/ckan/templates/home/index.html	Thu Jul 28 14:10:23 2011 +0000
@@ -64,6 +64,7 @@
     &lt;/py:if&gt;
 
     &lt;h4&gt;Recently changed packages&lt;/h4&gt;
+    &lt;!-- ${c.latest_packages} --&gt;
     ${package_list_from_dict(c.latest_packages)}
 
     &lt;p&gt;&lt;a href="${h.url_for(controller='revision', action='index',
diff -r adf254b7c507 ckan/templates/layout_base.html
--- a/ckan/templates/layout_base.html	Sat Jul 23 18:16:15 2011 +0100
+++ b/ckan/templates/layout_base.html	Thu Jul 28 14:10:23 2011 +0000
@@ -101,6 +101,7 @@
     am_authorized_package_create = h.am_authorized(c, actions.PACKAGE_CREATE)
 ?&gt;
           &lt;li py:if="am_authorized_package_create"&gt;${h.nav_link(c, _('Add a package'), controller='package', action='new', id=None)}&lt;/li&gt;
+          &lt;li&gt;&lt;a href="/storage/upload"&gt;Upload Data&lt;/a&gt;&lt;/li&gt;
           &lt;li&gt;${h.nav_link(c, _('Tags'), controller='tag', action='index', id=None)}&lt;/li&gt;
           &lt;li&gt;${h.nav_link(c, _('Groups'), controller='group', action='index', id=None, highlight_actions = 'new index')}&lt;/li&gt;
           &lt;li&gt;${h.nav_link(c, _('About'), controller='home', action='about', id=None)}&lt;/li&gt;
diff -r adf254b7c507 ckan/templates/package/read.html
--- a/ckan/templates/package/read.html	Sat Jul 23 18:16:15 2011 +0100
+++ b/ckan/templates/package/read.html	Thu Jul 28 14:10:23 2011 +0000
@@ -56,7 +56,7 @@
     &lt;/py:if&gt;
     
     &lt;li class="widget-container widget_text"&gt;
-    &lt;py:if test="c.pkg.isopen() and c.pkg.resources"&gt;
+    &lt;py:if test="c.pkg.isopen and c.pkg.resources"&gt;
       &lt;h3&gt;
         This Package is Open
       &lt;/h3&gt;
@@ -80,7 +80,7 @@
       &lt;/p&gt;
     &lt;/py:if&gt;
 
-    &lt;py:if test="not(c.pkg.isopen() and c.pkg.resources)"&gt;
+    &lt;py:if test="not(c.pkg.isopen and c.pkg.resources)"&gt;
       &lt;h3 i18n:msg=""&gt;This package is Not Open&lt;/h3&gt; 
       
       &lt;p&gt;Either because it is not openly licensed or is missing
}}}
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1195.html">#1195</a>
                          </td>
                          <td class="PosixTime">1311841763000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Fixed in https://bitbucket.org/okfn/ckanext-storage/changeset/49734285f1ef
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1150.html">#1150</a>
                          </td>
                          <td class="PosixTime">1311774141000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Unicode data should be fine in the new datapreview code, for example: http://test.ckan.net/package/afghanistan-election-data
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1062.html">#1062</a>
                          </td>
                          <td class="PosixTime">1311773731000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">The file is in Turtle format (serialisation format for RDF, which we currently don't archive and have no preview code for. The new preview code will not even create a preview button for this file type. Moving to the backlog for now, support for RDF and related formats should be added along with support for excel docs and google spreadsheets.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/888.html">#888</a>
                          </td>
                          <td class="PosixTime">1311773103000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Dataproxy / Dataapi now deprecated in favour of the combination of new QA archive / process commands and the webstore.

Changes in relation to Dataproxy / Dataapi:
* Currently only supports CSV files, but plans to add support for excel and google docs spreadsheets soon.
* Uses David Raznick's CSV parser instead of Brewery for parsing, handles messy CSV data better.

Changes in relation to old QA functionality:
* decoupled archiving (downloading) and QA process
* added a new 'process' command which parses downloaded files and adds them to a local webstore

Closing for now, any improvements/feature requests should be in tickets relating to either the QA functionality or the webstore.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1183.html">#1183</a>
                          </td>
                          <td class="PosixTime">1311771069000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Fixed in new datapreview code (currently running on the test.ckan.net), which now gets the preview data from a webstore instead of the dataproxy API. It also only now shows a preview button for resources that were successfully archived and saved in the webstore.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/318.html">#318</a>
                          </td>
                          <td class="PosixTime">1311770683000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">The QA code should identify invalid URLs. Resources with invalid urls will have an 'openness_score' of 0 and an 'openness_score_reason' of 'Invalid url scheme' or 'invalid URL'.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1236.html">#1236</a>
                          </td>
                          <td class="PosixTime">1311759816000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">The bug is in fact in the way I work out what revision I'm displaying - it just looks at the PackageRevision.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1238.html">#1238</a>
                          </td>
                          <td class="PosixTime">1311759784000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Apologies, I have a problem instead with the way I identify the revision in #1236.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1236.html">#1236</a>
                          </td>
                          <td class="PosixTime">1311699843000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This is merged to default (for rel 1.2.5) but isn't brilliant yet because of bug #1238.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1002.html">#1002</a>
                          </td>
                          <td class="PosixTime">1311676199000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Reopening this, since it has not been pushed or merged in afaict.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1002.html">#1002</a>
                          </td>
                          <td class="PosixTime">1311675754000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Can you also delete the "paster changes" in ckan/lib/cli with this removal?
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1238.html">#1238</a>
                          </td>
                          <td class="PosixTime">1311583876000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">I cannot reproduce this, to me it looks like it does get the correct revision.  If you for example look at the package a millisecond before i.e
http://ckan.net/package/osm%402010-11-30%2000%3A21%3A49.627829
the tags are no longer there that were added in that revision.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1208.html">#1208</a>
                          </td>
                          <td class="PosixTime">1311525306000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Propose this ticket can be closed as webstore is now functional and being used. Can open new tickets for specific improvements / adaptations as the need arises.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1239.html">#1239</a>
                          </td>
                          <td class="PosixTime">1311442163000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Fixed in cset:adf254b7c507 (see https://bitbucket.org/okfn/ckan/changeset/adf254b7c507)
                          </td>
              </tr>
          </tbody>
      </table>
      <div class="paging">
    <span class="previous">
      <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=17.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=8.html" title="Page 8">8</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=9.html" title="Page 9">9</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=10.html" title="Page 10">10</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=11.html" title="Page 11">11</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=12.html" title="Page 12">12</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=13.html" title="Page 13">13</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=14.html" title="Page 14">14</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=15.html" title="Page 15">15</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=16.html" title="Page 16">16</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=17.html" title="Page 17">17</a>
      </span>
      <span>
        <span class="current">18</span>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=19.html" title="Page 19">19</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=20.html" title="Page 20">20</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=21.html" title="Page 21">21</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=22.html" title="Page 22">22</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=23.html" title="Page 23">23</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=24.html" title="Page 24">24</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=25.html" title="Page 25">25</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=26.html" title="Page 26">26</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=27.html" title="Page 27">27</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=28.html" title="Page 28">28</a>
      </span>
    <span class="next">
      <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=19.html" title="Next Page">→</a>
    </span>
</div>
      <div id="help"><strong>Note:</strong>
        See <a href="../wiki/TracReports.html">TracReports</a> for help on using and creating reports.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="23%3Fsort=PosixTime&amp;asc=0&amp;format=rss" class="rss">RSS Feed</a>
        </li><li>
          <a rel="nofollow" href="23%3Fsort=PosixTime&amp;asc=0&amp;format=csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="23%3Fsort=PosixTime&amp;asc=0&amp;format=tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="../report%3Fid=23&amp;format=sql">SQL Query</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.3</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>