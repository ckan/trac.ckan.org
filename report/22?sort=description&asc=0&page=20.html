<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      {22} Trac tickets – CKAN
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">window.location.hash = window.location.hash;</script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="22%3Fsort=description&amp;asc=0&amp;format=rss" type="application/rss+xml" class="rss" title="RSS Feed" /><link rel="alternate" href="22%3Fsort=description&amp;asc=0&amp;format=csv" type="text/plain" title="Comma-delimited Text" /><link rel="alternate" href="22%3Fsort=description&amp;asc=0&amp;format=tab" type="text/plain" title="Tab-delimited Text" /><link rel="alternate" href="../report%3Fid=22&amp;format=sql" type="text/plain" title="SQL Query" />
        <link rel="up" href="../report.html" title="Available Reports" />
        <link rel="next" href="22%3Fsort=description&amp;asc=0&amp;page=21.html" title="Next Page" />
        <link rel="start" href="../wiki.1.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/report.css" type="text/css" />
        <link rel="prev" href="22%3Fsort=description&amp;asc=0&amp;page=19.html" title="Previous Page" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search CKAN" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://ckan.org/"><img src="http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png" alt="CKAN Trac" height="70" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../login.html">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li><a href="../about.html">About Trac</a></li><li class="last"><a href="../register.html">Register</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li><a href="../search.html">Search</a></li><li class="last"><a href="../wiki.1.html">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="../report.html">Available Reports</a></li><li class="last"><a href="../query.html">Custom Query</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="report">
      <h1>{22} Trac tickets
        <span class="numrows">(2647 matches)</span>
      </h1>
      <form method="get" action="22%3Fsort=description&amp;asc=0&amp;page=20.html">
        <div id="prefs">
          <div>
            <label>
              Max items per page
              <input type="text" name="max" size="10" value="100" />
            </label>
          </div>
          <div class="buttons">
            <input type="submit" value="Update" />
          </div>
        </div>
      </form>
      <div id="description">
        <p>
<a class="ext-link" href="https://github.com/roskakori/tratihubis/blob/master/query_tickets.sql"><span class="icon">​</span>https://github.com/roskakori/tratihubis/blob/master/query_tickets.sql</a>
</p>

      </div>
      <div class="buttons">
      </div>
      <h2 class="report-result">
        Results <span class="numresults">(1901 - 2000 of 2647)</span>
      </h2>
      <div class="paging">
    <span class="previous">
      <a href="22%3Fsort=description&amp;asc=0&amp;page=19.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=10.html" title="Page 10">10</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=11.html" title="Page 11">11</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=12.html" title="Page 12">12</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=13.html" title="Page 13">13</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=14.html" title="Page 14">14</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=15.html" title="Page 15">15</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=16.html" title="Page 16">16</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=17.html" title="Page 17">17</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=18.html" title="Page 18">18</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=19.html" title="Page 19">19</a>
      </span>
      <span>
        <span class="current">20</span>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=21.html" title="Page 21">21</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=22.html" title="Page 22">22</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=23.html" title="Page 23">23</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=24.html" title="Page 24">24</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=25.html" title="Page 25">25</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=26.html" title="Page 26">26</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=27.html" title="Page 27">27</a>
      </span>
    <span class="next">
      <a href="22%3Fsort=description&amp;asc=0&amp;page=21.html" title="Next Page">→</a>
    </span>
</div>
      <table class="listing tickets">
          <thead>
        <tr class="trac-columns">
          <th>
            <a href="22%3Fsort=id&amp;asc=1&amp;page=20.html">
              Id
            </a>
          </th><th>
            <a href="22%3Fsort=type&amp;asc=1&amp;page=20.html">
              Type
            </a>
          </th><th>
            <a href="22%3Fsort=owner&amp;asc=1&amp;page=20.html">
              Owner
            </a>
          </th><th>
            <a href="22%3Fsort=reporter&amp;asc=1&amp;page=20.html">
              Reporter
            </a>
          </th><th>
            <a href="22%3Fsort=milestone&amp;asc=1&amp;page=20.html">
              Milestone
            </a>
          </th><th>
            <a href="22%3Fsort=status&amp;asc=1&amp;page=20.html">
              Status
            </a>
          </th><th>
            <a href="22%3Fsort=resolution&amp;asc=1&amp;page=20.html">
              Resolution
            </a>
          </th><th>
            <a href="22%3Fsort=summary&amp;asc=1&amp;page=20.html">
              Summary
            </a>
          </th><th class="desc">
            <a href="22%3Fsort=description&amp;asc=1&amp;page=20.html">
              Description
            </a>
          </th><th>
            <a href="22%3Fsort=PosixTime&amp;asc=1&amp;page=20.html">
              Posixtime
            </a>
          </th><th colspan="100">
            <a href="22%3Fsort=ModifiedTime&amp;asc=1&amp;page=20.html">
              Modifiedtime
            </a>
          </th>
        </tr>
          </thead>
          <tbody>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1154.html">#1154</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">nils.toedtmann
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1154.html">Make ckan robust against solr failure</a>
                          </td>
                          <td class="description">
                            <p>
According to pudo, a ckan with activated solr extension throws a 5xx when solr is unreachable. Instead, it should behave more like a ckan without ckanext-solr when this happens.
</p>

                            
                          </td>
                          <td class="PosixTime">1306254472000000
                          </td>
                          <td class="ModifiedTime">1314287519000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/155.html">#155</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/155.html">Adding multiple packages to a group</a>
                          </td>
                          <td class="description">
                            <p>
Ability to add multiple packages to a group in one go (e.g. with
'add' link which makes drop down menu appear - so can add one after
another - then submit simultaneously)
</p>
<p>
Use a bit of javascript to add more dropdowns.
</p>
<p>
Suggested by Jonathan Gray
</p>

                            
                          </td>
                          <td class="PosixTime">1255621779000000
                          </td>
                          <td class="ModifiedTime">1271760041000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/257.html">#257</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/257.html">Package relationships - 4. Read in API</a>
                          </td>
                          <td class="description">
                            <p>
API:
</p>
<ul><li>Appear in package listing Example: 'relationships': [{'is_dependency_of':'osm', comments:'Since version 0.2'}, {'is_parent_of':'bobs_maps'}]
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1266928630000000
                          </td>
                          <td class="ModifiedTime">1273596170000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/879.html">#879</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">wwaites
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.3.html">ckan-v1.3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/879.html">Storage auth API</a>
                          </td>
                          <td class="description">
                            <p>
API to provide credentials to allow authorized 3rd parties (ie. one's with CKAN api keys) to make uploads to storage.
</p>
<p>
Implement as a CKAN extension.
</p>

                            
                          </td>
                          <td class="PosixTime">1292868509000000
                          </td>
                          <td class="ModifiedTime">1316030482000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1306.html">#1306</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1306.html">Tests for the logic layer</a>
                          </td>
                          <td class="description">
                            <p>
AFAICT there are no tests for the logic layer at the moment. I imagine this is an issue (if it is not please explain and close as wontfix).
</p>

                            
                          </td>
                          <td class="PosixTime">1315153267000000
                          </td>
                          <td class="ModifiedTime">1319797204000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/136.html">#136</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.11.html">v0.11</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/136.html">User has publicly viewable page</a>
                          </td>
                          <td class="description">
                            <p>
A user's 'home page' is at:
user/&lt;user.id&gt;
e.g. user/28394723982-03849472
</p>
<p>
Step 1:
</p>
<ul><li>Current user home page with recent edits
</li></ul><p>
Step 2:
Readonly
</p>
<ul><li>Number of edits
</li><li>Number of Packages they are admin of
</li></ul><p>
How do we do a nicer URL for the home page - can we use their openid login?
</p>
<p>
Follow on tickets: <a class="closed ticket" href="../ticket/138.html" title="enhancement: User has editable home page (closed: fixed)">ticket:138</a> and <a class="closed ticket" href="../ticket/142.html" title="defect: Update User object with additional fields such as 'nickname' (closed: fixed)">ticket:142</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1254741650000000
                          </td>
                          <td class="ModifiedTime">1255169466000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/836.html">#836</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.3-sprint-1.html">ckan-v1.3-sprint-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/836.html">Use site_url config option in templates</a>
                          </td>
                          <td class="description">
                            <p>
A user reported wanting to install ckan at a suburl. Apparently this does not work well because some urls are hard-coded: <a class="ext-link" href="http://lists.okfn.org/pipermail/ckan-discuss/2010-November/000726.html"><span class="icon">​</span>http://lists.okfn.org/pipermail/ckan-discuss/2010-November/000726.html</a>
</p>
<p>
Instead we should use the site_url config option where necessary.
</p>
<p>
Cost: 1h
</p>

                            
                          </td>
                          <td class="PosixTime">1291132434000000
                          </td>
                          <td class="ModifiedTime">1302882808000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/40.html">#40</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.5.html">v0.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/40.html">Reserved html characters (such as &amp;) in urls mean package does not render for read view</a>
                          </td>
                          <td class="description">
                            <p>
A url such as: <a class="ext-link" href="http://someurl.com/xyz?x=1&amp;VERSION=1.1&amp;Service=WFS"><span class="icon">​</span>http://someurl.com/xyz?x=1&amp;VERSION=1.1&amp;Service=WFS</a> when set as url or download_url breaks the rendering of the package with an error like:
</p>
<p>
There was an error rendering the package: not well-formed (invalid token): line 1, column 181
</p>
<p>
Have checked that removing the &amp; stuff makes the error go away so this looks like an issue with escaping urls when displaying them ...
</p>

                            
                          </td>
                          <td class="PosixTime">1195565228000000
                          </td>
                          <td class="ModifiedTime">1200993319000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1607.html">#1607</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">icmurray
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.7.html">ckan-v1.7</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1607.html">[super] Data.gov.uk Maintenance Refactor and UKLP Development Support</a>
                          </td>
                          <td class="description">
                            <p>
A ticket to collect all of the changes needed for CKAN to become the 'data' tab on DGU.
</p>
<p>
Design doc: <a class="ext-link" href="https://docs.google.com/document/d/19h9bA1G4cQkv031m8jNCu6FEB3a8qpXUmdPAguM-Ofs/edit?hl=en_GB"><span class="icon">​</span>https://docs.google.com/document/d/19h9bA1G4cQkv031m8jNCu6FEB3a8qpXUmdPAguM-Ofs/edit?hl=en_GB</a>  The design doc is the authoritative source of tasks.  This ticket acts as a synopsis.
</p>
<p>
Current sprint (2012-02-20):
</p>
<ul><li>7a. <del>Public Publisher Dashboard (including QA Work and notifications) MUST PHASE 1</del>
</li><li>6. <del>Publisher Registration Improvements MUST PHASE 1</del>
</li><li>3. <del><a class="missing wiki">Themes/Taxonomy?</a> as well as tags WONT PHASE 2</del>
</li><li>32. <del>Browse by Tags PHASE 1 MUST</del>
</li><li>12. <del><a class="missing wiki">Edit/Delete?</a> for Harvested Datasets MUST URGENT PHASE 1</del>
</li><li>13. <del>Provider labelling MUST PHASE 1 [UKLP <a class="closed ticket" href="../ticket/14.html" title="enhancement: Update a release (closed: invalid)">#14</a> MUST]</del>
</li><li>17. <del>Filter “UK Location Records” MUST PHASE 1 [UKLP <a class="closed ticket" href="../ticket/21.html" title="enhancement: Undelete a package (closed: fixed)">#21</a> SHOULD]</del>
</li><li>22. <del>Mixed Licenses MUST PHASE 2</del>
</li></ul><p>
Plus, brought forward from last sprint:
</p>
<ul><li><del>Publisher hierarchy support</del>
</li><li><del>Improved dataset creation tools (form) - <a class="closed ticket" href="../ticket/1525.html" title="enhancement: [super] DGU package form refactor (closed: fixed)">#1525</a></del>
</li><li><del>Edit/delete for harvested datasets</del>
</li></ul><p>
Overview of tasks: see the design doc.
</p>

                            
                          </td>
                          <td class="PosixTime">1325503348000000
                          </td>
                          <td class="ModifiedTime">1337159969000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1621.html">#1621</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">seanh
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1621.html">UnicodeDecodeError when validating user password</a>
                          </td>
                          <td class="description">
                            <p>
A test case is currently failing for me on master:
</p>
<pre class="wiki">ERROR: ckan.tests.functional.test_user.TestUserController.test_user_create_unicode
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/seanh/pyenv/lib/python2.6/site-packages/nose/case.py", line 197, in runTest
    self.test(*self.arg)
  File "/home/seanh/pyenv/src/ckan/ckan/tests/functional/test_user.py", line 342, in test_user_create_unicode
    res = res.follow()
  File "/usr/lib/pymodules/python2.6/paste/fixture.py", line 603, in follow
    return self.test_app.get(location, **kw)
  File "/usr/lib/pymodules/python2.6/paste/fixture.py", line 208, in get
    return self.do_request(req, status=status)
  File "/usr/lib/pymodules/python2.6/paste/fixture.py", line 389, in do_request
    **req.environ)
  File "/usr/lib/pymodules/python2.6/paste/wsgilib.py", line 343, in raw_interactive
    app_iter = application(basic_environ, start_response)
  File "/usr/lib/pymodules/python2.6/paste/lint.py", line 170, in lint_app
    iterator = application(environ, start_response_wrapper)
  File "/usr/lib/pymodules/python2.6/paste/cascade.py", line 130, in __call__
    return self.apps[-1](environ, start_response)
  File "/usr/lib/pymodules/python2.6/paste/registry.py", line 350, in __call__
    app_iter = self.application(environ, start_response)
  File "/usr/lib/pymodules/python2.6/repoze/who/middleware.py", line 69, in __call__
    auth_ids = self.authenticate(environ, classification, ids)
  File "/usr/lib/pymodules/python2.6/repoze/who/middleware.py", line 201, in authenticate
    userid = plugin.authenticate(environ, identity)
  File "/home/seanh/pyenv/src/ckan/ckan/lib/authenticator.py", line 29, in authenticate
    if user.validate_password(identity.get('password')):
  File "/home/seanh/pyenv/src/ckan/ckan/model/user.py", line 113, in validate_password
    hashed_pass = sha1(password_8bit + self.password[:40])
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 12: ordinal not in range(128)

</pre>
                            
                          </td>
                          <td class="PosixTime">1326105806000000
                          </td>
                          <td class="ModifiedTime">1335878161000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1542.html">#1542</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1542.html">Buttons to purge spam datasets and groups</a>
                          </td>
                          <td class="description">
                            <p>
A sysadmin should be able to easily examine a suspect group or package, determine if it was created by a spammer (as opposed to being a legitimate object that has been graffitied by a spammer) and purge it.
</p>
<p>
The existing two-stage revision delete is currently unreliable and perhaps too laborious.
</p>
<p>
Olav and Richard have needs along this line.
</p>

                            
                          </td>
                          <td class="PosixTime">1323364930000000
                          </td>
                          <td class="ModifiedTime">1339774000000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2911.html">#2911</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2911.html">Internal documentation of Organization Groups</a>
                          </td>
                          <td class="description">
                            <p>
A summary/user story doc of how organizations and groups are expected to work.
</p>

                            
                          </td>
                          <td class="PosixTime">1346941384000000
                          </td>
                          <td class="ModifiedTime">1346941384000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1179.html">#1179</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">timmcnamara
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1179.html">Support tag aliases</a>
                          </td>
                          <td class="description">
                            <p>
A small number of tags are near-duplicates of each other.
</p>
<p>
Perhaps we could support word stemming from NLTK and/or manual tag aliases:
</p>
<blockquote>
<p>
statistics
statistik
...
survey
surveying
surveys
</p>
</blockquote>

                            
                          </td>
                          <td class="PosixTime">1307429221000000
                          </td>
                          <td class="ModifiedTime">1339774332000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/356.html">#356</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.1.html">v1.1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/356.html">Search box in at top of page (UI)</a>
                          </td>
                          <td class="description">
                            <p>
A small but useful ui improvement would be to have a search box at top right on every page.
</p>
<p>
As an example see the one here on trac or on github.com or bitbucket.org.
</p>
<ul><li>It would be particularly good to include a small advanced search link that took you to the full search page. Need to keep it small because screen real-estate here is limited (see how github.com does this for inspiration).
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1277235411000000
                          </td>
                          <td class="ModifiedTime">1278931830000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2382.html">#2382</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-future.html">ckan-future</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2382.html">Investigate options for basic geocoding</a>
                          </td>
                          <td class="description">
                            <p>
A simple way for geocoding place names would be very useful, e.g in the spatial search, defining a geometry for a dataset (on the form or bulk)
</p>

                            
                          </td>
                          <td class="PosixTime">1337017160000000
                          </td>
                          <td class="ModifiedTime">1338205325000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1328.html">#1328</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">minspamboks@…
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1328.html">Unicode &amp; paster commands</a>
                          </td>
                          <td class="description">
                            <p>
A possible bug in CKAN when I tried deleting users using "paster --plugin=ckan user delete" command.
</p>
<p>
To reproduce the bug do the following:
</p>
<ol><li>Create a user with an ID (which in my case was a user's full name)
</li></ol><p>
that contains non-unicode caracters like Norwegian "æ", "ø", or "å".
</p>
<ol start="2"><li>Make sure that you can see something like the example below:
</li></ol><p>
(pyenv) rm@mycomputer:$ paster --plugin=ckan user
Users:
name=Rustæm
</p>
<ol start="3"><li>Then try deleting the user with following command:
</li></ol><p>
(pyenv) rm@mycomputer:$ paster --plugin=ckan user delete "Rustæm"
</p>
<p>
You should now get a python encoding error. I know that this is quite
rare case, but in our case it caused some trouble. Could you guys have
a look at this bug?
</p>
<p>
CKAN ver. 1.3.3.
</p>

                            
                          </td>
                          <td class="PosixTime">1315823110000000
                          </td>
                          <td class="ModifiedTime">1340191065000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1003.html">#1003</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-3.html">ckan-v1.4-sprint-3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1003.html">CKAN Javascript library and demonstration web interface</a>
                          </td>
                          <td class="description">
                            <p>
A plain javascript library for interfacing with CKAN would be very useful (why? see below!). It would also be nice to have a pure html + javascript web interface to CKAN both for its own sake and to act as a demonstrator for the library.
</p>
<p>
Why?
</p>
<ul><li>Development of bespoke interfaces -- much easier to edit html + javascript than to change ckan core
<ul><li>E.g. for specific communities e.g. geodata, science
</li><li>Specialized tasks - multi-package editing
</li></ul></li><li>Very easy deployment and integration (e.g. can drop in to getthedata or other sites)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1298490086000000
                          </td>
                          <td class="ModifiedTime">1300100411000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2332.html">#2332</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.7.html">ckan-v1.7</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2332.html">Fixes for v1.7 release</a>
                          </td>
                          <td class="description">
                            <p>
A place to list crucial fixes for v1.7 release:
</p>
<p>
Related extension:
</p>
<p>
All not complete now moved to <a class="closed ticket" href="../ticket/2347.html" title="enhancement: Related stuff dashboard and changes (closed: fixed)">#2347</a>
</p>
<ul><li><del>Related Item has comments on index page (they should not show up here -- why is this happening!)</del>
</li><li><del>Related item should be to left of history (history could in fact move to RHS)</del>
<ul><li>What about losing icons since we duplicate for related item
</li></ul></li><li>Related item plus sign is very poorly aligned within box
<ul><li>Add related items should be in drop down like for resources (?) to make it easy to add items
</li><li>Hover should show a title that gives some information about what related are (not at all clear)
</li></ul></li><li>Related item only includes App, Idea, Visualization but not API  | Post | Paper | News Article options as in original ticket <a class="closed ticket" href="../ticket/2204.html" title="enhancement: [super] Related (Stuff) Extension (closed: fixed)">#2204</a>
</li></ul><p>
Search results:
</p>
<ul><li><a class="reopened ticket" href="../ticket/2331.html" title="defect: Search should AND terms not OR terms (reopened)">#2331</a> - search should add not or
</li><li><del>Search results should be similar across group pages and normal search results (suggest adopting group page style)</del>
<ul><li>Search results resource link should link to resource page rather than url for that resource
</li><li>Suggest we could tidy this a bit (e.g. have resources in mini-sidebar of search result ...?)
</li></ul></li></ul><p>
Data viewer:
</p>
<ul><li><del>Merge updates to Recline (that did go in before deadline but do not seem to have made v1.7 branch) <a class="ext-link" href="https://github.com/okfn/ckan/commit/146a5c1130cc77cb2ad2c6ef6b3a53074908bf07"><span class="icon">​</span>https://github.com/okfn/ckan/commit/146a5c1130cc77cb2ad2c6ef6b3a53074908bf07</a></del>
<ul><li>Ensure still using read-only (this seems to have been lost in upgrade)
</li></ul></li><li>Do not show failed preview with red-bar (esp when just empty datastore ...)
</li></ul><blockquote>
<blockquote>
<blockquote>
<p>
a) Data Viewer checks if datastore is empty nad falls back to ther options if emtpy
b) <a class="missing wiki">DataStore?</a> enabled is off by default and only turned on either explicitly by user or by <a class="missing wiki">DataStorer?</a> on successful store ...
</p>
</blockquote>
</blockquote>
</blockquote>
<ul><li>(? not really a fix) Give out a link as well as embed instructions (I often want to link to the explorer in a given state)
<ul><li>Should this link to the resource page or to a dedicated viewer page - cf # 2322 (resource sub-urls like /download, /api ...)
</li><li>Do <a class="closed ticket" href="../ticket/2322.html" title="enhancement: Convenience offset on end of resource urls: /raw, /api, /viewer (closed: fixed)">#2322</a> ...
</li></ul></li><li>Decent powered by icon for the Embed for the <a class="missing wiki">DataHub?</a> (make this text customizable and allow html ...)
</li><li>Embed link uses uuid rather than dataset name (this goes to perma-url question ...)
</li><li>Data viewer embed url includes all the resource info
</li></ul><p>
Dataset page:
</p>
<ul><li>Put home page link somewhere more prominent (e.g. the top of the sidebar)
</li><li>Put author more prominent (at top right)
</li><li>(? - new work) List CKAN owners at top right in sidebar
</li><li>Make resources stand out more
</li><li>Rename resources tab and heading to Data &amp; Resources
</li></ul><p>
Dataset edit and create:
</p>
<ul><li>Corrections to dataset creation form for v1.7 - <a class="closed ticket" href="../ticket/2317.html" title="enhancement: Corrections to dataset creation form for v1.7 (closed: wontfix)">#2317</a>
</li><li>Better auto-complete for groups on dataset edit/new page - <a class="closed ticket" href="../ticket/2319.html" title="enhancement: Better auto-complete for groups on dataset edit page (closed: wontfix)">#2319</a>
<ul><li>Remove groups box and replace with tags on the new page (or is this needed for organizations stuff?)
</li></ul></li><li>Description / notes text area is not wide enough.
<ul><li>Should also be larger on edit page
</li></ul></li><li>Problem with date instructions on add/edit resource: "Dates are in ISO Format — eg. 2012-12-25 or %c2010-05-31T14:30%d."
</li><li>Add/edit resource: new code to auto-check urls being added is great but from UX point of view has draw back that (esp on low speed connections) page just seems to hang for a long time with nothing happening. I wonder if either
<ul><li>A) this could happen after resource created on form (e.g. it creates, and then an overlay comes up saying: checking url and gathering url information or similar) 
</li><li>Or B) we still do this before creating new resource form on page but we still should show something like a spinner and some info like "checking url and gathering url info ...)
</li></ul></li></ul><p>
Resource view:
</p>
<ul><li>Do not show no description in no description (just show dataset info)
</li></ul><p>
Theme:
</p>
<ul><li><del>Fix spacing above page title (i.e. dataset title etc)</del>
</li><li><del>Bootstrap 2.0.2 (@zephod was *supposed* to have done this) - should be trivial and gives important bugfixes for data viewer</del>
</li><li><del>Fix subnav width on resources pages (does not extend all the way to the right like it should)</del>
</li><li><del>Fix spacing of top menu and search box (do not look right)</del>
</li><li>Group pages:
<ul><li>view page: image / logo is really poorly locate and sized, see e.g. <a class="ext-link" href="http://datahub.io/group/wikimedia"><span class="icon">​</span>http://datahub.io/group/wikimedia</a>
</li><li><del>view page: admin heading on RHS sidebar is wrongly indented</del>
</li></ul></li></ul><p>
Miscellaneous:
</p>
<ul><li>Ensure that we out-of-the-box config for CKAN has (<a class="closed ticket" href="../ticket/2388.html" title="enhancement: Update &#34;out of the box&#34; settings for CKAN (closed: fixed)">#2388</a>):
<ul><li>Only logged in users able to create
</li><li>Creation permissions have only creators able to update a dataset
</li></ul></li></ul><p>
Deployments (without deployment we cannot know these are working):
</p>
<ul><li><del>Social extension</del>
</li><li><del>Analytics</del>
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1335644116000000
                          </td>
                          <td class="ModifiedTime">1340033281000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1283.html">#1283</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1283.html">Deleted packages shouldn't be searchable or browsable</a>
                          </td>
                          <td class="description">
                            <p>
A package in deleted state doesn't show to general users, but admins DO see them. The idea is that they can resurrect them if they want. But now we have the trash can that lists deleted packages. So we don't want admins to see the deleted packages anywhere else. 
</p>
<p>
(But an admin should still be able to READ and EDIT a deleted package, so if he clicks on it in the trash list he can see it to decide whether to resurrect and actually be able to change its state.)
</p>
<p>
Same in the Web interface and API.
</p>
<p>
This ticket ties in with <a class="assigned ticket" href="../ticket/948.html" title="enhancement: Highlight (to a sysadmin) which packages are deleted (assigned)">#948</a> highlighting a package being deleted (when viewing or editing) and follows on from the introduction of the trash can <a class="closed ticket" href="../ticket/1076.html" title="enhancement: Improve revision and package purge system (closed: fixed)">#1076</a>.
</p>

                            
                          </td>
                          <td class="PosixTime">1314112481000000
                          </td>
                          <td class="ModifiedTime">1330083933000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/301.html">#301</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/301.html">Package discussion pages</a>
                          </td>
                          <td class="description">
                            <p>
A package discussion page is like a wikipedia discussion page: an editable free text page for people to have discussion/post comments about a given package.
</p>
<p>
It provides a way for people to make suggestions about a package without needing access to main package.
</p>

                            
                          </td>
                          <td class="PosixTime">1272301033000000
                          </td>
                          <td class="ModifiedTime">1340632055000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2796.html">#2796</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">mark.wainwright
                          </td>
                          <td class="reporter">ross
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2796.html">Need a datahub one-pager</a>
                          </td>
                          <td class="description">
                            <p>
A one-pager explaining what the datahub is and with howto/examples for new users. This would make it much easier to explain the value in using the datahub for storing data.
</p>

                            
                          </td>
                          <td class="PosixTime">1343924916000000
                          </td>
                          <td class="ModifiedTime">1345129495000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1164.html">#1164</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/pdeu-1.html">pdeu-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1164.html">Cloropleth Map of European Data Availability for PDEU</a>
                          </td>
                          <td class="description">
                            <p>
A nice map in the homepage showing the availability of data across Europe
</p>

                            
                          </td>
                          <td class="PosixTime">1306408824000000
                          </td>
                          <td class="ModifiedTime">1308647224000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1779.html">#1779</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-02-20.html">ckan-sprint-2012-02-20</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1779.html">Add multilingual translation table.</a>
                          </td>
                          <td class="description">
                            <p>
A new table with 3 columns should be added. term, term_tranlastion, language_code.  This table will be used for all translations, including tags.  The table should have indexs on both the term and (term, language_code) combination.
</p>

                            
                          </td>
                          <td class="PosixTime">1328548631000000
                          </td>
                          <td class="ModifiedTime">1329393759000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1197.html">#1197</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">timmcnamara
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1197.html">Add JavaScript guide for CKAN</a>
                          </td>
                          <td class="description">
                            <p>
A new library, <a class="ext-link" href="http://blog.optimizely.com/introducing-guidersjs-an-open-source-guider-e"><span class="icon">​</span>guiders.js</a>, has been open sourced that seems to be great at unobtrusively introducing new users to features of websites.
</p>
<p>
The library drives Optimizely's website. The GitHub repo is here: <a class="ext-link" href="https://github.com/jeff-optimizely/Guiders-JS"><span class="icon">​</span>https://github.com/jeff-optimizely/Guiders-JS</a>
</p>
<p>
Some examples:
</p>
<p>
<a style="padding:0; border:none" href="http://posterous.com/getfile/files.posterous.com/temp-2011-06-22/BnlgHDvhjpFfqbwvprsIaklqrpdgJyebfuhxajbDhmvnFgzdzzCJdvluJFki/Screen_shot_2011-06-22_at_6.42.21_PM.png.scaled500.png"><img src="http://posterous.com/getfile/files.posterous.com/temp-2011-06-22/BnlgHDvhjpFfqbwvprsIaklqrpdgJyebfuhxajbDhmvnFgzdzzCJdvluJFki/Screen_shot_2011-06-22_at_6.42.21_PM.png.scaled500.png" alt="http://posterous.com/getfile/files.posterous.com/temp-2011-06-22/BnlgHDvhjpFfqbwvprsIaklqrpdgJyebfuhxajbDhmvnFgzdzzCJdvluJFki/Screen_shot_2011-06-22_at_6.42.21_PM.png.scaled500.png" title="http://posterous.com/getfile/files.posterous.com/temp-2011-06-22/BnlgHDvhjpFfqbwvprsIaklqrpdgJyebfuhxajbDhmvnFgzdzzCJdvluJFki/Screen_shot_2011-06-22_at_6.42.21_PM.png.scaled500.png" /></a>
</p>
<p>
<a style="padding:0; border:none" href="http://s3.amazonaws.com/files.posterous.com/temp-2011-06-22/CpvlcinkrxhtnAHfGtEHhxyGkraqlFmCjcnztFuugagBGxmBjCdwuquHpvEB/promo_gmail.png?AWSAccessKeyId=AKIAJFZAE65UYRT34AOQ&amp;Expires=1308801019&amp;Signature=DJWDgj7fmyq7K3ve177H7DPwKdw%3D"><img src="http://s3.amazonaws.com/files.posterous.com/temp-2011-06-22/CpvlcinkrxhtnAHfGtEHhxyGkraqlFmCjcnztFuugagBGxmBjCdwuquHpvEB/promo_gmail.png?AWSAccessKeyId=AKIAJFZAE65UYRT34AOQ&amp;Expires=1308801019&amp;Signature=DJWDgj7fmyq7K3ve177H7DPwKdw%3D" alt="http://s3.amazonaws.com/files.posterous.com/temp-2011-06-22/CpvlcinkrxhtnAHfGtEHhxyGkraqlFmCjcnztFuugagBGxmBjCdwuquHpvEB/promo_gmail.png" title="http://s3.amazonaws.com/files.posterous.com/temp-2011-06-22/CpvlcinkrxhtnAHfGtEHhxyGkraqlFmCjcnztFuugagBGxmBjCdwuquHpvEB/promo_gmail.png" /></a>
</p>

                            
                          </td>
                          <td class="PosixTime">1308801032000000
                          </td>
                          <td class="ModifiedTime">1340020357000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1762.html">#1762</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">ross
                          </td>
                          <td class="reporter">ross
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-02-20.html">ckan-sprint-2012-02-20</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1762.html">DGU Join publisher form</a>
                          </td>
                          <td class="description">
                            <p>
A new form for create publisher -&gt; Add publisher access to your account'
New wizard 
Autocomplete publisher name if linked from publisher view.
Email address used to publish should be activated/validated on first use. Original email still used to log in.
</p>

                            
                          </td>
                          <td class="PosixTime">1328532992000000
                          </td>
                          <td class="ModifiedTime">1329729305000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/814.html">#814</a>
                          </td>
                          <td class="type">requirement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">cygri
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.3.html">ckan-v1.3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/814.html">Have an “About CKAN” link on every page</a>
                          </td>
                          <td class="description">
                            <p>
A link “About CKAN” pointing to <a class="ext-link" href="http://ckan.net/about"><span class="icon">​</span>http://ckan.net/about</a> should be visible on every page. This is important because people often land on subpages and may have trouble figuring out what CKAN is.
</p>
<p>
I would put this link into the main navigation bar, on the very right next to “Revision History”. Then I would also remove the “Home” item from the main navigation bar because it is redundant. The CKAN logo is already a link to the homepage. The only other subpage in the “Home” section is “Statistics” and that's already linked from the homepage sidebar.
</p>
<p>
But anywhere else would be fine as well.
</p>

                            
                          </td>
                          <td class="PosixTime">1289995821000000
                          </td>
                          <td class="ModifiedTime">1294411109000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/813.html">#813</a>
                          </td>
                          <td class="type">requirement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">cygri
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.3.html">ckan-v1.3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/813.html">Add link to “Register new package” to the homepage</a>
                          </td>
                          <td class="description">
                            <p>
A link to the “register new package” page would be handy somewhere on the front page. As a frequent editor, I often go to <a class="ext-link" href="http://ckan.net"><span class="icon">​</span>http://ckan.net</a> in order to create a new package. I don't want to hunt around for the link to the “new package” form.
</p>
<p>
The link could go into the bar next to “About / Statistics”. Or into the “More information” sidebar. Neither of these truly make sense, but it's a frequently accessed link and that's reason enough to put it somewhere onto the frontpage.
</p>

                            
                          </td>
                          <td class="PosixTime">1289995253000000
                          </td>
                          <td class="ModifiedTime">1294411047000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2731.html">#2731</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">markw
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2731.html">Some sites permanently 'down for maintenance'</a>
                          </td>
                          <td class="description">
                            <p>
A large number of XXX.ckan.net sites give the following message:
</p>
<p>
"This Site is Down for Maintenance
We apologize for the inconvenience.
~ The Open Knowledge Foundation sysadmins."
</p>
<p>
The message is unhelpful and patently false - the sites do not exist. Some of them were supposed to have been redirected to a relevant group at thedatahub.org in this ticket (now closed):
</p>
<p>
<a class="ext-link" href="http://trac.okfn.org/ticket/933"><span class="icon">​</span>http://trac.okfn.org/ticket/933</a>
</p>
<p>
However, the redirection only seems to have worked in one case, <a class="ext-link" href="http://si.ckan.net"><span class="icon">​</span>http://si.ckan.net</a>. 
</p>
<p>
The problem still affects the following sites - the first 4 of which have supposedly been merged:
</p>
<ul><li><a class="ext-link" href="http://lt.ckan.net"><span class="icon">​</span>http://lt.ckan.net</a>
</li><li><a class="ext-link" href="http://hu.ckan.net"><span class="icon">​</span>http://hu.ckan.net</a>
</li><li><a class="ext-link" href="http://be.ckan.net"><span class="icon">​</span>http://be.ckan.net</a>
</li><li><a class="ext-link" href="http://gr.ckan.net"><span class="icon">​</span>http://gr.ckan.net</a>
</li></ul><ul><li><a class="ext-link" href="http://nz.ckan.net"><span class="icon">​</span>http://nz.ckan.net</a>
</li><li><a class="ext-link" href="http://bg.ckan.net"><span class="icon">​</span>http://bg.ckan.net</a>
</li><li><a class="ext-link" href="http://fi.ckan.net"><span class="icon">​</span>http://fi.ckan.net</a>
</li><li><a class="ext-link" href="http://katalogdanych.centrumcyfrowe.pl"><span class="icon">​</span>http://katalogdanych.centrumcyfrowe.pl</a>
</li><li><a class="ext-link" href="http://pl.ckan.net"><span class="icon">​</span>http://pl.ckan.net</a>
</li><li><a class="ext-link" href="http://southampton.ckan.net"><span class="icon">​</span>http://southampton.ckan.net</a>
</li><li><a class="ext-link" href="http://sl.ckan.net"><span class="icon">​</span>http://sl.ckan.net</a>
</li></ul><p>
Please sort this out by redirecting, removing the sites, giving a more helpful (and accurate) failure message, etc, as appropriate.
</p>

                            
                          </td>
                          <td class="PosixTime">1343045168000000
                          </td>
                          <td class="ModifiedTime">1343051608000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1439.html">#1439</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1439.html">Action API discoverablility</a>
                          </td>
                          <td class="description">
                            <p>
A good service API needs to be discoverable, so you are not always having to refer to the documentation html.
</p>
<p>
Maybe /api/action should return a list of actions available? (Currently this returns a 404.) 
</p>
<ul><li>It would be nice to sort these into get/create/update/delete.
</li><li><a class="new ticket" href="../ticket/1438.html" title="enhancement: Action API - parameter discovery/checking (new)">#1438</a> Parameters for each of the actions must be discoverable too
</li></ul><p>
/api/action/{action_name} should also return the help text / parameters allowable. (Currently this returns 400 error)
</p>

                            
                          </td>
                          <td class="PosixTime">1320161970000000
                          </td>
                          <td class="ModifiedTime">1325474974000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1730.html">#1730</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-02-20.html">ckan-sprint-2012-02-20</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1730.html">Form field for vocabularies</a>
                          </td>
                          <td class="description">
                            <p>
A function that takes a vocabulary name or ID as argument and returns a nice select box for selecting items from that given vocabulary. Meant to be used by form templates, to make it easy for them to integrate custom vocabularies. Could use <a class="ext-link" href="http://harvesthq.github.com/chosen/"><span class="icon">​</span>http://harvesthq.github.com/chosen/</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1328007897000000
                          </td>
                          <td class="ModifiedTime">1328714937000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1751.html">#1751</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">icmurray
                          </td>
                          <td class="reporter">icmurray
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-02-20.html">ckan-sprint-2012-02-20</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1751.html">DGU dataset form: collection of updates from feedback</a>
                          </td>
                          <td class="description">
                            <p>
A collection of improvements to the dataset creation/edition form (feedback form DGU).
</p>
<ul><li>[x] validation error formatting
</li><li>[x] geograohic coverage: add local authority
</li><li>[x] resource format field
</li><li>[x] resource format auto-complete
</li><li>[x] renamed data tab -&gt; files tab
</li><li>[x] integrate Adris'a INSPIRE changeset, and migration scripts as part of build
</li><li>[x] remove "discontinued" from the update frequency
</li><li>[x] disable the disabling of save
</li><li>[x] Remove ability to edit url on the edit-form (and remove "url not available")
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1328526612000000
                          </td>
                          <td class="ModifiedTime">1329733458000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1263.html">#1263</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1263.html">Bad name for logic action in API causes Exception</a>
                          </td>
                          <td class="description">
                            <p>
A bad action name:
e.g.
curl <a class="ext-link" href="http://test.ckan.net/api/action/user_showaa"><span class="icon">​</span>http://test.ckan.net/api/action/user_showaa</a> -d '{}'
causes 500 response.
</p>
<p>
Occurs only on 1.4.3 beta.
</p>

                            
                          </td>
                          <td class="PosixTime">1312479020000000
                          </td>
                          <td class="ModifiedTime">1314029279000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/762.html">#762</a>
                          </td>
                          <td class="type">story
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/762.html">Permanently Read-Only CKAN instance</a>
                          </td>
                          <td class="description">
                            <p>
A CKAN is used just for distributing metadata. Updates may still arrive through direct db manipulation, e.g.:
</p>
<ul><li>another (but writable) CKAN instance is connected to the same db
</li><li>restoring database dumps from another CKAN db
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1288090578000000
                          </td>
                          <td class="ModifiedTime">1288091982000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/169.html">#169</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/169.html">Package derivations</a>
                          </td>
                          <td class="description">
                            <p>
A 'Derived' relationship can be applied from one package to another.
</p>
<p>
e.g.
sussex-demography is derived from census-2001
</p>
<p>
'Derived' relationship is:
</p>
<ul><li>directional
</li><li>many:many
</li><li>stateful
</li></ul><p>
'derived' table columns:
</p>
<ul><li>id (primary key)
</li><li>source_package (foreign key)
</li><li>result_package (foreign key)
</li><li>description (markdown text)
</li></ul><p>
Further tickets:
</p>
<ul><li>WUI - package view - shows 'derives from package x' and 'derived package y' with UML-like diagram of x -&gt; this package -&gt; y
</li><li>WUI - package edit form - new option to say it 'derives from' or 'has derivation' and you select the appropriate
</li><li>REST if - expose reading and writing this property
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1256304927000000
                          </td>
                          <td class="ModifiedTime">1266928708000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2807.html">#2807</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">aron.carroll
                          </td>
                          <td class="reporter">toby
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/demo&#32;phase&#32;3.html">demo phase 3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2807.html">autocomplete.js error</a>
                          </td>
                          <td class="description">
                            <p>
@aron,
</p>
<p>
edit dataset has a js error
</p>
<p>
<a class="ext-link" href="http://localhost:5000/dataset/edit/1-kmwaterfractionfromnationaltopographicdatabasemapscanada"><span class="icon">​</span>http://localhost:5000/dataset/edit/1-kmwaterfractionfromnationaltopographicdatabasemapscanada</a>
</p>
<p>
<a class="missing wiki">TypeError?</a>: options is undefined
[Break On This Error]         
</p>
<p>
this.lookup(options.term, options.callback);
</p>
<p>
autocomplete.js (line 231)
</p>

                            
                          </td>
                          <td class="PosixTime">1344266228000000
                          </td>
                          <td class="ModifiedTime">1344270190000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2791.html">#2791</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">aron.carroll
                          </td>
                          <td class="reporter">toby
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/demo&#32;phase&#32;3.html">demo phase 3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2791.html">Logo fix</a>
                          </td>
                          <td class="description">
                            <p>
@aron
 
</p>
<p>
We should be able to have longish tag lines that look ok currently they wrap and stop the logo text being clickable
</p>
<p>
Can we have <tt>white-space:nowrap;</tt> for the tagline so long ones don't wrap and maybe look at aligning long ones
</p>

                            
                          </td>
                          <td class="PosixTime">1343895034000000
                          </td>
                          <td class="ModifiedTime">1343906891000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2840.html">#2840</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">aron.carroll
                          </td>
                          <td class="reporter">toby
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/demo&#32;phase&#32;3.html">demo phase 3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2840.html">tag line styling</a>
                          </td>
                          <td class="description">
                            <p>
@aron
</p>
<p>
Is it possible to get the tagline text to float  the other way
</p>
<p>
at the moment we have
</p>
<p>
...........Title
Tag line to here
</p>
<p>
I'd like 
</p>
<p>
...........Title
...........Tag line to here
</p>
<p>
is this possible or too much pain
</p>
<p>
based partly on this comment
Markw wrote 
</p>
<p>
A minor problem visible on the home page
&lt;<a class="ext-link" href="http://s031.okserver.org:2375/"><span class="icon">​</span>http://s031.okserver.org:2375/</a>&gt; and other pages, when viewing in both
Chrome and Firefox:
</p>
<p>
if the browser width is not very wide, the tag line 'Open source data
portal' vanishes off the *left* hand side of the screen. For some
reason the browser doesn't even recognise this with a horizontal
scroll bar (as it does when stuff is off the *right* hand side) - it
just chops off the text.
</p>

                            
                          </td>
                          <td class="PosixTime">1344851307000000
                          </td>
                          <td class="ModifiedTime">1344852538000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/323.html">#323</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.1.html">v1.1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/323.html">Notification message</a>
                          </td>
                          <td class="description">
                            <h3 id="Whicheventstonotifyon">Which events to notify on</h3>
<p>
Listed by domain object, these are the notification message 'change types' that will be sent:
</p>
<ul><li>Package
</li><li>PackageResource
</li></ul><p>
Also it is clear that it could be useful to know when db-wide maintenance is carried out:
</p>
<ul><li>db - 'clean', 'rebuild' (db is wiped and replaced with new data), 'upgrade' (migration)
</li></ul><h3 id="Ignoreddomainobjects">Ignored domain objects</h3>
<p>
These parts of the domain model will not carry notifications as no use case has been identified for them:
</p>
<ul><li>Revision
</li><li>Group 
</li><li>Tag
</li><li>Rating
</li><li>User - list of users is sensitive info
</li><li>Relationships - complicated
</li><li>Authz - complicated and sensitive info
</li><li>License - change of a license's metadata is a question for the 'license service'
</li></ul><h3 id="Messageformat">Message format</h3>
<p>
A notification message's header contains the routing key, identifying the object type. The client is probably interested in the object (all use cases so far), so it makes sense to send the object in the payload. This should be the JSON-encoded dictionary exactly as provided for the object's REST Entity.
</p>
<p>
For the 'db' notifications there shall be no payload.
</p>

                            
                          </td>
                          <td class="PosixTime">1274723333000000
                          </td>
                          <td class="ModifiedTime">1278578841000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/322.html">#322</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.1.html">v1.1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/322.html">Client interface for Notification Service</a>
                          </td>
                          <td class="description">
                            <h3 id="Usecases">Use cases</h3>
<ul><li>Register for package changes
</li><li>Register for all revisions
</li><li>Notified of a package change
</li><li>Notified of a revision
</li><li>Deregistration
</li><li>Configuration of port in pylons config
</li></ul><h3 id="Design">Design</h3>
<ul><li>Default port: 5672 (standard for AMQP)
</li><li>Exchange name: 'ckan'
</li><li>Exchange type: topic exchange (most flexible)
</li><li>Routing keys: (see below)
</li></ul><h3 id="Routingdetail">Routing detail</h3>
<p>
Routing key format: "OBJ_TYPE"
(NB tags should be identified by their name, not ID)
</p>
<p>
Example routing keys
</p>
<ul><li>'package' - Package edited/created
</li><li>'resource' - Resource edited/created
</li><li>'revision' - Any change
</li><li>'db.clean'
</li><li>'db.rebuild'
</li></ul><p>
Example queue bindings that clients may use: 
</p>
<ul><li>* - no filtering - client receives all notifications
</li><li>package - only changes to packages
</li><li>revision - all revisions
</li><li>db - all database operations
</li></ul><h3 id="Versioning">Versioning</h3>
<p>
Since message payloads will be tied into the REST Entities, it makes sense to join up with the REST versioning. This could be achieved by providing new exchanges called 'ckan-1.1' perhaps?
</p>
<h3 id="Documentation">Documentation</h3>
<ul><li>How to use
</li><li>simple example of an external client?
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1274720042000000
                          </td>
                          <td class="ModifiedTime">1277722821000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/325.html">#325</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.1.html">v1.1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/325.html">Event push notification</a>
                          </td>
                          <td class="description">
                            <h3 id="Asa">As a</h3>
<p>
CKAN client program
</p>
<h3 id="Iwantto">I want to</h3>
<p>
be notified when changes to the CKAN metadata occur.
</p>
<h3 id="Examplesofuse">Examples of use</h3>
<ol><li>An external search engine needing to (re)index a package. (interest: Package)
</li><li>A front-end system that caches package info and wants to know when it changes, to keep in step. (interest: Package or Revision) See further details here: <a class="closed ticket" href="../ticket/352.html" title="enhancement: Package notification worker - sends XML-RPC (closed: wontfix)">ticket:352</a> and previous iteration here: <a class="closed ticket" href="../ticket/333.html" title="enhancement: CKAN front end requirements for package notifications (closed: wontfix)">ticket:333</a>.
</li><li>A system for automatically checking package URLs and resource URLs as they are put on the system. This could alert to bad URLs and automatically email feedback to (meta)data owners. (interest: PackageResource)
</li><li>Do some processing on resource (e.g. extract sample data for display) (interest: PackageResource)
</li></ol><h3 id="Context">Context</h3>
<p>
The current state of CKAN can be queried through the REST API, you can keep track of changes by reviewing the feeds, but there is no way to find out the instant something is changed, without costly polling.
</p>
<h3 id="Design">Design</h3>
<p>
Split-off into two tickets:
</p>
<ul><li>Notification message - <a class="closed ticket" href="../ticket/323.html" title="enhancement: Notification message (closed: fixed)">ticket:323</a>
<ul><li>Which events to notify on
</li><li>Message format
</li></ul></li><li>Interface for Notifier Service - <a class="closed ticket" href="../ticket/322.html" title="enhancement: Client interface for Notification Service (closed: fixed)">ticket:322</a>
</li></ul><h3 id="Testing">Testing</h3>
<p>
To test notifications, Carrot / AMQP will be configured to use a native-Python Queue, instead of requiring RabbitMQ to be running on the machine.
</p>
<h3 id="Related">Related</h3>
<ul><li>Run CKAN search indexing using this system - <a class="closed ticket" href="../ticket/324.html" title="enhancement: Search indexing using notifications (closed: fixed)">ticket:324</a>
</li><li>Run SOLR indexing using this system - <a class="closed ticket" href="../ticket/353.html" title="defect: SOLR search indexing (closed: fixed)">ticket:353</a>
</li><li>Web hooks for notifications - <a class="closed ticket" href="../ticket/327.html" title="defect: Create a web hook worker for CKAN (closed: wontfix)">ticket:327</a> 
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1274723512000000
                          </td>
                          <td class="ModifiedTime">1278599979000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/883.html">#883</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">wwaites
                          </td>
                          <td class="reporter">wwaites
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4.html">ckan-v1.4</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/883.html">uklii harvesting refactor</a>
                          </td>
                          <td class="description">
                            <h2 id="masterticket">master ticket</h2>
<ul><li><a class="closed ticket" href="../ticket/884.html" title="enhancement: harvest job delete operation (closed: fixed)">#884</a> implement harvest job delete command for an easier life
</li><li><a class="closed ticket" href="../ticket/885.html" title="defect: reimplement csw module to use owslib (closed: fixed)">#885</a> move csw code into dedicated ckanext plugin
</li><li><a class="closed ticket" href="../ticket/886.html" title="defect: move uklii forms api to dgu module (closed: duplicate)">#886</a> move forms api into dgu extension module
</li><li><a class="closed ticket" href="../ticket/887.html" title="enhancement: move harvesting to generic module (closed: fixed)">#887</a> move harvesting code to use generic harvesting module
</li></ul><p>
 
</p>

                            
                          </td>
                          <td class="PosixTime">1293277713000000
                          </td>
                          <td class="ModifiedTime">1300196622000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2733.html">#2733</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">johnglover
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.9.html">ckan-v1.9</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2733.html">Datastore logic functions</a>
                          </td>
                          <td class="description">
                            <h2 id="Wheredoesthedatago">Where does the data go?</h2>
<p>
In a postgres database configured by the ckan.datastore_write_url config option which is a sqlalchemy url. 
</p>
<p>
The user should have rights to create tables.
</p>
<h2 id="Whatstheapilike">Whats the api like?</h2>
<p>
We will just implement it as logic functions like the rest of CKAN and will part of core.  After that we may add some nicer api functions that use these but that is a secondary concern.
</p>
<h2 id="Whataretheinitiallogicfunctions">What are the initial logic functions?</h2>
<ul><li>datastore_create
</li><li>datastore_delete
</li><li>datastore_show
</li></ul><h2 id="WhatistheJSONinputformatfordatastore_create">What is the JSON input format for datastore_create</h2>
<p>
To begin with it can have the following keys. It is fairly consistent with Max Ogdens' gut servers.  Except adds resource_id.
</p>
<pre class="wiki">{
resource_id: resource_id # the data is going to be stored against.
fields: a list of dictionaries of fields/columns and their extra metadata.
records: a list of dictionaries of the data eg  [{"dob": "2005", "some_stuff": ['a', b']}, ..]
}
</pre><ul><li>The first row will be used to guess types not in the fields and the guessed types will be added to the headers permanently. Consecutive rows have to conform to the field definitions.
</li><li>rows: can be empty so that you can just set the fields
</li><li>fields are optional but needed if you want to do type hinting or add extra information for certain columns or to explicitly define ordering.  
</li></ul><p>
eg:  [{"id": "dob", "type": "timestamp" }, {"id": "some_stuff", "type": "text"},  ...].
A header items values can not be changed after it has been defined nor can the ordering of them be changed.  They can be extended though.
</p>
<ul><li>Any error results in total failure!! For now pass back the actual error.
</li><li>Should be transactional
</li></ul><h2 id="Whatjsondoesdatastore_deletetake">What json does datastore_delete take?</h2>
<pre class="wiki">{
resource_id: resource_id # the data is going to be deleted.
filters: dictionary of matching conditions to delete
    e.g  {'key1': 'a. 'key2': 'b'}  this will be equivalent to "delete from table where key1 = 'a' and key2 = 'b' ".
    No filters (either not present or not defined) then delete the table. If we want truncate then add truncate: true to truncate the table.
}
</pre><h2 id="Whatjsondoesdatastore_searchtake">What json does datastore_search take?</h2>
<pre class="wiki">{
resource_id: resource_id # the data is going to be selected.
filters : dictionary of matching conditions to select
    e.g  {'key1': 'a. 'key2': 'b'}  this will be equivalent to "select * from table where key1 = 'a' and key2 = 'b' "
q: full text query
limit: limit the amount of rows to size default 100
offset: offset the amount of rows
fields:  list of fields return in that order, defaults (empty or not present) to all fields in fields order.
sort: comma separated field names with ordering e.g "fieldname1, fieldname2 desc"
}
</pre><p>
Some free code: <a class="ext-link" href="https://gist.github.com/3163864"><span class="icon">​</span>https://gist.github.com/3163864</a>
</p>
<h2 id="Whatjsondoesdatastore_searchreturn">What json does datastore_search return?</h2>
<pre class="wiki">{
fields: same type as datastore_create accepts (i.e. with metadata)
offset: The same offset that was supplied in datastore_show
limit: The original limit
filters: The filters that were applied in data_show
total: # total matching records without size or offset
records: [same as data_create] # list of matching results
}
</pre><p>
On error will return:
</p>
<pre class="wiki">{
__error__: … sql error …
}
</pre><h2 id="Whattypesareallowed">What types are allowed?</h2>
<p>
Aim to support as many postgres/postgis types that have string representations.
</p>
<p>
<a class="ext-link" href="http://www.postgresql.org/docs/9.1/static/datatype.html"><span class="icon">​</span>http://www.postgresql.org/docs/9.1/static/datatype.html</a>
</p>
<p>
<a class="ext-link" href="http://www.postgresql.org/docs/9.1/static/sql-createdomain.html"><span class="icon">​</span>http://www.postgresql.org/docs/9.1/static/sql-createdomain.html</a> 
</p>
<h2 id="IDs">IDs</h2>
<p>
Each row in a table will be given an _id column which has an id generated by us which you can use in queries.
</p>
<h2 id="OtherFeatures">Other Features</h2>
<p>
Each row will store the _full_text index of all the data in the row. At some later point there will most likely be a way to index fields add constraints etc.
</p>

                            
                          </td>
                          <td class="PosixTime">1343058886000000
                          </td>
                          <td class="ModifiedTime">1343656105000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/333.html">#333</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.1.html">v1.1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/333.html">CKAN front end requirements for package notifications</a>
                          </td>
                          <td class="description">
                            <h2 id="Usecase:newpackage">Use case: new package</h2>
<ol><li>An external front-end system provides a web page with a list of packages. Each package has the option to edit it or and there is also a button to create a new package. 
</li></ol><ol start="2"><li>User: clicks 'new package'. 
</li></ol><ol start="3"><li>CKAN presents the package/new form to the user. 
</li></ol><ol start="4"><li>(After a couple of previews) User: clicks 'commit'. 
</li></ol><ol start="5"><li>Notification message goes from CKAN to the front-end detailing the new package.
</li></ol><ol start="6"><li>The user is redirected back to the front-end web page displaying the list of packages, which contains the new one.
</li></ol><p>
The notification message (step 5) has to get through to the front-end that the new package is created before the redirect (step 6). This suggests that the message sending needs to be *synchronous*, i.e. acknowledged by the front-end, before CKAN redirects the user to the front-end package listing page (step 6).
</p>
<p>
In addition, this use case suggests the front-end listens for package notifications, to save another call to CKAN to get the package details, before the displaying the list of packages. If this isn't possible (see next use case) and it must listen for revision notifications instead, then perhaps it is worth including the full package details in the payload for the revision notification message. Would there be a problem with such a large message in the next use case, with 100 packages?
</p>
<h2 id="Usecase:CKANimportspackages">Use case: CKAN imports packages</h2>
<ol><li>CKAN administrator runs a script that adds 100 new packages into CKAN. 
</li></ol><ol start="2"><li>CKAN sends notification message to front-end to report the new packages/revisions.
</li></ol><ol start="3"><li>Knowing there are new revisions, the front-end queries the CKAN revision interface to get the list of new packages.
</li></ol><ol start="4"><li>The front-end queries CKAN for each new package one-by-one.
</li></ol><ol start="5"><li>A new user request to the front-end will include the info about the new packages.
</li></ol><p>
The package addition could be achieved in 1 revision, 100 revisions or some compromise:
</p>
<ul><li>If it is 1 revision then potentially there are problems displaying the long list of packages in the 'recent changes'. 
</li></ul><ul><li>If it is 100 revisions, then the notification webhook would be called 100 times, which creates unnecessary load on the front-end. Suppose each Webhook call-back (step 2) triggers the front-end to make a call to CKAN to get the latest revisions (step3), in this case it would make 100 calls, most of them fruitless, causing unnecessary load on CKAN.
</li></ul><p>
This use case suggests a bulk import of packages should go into one revision, and therefore generate one revision notification message and 100 package notification messages. The front-end client should listen to only revision messages.
</p>

                            
                          </td>
                          <td class="PosixTime">1275324042000000
                          </td>
                          <td class="ModifiedTime">1275407987000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/265.html">#265</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/265.html">More detail shown in Atom feed</a>
                          </td>
                          <td class="description">
                            <h2 id="Usecase">Use case</h2>
<p>
As a user I want to stay abreast of package changes, such as a new package being created, newer data is available for a package or a new download is available for a package.
</p>
<h2 id="Implementation">Implementation</h2>
<p>
Add into the Atom feed:
</p>
<ol><li>a package is a new one
</li><li>the resources have been changed
</li><li>the last_updated field has been changed
</li></ol>
                            
                          </td>
                          <td class="PosixTime">1267708364000000
                          </td>
                          <td class="ModifiedTime">1271636891000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/283.html">#283</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/283.html">Manage deletions of unwanted packages</a>
                          </td>
                          <td class="description">
                            <h2 id="Usecase">Use case</h2>
<p>
As a user I want to notify the CKAN admins of a spammed or unsuitable package for deletion.
</p>
<h2 id="Suggestedsolution">Suggested solution</h2>
<p>
In the package view side-bar, there is a note: "To have this package completely removed, contact the [ca.ckan.net administrators admin@…]."
</p>
<h2 id="Othersolutions">Other solutions</h2>
<p>
A more complicated solution would be to allow packages to be tagged for deletion, which would auto-alert administrators, and allow easier administration of this. But this might be overkill. 
</p>
<p>
c.f. <a class="ext-link" href="http://en.wikipedia.org/wiki/Deleting_an_article"><span class="icon">​</span>http://en.wikipedia.org/wiki/Deleting_an_article</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1270660210000000
                          </td>
                          <td class="ModifiedTime">1311325526000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/277.html">#277</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">zephod
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/277.html">Set some config options / settings in WUI (extension)</a>
                          </td>
                          <td class="description">
                            <h2 id="Usecase">Use case</h2>
<p>
As a ckan administrator I want to easily change options about the CKAN install.
</p>
<h2 id="Implementation">Implementation</h2>
<h3 id="SettingstobeinDB">Settings to be in DB</h3>
<p>
Suggested:
</p>
<pre class="wiki">## Title of site (using in several places including templates and &lt;title&gt; tag
ckan.site_title = CKAN

## Logo image to use (replaces site_title string on front page if defined)
ckan.site_logo = http://assets.okfn.org/p/ckan/img/ckan_logo_box.png

## Site tagline / description (used on front page)
ckan.site_description = 

## Used in creating some absolute urls (such as rss feeds, css files) and 
## dump filenames
ckan.site_url =

## Favicon (default is the CKAN software favicon)
ckan.favicon = http://assets.okfn.org/p/ckan/img/ckan.ico


## An 'id' for the site (using, for example, when creating entries in a common search index) 
## If not specified derived from the site_url
# ckan.site_id = ckan.net

## API url to use (e.g. in AJAX callbacks)
## Enable if the API is at a different domain
# ckan.api_url = http://www.ckan.net

## html content to be inserted just before &lt;/body&gt; tag (e.g. google analytics code)
## NB: can use html e.g. &lt;strong&gt;blah&lt;/strong&gt;
## NB: can have multiline strings just indent following lines
# ckan.template_footer_end = 
</pre><p>
NB: these will still need to be stored somewhere for loading on initialization. do this in db init function ...
</p>
<h3 id="SettingsOptionsKeyValuesTable">Settings / Options / <a class="missing wiki">KeyValues?</a> Table</h3>
<p>
Columns:
</p>
<ul><li>[namespace]: ? only if <a class="missing wiki">KeyValues?</a> (for settings this would then always be settings)
</li><li>key
</li><li>label
</li><li>value (json)
</li><li>type (e.g. date and to specify in advance what type should be)
</li><li>description
</li><li>tags: ?? (for grouping ...)
</li></ul><h3 id="LoadingsettingsfromDB">Loading settings from DB</h3>
<p>
Do this in ckan/config/environment.py
</p>
<h3 id="WUI">WUI</h3>
<ul><li>/ckan-admin/settings
</li><li>Show label, plus description plus text field
</li></ul><h2 id="Depends">Depends</h2>
<ul><li>Would be part of ckan-admin section and hence build on <a class="closed ticket" href="../ticket/833.html" title="enhancement: [super] Administrative dashboard extension (closed: fixed)">ticket:833</a> (Administrative dashboard)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1269274861000000
                          </td>
                          <td class="ModifiedTime">1318247121000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1.html">#1</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">somebody
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/milestone1.html">milestone1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1.html">Visitor visits service</a>
                          </td>
                          <td class="description">
                            <h2 id="Title">Title</h2>
<p>
Visitor visits service
</p>
<h2 id="Asa">As a</h2>
<p>
Visitor (general web user)
</p>
<h2 id="Iwantto">I want to</h2>
<p>
Visit the website of the service (frontpage)
</p>
<h2 id="Sothat">So that</h2>
<ul><li>See the front page and discover information about the service
</li><li>Perform various activities related to the service such as registering and finding packages, registering as a user and logging in
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1152549417000000
                          </td>
                          <td class="ModifiedTime">1183636342000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2552.html">#2552</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">ross
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-future.html">ckan-future</a>
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2552.html">Controlling access to features</a>
                          </td>
                          <td class="description">
                            <h2 id="Requirements">Requirements</h2>
<p>
To provide a freemium service it is necessary to be able to provide differing <span class="underline">levels</span> of functionality based on the <strong>type</strong> of user (see <a class="assigned ticket" href="../ticket/2550.html" title="enhancement: User types (assigned)">#2550</a>). These levels can be specific to the data hub but may require overriding functionality from core to provide these checks.
</p>
<p>
Initial implementation should focus on limiting access to datastore disk space.
</p>
<h2 id="Interface">Interface</h2>
<p>
These changes are currently only for the data hub and should be kept as much as possible within the data hub extension.
</p>
<h2 id="UserStories">User Stories</h2>
<ul><li>As a system component I want to find out if the current user has access to a feature (i.e. storage) and if so to what extent (xMb, xGb or unlimited).  
</li></ul><ul><li>As a system administrator I don't expect to need to manage the levels of users <strong>or</strong> the features that this applies to.
</li></ul><p>
 
</p>
<h2 id="Tasks">Tasks</h2>
<p>
[ ] Clarification of requirements/analysis
</p>
<p>
[ ] Tests
</p>
<p>
[ ] Code
</p>
<blockquote>
<p>
[ ] Model
</p>
</blockquote>
<blockquote>
<p>
[ ] API
</p>
</blockquote>
<p>
  
</p>
<blockquote>
<p>
[ ] UI
</p>
</blockquote>
<p>
[ ] Documentation
</p>
<h2 id="Estimates">Estimates</h2>

                            
                          </td>
                          <td class="PosixTime">1340018770000000
                          </td>
                          <td class="ModifiedTime">1346669544000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2550.html">#2550</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">icmurray
                          </td>
                          <td class="reporter">ross
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/datahub-july.html">datahub-july</a>
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2550.html">User types</a>
                          </td>
                          <td class="description">
                            <h2 id="Requirements">Requirements</h2>
<p>
In the data hub plugin we require the ability to differentiate users between those that have paid for a service, and those that haven't. The distinction isn't boolean as there may be levels of service for paid users, so it may be that we need a 'type' of user where there are various grades of 'paid' which are likely to be strings (specific to the data hub).
</p>
<h2 id="Requiredinterface">Required interface</h2>
<p>
Once changes have been made to the user schema, for a given user we want to be able to:
</p>
<ul><li>determine if they have a paid or a free account, and
</li><li>get a string name of the type of paid account.
</li></ul><p>
Care should be taken to ensure that the 'paid' status of the user cannot be set through the API and only by the datahub plugin.
</p>
<h2 id="UserStories">User Stories</h2>
<p>
User stories related to the management, setting and changing of a user's payment level, as well as historical information on payments should be done as part of the work that includes actually allowing purchases.  For now it is adequate that we can manually control these things through paster commands.
</p>
<p>
Payments types should be linear as I don't believe for this type of service a pick-and-mix modular model would work well. Organizations will inherit the payment level of their owner, so currently there is no requirement for it to affect organizations at all.
</p>
<ul><li>As a sysadmin I would like to be able to use a paster command to
manually set a user's payment level, or remove it entirely.
</li></ul><ul><li>As a sysadmin I would like to be able to run a paster command to
view a list of users who have a payment plan, grouped by the plan
that they have.
</li></ul><ul><li>As a sysadmin I would like to be able to use the API to change the
payment status of a specific user through user_create and user_update.
This shouldn't be available to anybody else.
</li></ul><ul><li>As a user, and only if I have one, I'd like to see my current payment
level on my user profile page.
</li></ul><p>
   
</p>
<h2 id="Tasks">Tasks</h2>
<p>
[x] Tests
</p>
<p>
[x] Plugin based migration
</p>
<p>
[x] Code
</p>
<blockquote>
<p>
[x] Model
</p>
</blockquote>
<blockquote>
<p>
[x] API
</p>
</blockquote>
<p>
[x] Documentation
</p>
<h2 id="Estimates">Estimates</h2>

                            
                          </td>
                          <td class="PosixTime">1340017590000000
                          </td>
                          <td class="ModifiedTime">1346669497000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/329.html">#329</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.1.html">v1.1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/329.html">Bad dates cause exception on Gov form</a>
                          </td>
                          <td class="description">
                            <h2 id="Reproduction">Reproduction</h2>
<p>
Using the government form, create a new package with name 'test' and date released of '23/5/0210'. The result is a 500 error and 'Server Error' message.
</p>
<p>
Affects all versions of CKAN.
</p>
<h2 id="Whyitshappening">Why it's happening</h2>
<p>
The dates module is raising an exception on the invalid date when saving the date, which is not being caught. The exception should have been raised only during the earlier 'validation' step and that would be caught.
</p>

                            
                          </td>
                          <td class="PosixTime">1275060617000000
                          </td>
                          <td class="ModifiedTime">1275079189000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2322.html">#2322</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">ross
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-05-29.html">ckan-sprint-2012-05-29</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2322.html">Convenience offset on end of resource urls: /raw, /api, /viewer</a>
                          </td>
                          <td class="description">
                            <h2 id="Raw">Raw</h2>
<p>
/raw or /download (latter may be better)
</p>
<pre class="wiki">/dataset/{id}/resource/{resource-id}/raw

=&gt; redirects to resource url (download)
</pre><h2 id="API">API</h2>
<pre class="wiki">/dataset/{id}/resource/{resource-id}/api[/....]

=&gt; either redirects or directly serves /api/data/{resource-id}
</pre><h2 id="ViewerExplorer">Viewer (Explorer?)</h2>
<p>
Do data viewer but without anything else showing (full-screen?). this would not be just the data explorer but other cases too (including iframe etc ...)
</p>
<pre class="wiki">/dataset/{id}/resource/{resource-id}/viewer

Resource (pre)-viewer without anything else (perhaps include resource title)
</pre><hr />
<p>
Assigning for kindly for review.
</p>
<p>
These would take about 20m to implement and would be *very* convenient from my experience of using the data API.
</p>
<hr />
<p>
Implementation at enhancement-2322-convenience-urls
</p>

                            
                          </td>
                          <td class="PosixTime">1335236581000000
                          </td>
                          <td class="ModifiedTime">1344086640000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1076.html">#1076</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnlawrenceaspden
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4.html">ckan-v1.4</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1076.html">Improve revision and package purge system</a>
                          </td>
                          <td class="description">
                            <h2 id="PurgingRevisions">Purging Revisions</h2>
<ul><li>Delete button displayed on:
<ul><li>/revision/list
</li><li><del>(/package/history)</del>
<ul><li>/package/history is problematic because html does not allow nested forms and we already have form for doing diff/comparison.
</li></ul></li><li>/revision/{id}
</li></ul></li><li>Delete button submits to delete action on revision and changes revision state to 'deleted'.
<ul><li>undelete button now displayed and revisions are marked as deleted in some way (e.g. greyed out?)
</li></ul></li><li>Sysadmins then visit /ckan-admin/trash which lists all revisions with deleted state. There is a large button: "Empty trash" (irreversible). Click button purges all revisions with deleted state.
</li></ul><h2 id="PurgingPackages">Purging Packages</h2>
<ul><li>Put into deleted state.
</li><li>Listed on /ckan-admin/trash
</li><li>Separate Empty trash button which deletes all associated revisions.
<ul><li>Should be separate from Empty trash for revisions
</li></ul></li></ul><h2 id="Currentsystem">Current system</h2>
<ul><li>Single purge link on revision listing if a sysadmin which permanently purges the revision and all associated changes (without confirmation atm!)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1302283442000000
                          </td>
                          <td class="ModifiedTime">1303236302000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2500.html">#2500</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">ross
                          </td>
                          <td class="reporter">icmurray
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.8.html">ckan-v1.8</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2500.html">get_action should raise an exception if the action requested doesn't exist</a>
                          </td>
                          <td class="description">
                            <h2 id="Originalbugreport:">Original bug report:</h2>
<blockquote class="citation">
<p>
Hi CKAN devs,
</p>
<p>
Can I request that ckan.logic.get_action raises an exception if
the action requested doesn't exist?
</p>
</blockquote>
<blockquote class="citation">
<p>
Two of us had a frustrating time tracking down an exception this
morning. It's difficult when the exception is raised in python in a
template because you don't get a line number. The problem was caused
by a new logic function being added to another extension, and we
hadn't updated the code there. So if get_action raised an proper
exception rather than silently returning None then I think we'd have
found the problem quicker.
</p>
</blockquote>
<blockquote class="citation">
<p>
I'd write the code for this, but as I understand that the new system
would require a ticket, branch, pull request, code review, merge. It
seems a lot to do for such a small thing.
</p>
</blockquote>
<blockquote class="citation">
<p>
Dave
</p>
</blockquote>

                            
                          </td>
                          <td class="PosixTime">1339072580000000
                          </td>
                          <td class="ModifiedTime">1340293636000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1077.html">#1077</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1077.html">Move to simpler vdm system</a>
                          </td>
                          <td class="description">
                            <h2 id="Option1:ChangesetModel">Option 1: 'Changeset' Model</h2>
<p>
See <a class="assigned ticket" href="../ticket/1135.html" title="enhancement: Changeset model for vdm (assigned)">ticket:1135</a> for vdm ticket. This would involve a) moving to changeset in vdm b) doing the migration in ckan to support this.
</p>
<p>
Have developed a new "changeset" based model for revisioning in vdm. 
</p>
<h3 id="Implementation">Implementation</h3>
<ul><li>The main challenge with this change is schema and data migration
</li></ul><p>
Every revisioned object has a revision_id and revision attribute.
</p>
<p>
Approximate algorithm:
</p>
<pre class="wiki">Revision -&gt; Changeset

for revtype in [PackageRevision, ...]:
    for pkgrev in package_revision:
        changeset = lookupchangeset(package_revision)
        ChangeObject(cset, (table, id), dictize(pkgrev))
</pre><p>
Question:
</p>
<ul><li>does pkg include tags attributes or not? or we have to dictize, pkgrev, pkg2tagrev, and tag. Probably the latter.
</li></ul><h2 id="Option2:SimplifyRevisionObjectModel">Option 2: Simplify Revision Object Model</h2>
<p>
Just use a simpler vdm, see <a class="assigned ticket" href="../ticket/1136.html" title="enhancement: Move to SessionExtension in vdm (assigned)">ticket:1136</a> (move to SessionExtension) and <a class="assigned ticket" href="../ticket/1137.html" title="enhancement: Remove need for statefulness in vdm (assigned)">ticket:1137</a> (remove need for statefulness in vdm).
</p>
<h2 id="Discussion">Discussion</h2>
<p>
Advantage of Option 1 versus 2:
</p>
<ul><li>Easier support for pending state and similar behaviour
</li><li>No need to introduce new tables (and hence migrations) when making something revisioned (or not).
</li></ul><h3 id="Disadvantages">Disadvantages</h3>
<ul><li>Migration is required
</li><li>More difficult to query revision history.
<ul><li>Could be addressed by having ChangeObject have separate cols for table name and id but would likely be more difficult.
</li></ul></li><li>Performance (?)
<ul><li>Have one big ChangeObject table to query when looking at changed objects rather than many revision tables.
<ul><li>Not sure this is a biggie as even with Revision model biggest revision object tables are probably on the order of the ChangeObject table
</li></ul></li></ul></li></ul><h2 id="Conclusion">Conclusion</h2>
<p>
Implement Option 2 and leave Option 1 for present.
</p>
<p>
Option 1 includes Option 2 so it seems that that is required in either case (so we may as well with Option 2).
</p>
<p>
Option 1 requires significant effort (esp migration) so leave for present and then review the situation at some later date.
</p>

                            
                          </td>
                          <td class="PosixTime">1302304464000000
                          </td>
                          <td class="ModifiedTime">1340034345000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/25.html">#25</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.6.html">v0.6</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/25.html">Autocompletion (and suggestion) of package tags when adding tags to a package</a>
                          </td>
                          <td class="description">
                            <h2 id="Notes">Notes</h2>
<ul><li>Currently have a text box where users can add space separated tags
</li><li>Tags should auto-complete in a manner similar to delicious
</li><li>would also be good to have a list of suggested tags. This could either be:
<ul><li>[simpler] a list below the tag box chosen by existing popularity  or
</li><li>[more complex] a list of suggestions that updates as you add tags (based again on popularity but 'filtered/reranked' to reflect choices so far).
</li><li>For first attempt to should probably just go for the simpler option.
</li></ul></li></ul>
                            
                          </td>
                          <td class="PosixTime">1152551313000000
                          </td>
                          <td class="ModifiedTime">1204131522000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1506.html">#1506</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">zephod
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-03-05.html">ckan-sprint-2012-03-05</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1506.html">[super] UX improvements to dataset edit, create and search + group + user page (Dec 2011)</a>
                          </td>
                          <td class="description">
                            <h2 id="HistoricalParentTickets">Historical Parent Tickets</h2>
<ul><li><del>Parent-ticket: <a class="closed ticket" href="../ticket/1450.html" title="enhancement: Simplify dataset view page (closed: fixed)">#1450</a></del>
</li><li><del>Parent-ticket: <a class="closed ticket" href="../ticket/1032.html" title="enhancement: [super] Resources in WUI (closed: fixed)">#1032</a></del>
</li></ul><h2 id="StepZero">Step Zero</h2>
<ul><li><del>COMPLETELY REDESIGN resource edit process</del>
</li></ul><h2 id="DatasetEdit-Resources">Dataset Edit-Resources</h2>
<ul><li><del>Force format field to be lowercase</del>
<ul><li><del>Modify backend to serve it up in that format</del>
</li></ul></li><li><del>Subticket <a class="closed ticket" href="../ticket/978.html" title="enhancement: Edit Resource including Extras in Web UI (closed: fixed)">#978</a>: Add extra fields to resources in Web UI</del>
</li><li><del>Fix display of large datasets (<a class="ext-link" href="http://test.ckan.net/dataset/europeana-lod"><span class="icon">​</span>http://test.ckan.net/dataset/europeana-lod</a>)</del>
</li><li><del>When submitting forms with errors, open the correct resource pane.</del>
</li><li><del>No hint is given that the time format for a resource is in ISO, eg 2005-01-01T10:10:10</del>
</li><li><del>Resource description field to become the markdown editor we use everywhere else.</del>
</li></ul><h2 id="DatasetSettings">Dataset Settings</h2>
<ul><li><del>Subticket <a class="closed ticket" href="../ticket/1648.html" title="enhancement: Clarify that additional info = extra fields + add guidance (closed: fixed)">#1648</a>: Clarify edit terminology</del>
</li><li><del>Merge Groups and Tags into main Settings section (no point having them on their own and most people will miss this).</del>
</li><li><del>Fix (i.e. allow / show) name editing on dataset edit.</del>
<ul><li><del>Fix the slugify so it does not overwrite if i change title after fixing name.</del>
</li><li><del>Make slugify encourage people to use shorter names. Either by cutting off (not so good) or showing a warning and saying something like 'hey you may want to cut this down. Hit edit to customize the dataset name now'</del>
</li></ul></li><li><del>Autocomplete the author/maintainer box (requires API extension?)</del> [WONTFIX what? it's not like that field is linked to users of the site or anything]
</li></ul><h2 id="DatasetView">Dataset View</h2>
<ul><li><del>Fix animation glitch in expanding description</del>
</li><li><del>Can we make the list of files look more like a table? Lose space between files? Lose rounded corners?</del>
</li><li><del>Verify that there are no more (none) placeholder &lt;td&gt; objects (i believe they've been refactored out)</del>
</li></ul><h2 id="DatasetCreate">Dataset Create</h2>
<ul><li><del>"Upload or link data files, APIs and other materials related to your dataset."</del>
</li><li><del>Include the description markdown editor again (keep it small)</del>
</li><li><del>Licence should maybe be restored</del>
<ul><li><del>"(Don't worry if you don't know what your licence is)"</del>
</li></ul></li><li><del>Show the log message field</del>
<ul><li><del>Beautify</del>
</li></ul></li><li><del>Pre-populate the log message field?</del>
</li><li><del>? Show Home Page field when creating dataset</del> [WONTFIX don't push it]
</li><li><del>?  Do some Guerilla UX to see whether we need to Redirect to Resources directly after dataset creation?</del> [WONTFIX doesnt make sense with new resource editor awesomeness]
</li></ul><h2 id="Userpages">User pages</h2>
<ul><li><del>Improvements to user page UX - 1d - <a class="closed ticket" href="../ticket/1396.html" title="enhancement: Improvements to user page UX - 1d (closed: fixed)">#1396</a></del>
</li><li><del>Broken links for non-Gravatar use icons - 0.25d - <a class="closed ticket" href="../ticket/1719.html" title="defect: Broken links for non-Gravatar use icons - 0.25d (closed: fixed)">#1719</a></del>
</li></ul><h2 id="Etc">Etc</h2>
<ul><li>Take before and after screenshots
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1323088306000000
                          </td>
                          <td class="ModifiedTime">1330702859000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1293.html">#1293</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">zephod
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-09-12.html">ckan-sprint-2011-09-12</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1293.html">Rename Package to Dataset throughout WUI, API</a>
                          </td>
                          <td class="description">
                            <h2 id="Changes">Changes</h2>
<ul><li>All templates
</li><li>[DONE] Routing: /package/ -&gt; /dataset/ (including API)
</li><li>[DONE] Tests: self.app.get('/dataset/...') rather than package ...
<ul><li>One test to check redirect works?
</li></ul></li><li>Docs
</li></ul><h2 id="Leave">Leave</h2>
<ul><li>Stay with Package in code e.g. stay with '<a class="missing wiki">PackageController?</a>'
<ul><li>also leave stuff like pkg = .... (gradual migration)
</li></ul></li><li>Leave extensions
</li></ul><h2 id="Notes">Notes</h2>
<ul><li>Package -&gt; Dataset
</li><li>Data Package -&gt; Dataset
</li><li>respect capitalization
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1314405700000000
                          </td>
                          <td class="ModifiedTime">1317649968000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/362.html">#362</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/362.html">Ratings should not be created with a GET</a>
                          </td>
                          <td class="description">
                            <h2 id="Background">Background</h2>
<p>
In the Web UI, when you rate a package it simply links to something like:
</p>
<p>
<a class="ext-link" href="http://ckan.net/package/rate/mke-liquor-licenses?rating=3"><span class="icon">​</span>http://ckan.net/package/rate/mke-liquor-licenses?rating=3</a>
</p>
<p>
This creates a GET request. 
</p>
<p>
This is bad because:
</p>
<ul><li>Search engine crawlers follow links to find pages, and in this case end up creating a rating (although we've got a robots.txt to try and avoid this)
</li><li>There are occasions when we want to make a CKAN instance read-only, so we put a &lt;<a class="missing wiki">LimitExcept?</a> GET&gt; Apache instruction in. But the database may still get written for these ratings.
</li><li>Best practise for web requests is for GET to be a read-only request.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1278925451000000
                          </td>
                          <td class="ModifiedTime">1311176564000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/352.html">#352</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/352.html">Package notification worker - sends XML-RPC</a>
                          </td>
                          <td class="description">
                            <h2 id="Asan">As an</h2>
<p>
external front-end
</p>
<h2 id="Iwantto">I want to</h2>
<p>
be notified (by XML-RPC) about package creations and updates.
</p>
<h2 id="Implementation">Implementation</h2>
<ol><li>A message queue worker waits for package update notifications
</li><li>On reception, it constructs XML detailing the changes and PUSHes it to a configured URI.
</li></ol><p>
Rather than turning the package fields into XML fields, the JSON dump of the list of package dictionaries will become a single XML parameter.
</p>
<p>
Config - in the CKAN config will be:
</p>
<ul><li>URI to callback to
</li><li>API version to use (version 2 gives packages referred by ID not name)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1276597996000000
                          </td>
                          <td class="ModifiedTime">1286375870000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/407.html">#407</a>
                          </td>
                          <td class="type">requirement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/407.html">Link to Scraperwiki</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
user browsing a CKAN package which has a resource in a bad format
</p>
<h2 id="Iwantto">I want to</h2>
<p>
be alerted to the possibility of scraping it on scraperwiki
</p>
<h2 id="Implementation">Implementation</h2>
<p>
This should be done in a CKAN extension. It should appear in a side-bar on the package read page.
</p>
<p>
If the package does not have a resource with scraperwiki.com in the url, then it displays this message:
</p>
<p>
Title: Scrape it<br />
Image: (Scraperwiki dumper truck)<br />
Body text: Could this data be in a better format? Why not use Scraperwiki to extract data from tables, Excel or PDF for everyone's benefit? You can <a class="ext-link" href="http://scraperwiki.com/market/request/"><span class="icon">​</span>request</a> this data is scraped or even <a class="ext-link" href="http://scraperwiki.com/editor/"><span class="icon">​</span>write the scraper</a> yourself.
</p>

                            
                          </td>
                          <td class="PosixTime">1281348368000000
                          </td>
                          <td class="ModifiedTime">1330769956000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/335.html">#335</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.1.html">v1.1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/335.html">Post-package-edit redirect to configurable URL</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
third-party interface to a CKAN instance
</p>
<h2 id="Iwantto">I want to</h2>
<p>
link to CKAN's package creation/editing pages. On 'commit', have the user redirected back to a URL in my interface that I can control. Also, when the package is created new, I need to be told what the new package's name is on return.
</p>
<h2 id="Design">Design</h2>
<ol><li>The 'return URL' is passed as a parameter to CKAN.
</li><li>CKAN substitutes the package name into the return URL.
</li></ol><p>
 
</p>
<h2 id="Example">Example</h2>
<p>
Front-end links to:
http://ca.ckan.net/package/new?return_to=http://datadotgc.ca/dataset/&lt;NAME&gt; (but with the parameter URL-encoded)
</p>
<p>
When finished editing and the user commits, CKAN redirects the user to: http://datadotgc.ca/dataset/pollution_data
</p>

                            
                          </td>
                          <td class="PosixTime">1275408834000000
                          </td>
                          <td class="ModifiedTime">1276179605000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/197.html">#197</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.11.html">v0.11</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/197.html">Simple dumper</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
admin / user 
</p>
<h2 id="Iwantto">I want to</h2>
<p>
Admin: export all HEAD data to JSON / CSV / RDF format dump.
</p>
<p>
User: wants to get hold of this dump.
</p>
<h2 id="Details">Details</h2>
<ul><li>Just do JSON &amp; CSV for now.
</li><li>Put this in CLI.
</li><li>Just do list of packages - as_dict info. CSV needs a bit of flattening.
</li></ul><p>
Cost: 2h
</p>

                            
                          </td>
                          <td class="PosixTime">1258972495000000
                          </td>
                          <td class="ModifiedTime">1258989700000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/204.html">#204</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.11.html">v0.11</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/204.html">Custom package input form</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
admin
</p>
<h2 id="Iwantto">I want to</h2>
<p>
input government data in a constrained way 
</p>
<h2 id="sothat">so that</h2>
<p>
you get consistency in the db which is easily searched, discovered and automatically linked.
</p>
<h2 id="implementation">implementation</h2>
<p>
Form has fields suitable for government data.
(related to custom excel importer ticket)
</p>
<p>
In pylons config specify the form schema to use - whether the existing one or the government one.
</p>
<p>
<strong>On submission, during validation, warn if a field isn't completed (unless it's optional - agency, maintainer, maintainer_email)</strong>
</p>
<h3 id="Simplefields">Simple fields</h3>
<ul><li>all basic ckan fields
</li><li>default license to OKD::Crown Copyright
</li><li>co_id, precision, taxonomy url, agency
</li></ul><h3 id="Datefields">Date fields</h3>
<p>
Date format: machine readable. Can be specific or vague: year or month/year or day/month/year.
</p>
<ul><li>date_released
</li></ul><ul><li>date_updated
</li></ul><ul><li>temporal_coverage_from, temporal_coverage_to - two date fields combined
</li></ul><h3 id="Strictselection">Strict selection</h3>
<p>
Drop down combo
</p>
<ul><li>department
</li></ul><h3 id="Selectionorfreetext">Selection or free text</h3>
<p>
Editable combo
</p>
<ul><li>update_frequency - selections: never, weekly, monthly, annually, discontinued
</li></ul><ul><li>geographic_granularity - selections: national, regional, local authority, ward, point
</li></ul><ul><li>temporal_granularity - selections: yes, months, weeks, days, hours, point
</li></ul><h3 id="Specialisedfields">Specialised fields</h3>
<ul><li>geographic_coverage - UI is tick boxes. store a comma separated list of all that apply from: england, scotland, wales, northern ireland, overseas, global
</li></ul><p>
(Idea for future version: Select the most relevant one from a choice of OS hierarchical geographic IDs in the UK. Stored in the database as the RDF URI. Question - what to do beyond the UK?)
</p>
<ul><li>national_statisic - UI is check box, store as 'Yes' or 'No'
</li></ul><ul><li>resources - use standard table, but suggestions for file type are: RDF, CSV, SPARQL, REST, XBRL, SDMX, Other XML, HTML+RDFa, XLS, DOC. Have warning label saying it is not ideal to have PDF, zip or html targets.
</li></ul><ul><li>categories - multi values from strict selection of ONS categories. Stored as comma-separated.
</li></ul><h3 id="Fielddataprocessed">Field data processed</h3>
<ul><li>tags - in addition to words entered here, search for known keywords in other fields: title, notes, department, agency, geographic coverage &amp; categories.
</li></ul><h3 id="Future-optional">Future - optional</h3>
<p>
Each form schemas is made available (or not) in the pylons config, along with the default schema for new packages. If there is more than just the 'basic' schema available then the 'new package' form has at the top a drop-down to select the schema with a 'switch' button. This submits the form's current data and parameter schema=xyz and the form arrives back populated with the existing options. No data should be lost switching views.
</p>
<p>
When you edit a package it detects the schema based on the extra fields that are present.
</p>

                            
                          </td>
                          <td class="PosixTime">1260188965000000
                          </td>
                          <td class="ModifiedTime">1285082169000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/8.html">#8</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/8.html">View file</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
Visitor
</p>
<h2 id="Iwantto">I want to</h2>
<p>
View the files associated with a package.
</p>
<h2 id="Notes">Notes</h2>
<ul><li>See also <a class="closed ticket" href="../ticket/16.html" title="enhancement: Update a file (closed: invalid)">ticket:16</a> (updating a file).
</li><li>Files should either be listed on the same page as a release or there should be a link from the release page to a page listing all the files associated with the release. See also <a class="closed ticket" href="../ticket/14.html" title="enhancement: Update a release (closed: invalid)">ticket:14</a> (update a release)
</li></ul><p>
  
</p>

                            
                          </td>
                          <td class="PosixTime">1152550057000000
                          </td>
                          <td class="ModifiedTime">1250619147000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/6.html">#6</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">somebody
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/milestone1.html">milestone1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/6.html">View a package</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
Visitor
</p>
<h2 id="Iwantto">I want to</h2>
<p>
View the details of an individual package
</p>
<h2 id="Sothat">So that</h2>
<p>
I know more about the package. Attributes available are detailed in updating a package (../UseCase12)
</p>

                            
                          </td>
                          <td class="PosixTime">1152549960000000
                          </td>
                          <td class="ModifiedTime">1183648175000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/32.html">#32</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.3.html">v0.3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/32.html">View a tag</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
Visitor
</p>
<h2 id="Iwantto">I want to</h2>
<p>
View a tag's page which should list all packages associated with that tag (or link to a page containing that list).
</p>
<h2 id="Notes">Notes</h2>
<ul><li>The tags should have a nice primary url such as /tag/&lt;tag-name&gt; (could also use the plural i.e. /tag/&lt;tag-name&gt;)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1157375968000000
                          </td>
                          <td class="ModifiedTime">1185472746000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/33.html">#33</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.5.html">v0.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/33.html">List and search tags</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
Visitor
</p>
<h2 id="Iwantto">I want to</h2>
<p>
View a list of the tags on the system and search for a tag by name
</p>
<h2 id="Notes">Notes</h2>
<ul><li>As for a search of packages should search for tags that contains a given search string (or could use a glob approach allowing wildcards).
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1157375983000000
                          </td>
                          <td class="ModifiedTime">1199788094000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/3.html">#3</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">somebody
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/milestone1.html">milestone1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/3.html">Login to the service</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
Visitor
</p>
<h2 id="Iwantto">I want to</h2>
<p>
Login to the service
</p>
<h2 id="Sothat">So that</h2>
<p>
I am now an authenticated user and may perform the actions that only authenticated users may perform
</p>
<h2 id="Notes">Notes</h2>
<ul><li>Login by providing username and password
</li><li>Login screen should also include a link or information about registration
</li><li>If username do not match (or the username does not exist) a login failure is noted and the visitor is re-presented with the login screen as well as information on how to register
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1152549717000000
                          </td>
                          <td class="ModifiedTime">1152553322000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/4.html">#4</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">somebody
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.7.html">v0.7</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/4.html">Find a package</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
Visitor
</p>
<h2 id="Iwantto">I want to</h2>
<p>
Locate packages that I am, or might be, interested in
</p>
<h2 id="Sothat">So that</h2>
<p>
I know what packages exist and can read the information associated with those packages
</p>
<h2 id="Notes">Notes</h2>
<p>
Find a package by searching by (or some combination thereof):
</p>
<ol><li>tag
</li><li>string contained in title or description
</li><li>license
</li></ol>
                            
                          </td>
                          <td class="PosixTime">1152549820000000
                          </td>
                          <td class="ModifiedTime">1223908381000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/5.html">#5</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.3.html">v0.3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/5.html">Browse list of packages and select one to view</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
Visitor
</p>
<h2 id="Iwantto">I want to</h2>
<p>
Browse a list of packages resulting from a search or browse request (see other use cases)
</p>
<h2 id="Sothat">So that</h2>
<p>
I can select one of the packages to view in more detail (-&gt; viewing an individual package <a class="closed ticket" href="../ticket/6.html" title="enhancement: View a package (closed: fixed)">ticket:6</a>)
</p>
<h2 id="Notes">Notes</h2>
<ul><li>When browsing a list of packages you should be able to see summary information about the package such as title (though this may be shortened in order to conveniently fit the list 
</li><li>The list should be broken up into pages so that the number of packages per page should be kept to a reasonable number (&lt;= 50). Response time should be kept reasonable
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1152549884000000
                          </td>
                          <td class="ModifiedTime">1185473622000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2.html">#2</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">somebody
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/milestone1.html">milestone1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2.html">Register as user on the service</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
Visitor
</p>
<h2 id="Iwantto">I want to</h2>
<p>
Be able to register as a user on the service
</p>
<h2 id="Sothat">So that</h2>
<p>
One can login and be an authenticated user and perform the actions that only authenticated users can perform
</p>
<h2 id="Notes">Notes</h2>
<ul><li>Registration involves the provisional of a minimal set of user details, namely:
<ol><li>username (unique in lifetime of the service)
</li><li>fullname
</li><li>email
</li><li>password
</li></ol></li></ul>
                            
                          </td>
                          <td class="PosixTime">1152549635000000
                          </td>
                          <td class="ModifiedTime">1152553157000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/130.html">#130</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.10.html">v0.10</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/130.html">Create a New Group via the WUI</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
User
</p>
<h2 id="Iwantto">I want to</h2>
<p>
Create a new group via the WUI
</p>
<h2 id="Details">Details</h2>
<ul><li>locate at /group/new/
</li><li>You must be logged in to create a group
</li><li>Group creator is automatically given role of group admin
</li><li>Edit screen is same as edit screen ...
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1254130212000000
                          </td>
                          <td class="ModifiedTime">1254735501000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/353.html">#353</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/353.html">SOLR search indexing</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
SOLR instance
</p>
<h2 id="Iwantto">I want to</h2>
<p>
keep my search index of CKAN packages up-to-date 
</p>
<h2 id="Implementation">Implementation</h2>
<ul><li>Using asynchronous event notifications
</li><li>Running in a separate process to CKAN
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1277123480000000
                          </td>
                          <td class="ModifiedTime">1280756399000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/31.html">#31</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">somebody
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/31.html">Add a comment to a package</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
Registered user
</p>
<h2 id="Iwantto">I want to</h2>
<p>
Add a comment to a package
</p>
<h2 id="Notes">Notes</h2>
<ul><li>The comment should be tagged with the username of the person making the comment
</li><li>Should we allow comments per release as well as per package? <strong>No</strong> for the time being.
</li><li>Comments will be 'flat' and <strong>not</strong> threaded (at least for the present)
</li><li>Comments should be plain text and so html should be escaped (in the future we might look to use some kind of formatter such as markdown)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1157374505000000
                          </td>
                          <td class="ModifiedTime">1185472236000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/342.html">#342</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/342.html">JSONP parameter in API</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
CKAN client using JQuery
</p>
<h2 id="Iwantto">I want to</h2>
<p>
call the CKAN API and instead of receiving back JSON I get JSONP. i.e. "%s(%s)" % (callback, json_content)
</p>
<h2 id="Suggestedimplementation">Suggested implementation</h2>
<p>
All API calls allow the JSONP 'callback' parameter to be specified in the request and this wraps the JSON response. See suggested patch to rest.py by Donovan Hide:
</p>
<p>
<a class="ext-link" href="http://knowledgeforge.net/ckan/trac/attachment/ticket/336/resource.patch"><span class="icon">​</span>http://knowledgeforge.net/ckan/trac/attachment/ticket/336/resource.patch</a>
</p>
<h2 id="Test">Test</h2>
<p>
import re
import unittest
</p>
<p>
def test_jsonp_callback():
</p>
<blockquote>
<p>
response = self.app.get('/api/search/resource/?url=<a class="ext-link" href="http://www.scraperwiki.com&amp;callback=jsoncallback"><span class="icon">​</span>http://www.scraperwiki.com&amp;callback=jsoncallback</a>')
match = re.match('jsoncallback\(.*\);',response)
self.assertTrue(match)
</p>
</blockquote>
<blockquote>
<p>
response = self.app.get('/api/search/resource/?url=<a class="ext-link" href="http://www.scraperwiki.com"><span class="icon">​</span>http://www.scraperwiki.com</a>')
match = re.match('jsoncallback\(.*\);',response)
self.assertFalse(match)
</p>
</blockquote>
<p>
I think the point needs to be made that JSONP only works for GET
requests and not POST/PUT/DELETE, so there needs to be a check
for that in the _finish_ok method.
</p>
<p>
(thanks to Donovan Hide for test)
</p>

                            
                          </td>
                          <td class="PosixTime">1276166426000000
                          </td>
                          <td class="ModifiedTime">1276278485000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/336.html">#336</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">donovanhide
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.1.html">v1.1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/336.html">Resource Search API</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
CKAN client such as ScraperWiki
</p>
<h2 id="Iwantto">I want to</h2>
<p>
search for Package Resources, either by URL or other field, or just get them all. I want to be able to get all the resource's fields, such as URL.
</p>
<h2 id="Proposedimplementation">Proposed implementation</h2>
<p>
Add resource search API at:
</p>
<p>
/api/search/resource
</p>
<p>
AND resource added to model API at:
</p>
<p>
api/rest/resource
</p>
<blockquote>
<p>
(see <a class="closed ticket" href="../ticket/358.html" title="enhancement: Resources in REST API (closed: duplicate)">ticket:358</a>)
</p>
</blockquote>
<p>
Functional differences from the ScraperWiki suggested patch:
</p>
<ul><li>URL is not normalised
</li></ul><p>
 
</p>
<ul><li>URLs are not grouped
</li></ul><ul><li>All fields of the resource object are returned, not just the URL
</li></ul><ul><li>Package is identified by its ID, not name or full URL. (This is for consistency in the API - you can simple prepend '<a class="ext-link" href="http://ckan.net/package/"><span class="icon">​</span>http://ckan.net/package/</a>' to the package ID)
</li></ul><p>
This is to make our API more general, simple and consistent. It means that the ScraperWiki client has to do a bit more processing to get exactly what it needs. Is this ok?
</p>
<h3 id="Examplesearch">Example search</h3>
<p>
POST 
</p>
<pre class="wiki">{"url": "scraperwiki.com/", "all_fields": 1}
</pre><p>
to: /api/2/search/resource
</p>
<p>
returns JSON:
</p>
<pre class="wiki"> [{"id": "a3dd8f64-9078-4f04-845c-e3f047125028",
   "package_id": "b8a325c8-af2a-43f3-8245-9db7d73dfbfe",
   "URL": "http://scraperwiki.com/lincolnshire-councillors", 
   "format": "CSV", 
   "Description": "Scrape of www.lincs.gov/councillors.pdf by ScraperWiki.",
   "hash": "", 
   "position": 2
 }]
</pre><p>
Note use of package_id instead of package_name is something we're moving towards in the API, since names can change. When we've done <a class="closed ticket" href="../ticket/341.html" title="enhancement: Web UI accepts package IDs in URLs (closed: fixed)">ticket:341</a> then ckan.net/package/lincs-councillors will be a synonym of ckan.net/package/b8a325c8-af2a-43f3-8245-9db7d73dfbfe
</p>
<h3 id="SearchParameters">Search Parameters</h3>
<pre class="wiki">Key:  q
Description: Search all resource fields for the value

Key: url / description / format / 
Description: Search particular field for the value

Key: all_fields
Value: 0 or 1 (0 is default)
Description: If 1 (true), the full record of the package resource
(and it's package reference) are returned, rather than just the
PackageResource ID.
</pre><p>
May also choose to introduce 'offset' and 'limit' to page through a large number of results.
</p>
<p>
JSONP achieved through API-wide parameter - see <a class="closed ticket" href="../ticket/342.html" title="enhancement: JSONP parameter in API (closed: fixed)">ticket:342</a>
</p>
<p>
Search is case insensitive.
</p>
<h2 id="Originalrequest">Original request</h2>
<p>
Hi,
have attached a patch for adding a resource list api call. Have also added a JSONP compatible callback section, along the lines of <a class="closed ticket" href="../ticket/388.html" title="task: Reply to &#34;two projects&#34; question from RS (closed: fixed)">#388</a>.
</p>
<p>
Could also add a search version. Not sure what the best url would be for that though.
</p>
<p>
Haven't written a test as the structure seems to follow a functional spec. Is that document around somewhere?
</p>
<p>
Donovan
</p>

                            
                          </td>
                          <td class="PosixTime">1275411765000000
                          </td>
                          <td class="ModifiedTime">1279373842000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/10.html">#10</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/milestone15.html">milestone15</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">worksforme
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/10.html">Update package</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
Authenticated user
</p>
<h2 id="Iwantto">I want to</h2>
<p>
Update the attributes of a package and add/remove releases
</p>
<h2 id="Sothat">So that</h2>
<p>
The package attributes are changed. Package attributes are:
</p>
<ul><li>A title
</li><li>A description (short or long)
</li><li>Date added
</li><li>Project url
</li><li>package license(s)
</li><li>download url
</li><li>A list of releases with their dates and a summary line
</li><li>a list of owners (referencing authenticated users)
</li></ul><p>
I would also like to be able to add comments
</p>
<h2 id="Notes">Notes</h2>
<ul><li>Only an authenticated user is one of owners of a package may update it
</li><li>Any authenticated user may add comments (but visitors may not)
</li><li>can break down into:
<ul><li>Update a package by changing simple package attributes (value: 8)
</li><li>Update a package by adding or removing an owner (value: 5)
</li><li>Update a package by adding or removing comments (value: 7)
</li></ul></li></ul>
                            
                          </td>
                          <td class="PosixTime">1152550243000000
                          </td>
                          <td class="ModifiedTime">1183648150000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/14.html">#14</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/14.html">Update a release</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
Authenticated user
</p>
<h2 id="Iwantto">I want to</h2>
<p>
Update a release
</p>
<h2 id="Sothat">So that</h2>
<p>
The release details are amended. Attributes of a release are:
</p>
<ul><li>name (may include '.' and '-'
</li><li>nickname
</li><li>date
</li><li>description
</li></ul><h2 id="Notes">Notes</h2>
<ul><li>permissions: as for updating a package (<a class="closed ticket" href="../ticket/10.html" title="enhancement: Update package (closed: worksforme)">ticket:10</a>)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1152550712000000
                          </td>
                          <td class="ModifiedTime">1204136163000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/16.html">#16</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/16.html">Update a file</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
Authenticated user
</p>
<h2 id="Iwantto">I want to</h2>
<p>
Update a file associated with a release
</p>
<h2 id="Sothat">So that</h2>
<p>
The file attributes are changed. File attributes are:
</p>
<ul><li>(internal) id
</li><li>description
</li><li>source: (url usually)
</li></ul><h2 id="Notes">Notes</h2>
<ul><li>Permissions are as for package updating
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1152550796000000
                          </td>
                          <td class="ModifiedTime">1250619162000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/11.html">#11</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/milestone16.html">milestone16</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/11.html">Delete package</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
Authenticated user
</p>
<h2 id="Iwantto">I want to</h2>
<p>
Delete a package
</p>
<h2 id="Sothat">So that</h2>
<p>
So that the package is no longer displayed for visitors of the site
</p>
<h2 id="Notes">Notes</h2>
<ul><li>The permissions for this action are the same as for updating the package details (see <a class="closed ticket" href="../ticket/10.html" title="enhancement: Update package (closed: worksforme)">ticket:10</a>)
</li><li>When a package is deleted it is put in an inactive state and is invisible to users and vistors of the service. However its name remains reserved and it may be undeleted or purged by the service administrator
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1152550328000000
                          </td>
                          <td class="ModifiedTime">1157371568000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/12.html">#12</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/12.html">Create a release associated with a package</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
Authenticated user
</p>
<h2 id="Iwantto">I want to</h2>
<p>
Create a release associated with a package
</p>
<h2 id="Sothat">So that</h2>
<p>
The package has a new release
</p>
<h2 id="Notes">Notes</h2>
<ul><li>Permissions are as for updating a package <a class="closed ticket" href="../ticket/10.html" title="enhancement: Update package (closed: worksforme)">ticket:10</a>
</li><li>for details of release attributes see: updating a release <a class="closed ticket" href="../ticket/14.html" title="enhancement: Update a release (closed: invalid)">ticket:14</a>
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1152550407000000
                          </td>
                          <td class="ModifiedTime">1204135071000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/15.html">#15</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/15.html">Create a file</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
Authenticated user
</p>
<h2 id="Iwantto">I want to</h2>
<p>
Create a file associated with a release
</p>
<h2 id="Sothat">So that</h2>
<p>
The release has a new file associated with it
</p>
<h2 id="Notes">Notes</h2>
<ul><li>Permissions are as for package updating (see <a class="closed ticket" href="../ticket/10.html" title="enhancement: Update package (closed: worksforme)">ticket:10</a>)
</li><li>file attributes are described in file updating: <a class="closed ticket" href="../ticket/16.html" title="enhancement: Update a file (closed: invalid)">ticket:16</a>)
<ul><li>there are no attributes that are required to be supplied to create a file
</li></ul></li></ul>
                            
                          </td>
                          <td class="PosixTime">1152550770000000
                          </td>
                          <td class="ModifiedTime">1250619139000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/9.html">#9</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">somebody
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/milestone1.html">milestone1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/9.html">Register new package</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
Authenticated User
</p>
<h2 id="Iwantto">I want to</h2>
<p>
Create/register a package
</p>
<h2 id="Sothat">So that</h2>
<p>
The package will be listed in the system and visible to users
</p>
<h2 id="Notes">Notes</h2>
<ul><li>Full package registration process may be broken down into:
<ol><li>Creating a package by provision of minimal attributes:
<ol><li>name: unique and web-usable
</li><li>auto-generation of default values such as:
<ol><li>date-registered (today's date)
</li><li>first owner (one owner should be created corresponding to the authenticated user performing this action)
</li></ol></li><li>(?) auto-generate a default release
</li></ol></li><li>updating the created package -&gt; ../UseCase12
</li></ol></li></ul>
                            
                          </td>
                          <td class="PosixTime">1152550171000000
                          </td>
                          <td class="ModifiedTime">1152555104000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/56.html">#56</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.8.html">v0.8</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/56.html">Show icons indicating package openness</a>
                          </td>
                          <td class="description">
                            <h2 id="AsA">As A</h2>
<p>
User or Visitor
</p>
<h2 id="IWantTo">I Want To</h2>
<p>
See simple icons (e.g. tick/cross) next to packages (in lists or on main page) indicating openness status of package.
</p>
<h2 id="SoThat">So That</h2>
<p>
It is easy to see the openness status of a package.
</p>
<h2 id="Details">Details</h2>
<p>
  
</p>
<ul><li>Suggested by Liz Turner
</li><li>Openness = open license at present (no easy way to determine whether accessible)
</li><li>Have separate tick for downloadability (i.e. existence of download url)
</li><li>Could do more stuff in future (e.g. money where tag price- exists, etc etc)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1230211123000000
                          </td>
                          <td class="ModifiedTime">1239018857000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/30.html">#30</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">zool
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.3.html">v0.3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/30.html">Tags are added to a package by package owner</a>
                          </td>
                          <td class="description">
                            <h2 id="AsA">As A</h2>
<p>
Site User
</p>
<h2 id="IWantTo">I Want To</h2>
<p>
<a class="missing wiki">Create/Edit/Update/Delete?</a> tags associated with my package
</p>
<h2 id="Notes">Notes</h2>
<ul><li>Tags are service-wide and <strong>not</strong> package specific
</li><li>Tags should not allow spaces (but allow everything else e.g. ':')
</li><li>web interface details
<ul><li>should provide a text box where users can add space separated tags (a la delicious).
</li><li>tag creation should be seemless (so if a tag does not already tag exists it should automatically be created in the background)
</li><li>would like to provide a list of relevant existing tags. For time being could just list all existing tags below entry box but in long run would like auto-updating/auto-suggesting listing a la delicious 
</li></ul></li></ul>
                            
                          </td>
                          <td class="PosixTime">1155905753000000
                          </td>
                          <td class="ModifiedTime">1185472559000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/20.html">#20</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.3.html">v0.3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/20.html">Purge a package</a>
                          </td>
                          <td class="description">
                            <h2 id="AsA">As A</h2>
<p>
Administrator
</p>
<h2 id="Iwantto">I want to</h2>
<p>
Purge a deleted package
</p>
<h2 id="Notes">Notes</h2>
<ul><li>this need only be possible via the admin interface
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1152550910000000
                          </td>
                          <td class="ModifiedTime">1185473187000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1289.html">#1289</a>
                          </td>
                          <td class="type">CREP
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1289.html">Remove 'relationships'</a>
                          </td>
                          <td class="description">
                            <h2 id="Abstract">Abstract</h2>
<p>
Package Relationships have not taken off in the 18 months we've had them in the API. There are some issues with them and we need to spend more time improving them or consider getting rid of them.
</p>
<h2 id="TheProblem">The Problem</h2>
<p>
Original use cases are expressed here: <a class="assigned ticket" href="../ticket/253.html" title="enhancement: Package relationships (assigned)">#253</a> Here are comments about how we could handle these specific examples better:
</p>
<ol><li>groups of packages - maybe better with a custom tag?
</li><li>fragment resources - soon to be covered by 'kind' resource field <a class="closed ticket" href="../ticket/957.html" title="enhancement: new &#34;kind &#34; field added to resources (closed: wontfix)">#957</a>
</li></ol><p>
3&amp;5. derived resource - better to have some sort of resource relationship perhaps?
</p>
<ol start="4"><li>linked resource - again better to have some sort of resource relationship perhaps?
</li></ol><p>
Outstanding issues needing serious effort to fix:
</p>
<ul><li><a class="assigned ticket" href="../ticket/256.html" title="requirement: Package relationships - 3. Edit in WUI (assigned)">#256</a> Editing them in Web UI (not done yet)
</li><li><a class="new ticket" href="../ticket/1288.html" title="defect: Package edit/creation can't include 'relationships' field (new)">#1288</a> Package edit/creation can't include 'relationships' field
</li></ul><h2 id="Specification">Specification</h2>
<p>
Remove relationships from model, API, tests, Web UI. Data migration to remove from db.
</p>
<h2 id="Whydoitthisway">Why do it this way</h2>
<p>
Getting frustrated having problems with the code, when it's not used much. Often asked about what it's for, but rarely used. Seems an overly complicated design.
</p>
<h2 id="BackwardsCompatibility">Backwards Compatibility</h2>
<p>
n/a
</p>
<h2 id="Implementationplan">Implementation plan</h2>
<h3 id="Deliverables">Deliverables</h3>
<p>
See Specification
</p>
<h3 id="Risksandmitigations">Risks and mitigations</h3>
<p>
Risk: a customer suddenly wants this, and the new ways to relate resources are not in place yet.
</p>
<p>
Mitigation: discuss this decision thoroughly to make sure we are confident the use cases are not important. Discuss with team, ckan-discuss and specifically the LOD people who have some related packages on thedatahub.org.
</p>
<h3 id="Participants">Participants</h3>
<p>
David Read
</p>
<h3 id="Progress">Progress</h3>
<p>
Not yet.
</p>

                            
                          </td>
                          <td class="PosixTime">1314206502000000
                          </td>
                          <td class="ModifiedTime">1317315211000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/812.html">#812</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">cygri
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/812.html">Package edit form only allows three extra fields</a>
                          </td>
                          <td class="description">
                            <h1 id="Rationale">Rationale</h1>
<p>
The package edit form is restricted to three extra fields. To enter more than three fields, one has to save the package and hit edit again (or hit preview).
</p>
<h1 id="Implementation">Implementation</h1>
<p>
A mechanism similar to the one for resources (where you can add lines as you go) would solve this. So, have a button that adds more extra field rows via JS. (Extra fields don't need up/down buttons that the Resource table has)
</p>
<p>
Nice to have: a blank field is added when you tab from the last filled-in field in the table.
</p>

                            
                          </td>
                          <td class="PosixTime">1289995010000000
                          </td>
                          <td class="ModifiedTime">1311176917000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/253.html">#253</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/253.html">Package relationships</a>
                          </td>
                          <td class="description">
                            <h1 id="Overview">Overview</h1>
<p>
Functionality to formally associate packages. We see a need for specific parent-child, inheriting or dependency relations. Not only should this help navigation between packages in the web interface, but it also provides a mechanism to automatically pull dependencies when downloading a data package, in a similar manner as we see in software package management.
</p>
<h1 id="Examples">Examples</h1>
<ol><li>There are 27 packages in data.gov.uk to do with the Data4NR's Health Poverty Index. There is currently no common link between these, unless you search for 'HPI' (which also brings up House Price Index), or look under tag 'health' (which also has 600 other results). There should be a link on each HPI package page to navigate to the other 'sibling' HPI packages, and to a 'root' package that has info about the set. This could be partially achieved using the existing tag or group concepts, but a more explicit/official/obvious marking of their relationship could be beneficial.
</li></ol><ol start="2"><li>In ckan.net is freedict, a collection of translation dictionaries. You could make each dictionary a child package and use this system. But it would probably be better to make each dictionary a different resource in the same package. (There are other ideas to denote a resource as the data making up a 'portion' of package, or a 'whole' of the package, to help people downloading datasets in the software package style.)
</li></ol><ol start="3"><li>OSM has had some Naptan data imported (bus stops), with special permission - i.e. a more liberal license. It would be useful to show this link on both OSM and Naptan packages in CKAN: OSM 'derives from' Naptan with a comment about the license change. I'm not sure this is useful to an automatic download or use of these datasets, but may aid exploration on the CKAN website and understanding the provenance of the bus stop data on it.
</li></ol><ol start="4"><li>IPCC collection of data linked / mirrored. Not sure if there are useful relationships here?
</li></ol><ol start="5"><li>Dracos gets postbox locations from crowd sourcing and OSM. We could say Dracos 'derives from' OSM.
</li></ol><p>
See more examples discussed here: <a class="ext-link" href="http://trac.ckan.org/ticket/253"><span class="icon">​</span>http://trac.ckan.org/ticket/253</a>
</p>
<h1 id="Implementation">Implementation</h1>
<p>
This is split into four tickets:
</p>
<ul><li>Model: <a class="closed ticket" href="../ticket/254.html" title="enhancement: Package relationships - 1. model (closed: fixed)">ticket:254</a>
</li><li>Read in WUI: <a class="closed ticket" href="../ticket/255.html" title="enhancement: Package relationships - 2. Read in WUI (closed: fixed)">ticket:255</a>
</li><li>Edit in WUI: <a class="assigned ticket" href="../ticket/256.html" title="requirement: Package relationships - 3. Edit in WUI (assigned)">ticket:256</a>
</li><li>API: <a class="closed ticket" href="../ticket/257.html" title="enhancement: Package relationships - 4. Read in API (closed: fixed)">ticket:257</a>
</li></ul><p>
No need for write access to be provided API for the moment.
</p>
<p>
This ticket also encompasses <a class="closed ticket" href="../ticket/169.html" title="enhancement: Package derivations (closed: duplicate)">ticket:169</a> (Package derivations) and <a class="closed ticket" href="../ticket/176.html" title="enhancement: Package dependencies (closed: duplicate)">ticket:176</a> (Package dependencies).
</p>

                            
                          </td>
                          <td class="PosixTime">1266854721000000
                          </td>
                          <td class="ModifiedTime">1339774726000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/77.html">#77</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.11.html">v0.11</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/77.html">Rate packages</a>
                          </td>
                          <td class="description">
                            <h1 id="AsaUserorVisitor">As a User or Visitor</h1>
<p>
I wish to rate a package in some way. On the package view, below Openness, there is a 'Rating' heading with the star rating which is selectable.
</p>
<p>
Rating out of 5. One user or IP, one vote.
</p>
<p>
package_rating table:
</p>
<p>
package      | user                  | rating 
annakarenina | joe.bloggs.openid.com | 4
annakarenina | 154.2.5.47            | 1
</p>

                            
                          </td>
                          <td class="PosixTime">1247829193000000
                          </td>
                          <td class="ModifiedTime">1255176732000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/54.html">#54</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.7.html">v0.7</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/54.html">Support dump and load of CKAN data to JSON</a>
                          </td>
                          <td class="description">
                            <h1 id="Asa">As a</h1>
<p>
Sysadmin
</p>
<h1 id="Iwantto">I want to</h1>
<p>
Dump (serialize) CKAN data to a simple transport format (e.g. JSON) and be able to load it again.
</p>
<h1 id="Details">Details</h1>
<ul><li>Already have simple db dump. However dumping to JSON has various advantages, particularly where changes to the data need to be made upon reloading (e.g. during a migration).
</li><li>Dump should include *all* CKAN data (i.e. all the data in the CKAN db tables)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1223907883000000
                          </td>
                          <td class="ModifiedTime">1230211256000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/49.html">#49</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/49.html">Filter Spam in Changes to CKAN Data</a>
                          </td>
                          <td class="description">
                            <h1 id="AsA">As A</h1>
<p>
sysadmin
</p>
<h1 id="IWantTo">I Want To</h1>
<p>
Have revisions to the CKAN data filtered in order to reduce the spam in the system.
</p>
<h1 id="Details">Details</h1>
<p>
In the long run this is a quite a generic problem common across several OKF systems and probably can become a general component in the okfmisc repo. For time being focus on a well-factored CKAN-specific solution.
</p>
<p>
Suggest we follow path of trac: <a class="ext-link" href="http://trac.edgewall.org/wiki/SpamFilter"><span class="icon">​</span>http://trac.edgewall.org/wiki/SpamFilter</a>
</p>
<p>
Could have a general engine that aggregates spam scores from many different 'plugins' and then marks spam appropriately (actions should be configurable depending on spam level from 'purge' to 'delete' (mark revision as inactive) to 'flag' to 'do nothing').
</p>
<p>
Main initial plugins would be:
</p>
<ul><li>regex filter (this would seem very useful here, e.g. do not allow urls in commit messages ...)
<ul><li>could augment using the badcontent list approach (can find list on e.g. moinmoin)
</li></ul></li><li>spambayes and/or akismet
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1204134691000000
                          </td>
                          <td class="ModifiedTime">1257244973000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/53.html">#53</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.8.html">v0.8</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/53.html">View Information about Package history (i.e. package revisions)</a>
                          </td>
                          <td class="description">
                            <h1 id="AsA">As A</h1>
<p>
<a class="missing wiki">Visitor/User?</a>
</p>
<h1 id="Iwantto">I want to</h1>
<p>
View information about a package history, i.e. what revisions it has.
</p>
<h1 id="Details">Details</h1>
<ul><li>History info should be available at package/history/pkg-name
</li><li>Most basic info is just info from revision (when it occurred, author etc)
</li><li>More sophisticated would be to have diff support to see differences between revisions
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1223552139000000
                          </td>
                          <td class="ModifiedTime">1239133021000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/42.html">#42</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.6.html">v0.6</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/42.html">In WUI where List of Items to Display is Large Results should be Paged</a>
                          </td>
                          <td class="description">
                            <h1 id="AsA">As A</h1>
<p>
Visitor
</p>
<h1 id="IWantTo">I Want To</h1>
<p>
View lists of items but not have too many on a page (as this leads to slow page loads and difficulty navigating the list). Where there are more items in the results of my action that can be fit on a single page the results should be 'paged' in some manner.
</p>
<h1 id="Details">Details</h1>
<p>
Main place this issue arises:
</p>
<ul><li>List of tags
</li><li>List of packages
</li><li>Repository history (/revision)
</li></ul><p>
Should probably have no more than 50 (or so) items on a page. Obvious solution is for actions that return lists to have some kind of pageno parameter and then use this in controller to select what to display.
</p>

                            
                          </td>
                          <td class="PosixTime">1199787162000000
                          </td>
                          <td class="ModifiedTime">1204133257000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/44.html">#44</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.7.html">v0.7</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/44.html">Provide RSS/Atom Feed of Repository History</a>
                          </td>
                          <td class="description">
                            <h1 id="AsA">As A</h1>
<p>
Visitor
</p>
<h1 id="IWantTo">I Want To</h1>
<p>
Get an RSS/Atom Feed of the Repository History to use in my feed reader (or elsewhere).
</p>
<h1 id="Details">Details</h1>
<ul><li>Preference for Atom.
</li><li>should just add parameter to /revision/list/ (or /revision/) to select atom format e.g. ?format=atom.
</li><li>should have a 'days' attribute specifying number of days back to go e.g. &amp;days=30
</li></ul><h1 id="Cost">Cost</h1>
<p>
Low
</p>

                            
                          </td>
                          <td class="PosixTime">1199788457000000
                          </td>
                          <td class="ModifiedTime">1223390660000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/27.html">#27</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.6.html">v0.6</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/27.html">Register/Update a package via a web-api</a>
                          </td>
                          <td class="description">
                            <h1 id="AsA">As A</h1>
<p>
User
</p>
<h1 id="IwantTo">I want To</h1>
<p>
Create/register and update a package via a web api.
</p>

                            
                          </td>
                          <td class="PosixTime">1152551379000000
                          </td>
                          <td class="ModifiedTime">1215543933000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/43.html">#43</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.10.html">v0.10</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/43.html">Generic Attributes for Packages</a>
                          </td>
                          <td class="description">
                            <h1 id="AsA">As A</h1>
<p>
User
</p>
<h1 id="IWantTo">I Want To</h1>
<p>
Add arbitrary named attributes to packages (an attribute being a name, type, value triple).
</p>
<h1 id="Details">Details</h1>
<ul><li>We will do this using a dedicated (versioned) table associated to Package
</li><li>Do we allow multiple attributes of the same name?
<ul><li>For the present: No (since we will key by attribute name)
</li><li>Could allow for single attribute but with multiple values using json list ...
</li></ul></li><li>What types do we allow or do we just rely on JSON to take care of this?
</li></ul><h1 id="QuestionsOriginal">Questions (Original)</h1>
<ul><li>How complex is this to implement?
</li><li>What would an arbitrary user be able to edit? Possibilities:
<ol><li>'create new attribute' and setting the value (so name and type would be chosen from predefined list).
</li><li>'create', setting of name and value (but not type -- type already set in predefined list)
</li></ol></li><li>Could just use (machine) tags -- though this could be seen as a bit of a hack.
</li><li>Would solve having to create special file/url attributes (though I think that perhaps file stuff is important enough to merit first class support in the domain model -- though, that said, since one won't want to have a file limit adding unlimited file support is very similar to unlimited attributes of arbitrary type).
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1199788109000000
                          </td>
                          <td class="ModifiedTime">1253709802000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/241.html">#241</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/241.html">License doesn't preview correctly</a>
                          </td>
                          <td class="description">
                            <p>
4 failing tests, including 2 in misc/package_saver and 2 in functional/test_package.
</p>

                            
                          </td>
                          <td class="PosixTime">1265625546000000
                          </td>
                          <td class="ModifiedTime">1270569769000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2814.html">#2814</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">shevski
                          </td>
                          <td class="reporter">markw
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2814.html">Demo: upload file behaves oddly</a>
                          </td>
                          <td class="description">
                            <ol start="3"><li>Uploading a file behaves counter-intuitively (I would suggest wrongly).
</li></ol><p>
When adding a new resource by uploading a file, I select a file called
say create-group.png. I expect the following to happen:
</p>
<ul><li>the pathname of that file is filled in the box;
</li><li>nothing is actually uploaded till I hit 'add' (confirming that I've got the right file etc).
</li></ul><p>
Instead of this,
</p>
<ul><li>the file is immediately and, seemingly, irrevocably uploaded;
</li><li>the box is filled with a mysterious URL (<a class="ext-link" href="https://commondatastorage.googleapis.com/ckan-demo"><span class="icon">​</span>https://commondatastorage.googleapis.com/ckan-demo</a> ...)
</li><li>the mysterious URL is so long I can't even see the final element, which is my file name.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1344420360000000
                          </td>
                          <td class="ModifiedTime">1346670381000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/852.html">#852</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">wwaites
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/852.html">[super] Dataset upload and archiving</a>
                          </td>
                          <td class="description">
                            <p>
3 (4) use cases: (With and without access to auth keys.)
</p>
<ol><li>upload form on ckan (by default local system has auth key for storage)
</li><li>datapkg upload (client) (by default without key) (plumbing done)
</li><li>background job archiving downloads (by queue client) 
</li></ol><p>
Most important are:
</p>
<ol><li>Upload form on ckan.net (with access to keys)
</li><li>API for getting credentials for upload from ckan.net api (without access to keys).
</li></ol><p>
Aside: Once 2 was done we could deprecate storage.ckan.net
</p>
<h3 id="Sub-tickets">Sub-tickets</h3>
<p>
<strong> Required infrastructure </strong>
</p>
<ul><li><a class="closed ticket" href="../ticket/826.html" title="enhancement: Resource 'extra' fields (closed: fixed)">#826</a> - Resource 'extra' fields
</li><li><a class="closed ticket" href="../ticket/358.html" title="enhancement: Resources in REST API (closed: duplicate)">#358</a> - Resources in REST API
</li><li><a class="assigned ticket" href="../ticket/235.html" title="enhancement: Resource format normalization and detection (assigned)">#235</a> - Resource format normalization and detection
</li></ul><p>
<strong> User upload via Web UI </strong>
</p>
<ul><li><a class="closed ticket" href="../ticket/877.html" title="enhancement: File upload in WUI (extension) (closed: fixed)">#877</a> - File upload in WUI
</li><li><a class="closed ticket" href="../ticket/878.html" title="enhancement: Integrate file upload with workflow around package resources (closed: fixed)">#878</a> - Integrate file upload with workflow around package resources
</li></ul><p>
<strong> User upload via CLI/datapkg </strong>
</p>
<ul><li><a class="closed ticket" href="../ticket/853.html" title="enhancement: Client upload to storage without having primary storage keys (closed: fixed)">#853</a> - plumbing for credential-less rest upload
</li><li><a class="closed ticket" href="../ticket/879.html" title="enhancement: Storage auth API (closed: fixed)">#879</a> - Storage auth API
</li></ul><p>
Also related:
</p>
<ul><li><a class="closed ticket" href="../ticket/405.html" title="task: Retrieval options for package resources (closed: fixed)">#405</a> - Retrieval options for package resources
</li></ul><h3 id="MoreInfo">More Info</h3>
<ul><li>Upload/storage discussion: <a class="ext-link" href="http://ckan.okfnpad.org/storage"><span class="icon">​</span>http://ckan.okfnpad.org/storage</a>
<ul><li>For api to generate upload key (for e.g. datapkg usage) suggest locating at ckan.net/api/utils/
</li></ul></li></ul>
                            
                          </td>
                          <td class="PosixTime">1291722993000000
                          </td>
                          <td class="ModifiedTime">1315821628000000
                          </td>
              </tr>
          </tbody>
      </table>
      <div class="paging">
    <span class="previous">
      <a href="22%3Fsort=description&amp;asc=0&amp;page=19.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=10.html" title="Page 10">10</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=11.html" title="Page 11">11</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=12.html" title="Page 12">12</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=13.html" title="Page 13">13</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=14.html" title="Page 14">14</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=15.html" title="Page 15">15</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=16.html" title="Page 16">16</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=17.html" title="Page 17">17</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=18.html" title="Page 18">18</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=19.html" title="Page 19">19</a>
      </span>
      <span>
        <span class="current">20</span>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=21.html" title="Page 21">21</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=22.html" title="Page 22">22</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=23.html" title="Page 23">23</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=24.html" title="Page 24">24</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=25.html" title="Page 25">25</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=26.html" title="Page 26">26</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=27.html" title="Page 27">27</a>
      </span>
    <span class="next">
      <a href="22%3Fsort=description&amp;asc=0&amp;page=21.html" title="Next Page">→</a>
    </span>
</div>
      <div id="help"><strong>Note:</strong>
        See <a href="../wiki/TracReports.html">TracReports</a> for help on using and creating reports.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="22%3Fsort=description&amp;asc=0&amp;format=rss" class="rss">RSS Feed</a>
        </li><li>
          <a rel="nofollow" href="22%3Fsort=description&amp;asc=0&amp;format=csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="22%3Fsort=description&amp;asc=0&amp;format=tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="../report%3Fid=22&amp;format=sql">SQL Query</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.3</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>