<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      {22} Trac tickets – CKAN
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">window.location.hash = window.location.hash;</script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="22%3Fsort=description&amp;asc=0&amp;format=rss" type="application/rss+xml" class="rss" title="RSS Feed" /><link rel="alternate" href="22%3Fsort=description&amp;asc=0&amp;format=csv" type="text/plain" title="Comma-delimited Text" /><link rel="alternate" href="22%3Fsort=description&amp;asc=0&amp;format=tab" type="text/plain" title="Tab-delimited Text" /><link rel="alternate" href="../report%3Fid=22&amp;format=sql" type="text/plain" title="SQL Query" />
        <link rel="up" href="../report.html" title="Available Reports" />
        <link rel="next" href="22%3Fsort=description&amp;asc=0&amp;page=7.html" title="Next Page" />
        <link rel="start" href="../wiki.1.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/report.css" type="text/css" />
        <link rel="prev" href="22%3Fsort=description&amp;asc=0&amp;page=5.html" title="Previous Page" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search CKAN" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://ckan.org/"><img src="http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png" alt="CKAN Trac" height="70" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../login.html">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li><a href="../about.html">About Trac</a></li><li class="last"><a href="../register.html">Register</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li><a href="../search.html">Search</a></li><li class="last"><a href="../wiki.1.html">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="../report.html">Available Reports</a></li><li class="last"><a href="../query.html">Custom Query</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="report">
      <h1>{22} Trac tickets
        <span class="numrows">(2647 matches)</span>
      </h1>
      <form method="get" action="22%3Fsort=description&amp;asc=0&amp;page=6.html">
        <div id="prefs">
          <div>
            <label>
              Max items per page
              <input type="text" name="max" size="10" value="100" />
            </label>
          </div>
          <div class="buttons">
            <input type="submit" value="Update" />
          </div>
        </div>
      </form>
      <div id="description">
        <p>
<a class="ext-link" href="https://github.com/roskakori/tratihubis/blob/master/query_tickets.sql"><span class="icon">​</span>https://github.com/roskakori/tratihubis/blob/master/query_tickets.sql</a>
</p>

      </div>
      <div class="buttons">
      </div>
      <h2 class="report-result">
        Results <span class="numresults">(501 - 600 of 2647)</span>
      </h2>
      <div class="paging">
    <span class="previous">
      <a href="22%3Fsort=description&amp;asc=0&amp;page=5.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=1.html" title="Page 1">1</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=2.html" title="Page 2">2</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=3.html" title="Page 3">3</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=4.html" title="Page 4">4</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=5.html" title="Page 5">5</a>
      </span>
      <span>
        <span class="current">6</span>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=7.html" title="Page 7">7</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=8.html" title="Page 8">8</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=9.html" title="Page 9">9</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=10.html" title="Page 10">10</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=11.html" title="Page 11">11</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=12.html" title="Page 12">12</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=13.html" title="Page 13">13</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=14.html" title="Page 14">14</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=15.html" title="Page 15">15</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=16.html" title="Page 16">16</a>
      </span>
    <span class="next">
      <a href="22%3Fsort=description&amp;asc=0&amp;page=7.html" title="Next Page">→</a>
    </span>
</div>
      <table class="listing tickets">
          <thead>
        <tr class="trac-columns">
          <th>
            <a href="22%3Fsort=id&amp;asc=1&amp;page=6.html">
              Id
            </a>
          </th><th>
            <a href="22%3Fsort=type&amp;asc=1&amp;page=6.html">
              Type
            </a>
          </th><th>
            <a href="22%3Fsort=owner&amp;asc=1&amp;page=6.html">
              Owner
            </a>
          </th><th>
            <a href="22%3Fsort=reporter&amp;asc=1&amp;page=6.html">
              Reporter
            </a>
          </th><th>
            <a href="22%3Fsort=milestone&amp;asc=1&amp;page=6.html">
              Milestone
            </a>
          </th><th>
            <a href="22%3Fsort=status&amp;asc=1&amp;page=6.html">
              Status
            </a>
          </th><th>
            <a href="22%3Fsort=resolution&amp;asc=1&amp;page=6.html">
              Resolution
            </a>
          </th><th>
            <a href="22%3Fsort=summary&amp;asc=1&amp;page=6.html">
              Summary
            </a>
          </th><th class="desc">
            <a href="22%3Fsort=description&amp;asc=1&amp;page=6.html">
              Description
            </a>
          </th><th>
            <a href="22%3Fsort=PosixTime&amp;asc=1&amp;page=6.html">
              Posixtime
            </a>
          </th><th colspan="100">
            <a href="22%3Fsort=ModifiedTime&amp;asc=1&amp;page=6.html">
              Modifiedtime
            </a>
          </th>
        </tr>
          </thead>
          <tbody>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1629.html">#1629</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-01-23.html">ckan-sprint-2012-01-23</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1629.html">permissions changed during upgrade to 1.5.1</a>
                          </td>
                          <td class="description">
                            <p>
This was seen on datacatalogs. When we upgraded it 1.5 to 1.5.1 we saw some permissions being reset so that it could be spammed. Anonymous and logged in users were given anon_editor and editor permissions. I don't know what the previous config was. Permissions for sysadmins remain unaffected. 
</p>

                            
                          </td>
                          <td class="PosixTime">1326215162000000
                          </td>
                          <td class="ModifiedTime">1326823222000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1301.html">#1301</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-09-12.html">ckan-sprint-2011-09-12</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1301.html">Give access to extensions from the old formalchemy controllers</a>
                          </td>
                          <td class="description">
                            <p>
This was removed during the auth refactoring, but it's needed in the old controllers
</p>

                            
                          </td>
                          <td class="PosixTime">1314882888000000
                          </td>
                          <td class="ModifiedTime">1314893744000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2282.html">#2282</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">toby
                          </td>
                          <td class="reporter">toby
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-future.html">ckan-future</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2282.html">log api calls for users</a>
                          </td>
                          <td class="description">
                            <p>
This was part of <a class="closed ticket" href="../ticket/2251.html" title="enhancement: Internal analytics for ckan. (closed: fixed)">#2251</a> but is now it's own ticket.
</p>
<p>
we need clarity on this.  The use cases so far have been possible limiting api calls for users.
</p>
<p>
so we want to monitor the user or ip address
</p>
<p>
what about the api calls?
</p>
<p>
do we want to record all calls or just some?  do we want to record the type of call and to what level of detail?
</p>
<p>
recording the url just seems to specific to me.
</p>

                            
                          </td>
                          <td class="PosixTime">1334074725000000
                          </td>
                          <td class="ModifiedTime">1338210829000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/981.html">#981</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-2.html">ckan-v1.4-sprint-2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/981.html">fix authorization_group_user.id so it's added in migrate</a>
                          </td>
                          <td class="description">
                            <p>
This was missed out the migrate script. It should be to be added as a conditional script at the end of the repository so that databases can catch up.
</p>

                            
                          </td>
                          <td class="PosixTime">1297434480000000
                          </td>
                          <td class="ModifiedTime">1298278654000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2621.html">#2621</a>
                          </td>
                          <td class="type">refactor
                          </td>
                          <td class="owner">icmurray
                          </td>
                          <td class="reporter">icmurray
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.9.html">ckan-v1.9</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2621.html">Remove the deprecated 'fields' parameter from tag_search and tag_autocomplete</a>
                          </td>
                          <td class="description">
                            <p>
This was deprecated in 1.8 as it wasn't accessible via GET requests due to being a dict.  See <a class="closed ticket" href="../ticket/2439.html" title="defect: tag_search and tag_autocomplete not fully available via GET request (closed: fixed)">#2439</a>
</p>
<p>
In a future release of CKAN (probably 1.9) it can be removed.
</p>
<p>
Internal uses of it were removed in <a class="closed ticket" href="../ticket/2439.html" title="defect: tag_search and tag_autocomplete not fully available via GET request (closed: fixed)">#2439</a>, but there are tests that still use it.
</p>

                            
                          </td>
                          <td class="PosixTime">1340900569000000
                          </td>
                          <td class="ModifiedTime">1340900569000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/780.html">#780</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">thejimmyg
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.3.html">ckan-v1.3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/780.html">Package edit form - 'preview' button shows preview, with form lower in page</a>
                          </td>
                          <td class="description">
                            <p>
This ticket refers to the form shown in Drupal. This doesn't have a preview function, but we don't have a requirement for it right now, so leaving ticket closed.
</p>

                            
                          </td>
                          <td class="PosixTime">1288630829000000
                          </td>
                          <td class="ModifiedTime">1294660720000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1508.html">#1508</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">ross
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.6.html">ckan-v1.6</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1508.html">[super] Finalize and deploy some of our major (new) features as of Dec 2011</a>
                          </td>
                          <td class="description">
                            <p>
This ticket is about finalizing, then deploying (to <a class="ext-link" href="http://thedatahub.org/"><span class="icon">​</span>http://thedatahub.org/</a>), and finally announcing some of recent major new features such as:
</p>
<ul><li>Deploy wordpresser extension for thedatahub (so we can start blogging) - <a class="closed ticket" href="../ticket/1533.html" title="defect: Make sure ckanext-wordpresser works on CKAN 1.5.1 (closed: wontfix)">#1533</a> - WONTFIX
</li><li><del>(Deploy new Resource and Dataset pages (invite comments))</del>
</li><li>Get thedatahub geo-ified i.e. ckanext-spatial - <a class="closed ticket" href="../ticket/1601.html" title="enhancement: [super] Well integrated Geo-spatial support including search (closed: fixed)">#1601</a> (?)
<ul><li>Any additional dev that needs to be done? (e.g. geo in search ...?)
</li></ul></li><li><del>(Deploy / re-enable ckanext-googleanalytics on thedatahub - <a class="closed ticket" href="../ticket/1451.html" title="enhancement: Reintegrate download stats on dataset and resource view page - 0.5d (closed: fixed)">#1451</a> (more stuff <a class="closed ticket" href="../ticket/1566.html" title="enhancement: [super] Finalize Google analytics extension (closed: fixed)">#1566</a>))</del>
<ul><li>Rename the extension to ckanext-analytics?
</li></ul></li><li>Custom forms (and use of 'dataset types') - Ticket (??)
</li><li><del>(Get QA deployed and running - <a class="closed ticket" href="../ticket/1582.html" title="enhancement: Deploy QA for thedatahub - 0.5d (closed: fixed)">#1582</a>)</del>
</li></ul><p>
It would be best if this was done by someone *unfamiliar* with the extensions so feedback could be provided on quality of install docs etc etc.
</p>

                            
                          </td>
                          <td class="PosixTime">1323088817000000
                          </td>
                          <td class="ModifiedTime">1328000871000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2428.html">#2428</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">seanh
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.8.html">ckan-v1.8</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2428.html">Reduce/sort out CKAN's dependencies</a>
                          </td>
                          <td class="description">
                            <p>
This ticket depends on <a class="closed ticket" href="../ticket/2423.html" title="enhancement: Get rid of CKAN's lxml dependency (closed: duplicate)">#2423</a>, <a class="closed ticket" href="../ticket/2424.html" title="enhancement: Get rid of CKAN's autoneg dependency (closed: duplicate)">#2424</a>, <a class="closed ticket" href="../ticket/2425.html" title="enhancement: Get rid of CKAN's flup dependency (closed: fixed)">#2425</a>, <a class="new ticket" href="../ticket/2426.html" title="enhancement: Get rid of CKAN's formalchemy dependency (new)">#2426</a> and <a class="new ticket" href="../ticket/2427.html" title="enhancement: Reduce cruft installed into CKAN's virtualenv due to Pylons (new)">#2427</a>.
</p>
<ul><li>Try to remove as many of CKAN's dependencies as possible
</li></ul><ul><li>Try to update as many of the remaining ones as possible
</li></ul><ul><li>Try to get rid of some dependencies that are fetched from random hg or git servers instead of pypi
</li></ul><ul><li>Then try to get the order of deps in the requirements files right so that you end up with the right versions of everything
</li></ul><ul><li>Each module in the dependencies file should specify the exact version, to protect us from changes due to them upgrading versions under us and breaking things or changing their own deps
</li></ul><ul><li>Consider shipping dependencies with ckan instead of pip installing them?
</li></ul><ul><li>This is related to moving CKAN to Ubuntu 12.04
</li></ul><ul><li>Add a test case that runs pip freeze and tests that all the right versions of deps are installed?
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1337946896000000
                          </td>
                          <td class="ModifiedTime">1341314475000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1068.html">#1068</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-5.html">ckan-v1.4-sprint-5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1068.html">metadata_modified problem</a>
                          </td>
                          <td class="description">
                            <p>
This test has been failing since the clocks changed:
</p>
<pre class="wiki">======================================================================
FAIL: ckan.tests.models.test_package.TestPackageRevisions.test_02_metadata_created_and_modified
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/dread/hgroot/pyenv-ckan2/lib/python2.6/site-packages/nose-0.11.3-py2.6.egg/nose/case.py", line 186, in runTest
    self.test(*self.arg)
  File "/home/dread/hgroot/ckan2/ckan/tests/models/test_package.py", line 283, in test_02_metadata_created_and_modified
    assert out == exp, (out, exp)
AssertionError: (datetime.datetime(2011, 4, 1, 10, 45, 50, 875509), datetime.datetime(2011, 4, 1, 9, 45, 50, 875509))

----------------------------------------------------------------------
</pre>
                            
                          </td>
                          <td class="PosixTime">1301652085000000
                          </td>
                          <td class="ModifiedTime">1302109505000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1346.html">#1346</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1346.html">'get_authorization_group_dict not found' exception</a>
                          </td>
                          <td class="description">
                            <p>
This stems from a feature to allow you to prefill fields in the authorizationgroup creation form. 
</p>
<p>
e.g. <a class="ext-link" href="http://ckan.net/authorizationgroup/new?name=science"><span class="icon">​</span>http://ckan.net/authorizationgroup/new?name=science</a>
</p>
<p>
It's not tested, not supported in the new logic layer and therefore broken. I don't think anyone uses it - can remove it.
</p>

                            
                          </td>
                          <td class="PosixTime">1316081974000000
                          </td>
                          <td class="ModifiedTime">1316094632000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1149.html">#1149</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5-sprint-1.html">ckan-v1.5-sprint-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1149.html">Change domain object modification plugin to use Session extension.</a>
                          </td>
                          <td class="description">
                            <p>
This should make it more efficient as it currently does a lot of repeating work.  i.e if you change a package and a resource in the same commit it sends out 2 notifications and should only really send out 1.   
</p>

                            
                          </td>
                          <td class="PosixTime">1305969863000000
                          </td>
                          <td class="ModifiedTime">1306090663000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2372.html">#2372</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">aron.carroll
                          </td>
                          <td class="reporter">aron.carroll
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2372.html">Create frontend style guide</a>
                          </td>
                          <td class="description">
                            <p>
This should cover formatting and best practices for HTML, CSS and <a class="missing wiki">JavaScript?</a>
</p>
<p>
Perhaps this should sit in it's own repository (ckan-styleguides?) or gh-pages branch.
</p>

                            
                          </td>
                          <td class="PosixTime">1336071043000000
                          </td>
                          <td class="ModifiedTime">1343220160000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1298.html">#1298</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-01-09.html">ckan-sprint-2012-01-09</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1298.html">Generate activites to be put into activities table.</a>
                          </td>
                          <td class="description">
                            <p>
This should be done from the logic layer or automatically from a session extension.
</p>

                            
                          </td>
                          <td class="PosixTime">1314696442000000
                          </td>
                          <td class="ModifiedTime">1325591582000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/697.html">#697</a>
                          </td>
                          <td class="type">requirement
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/iati-3.html">iati-3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/697.html">The system shall indicate which package groups can be removed when editing a package</a>
                          </td>
                          <td class="description">
                            <p>
This seems to require doing something else with such a group's 'delete' button, such as showing it greyed, or perhaps not showing it at all.
</p>

                            
                          </td>
                          <td class="PosixTime">1287066103000000
                          </td>
                          <td class="ModifiedTime">1291644457000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1625.html">#1625</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">seanh
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-01-23.html">ckan-sprint-2012-01-23</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1625.html">Add activity stream events for new/changed users</a>
                          </td>
                          <td class="description">
                            <p>
This requires adding a logic function for emitting an activity stream event, and then editing the logic functions for creating or updating users and making them call the new emit event function. This same emit event function can later be used to emit activity stream events for other types of object as well.
</p>

                            
                          </td>
                          <td class="PosixTime">1326187794000000
                          </td>
                          <td class="ModifiedTime">1326736328000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1505.html">#1505</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-12-05.html">ckan-sprint-2011-12-05</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1505.html">SearchError and SearchQueryError cause exception in Action API</a>
                          </td>
                          <td class="description">
                            <p>
This query caused ckan to except because ckan/controllers/api.py doesn't catch <a class="missing wiki">SearchError?</a> and <a class="missing wiki">SearchQueryError?</a>:
</p>
<pre class="wiki">curl http://localhost:5000/api/action/package_search -d '{"sort": "metadata_modified"}'
</pre>
                            
                          </td>
                          <td class="PosixTime">1322758968000000
                          </td>
                          <td class="ModifiedTime">1324474577000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/698.html">#698</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">Stiivi
                          </td>
                          <td class="reporter">thejimmyg
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.3-sprint-1.html">ckan-v1.3-sprint-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/698.html">CKAN Data API v1</a>
                          </td>
                          <td class="description">
                            <p>
This proposal is to discuss adding a new API for proxying certain spreadsheet data via JSON-P to make it possible to build simple browser apps directly off the API.
</p>
<p>
See the attached proposal for information.
</p>

                            
                          </td>
                          <td class="PosixTime">1287073433000000
                          </td>
                          <td class="ModifiedTime">1293649815000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2656.html">#2656</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">seanh
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2656.html">Feed with few results has bad paging link, causing exception</a>
                          </td>
                          <td class="description">
                            <p>
This page <a class="ext-link" href="http://thedatahub.org/feeds/custom.atom?q=wombat"><span class="icon">​</span>http://thedatahub.org/feeds/custom.atom?q=wombat</a> has 0 results and contains a link to <a class="ext-link" href="http://thedatahub.org/feeds/custom.atom?q=wombat&amp;amp;page=0"><span class="icon">​</span>http://thedatahub.org/feeds/custom.atom?q=wombat&amp;amp;page=0</a> which the page=0 causes this exception:
</p>
<pre class="wiki">ckan.lib.search.common.SearchError'&gt;: SOLR returned an error running query
Error: "'start' parameter cannot be negative"
</pre>
                            
                          </td>
                          <td class="PosixTime">1342001112000000
                          </td>
                          <td class="ModifiedTime">1342001112000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/460.html">#460</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/460.html">State field changed by non-sysadmin</a>
                          </td>
                          <td class="description">
                            <p>
This package:
</p>
<p>
<a class="ext-link" href="http://ckan.net/package/dbtune-audioscrobbler"><span class="icon">​</span>http://ckan.net/package/dbtune-audioscrobbler</a>
</p>
<p>
was:
</p>
<ol><li>created by Richard (logged-in)
</li><li>edited by Richard (logged-in)
</em></li></ol><p>
(According to the logs, at this point the state was changed from 'active' to 'deleted') -- RP was it set to 'deleted' or just <em>?
</p>
<ol start="3"><li>pudo changed the state back to active
</li></ol><p>
Similarly an incident with bibbase package where field set to <em> (see <a class="ext-link" href="http://ckan.net/revision/diff/bibbase?diff=702bb0a3-03b7-49ac-87ad-e489c414962f&amp;oldid=5447842d-b6ed-41d9-9cfd-8bb73b85c409"><span class="icon">​</span>http://ckan.net/revision/diff/bibbase?diff=702bb0a3-03b7-49ac-87ad-e489c414962f&amp;oldid=5447842d-b6ed-41d9-9cfd-8bb73b85c409</a>)
</em></p>
<p>
Need to investigate how this got changed, fix if necessary and report back to Richard. Note that package 'admins' as well as sysadmins can change the state of a package (though note that bibbase did not appear to have an owner).
</p>
<p>
Suggested solution (for setting to <em>):
</em></p>
<ul><li>Ensure in ckan/forms.py that there is a validator for state field that ensures only set to valid values.
</li><li>Check that we do not allow state to be changed in the api except by package owner or sysadmin
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1282300002000000
                          </td>
                          <td class="ModifiedTime">1311176868000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1269.html">#1269</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1269.html">User view page shows the packages followed by viewing user not user being viewed</a>
                          </td>
                          <td class="description">
                            <p>
This overlaps with Sean's follow support (for activity streams) and so will be dealt with there.
</p>

                            
                          </td>
                          <td class="PosixTime">1312906598000000
                          </td>
                          <td class="ModifiedTime">1335875028000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2914.html">#2914</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.8.1.html">ckan-v1.8.1</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2914.html">Add form_to_db_schema_options() to IDatasetForm and IGroupForm</a>
                          </td>
                          <td class="description">
                            <p>
This optional method is supported when creating or updating groups and packages and is used in <a class="missing wiki">DefaultGroupForm?</a> and <a class="missing wiki">DefaultPackageForm?</a>, but seems to be missing from the interfaces. Should be added with docstring.
</p>

                            
                          </td>
                          <td class="PosixTime">1347445795000000
                          </td>
                          <td class="ModifiedTime">1350303928000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/432.html">#432</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/432.html">Creating package over REST gives 500 error</a>
                          </td>
                          <td class="description">
                            <p>
This occurs when CKAN is run with mod_wsgi (not under paster).
</p>
<p>
This is because of a unicode header being creating in rest.py.
</p>

                            
                          </td>
                          <td class="PosixTime">1282065101000000
                          </td>
                          <td class="ModifiedTime">1282552819000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/228.html">#228</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/228.html">Deal with duplicate packages</a>
                          </td>
                          <td class="description">
                            <p>
This needs to be thought out ...
</p>

                            
                          </td>
                          <td class="PosixTime">1262085763000000
                          </td>
                          <td class="ModifiedTime">1290596875000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2376.html">#2376</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">seanh
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-05-15.html">ckan-sprint-2012-05-15</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2376.html">Fix "no-sidebar" front page layout issue with CKAN 1.7 in some languages</a>
                          </td>
                          <td class="description">
                            <p>
This needs to be fixed in the CKAN templates ("no-sidebar" should not be marked for translation) but for 1.7 just fixed it in the translation files.
</p>

                            
                          </td>
                          <td class="PosixTime">1336563965000000
                          </td>
                          <td class="ModifiedTime">1336563976000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/651.html">#651</a>
                          </td>
                          <td class="type">requirement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/651.html">Improve javascript helper for package/user addition on groups/authzgroups</a>
                          </td>
                          <td class="description">
                            <p>
This needs to be abstracted and we still need to be able to remove items before saving. 
</p>

                            
                          </td>
                          <td class="PosixTime">1284972211000000
                          </td>
                          <td class="ModifiedTime">1311171104000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/794.html">#794</a>
                          </td>
                          <td class="type">requirement
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/794.html">Investigate reconciling UKLP Publisher and Provider with DGU</a>
                          </td>
                          <td class="description">
                            <p>
This needs more analysis, but the GEMINI2 attribute "metadata point of contact" must be reconciled with the registered publisher (or agent).
</p>
<p>
This might also be used to filter records harvested from a CSW source, but filtering also needs more analysis, as does distinction between agent and provider.
</p>

                            
                          </td>
                          <td class="PosixTime">1289227811000000
                          </td>
                          <td class="ModifiedTime">1311179581000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1416.html">#1416</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-11-07.html">ckan-sprint-2011-11-07</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1416.html">Registering with blank email can cause exception</a>
                          </td>
                          <td class="description">
                            <p>
This might well be a bot, but not POSTing the email field should not cause an exception - it should be 400 and then the sysadmin doesn't get these nags.
</p>
<pre class="wiki">http://www.publicdata.eu/user/register
...
Module ckan.controllers.user:79 in register
&lt;&lt;              c.login = request.params.getone('login')
                   c.fullname = request.params.getone('fullname')
                   c.email = request.params.getone('email')
                   if not model.User.check_name_available(c.login):
                       h.flash_error(_("That username is not available."))
&gt;&gt;  c.email = request.params.getone('email')
Module webob.multidict:335 in getone
&lt;&lt;          values were found.
               """
               return self._decode_value(self.multi.getone(self._encode_key(key)))
       
           def mixed(self):
&gt;&gt;  return self._decode_value(self.multi.getone(self._encode_key(key)))
Module webob.multidict:99 in getone
&lt;&lt;          v = self.getall(key)
               if not v:
                   raise KeyError('Key not found: %r' % key)
               if len(v) &gt; 1:
                   raise KeyError('Multiple values match %r: %r' % (key, v))
&gt;&gt;  raise KeyError('Key not found: %r' % key)
KeyError: "Key not found: 'email'"
</pre><pre class="wiki">HTTP_USER_AGENT	'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; MRA 4.3 (build 01218); .NET CLR 1.1.4322)'
webob._parsed_post_vars	(MultiDict([('login', 'ahusernames9'), ('fullname', 'ahusernames9'), ('password1', '******'), ('password2', '******'), ('s', 'Sign up')]), &lt;FakeCGIBody at 0xb9d7c5ec viewing MultiDict([('lo...p')])&gt;)
</pre>
                            
                          </td>
                          <td class="PosixTime">1319533989000000
                          </td>
                          <td class="ModifiedTime">1320153507000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2767.html">#2767</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">aron.carroll
                          </td>
                          <td class="reporter">aron.carroll
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/demo&#32;phase&#32;3.html">demo phase 3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2767.html">Upgrade macro form.select to use tuples instead of dicts</a>
                          </td>
                          <td class="description">
                            <p>
This keeps the intended order.
</p>

                            
                          </td>
                          <td class="PosixTime">1343319298000000
                          </td>
                          <td class="ModifiedTime">1343645517000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2802.html">#2802</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">aron.carroll
                          </td>
                          <td class="reporter">aron.carroll
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/demo&#32;phase&#32;3.html">demo phase 3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2802.html">Need to tweak the JSON formatting of the localisations</a>
                          </td>
                          <td class="description">
                            <p>
This is what we need the JSON to look like. Taken from the Jed documentation (<a class="ext-link" href="http://slexaxton.github.com/Jed/"><span class="icon">​</span>http://slexaxton.github.com/Jed/</a>).
</p>
<pre class="wiki">{

      // The empty string key is used as the configuration
      // block for each domain
      "" : {
        // Domain name
        "domain" : "the_domain",

        // Language code
        "lang" : "en",

        // Plural form function for language
        "plural_forms" : "nplurals=2; plural=(n != 1);"
      },

      // Other keys in a domain contain arrays as values
      // that map to the translations for that key.
      // Gettext suggests that you use english as your keys
      // in case the key isn't found, and it can just pass
      // the value directly through.
      // Note: by convention, the 0-index location of the translations
      // is never accessed. It's just a thing, I guess.
      "a key" : [ null, "the translation", "the plural translations", ... ],

      // The plural form string is converted into a function
      // and the value that's passed into the gettext call
      // is passed into the plural form function. It's result
      // (plus 1) is the index that the translation comes from.

      // We're using sprintf interpolation on our keys so we can
      // then sub in the _actual_ values into the result.
      "%d key" : [ null, "%d key", "%d keys" ],

      // Contexts are keys that are just prefixed with a context string
      // with a unicode \u0004 as the delimiter.
      // You can use it for anything. Usually it's just for being content aware
      // in some way (e.g. male vs. female, product vs. category)
      "context\u0004%d key": [ null, "context %d key", "context %d keys" ]
    }
</pre><p>
This looks like an appropriate python library to do the formatting. <a class="ext-link" href="http://pypi.python.org/pypi/pojson/"><span class="icon">​</span>http://pypi.python.org/pypi/pojson/</a> but I'll leave to your discretion.
</p>
<p>
Finally an API endpoint that returns the appropriate request would save us making requests to the i18n directory.
</p>
<pre class="wiki">/api/i18n/{locale}
</pre><p>
For example if the current url is <a class="ext-link" href="../../localhost:5000/pl/dataset.html"><span class="icon">​</span>http://localhost:5000/pl/dataset</a> then the client would request:
</p>
<pre class="wiki">http://localhost:5000/api/i18n/pl
</pre><p>
This should return the Content-Type: application/json and a 200 with an appropriate JSON body (this can be the language requested or an appropriate fallback). I think that if the fallback is the default language (in most cases English) then we just return a 204 No Content to save data. 
</p>

                            
                          </td>
                          <td class="PosixTime">1344248847000000
                          </td>
                          <td class="ModifiedTime">1344269446000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1504.html">#1504</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-12-05.html">ckan-sprint-2011-12-05</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1504.html">Action API given blank data causes exception</a>
                          </td>
                          <td class="description">
                            <p>
This is what caused the exception:
</p>
<pre class="wiki">curl http://localhost:5000/api/action/package_search -d='{"q": "osm"}'
</pre><p>
The problem is the content-type is formencoding, the '=' is the first character of the request, and so internally the data_dict is set to ' ', which needs to be a dictionary.
</p>

                            
                          </td>
                          <td class="PosixTime">1322756748000000
                          </td>
                          <td class="ModifiedTime">1324035928000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1477.html">#1477</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.6.html">ckan-v1.6</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1477.html">[Super] Group refactor</a>
                          </td>
                          <td class="description">
                            <p>
This is the implementation of the final draft in
</p>
<p>
<a class="ext-link" href="http://wiki.ckan.org/Groups_Refactor"><span class="icon">​</span>http://wiki.ckan.org/Groups_Refactor</a>
</p>
<p>
Steps to complete this will follow (somewhat) in the following order.
</p>
<p>
Change package_group table to membership. (<a class="closed ticket" href="../ticket/1478.html" title="enhancement: change package_group to members table (closed: fixed)">#1478</a>) 3d
</p>
<ul><li>model migration. (done)
</li><li>simplify revisioning  (done)
</li><li>Remove any sqlalchemy releations from groups. (done)
</li><li>change logic functions (done)
</li></ul><p>
  
</p>
<p>
Single type per group (<a class="closed ticket" href="../ticket/1531.html" title="enhancement: Update group create/update so you can add capacities and group types. (closed: fixed)">#1531</a>)
</p>
<ul><li>migration add type to group table. (done) 1d
</li></ul><p>
  
Add capacity table (<a class="closed ticket" href="../ticket/1522.html" title="enhancement: Add capacity to member table. (closed: fixed)">#1522</a>)
</p>
<ul><li>model migration. (done)
</li><li>add to logic functions.
</li></ul><p>
  
Allow other objects to be added to groups. (<a class="closed ticket" href="../ticket/1531.html" title="enhancement: Update group create/update so you can add capacities and group types. (closed: fixed)">#1531</a>)
</p>
<ul><li>change logic functions (done)
</li></ul><p>
Adapt thedatahub.org to use new model.
</p>
<ul><li>move auth groups over to groups/members
</li><li>change user_object roles to use groups? keep user object roles for time being.
</li><li>make create update package/group put the correct items in the group/members/capacity tables.
</li><li>work out how ui works.
</li></ul><p>
--not doing the below as part of this super ticker now <a class="closed ticket" href="../ticket/1669.html" title="enhancement: [super] Publisher profile (closed: fixed)">#1669</a>.
</p>
<p>
Create model for dgu.
</p>
<ul><li>adapt auth functions to use auth.
</li><li>adapt package_create/update group_create/update to fill in the correct capacties/members.
</li></ul><p>
Adapt Iati, and potentially other custom instances.
</p>
<p>
Sub-tickets:
</p>
<ul><li><a class="closed ticket" href="../ticket/1279.html" title="enhancement: Refactor or deprecate Authorization Groups (closed: duplicate)">#1279</a> Deprecate Authorization Groups
</li><li><a class="new ticket" href="../ticket/1198.html" title="enhancement: Publisher hierarchy (new)">#1198</a> Publisher hierarchy
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1321959320000000
                          </td>
                          <td class="ModifiedTime">1328016209000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/153.html">#153</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.11.html">v0.11</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/153.html">Group's packages listed alphabetically</a>
                          </td>
                          <td class="description">
                            <p>
This is so you can easily look up whether a given package is already listed - otherwise as lists get bigger becomes difficult to see what is already there.
</p>
<p>
Suggested by Jonathan Gray
</p>

                            
                          </td>
                          <td class="PosixTime">1255621515000000
                          </td>
                          <td class="ModifiedTime">1258971895000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2681.html">#2681</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">aron.carroll
                          </td>
                          <td class="reporter">shevski
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/demo&#32;phase&#32;2.html">demo phase 2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2681.html">autofill on resource format</a>
                          </td>
                          <td class="description">
                            <p>
This is pretty key for standardization.
</p>
<p>
Also would like us to change the grey text to be: e.g. CSV, JSON, [more examples... i have no idea what they key ones are tbh]
</p>

                            
                          </td>
                          <td class="PosixTime">1342440406000000
                          </td>
                          <td class="ModifiedTime">1343135874000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2475.html">#2475</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">seanh
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.9.html">ckan-v1.9</a>
                          </td>
                          <td class="status">accepted
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2475.html">Upgrade trac.ckan.org to trac 0.12.3</a>
                          </td>
                          <td class="description">
                            <p>
This is not trivial, requires a database upgrade. But 0.12.3 has some nice new features (multiple vcs repository support, ticket comment editing and nicer preview) and the latest spam filter plugin requires 0.12.
</p>
<p>
<a class="ext-link" href="http://trac.edgewall.org/wiki/ChangeLog"><span class="icon">​</span>http://trac.edgewall.org/wiki/ChangeLog</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1338317176000000
                          </td>
                          <td class="ModifiedTime">1341234564000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/544.html">#544</a>
                          </td>
                          <td class="type">requirement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.3.html">ckan-v1.3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/544.html">Backport facet browsing to CKAN 1.2</a>
                          </td>
                          <td class="description">
                            <p>
This is in IATI, would be nice to have in generic CKAN. 
</p>
<ul><li><a class="ext-link" href="http://bitbucket.org/okfn/iati/changeset/378431974c76"><span class="icon">​</span>http://bitbucket.org/okfn/iati/changeset/378431974c76</a>
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1283267292000000
                          </td>
                          <td class="ModifiedTime">1291638966000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/3004.html">#3004</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan&#32;2.0.html">ckan 2.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/3004.html">ImportError: No module named polib</a>
                          </td>
                          <td class="description">
                            <p>
This is happening whenever people try to run paster commands. polib should only be needed for the check-po-files command don't import otherwise.
</p>

                            
                          </td>
                          <td class="PosixTime">1350907790000000
                          </td>
                          <td class="ModifiedTime">1361988802000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/177.html">#177</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/177.html">Service documentation</a>
                          </td>
                          <td class="description">
                            <p>
This is docs for users of a CKAN service (e.g. ckan.net), as opposed to someone installing / administering the software. (The latter has docs on knowledgeforge.
</p>
<p>
Editability - wiki?
</p>

                            
                          </td>
                          <td class="PosixTime">1257243285000000
                          </td>
                          <td class="ModifiedTime">1273050236000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/293.html">#293</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/293.html">REST PackageResource update causes exception</a>
                          </td>
                          <td class="description">
                            <p>
This is caused by editing a package with resources over the REST interface.
</p>
<p>
Exception:
</p>
<pre class="wiki">URL: http://de.ckan.net/api/rest/package/destatis
Module weberror.errormiddleware:162 in __call__
&lt;&lt;              __traceback_supplement__ = Supplement, self, environ
                   sr_checker = ResponseStartChecker(start_response)
                   app_iter = self.application(environ, sr_checker)
                   return self.make_catching_iter(app_iter, environ, sr_checker)
               except:
&gt;&gt;  app_iter = self.application(environ, sr_checker)
Module repoze.who.middleware:107 in __call__
&lt;&lt;          wrapper = StartResponseWrapper(start_response)
               app_iter = app(environ, wrapper.wrap_start_response)
       
               # The challenge decider almost(?) always needs information from the
&gt;&gt;  app_iter = app(environ, wrapper.wrap_start_response)
Module beaker.middleware:73 in __call__
&lt;&lt;                                                     self.cache_manager)
               environ[self.environ_key] = self.cache_manager
               return self.app(environ, start_response)
&gt;&gt;  return self.app(environ, start_response)
Module beaker.middleware:152 in __call__
&lt;&lt;                          headers.append(('Set-cookie', cookie))
                   return start_response(status, headers, exc_info)
               return self.wrap_app(environ, session_start_response)
           
           def _get_session(self):
&gt;&gt;  return self.wrap_app(environ, session_start_response)
Module routes.middleware:130 in __call__
&lt;&lt;                  environ['SCRIPT_NAME'] = environ['SCRIPT_NAME'][:-1]
               
               response = self.app(environ, start_response)
               
               # Wrapped in try as in rare cases the attribute will be gone already
&gt;&gt;  response = self.app(environ, start_response)
Module pylons.wsgiapp:125 in __call__
&lt;&lt;          
               controller = self.resolve(environ, start_response)
               response = self.dispatch(controller, environ, start_response)
               
               if 'paste.testing_variables' in environ and hasattr(response,
&gt;&gt;  response = self.dispatch(controller, environ, start_response)
Module pylons.wsgiapp:324 in dispatch
&lt;&lt;          if log_debug:
                   log.debug("Calling controller class with WSGI interface")
               return controller(environ, start_response)
           
           def load_test_env(self, environ):
&gt;&gt;  return controller(environ, start_response)
Module ckan.lib.base:51 in __call__
&lt;&lt;          # available in environ['pylons.routes_dict']
               try:
                   return WSGIController.__call__(self, environ, start_response)
               finally:
                   model.Session.remove()
&gt;&gt;  return WSGIController.__call__(self, environ, start_response)
Module pylons.controllers.core:221 in __call__
&lt;&lt;                  return response(environ, self.start_response)
               
               response = self._dispatch_call()
               if not start_response_called:
                   self.start_response = start_response
&gt;&gt;  response = self._dispatch_call()
Module pylons.controllers.core:172 in _dispatch_call
&lt;&lt;              req.environ['pylons.action_method'] = func
                   
                   response = self._inspect_call(func)
               else:
                   if log_debug:
&gt;&gt;  response = self._inspect_call(func)
Module pylons.controllers.core:107 in _inspect_call
&lt;&lt;                        func.__name__, args)
               try:
                   result = self._perform_call(func, args)
               except HTTPException, httpe:
                   if log_debug:
&gt;&gt;  result = self._perform_call(func, args)
Module pylons.controllers.core:60 in _perform_call
&lt;&lt;          """Hide the traceback for everything above this method"""
               __traceback_hide__ = 'before_and_this'
               return func(**args)
           
           def _inspect_call(self, func):
&gt;&gt;  return func(**args)
Module ckan.controllers.rest:145 in update
&lt;&lt;                  fs = ckan.forms.group_fs_combined
                   fs = fs.bind(entity, data=request_fa_dict)
                   validation = fs.validate_on_edit(entity.name, entity.id)
                   if not validation:
                       response.status_int = 409
&gt;&gt;  validation = fs.validate_on_edit(entity.name, entity.id)
Module ckan.forms.package:385 in validate_on_edit
&lt;&lt;              temp_name = orig_pkg_name
                   self.data['Package-%s-name' % record_id] = u'something_unique'
               validation = self.validate()
               if temp_name:
                   # restore it
&gt;&gt;  validation = self.validate()
Module formalchemy.forms:175 in validate
&lt;&lt;          if self.readonly:
                   raise Exception('Cannot validate a read-only FieldSet')
               return AbstractFieldSet.validate(self)
       
           def sync(self):
&gt;&gt;  return AbstractFieldSet.validate(self)
Module formalchemy.forms:104 in validate
&lt;&lt;          success = True
               for field in self.render_fields.itervalues():
                   success = field._validate() and success
               # run this _after_ the field validators, since each field validator
               # resets its error list. we want to allow the global validator to add
&gt;&gt;  success = field._validate() and success
Module formalchemy.fields:763 in _validate
&lt;&lt;          try:
                   value = self._deserialize()
               except validators.ValidationError, e:
                   self.errors.append(e)
&gt;&gt;  value = self._deserialize()
Module formalchemy.fields:1354 in _deserialize
&lt;&lt;          if self.is_composite_foreign_key:
                   return self.query(self.relation_type()).get(python_pk(self.renderer.deserialize()))
               return self.renderer.deserialize()
&gt;&gt;  return self.renderer.deserialize()
Module formalchemy.fields:183 in deserialize
&lt;&lt;          if self.field.is_collection:
                   return [self._deserialize(subdata) for subdata in self._serialized_value()]
               return self._deserialize(self._serialized_value())
       
           def _deserialize(self, data):
&gt;&gt;  return self._deserialize(self._serialized_value())
Module formalchemy.fields:167 in _serialized_value
&lt;&lt;          if self.field.is_collection:
                   return self._params.getall(self.name)
               return self._params.getone(self.name)
       
           def deserialize(self):
&gt;&gt;  return self._params.getone(self.name)
Module formalchemy.base:63 in getone
&lt;&lt;          if v is None or isinstance(v, basestring) or isinstance(v, cgi.FieldStorage):
                   return v
               return v[0]
           def getall(self, key):
               v = dict.get(self, key)
&gt;&gt;  return v[0]
TypeError: 'int' object is unsubscriptable
</pre><p>
Thanks to Friedrich for spotting this.
</p>

                            
                          </td>
                          <td class="PosixTime">1271756102000000
                          </td>
                          <td class="ModifiedTime">1271940083000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/102.html">#102</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/102.html">Switch to using UUIDs for revision ids</a>
                          </td>
                          <td class="description">
                            <p>
This is better for long term sustainability, especially if we want to "push and pull" from unrelated repositories in the future.
</p>
<p>
Details:
</p>
<ul><li>May wish to retain a number field updated in the usual incremental way (what's the cost/benefit here?)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1250068175000000
                          </td>
                          <td class="ModifiedTime">1260285104000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2790.html">#2790</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">toby
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/demo&#32;phase&#32;4.html">demo phase 4</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2790.html">logic.action.user_show is slow</a>
                          </td>
                          <td class="description">
                            <p>
This is a very slow call it would benefit from the sort of speed-ups that package-search received
</p>
<p>
for me locally this is taking 6 seconds for rufus using the datahub data I have.  I think a lot of this is the dataset retrival/dictization
</p>
<p>
can we just grab json blobs from solr?
</p>
<p>
also is it possible to specify a sort order/paging?
</p>
<p>
I've put this as a demo-theme ticket as it is an big issue on the demo we are at 25 second page loads - which i can get down to about 8.8 secs so this is the main pain point now
</p>

                            
                          </td>
                          <td class="PosixTime">1343852483000000
                          </td>
                          <td class="ModifiedTime">1345023734000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1415.html">#1415</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">thejimmyg
                          </td>
                          <td class="reporter">nils.toedtmann
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-12-05.html">ckan-sprint-2011-12-05</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1415.html">Comments on current status of ckan deb packages</a>
                          </td>
                          <td class="description">
                            <p>
This is a scratch pad ticket with some comments on the current status of our ckan deb packages. I know that some of it is the deb packaging roadmap anyway, please forgive me if i mention them here again.
</p>
<p>
Rufus and me re-deployed some community ckan instances onto s022 (see <a class="ext-link" href="http://trac.okfn.org/ticket/926"><span class="icon">​</span>http://trac.okfn.org/ticket/926</a>). We followed the documentation 
<a class="ext-link" href="http://docs.ckan.org/en/latest/install-from-package.html"><span class="icon">​</span>http://docs.ckan.org/en/latest/install-from-package.html</a> 
</p>
<ul><li>Deb package version number: the version of the deb package is "python-ckan 1309471251~149be76faabc+lucid-1", and it's hard to guess from there that it contains a ckan 1.4.2a
</li><li>When is 1.4.3/1.5.x expected as deb package?
</li><li>There was a bug in the DB upgrade script /usr/share/pyshared/ckan/migration/versions/029_version_groups.py (line 150) which looks like it was fixed 1.4.1==&gt;1.4.2 but was nevertheless present in this deb package.
</li><li>The current script /usr/bin/ckan-std-install
<ul><li>does not set the Apache <a class="missing wiki">ServerName?</a> according to the $INSTANCE variable
</li><li>automatically configures a ckan extension named after $INSTANCE
</li><li>depends on local postgres
</li><li>could be replaced with "/usr/bin/ckan-deploy --name=ckan-std --domain=ckan-std.localhost (see next point)
</li></ul></li><li>(i think this is exactly James' plan): have more generic deployment script /usr/bin/ckan-deploy as part of python-ckan which takes arguments like
<ul><li>--domain=cc.ckan.net
</li><li>--aliases=$list-of-domains
</li><li>--name=cc (defaults to "domain")
</li><li>--no-db (does not configure a DB)
</li><li>--sql-alchemy=$DB_CONFIG_STRING (also runs "paster --plugin ckan db upgrade --config")
</li><li>--extension $list-of-extesions 
</li><li>...
</li></ul></li></ul>
                            
                          </td>
                          <td class="PosixTime">1319457069000000
                          </td>
                          <td class="ModifiedTime">1323167941000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2204.html">#2204</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">ross
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-04-30.html">ckan-sprint-2012-04-30</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2204.html">[super] Related (Stuff) Extension</a>
                          </td>
                          <td class="description">
                            <p>
This is a reworking of the existing apps extension.
</p>
<p>
Initial proposal at <a class="ext-link" href="http://wiki.ckan.org/Proposals#Apps_in_CKAN"><span class="icon">​</span>http://wiki.ckan.org/Proposals#Apps_in_CKAN</a> and <a class="ext-link" href="http://wiki.ckan.org/Proposals#References.2FLinks_in_CKAN"><span class="icon">​</span>http://wiki.ckan.org/Proposals#References.2FLinks_in_CKAN</a>
</p>
<h2 id="Naming">Naming</h2>
<p>
What do we call this extension?
</p>
<ul><li>related
<ul><li>RP best IMO but perhaps too close to separate relationships concept?
</li></ul></li><li>relatedstuff
</li><li>links
</li><li>references
</li></ul><h2 id="Proposal">Proposal</h2>
<p>
"Related Stuff": Apps as in an application (website/service/tool) that uses this dataset (as in Apps and Ideas extension)
</p>
<ul><li>This case seems a general example of wanting to link some external thing to a dataset (e.g. this policy paper refs this dataset, this application uses this dataset, this visualization is built on this dataset cf <a class="ext-link" href="http://lists.okfn.org/pipermail/ckan-discuss/2011-August/001607.html"><span class="icon">​</span>http://lists.okfn.org/pipermail/ckan-discuss/2011-August/001607.html</a>)
</li></ul><h2 id="Implementation">Implementation</h2>
<p>
New table named Related with following structure
</p>
<pre class="wiki">|| id (int) || type || title || description (markdown) || image_url || owner_id || url || created (timestamp)
</pre><ul><li>type = Idea | App | API | Visualization | Post | Paper | News Article
<ul><li>Suggest we make this a ckan.ini config option (comma separated ...?)
<ul><li>Do we want the possibility of different templates for different types of Related objects?
</li></ul></li></ul></li></ul><ul><li>image: ?? Depends where we store images. Simplest option would be to change to image_url and leave it to users to have already uploaded an image somewhere. If not we need to support image uploading and storage. See <a class="closed ticket" href="../ticket/1692.html" title="enhancement: Add image attribute to Dataset and Group (closed: wontfix)">#1692</a> (add image attribute to datasets and groups) for more discussion, once implemented the URL here can be an internal url.
</li></ul><ul><li>owner_id = user_id or creating user (see authorization below) 
</li></ul><p>
Related2Dataset (note that related_id, dataset_id tuple should be unique). This allows for m2m connections. If a given related item is only with one dataset this could be simplified. May contain status so dataset owner can turn this on/off.
</p>
<pre class="wiki">|| id || dataset_id || related_id || status
</pre><p>
status should be used to allow for a dataset owner (for dataset_id) to de-activate the relationship between the dataset and the related.
</p>
<h3 id="Url">Url</h3>
<ul><li>/dataset/{dataset-name}/related/{related-item-id}/{related-item-title-stringified}
<ul><li>If a reference item could exist in its own right (and perhaps refer to multiple datasets then it should get its own url at e.g. /related/{id}
</li></ul></li><li>/dataset/{dataset-name}/related/add =&gt; Modal dialog on related tab so we can use API to create them.
</li></ul><p>
/dataset/{id}/related &lt;- list
</p>
<ul><li>use image_url for small icon etc, title description (shortened?)
</li><li>Click through to full related item (optional)
</li><li>dataset owner is shown show / hide button ... (or on /dataset/{id}/related/{id} )
</li><li>related owner sees an edit button / icon (pops up modal)
</li></ul><p>
/dataset/{id}/related/{id} (optional)
</p>
<p>
/dataset/{id} will have a Related tab (with bubble with count).
</p>
<ul><li>Drop down with Add Related -&gt; Pop-up modal and save via API
</li></ul><blockquote>
<blockquote>
<p>
(Not used: /related/add with dataset prefilled ... )
</p>
</blockquote>
</blockquote>
<p>
/related/{id}/edit
</p>
<h3 id="Authorization">Authorization</h3>
<p>
Addition of related item be considered orthogonal to datasets (and hence with separate authorization i.e. i can add the info that site X uses dataset Y without needing permission to edit dataset Y).
</p>
<p>
Thus any logged in user could add a Related item. We set the owner of the related item to creating user and going forward only that user or a sysadmin can update or delete.
</p>
<p>
NB: we could have a system where datasets owners have to approve related items before they show up next to their dataset. This would add substantial complexity so I propose we leave out of phase 1.
</p>
<h3 id="Tasksandestimates7.5d">Tasks and estimates {7.5d}</h3>
<p>
[x] Model + Migration for Related table. {0.75d}
</p>
<p>
[x] Controller for Related (or relevant sections in Package controller). {0.75d}
</p>
<p>
[x] Routing setup. {0.25d}
</p>
<p>
[x] Schema for related. {0.5d}
</p>
<p>
[x] Logic layer actions. {1.0d}
</p>
<p>
[x] Auth (default + publisher). {0.5d}
</p>
<p>
[x] Templates + Dataset changes (new tab etc). {1.0d}
</p>
<p>
[x] JS Application for adding Related objects in a modal. {1.0d}
</p>
<p>
[x] Testing. {0.75d}
</p>
<p>
[x] Dataset owner disabling of Related (via M2M table). {0.5d}
</p>
<ul><li>Updated to allow author of related to delete as well
</li></ul><p>
[x] Documentation. {0.25d}
</p>

                            
                          </td>
                          <td class="PosixTime">1330862992000000
                          </td>
                          <td class="ModifiedTime">1337594723000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2333.html">#2333</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.9.html">ckan-v1.9</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2333.html">Introduce new resource type datastore</a>
                          </td>
                          <td class="description">
                            <p>
This is a resource that is *just* in the datastore. At the moment there are hacky ways to do this (create resource with meaningless URL etc) but we should do this properly:
</p>
<ul><li>New Option: <a class="missing wiki">DataStore?</a> Table in add a resource form
</li><li>URL field is disabled (or points at /api/data or something rather pointless)
</li><li>Download button is disabled
<ul><li>Better would be to find a way to serialize an ES table or stream it ...
</li></ul></li></ul>
                            
                          </td>
                          <td class="PosixTime">1335651360000000
                          </td>
                          <td class="ModifiedTime">1340624473000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1109.html">#1109</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1109.html">When extras has a value other than a string an integrity error occurs in the api.</a>
                          </td>
                          <td class="description">
                            <p>
This is a regression that happened after refactoring the api.
</p>
<p>
It was shown by 
</p>
<p>
<a class="ext-link" href="http://pastebin.com/2v7QasZy"><span class="icon">​</span>http://pastebin.com/2v7QasZy</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1303839943000000
                          </td>
                          <td class="ModifiedTime">1305124697000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/334.html">#334</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/334.html">Wrong link for package feed icon</a>
                          </td>
                          <td class="description">
                            <p>
This is a problem with the package page e.g. <a class="ext-link" href="http://ckan.net/package/open-election-data-project"><span class="icon">​</span>http://ckan.net/package/open-election-data-project</a> . The feed icon links to <a class="missing changeset" title="No default repository defined">[1]</a>  and the text next to it "Subscribe" links to <a class="missing changeset" title="No default repository defined">[2]</a>. Surely these should be the same? The second link seems to right one to me.
</p>
<ul><li><a class="missing changeset" title="No default repository defined">[1]</a> <a class="ext-link" href="http://ckan.net/package/open-election-data-project?format=atom"><span class="icon">​</span>http://ckan.net/package/open-election-data-project?format=atom</a>
</li><li><a class="missing changeset" title="No default repository defined">[2]</a> <a class="ext-link" href="http://ckan.net/package/history/open-election-data-project?format=atom&amp;days=7"><span class="icon">​</span>http://ckan.net/package/history/open-election-data-project?format=atom&amp;days=7</a>
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1275407445000000
                          </td>
                          <td class="ModifiedTime">1280743667000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/847.html">#847</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.3-sprint-2.html">ckan-v1.3-sprint-2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/847.html">CKAN search using SOLR backend</a>
                          </td>
                          <td class="description">
                            <p>
This is a meta-ticket to pull together all the work on SOLR as a backend for CKAN search. (Work on SOLR search has been going on since March of 2010).
</p>
<p>
3 key aspects of this:
</p>
<ul><li>Index package information in SOLR - <a class="closed ticket" href="../ticket/353.html" title="defect: SOLR search indexing (closed: fixed)">ticket:353</a> - SOLR search indexing (index CKAN)
<ul><li>Synchronously (generify Search Index update method to support SOLR or postgres?) - <a class="closed ticket" href="../ticket/317.html" title="enhancement: Make search pluggable (closed: fixed)">#317</a>: Make search pluggable
</li><li>Asynchroously: via worker with queue
<ul><li><a class="closed ticket" href="../ticket/324.html" title="enhancement: Search indexing using notifications (closed: fixed)">#324</a> Search indexing using notifications
</li><li><a class="closed ticket" href="../ticket/669.html" title="task: Refactor Solr to become a generic worker (closed: fixed)">#669</a>: Refactor Solr (indexer) to become a generic worker
</li><li><a class="closed ticket" href="../ticket/874.html" title="enhancement: Extract solr search backend into an extension (closed: fixed)">#874</a>: Extract Solr search backend into an extension
</li></ul></li></ul></li><li>In core support using SOLR backend as well as postgres for queries
<ul><li><a class="closed ticket" href="../ticket/317.html" title="enhancement: Make search pluggable (closed: fixed)">#317</a>: Make search pluggable (?)
</li></ul></li><li>Integrate into WUI (if changes needed)
<ul><li><a class="closed ticket" href="../ticket/672.html" title="enhancement: Facets in CKAN search results (closed: fixed)">#672</a> - Facets in CKAN search results
</li></ul></li></ul><p>
Extras:
</p>
<ul><li>Solr index testing tool <a class="closed ticket" href="../ticket/431.html" title="task: Solr index testing tool (closed: wontfix)">#431</a>
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1291639273000000
                          </td>
                          <td class="ModifiedTime">1295259902000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/961.html">#961</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/961.html">[super] Refactoring of forms, validation and model synchronization</a>
                          </td>
                          <td class="description">
                            <p>
This is a meta-ticket to hold all of the work on refactoring forms, validation and model-synchronization in CKAN.
</p>
<p>
ckan-dev thread: <a class="ext-link" href="http://lists.okfn.org/pipermail/ckan-dev/2011-January/000180.html"><span class="icon">​</span>http://lists.okfn.org/pipermail/ckan-dev/2011-January/000180.html</a>
</p>
<h2 id="TheIssue">The Issue</h2>
<p>
From <a class="closed ticket" href="../ticket/926.html" title="enhancement: Pick a simpler form framework (closed: fixed)">#926</a>:
</p>
<p>
The current formalchemy setup conflates view, controller and model code in a way that makes it hard to debug and customise.
</p>
<p>
From <a class="ext-link" href="http://lists.okfn.org/pipermail/ckan-dev/2011-January/000181.html"><span class="icon">​</span>http://lists.okfn.org/pipermail/ckan-dev/2011-January/000181.html</a>:
</p>
<p>
... FormAlchemy, in retrospect, was probably a mistake as it merges too much model/validation/form generation into one thing.
</p>
<p>
At least 3 functions involved [in this area]:
</p>
<ol><li>Generating (or just filling) a form template with 'form data' (and errors)
</li><li>Converting model data to form data (also happens for APIs in fact) -- let's call this 'dict-ization'
</li><li>Converting form data to model data (and validating) (inverse of previous step)
</li></ol><h2 id="RelatedTickets">Related Tickets</h2>
<ul><li><a class="closed ticket" href="../ticket/926.html" title="enhancement: Pick a simpler form framework (closed: fixed)">#926</a> - Pick a simpler form framework
</li><li><a class="closed ticket" href="../ticket/1046.html" title="enhancement: Dictization and the new logic layer (closed: fixed)">#1046</a> 'dictization' and the logic layer - serialization / deserialization of package (and other domain objects) to standard intermediate format such as json-convertable python dict
<ul><li><a class="closed ticket" href="../ticket/1079.html" title="enhancement: Refactor API to use new logic layer and dictization (closed: fixed)">#1079</a> Refactor API to use new logic layer and dictization
</li><li><a class="closed ticket" href="../ticket/1078.html" title="enhancement: Refactors WUI controllers and forms to use logic layer (closed: fixed)">#1078</a> Refactor WUI controllers and forms to use logic layer
</li><li>cf existing dumper and importer code
</li><li>This will fix <a class="closed ticket" href="../ticket/662.html" title="defect: Can't put entity that is returned by posting to package register (closed: fixed)">#662</a>
</li></ul></li><li>[not ticketed yet] - validation layer (should work on serialized objects?)
</li><li><a class="closed ticket" href="../ticket/662.html" title="defect: Can't put entity that is returned by posting to package register (closed: fixed)">#662</a> - Can't put entity that is returned by posting to package register (Defect)
</li><li><a class="closed ticket" href="../ticket/972.html" title="enhancement: Merge 'extras' into main package dict rather than having separate key (closed: wontfix)">#972</a> - Merge 'extras' into main package dict rather than having separate key
</li><li><a class="closed ticket" href="../ticket/1035.html" title="enhancement: Form impressions given an ID (closed: wontfix)">#1035</a> - Form impressions are given IDs
</li><li><a class="closed ticket" href="../ticket/810.html" title="enhancement: Move &#34;add packages&#34; field up in group form (closed: wontfix)">#810</a> - Move "add packages" field up in group form (easier to do this once forms are done)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1297069849000000
                          </td>
                          <td class="ModifiedTime">1310126100000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/838.html">#838</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">memespring
                          </td>
                          <td class="reporter">memespring
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.3-sprint-1.html">ckan-v1.3-sprint-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/838.html">UI improvements December 2010</a>
                          </td>
                          <td class="description">
                            <p>
This is a meta ticket for a bunch of UI changes: 
</p>
<ul><li><a class="closed ticket" href="../ticket/839.html" title="enhancement: Package page redesign (closed: fixed)">#839</a> Package page redesign
</li><li><a class="closed ticket" href="../ticket/846.html" title="enhancement: merge style.css and ckan.css (closed: fixed)">#846</a> Merge css files
</li><li><a class="closed ticket" href="../ticket/850.html" title="enhancement: Show welcome message on first visit to package page (closed: fixed)">#850</a> Show welcome message
</li><li><a class="closed ticket" href="../ticket/863.html" title="enhancement: prompt users for missing package information (closed: wontfix)">#863</a> Prompt users to enter missing info 
</li><li><a class="closed ticket" href="../ticket/864.html" title="enhancement: Search results UI changes (closed: fixed)">#864</a> Search results changes
</li><li><a class="closed ticket" href="../ticket/866.html" title="enhancement: Include download formats in search results (closed: fixed)">#866</a> Add download formats to search results
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1291296811000000
                          </td>
                          <td class="ModifiedTime">1295259773000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2446.html">#2446</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnmartin
                          </td>
                          <td class="reporter">aron.carroll
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/demo&#32;phase&#32;4.html">demo phase 4</a>
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2446.html">Create demo dataset history/comparison page</a>
                          </td>
                          <td class="description">
                            <p>
This is a low priority for the demo site.
</p>
<p>
Discussion:
</p>
<p>
<a class="ext-link" href="https://okfn.basecamphq.com/projects/9558659-demo-ckan-front-end/posts/62414120/comments"><span class="icon">​</span>https://okfn.basecamphq.com/projects/9558659-demo-ckan-front-end/posts/62414120/comments</a>
</p>
<p>
Implementation:
</p>
<p>
<a class="ext-link" href="http://s031.okserver.org:2375/dataset/history/adur_district_spending"><span class="icon">​</span>http://s031.okserver.org:2375/dataset/history/adur_district_spending</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1338210738000000
                          </td>
                          <td class="ModifiedTime">1352658819000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1634.html">#1634</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">seanh
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.7.html">ckan-v1.7</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1634.html">Allow users to follow/unfollow activity streams of other users, datasets and groups</a>
                          </td>
                          <td class="description">
                            <p>
This is a fairly big feature to add. Analysis: <a class="ext-link" href="http://ckan.okfnpad.org/27"><span class="icon">​</span>http://ckan.okfnpad.org/27</a>
</p>
<p>
This ticket is related to <a class="new ticket" href="../ticket/1635.html" title="enhancement: Email notifications (e.g. for activity streams) (new)">#1635</a> (email notifications for activity streams) which is about managing a list of activity streams for which the user receives email notifications. There are decisions to be made about how the two will work together.
</p>

                            
                          </td>
                          <td class="PosixTime">1326304542000000
                          </td>
                          <td class="ModifiedTime">1334587390000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2457.html">#2457</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnmartin
                          </td>
                          <td class="reporter">aron.carroll
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/demo&#32;phase&#32;4.html">demo phase 4</a>
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2457.html">Create demo tags list page</a>
                          </td>
                          <td class="description">
                            <p>
This includes the tag page as well for now.
</p>
<p>
Discussion:
</p>
<p>
<a class="ext-link" href="https://okfn.basecamphq.com/projects/9558659-demo-ckan-front-end/posts/62998445/comments"><span class="icon">​</span>https://okfn.basecamphq.com/projects/9558659-demo-ckan-front-end/posts/62998445/comments</a>
</p>
<p>
Implementation:
</p>
<p>
<a class="ext-link" href="http://s031.okserver.org:2375/en/tag"><span class="icon">​</span>http://s031.okserver.org:2375/en/tag</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1338211735000000
                          </td>
                          <td class="ModifiedTime">1352658878000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/754.html">#754</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">wwaites
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-5.html">ckan-v1.4-sprint-5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/754.html">Filtering for harvesting sysem</a>
                          </td>
                          <td class="description">
                            <p>
This has once again been ruled out for UKLP for the timebeing.
</p>

                            
                          </td>
                          <td class="PosixTime">1288040469000000
                          </td>
                          <td class="ModifiedTime">1303118020000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/940.html">#940</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.3.html">ckan-v1.3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/940.html">OpenID login via google for same user generates 2 different openid urls</a>
                          </td>
                          <td class="description">
                            <p>
This has been noted twice in the last couple of weeks.
</p>
<p>
Checking around my guess is this is due to someone logging in to www.ckan.net and ckan.net. Google generates openid based on the RP (requesting party) which is the requesting domain url unless the openid.realm is set. See:
</p>
<ul><li><a class="ext-link" href="http://groups.google.com/group/google-federated-login-api/web/the-most-important-technical-issue-in-using-the-google-accounts-api?pli=1"><span class="icon">​</span>http://groups.google.com/group/google-federated-login-api/web/the-most-important-technical-issue-in-using-the-google-accounts-api?pli=1</a>
</li><li><a class="ext-link" href="http://stackoverflow.com/questions/3549953/how-to-get-unique-identifier-from-openid-google"><span class="icon">​</span>http://stackoverflow.com/questions/3549953/how-to-get-unique-identifier-from-openid-google</a>
</li></ul><p>
To fix this we should set the openid.realm (not sure how atm).
</p>
<p>
If this is not possible an alternative is to make sure we redirect all users to a single site url (perhaps using ckan config option site_url, or doing this in apache).
</p>
<p>
Cost: 1h
</p>

                            
                          </td>
                          <td class="PosixTime">1296401521000000
                          </td>
                          <td class="ModifiedTime">1297071748000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/672.html">#672</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.3-sprint-1.html">ckan-v1.3-sprint-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/672.html">Facets in CKAN search results</a>
                          </td>
                          <td class="description">
                            <p>
This has been done in IATI ckan but should be ported over to CKAN main and put into the UI in a nice fashion.
</p>
<p>
IATI: <a class="ext-link" href="http://bitbucket.org/okfn/iati/changeset/378431974c76"><span class="icon">​</span>http://bitbucket.org/okfn/iati/changeset/378431974c76</a> (related to <a class="closed ticket" href="../ticket/520.html" title="requirement: Browseable web interface onto the data (closed: fixed)">#520</a>)
</p>
<p>
Requires SOLR search backend (for postgres should fall back gracefully -- just do not show them).
</p>

                            
                          </td>
                          <td class="PosixTime">1286190736000000
                          </td>
                          <td class="ModifiedTime">1291715338000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2663.html">#2663</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">toby
                          </td>
                          <td class="reporter">toby
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.9.html">ckan-v1.9</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2663.html">h.resource_display_name needs love</a>
                          </td>
                          <td class="description">
                            <p>
This function is shit and needs cleaning up and a doc string
</p>
<p>
description is markdown and should be treated properly
</p>
<p>
either we should truncate all or leave it to the templates but work universally
</p>
<p>
url if no name / desc this is in demo-theme branch
</p>

                            
                          </td>
                          <td class="PosixTime">1342017746000000
                          </td>
                          <td class="ModifiedTime">1342017746000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2571.html">#2571</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">toby
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/demo&#32;phase&#32;1.html">demo phase 1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2571.html">implement logic.action.create.resource_create()</a>
                          </td>
                          <td class="description">
                            <p>
This function is incomplete
</p>
<p>
If you want I can do this but I need guidance over how to do this properly. ie would I go through lib.dictization.model_save.package_resource_list_save() which looks wrong to me as I'd need the package.  resource_dict_save() seems better but to be honest the total lack of docstrings etc makes me feel ill.
</p>

                            
                          </td>
                          <td class="PosixTime">1340102259000000
                          </td>
                          <td class="ModifiedTime">1340369783000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1264.html">#1264</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">zephod
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-10.html">ckan-sprint-2011-10-10</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1264.html">Merge ckanext-admin into core</a>
                          </td>
                          <td class="description">
                            <p>
This extension should be in core now -- functionality is basic and very useful.
</p>
<p>
Copy across from here: <a class="ext-link" href="http://bitbucket.org/okfn/ckanext-admin"><span class="icon">​</span>http://bitbucket.org/okfn/ckanext-admin</a>
</p>
<p>
Suggest this no longer even be an extension.
</p>

                            
                          </td>
                          <td class="PosixTime">1312480783000000
                          </td>
                          <td class="ModifiedTime">1318245716000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1821.html">#1821</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-03-05.html">ckan-sprint-2012-03-05</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1821.html">create internal multilingual extension that brings together all multilingual features</a>
                          </td>
                          <td class="description">
                            <p>
This extension point needs to combine.
</p>
<ul><li> Making sure the correct data get put in search index.
</li><li> Make the search queries are modified to weight multilingual search correctly.
</li><li> View pages, including search results are translated.
</li><li> Bring together all search schema modifications.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1329771267000000
                          </td>
                          <td class="ModifiedTime">1330990111000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1262.html">#1262</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1262.html">Enforce "create-user" permission</a>
                          </td>
                          <td class="description">
                            <p>
This does not seem to have any implications at the moment, it should lock down registration and remove all related links. 
</p>

                            
                          </td>
                          <td class="PosixTime">1312375296000000
                          </td>
                          <td class="ModifiedTime">1323090112000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2707.html">#2707</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">toby
                          </td>
                          <td class="reporter">shevski
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/demo&#32;phase&#32;3.html">demo phase 3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2707.html">Tidy up additional info boxes on dataset and resource pages</a>
                          </td>
                          <td class="description">
                            <p>
This currently looks terrible. Some simple things we should do to improve this.
</p>
<ul><li>Localise and captitalise known (non custom) keys into human titles. eg. "size", "created_at", "mime_type".
</li><li>Apply units to values of known keys where possible eg. "size in appropiate units"
</li><li>Convert dates into a more human friendly format. We can avoid localisation hell by using an ISO format like YYYY/MM/DD hh:mm:ss which is still better than ISO8061
</li><li>Move the non user fields to the top of the table.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1342621471000000
                          </td>
                          <td class="ModifiedTime">1344504846000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1494.html">#1494</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">seanh
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-01-09.html">ckan-sprint-2012-01-09</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1494.html">API call for getting a user's public activity stream as rendered rtext</a>
                          </td>
                          <td class="description">
                            <p>
This could be implemented as a separate API call, or the rendered text versions of the activities could be added into the JSON returned by the existing API call.
</p>
<p>
This requires setting up templates for rendering activity streams items and detail items as nice, human-readable text.
</p>
<p>
There are some open questions, e.g.: Do we want the entire activity stream rendered as a block of plain text? As HTML? Or do we want a list of JSON objects, where each object contains its textual and/or HTML representations as fields?
</p>
<p>
Activity stream items and their related detail items are separate objects that each have their own textual representations.
</p>
<p>
For a mockup of the kind of text messages we want, see:
</p>
<p>
<a class="ext-link" href="http://datahub.pudo.org/pudo"><span class="icon">​</span>http://datahub.pudo.org/pudo</a>
</p>
<p>
but note that this ticket is just for creating the text snippets themselves, not rendering then in an HTML page or RSS feed. Also the mockup only show activity items and not their detail items.
</p>

                            
                          </td>
                          <td class="PosixTime">1322495447000000
                          </td>
                          <td class="ModifiedTime">1326109757000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1002.html">#1002</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-12-05.html">ckan-sprint-2011-12-05</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1002.html">Remove changeset model code</a>
                          </td>
                          <td class="description">
                            <p>
This code is unused and tests are disabled i belive. I suggest stripping this out (can always be re-added in an extension later). If we remove we should probably delete the relevant tables (and so a migration is needed).
</p>

                            
                          </td>
                          <td class="PosixTime">1298489773000000
                          </td>
                          <td class="ModifiedTime">1322515696000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2407.html">#2407</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">markw
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.9.html">ckan-v1.9</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2407.html">'Access denied' message is unhelpful</a>
                          </td>
                          <td class="description">
                            <p>
This chap tried to use the API to add a dataset to a group and got the uninformative message 'Access denied':
</p>
<p>
<a class="ext-link" href="http://lists.okfn.org/pipermail/ckan-dev/2012-May/002229.html"><span class="icon">​</span>http://lists.okfn.org/pipermail/ckan-dev/2012-May/002229.html</a>
</p>
<p>
The problem was he didn't have access to the group. A message like 'You don't have access to the group "LODcloud"' would have been clearer.
</p>

                            
                          </td>
                          <td class="PosixTime">1337612500000000
                          </td>
                          <td class="ModifiedTime">1340633440000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2438.html">#2438</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">icmurray
                          </td>
                          <td class="reporter">icmurray
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.8.html">ckan-v1.8</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2438.html">resource_search action not accessible via GET request</a>
                          </td>
                          <td class="description">
                            <p>
This action is not currently usable via a GET request as it relies upon a nested dict of fields.
</p>

                            
                          </td>
                          <td class="PosixTime">1338197305000000
                          </td>
                          <td class="ModifiedTime">1341406005000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1660.html">#1660</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">lucychambers
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-02-06.html">ckan-sprint-2012-02-06</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1660.html">CSV preview broken - OpenSpending</a>
                          </td>
                          <td class="description">
                            <p>
This CSV resource used to preview but now the format appears to be unsupported: "We are unable to preview this type of resource: x-osdata-csv"
</p>
<p>
<a class="ext-link" href="http://thedatahub.org/dataset/lbhf-spending-2010/resource/9661abbd-2816-4d58-8b20-3cb0eb770c69"><span class="icon">​</span>http://thedatahub.org/dataset/lbhf-spending-2010/resource/9661abbd-2816-4d58-8b20-3cb0eb770c69</a>
</p>
<p>
This is used as an example by the <a class="missing wiki">OpenSpending?</a> team all the time.
</p>

                            
                          </td>
                          <td class="PosixTime">1326717846000000
                          </td>
                          <td class="ModifiedTime">1328013627000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/445.html">#445</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/445.html">Add dumps to DGU SLA</a>
                          </td>
                          <td class="description">
                            <p>
Thinking about putting something like this:
</p>
<p>
Dumps Interface (this is NOT going in the API, it is another interface of the service):
</p>
<ul><li>resources:
</li></ul><blockquote>
<blockquote>
<p>
Daily Dump Folder
Daily Dump File
</p>
</blockquote>
</blockquote>
<ul><li>locations:
</li></ul><blockquote>
<blockquote>
<p>
/dump/hmg.ckan.net-YYYY-MM-DD.[json|csv].zip 
</p>
</blockquote>
</blockquote>
<ul><li>data format:
</li></ul><blockquote>
<blockquote>
<p>
Dump Folder is a HTML document containing a table of links to Dump Files
Dump File has either JSON or CSV format.
</p>
</blockquote>
</blockquote>
<ul><li>status codes (200, 404, 500)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1282299380000000
                          </td>
                          <td class="ModifiedTime">1283250620000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2556.html">#2556</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">aron.carroll
                          </td>
                          <td class="reporter">aron.carroll
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/demo&#32;phase&#32;1.html">demo phase 1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2556.html">Update module styles on the demo theme</a>
                          </td>
                          <td class="description">
                            <p>
They've become inconsistent as the design has changed.
</p>
<ul><li>Remove white stripe
</li><li>Make text sizes consistent
</li><li>Make white space around text boxes consistent
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1340035028000000
                          </td>
                          <td class="ModifiedTime">1340212090000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2909.html">#2909</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnmartin
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/demo&#32;phase&#32;5.html">demo phase 5</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2909.html">User profile headers are a bit weird</a>
                          </td>
                          <td class="description">
                            <p>
They seem to be not exactly well thought out. Needs some thought on better display of the information that they contain.
</p>

                            
                          </td>
                          <td class="PosixTime">1346931348000000
                          </td>
                          <td class="ModifiedTime">1346931348000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2910.html">#2910</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnmartin
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/demo&#32;phase&#32;5.html">demo phase 5</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2910.html">User listings are not very compelling</a>
                          </td>
                          <td class="description">
                            <p>
They are currently are just a small image / name. They should be: Larger image, Full name (username), description, edits/dataset
</p>

                            
                          </td>
                          <td class="PosixTime">1346931587000000
                          </td>
                          <td class="ModifiedTime">1346931587000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2314.html">#2314</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">icmurray
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-05-15.html">ckan-sprint-2012-05-15</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2314.html">parse_rfc_2822 tests failing in some timezones</a>
                          </td>
                          <td class="description">
                            <p>
These two tests:
</p>
<p>
ckan.tests.lib.test_helpers.<a class="missing wiki">TestHelpers?</a>.test_parse_rfc_2822_gmt_case
</p>
<p>
ckan.tests.lib.test_helpers.<a class="missing wiki">TestHelpers?</a>.test_parse_rfc_2822_with_offset
</p>
<p>
have been failing in certain timezones. In the UK they pass, if you're in Germany they'll fail.
</p>
<p>
The function being tested uses datetime.datetime.fromtimestamp() which uses the local time, but the tests compare the results against hardcoded strings, so the tests cannot work in different timezones.
</p>

                            
                          </td>
                          <td class="PosixTime">1334768832000000
                          </td>
                          <td class="ModifiedTime">1337073270000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/288.html">#288</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/288.html">Foreign and escaped characters in extras fields</a>
                          </td>
                          <td class="description">
                            <p>
These don't work.
</p>

                            
                          </td>
                          <td class="PosixTime">1271171899000000
                          </td>
                          <td class="ModifiedTime">1271173777000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2933.html">#2933</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan&#32;2.0.html">ckan 2.0</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2933.html">Update theming docs</a>
                          </td>
                          <td class="description">
                            <p>
There's quite a lot of custom stuff going on, with all the custom jinja extensions, and the use of Fanstatic plus custom fanstatic extensions. People who are new to CKAN wanting to write CKAN themes are likely to be confused. I think the whole lot could do with documentation, maybe in the Theming and Customizing chapter in the sphinx docs.
</p>
<p>
I suggest completely replacing the contents of doc/theming.rst, and putting a 'legacy theming' link at the bottom linking to a doc/legacy_theming.rst file with the old contents.
</p>

                            
                          </td>
                          <td class="PosixTime">1347895272000000
                          </td>
                          <td class="ModifiedTime">1347895272000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2499.html">#2499</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">toby
                          </td>
                          <td class="reporter">icmurray
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.8.html">ckan-v1.8</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2499.html">Documentation for the internal analytics</a>
                          </td>
                          <td class="description">
                            <p>
There's no docs for setting up the internal analytics, nor what it provides.
</p>
<h2 id="Setup">Setup</h2>
<p>
Add:  <tt>ckan.tracking_enabled = true</tt> to .ini file
</p>
<p>
Run: <tt>paster tracking -c dev.ini</tt>
</p>
<h2 id="Relatedlinks">Related links</h2>
<p>
<a class="ext-link" href="http://trac.ckan.org/ticket/2251"><span class="icon">​</span>http://trac.ckan.org/ticket/2251</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1339070297000000
                          </td>
                          <td class="ModifiedTime">1339070297000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1101.html">#1101</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">sebbacon
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1101.html">Integrate googlanalytics into site nav</a>
                          </td>
                          <td class="description">
                            <p>
There's a stats plugin (e.g. at <a class="ext-link" href="http://trac.ckan.org/ticket/832"><span class="icon">​</span>http://trac.ckan.org/ticket/832</a>).
</p>
<p>
Output from the googleanalytics plugin should append to that page, if the stats plugin is present.
</p>
<p>
Possibly the stats plugin and the googleanalytics plugin should be merged?
</p>
<p>
Finally, if the stats plugin is active, then a link to the stats page should be added to the main site footer.
</p>

                            
                          </td>
                          <td class="PosixTime">1303393926000000
                          </td>
                          <td class="ModifiedTime">1339774582000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1238.html">#1238</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1238.html">Viewing a package @date misses non-PackageRevisions</a>
                          </td>
                          <td class="description">
                            <p>
There's a problem with getting old versions of packages using @date. The query looks for the <a class="missing wiki">PackageRevision?</a> related to the date, but ignores <a class="missing wiki">TagRevisions?</a> etc.
</p>
<p>
So for example if you compare this table:
<a class="ext-link" href="http://ckan.net/package/history/osm"><span class="icon">​</span>http://ckan.net/package/history/osm</a>
with this view:
<a class="ext-link" href="http://ckan.net/package/osm%402010-11-30%2000%3A21%3A49.627830"><span class="icon">​</span>http://ckan.net/package/osm%402010-11-30%2000%3A21%3A49.627830</a>
you actually see the 2010-01-13 11:13 revision - the wrong revision.
</p>

                            
                          </td>
                          <td class="PosixTime">1311351303000000
                          </td>
                          <td class="ModifiedTime">1311759784000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1668.html">#1668</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1668.html">repoze version discrepency</a>
                          </td>
                          <td class="description">
                            <p>
There's a discrepency in repoze.who versions between the source and package installs:
</p>
<ul><li>repoze.who - package 1.0.18 vs source 1.0.19
</li><li>repoze.who-friendlyform - package 1.0b3 vs source 1.0.8
</li></ul><p>
We get a test failure <a class="missing changeset" title="No default repository defined">[1]</a> with the 1.0b3 version (from the ubuntu 10.04 python-repoze.who-plugins package). But we've not noticed any problems on s057 instances (br, no, ie etc) which have the package versions of repoze.who.
</p>
<p>
The reason the package install uses the earlier packaged versions rather than the ones we'd like is that repoze uses all sorts of horrendous import hacks, making it too difficult to put into our 'ckan-conflict' source package.
</p>
<p>
James suggests we 'do something horrible like dynamically patch repoze on CKAN import'.
</p>
<p>
<a class="missing changeset" title="No default repository defined">[1]</a> <a class="ext-link" href="http://buildbot.okfn.org/builders/builder-ckan/builds/1371/steps/shell/logs/stdio"><span class="icon">​</span>http://buildbot.okfn.org/builders/builder-ckan/builds/1371/steps/shell/logs/stdio</a>
ERROR: ckan.tests.functional.test_user.<a class="missing wiki">TestUserController?</a>.test_user_create_unicode
</p>

                            
                          </td>
                          <td class="PosixTime">1326801746000000
                          </td>
                          <td class="ModifiedTime">1326801746000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1260.html">#1260</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1260.html">Remove duplicate functions from _util.html</a>
                          </td>
                          <td class="description">
                            <p>
There seems to be both a list view for dictized and non dictized data structures for all entities in _util.html at the moment. Probably in the back of someone's mind already, but cleanup here would be nice. 
</p>

                            
                          </td>
                          <td class="PosixTime">1312366652000000
                          </td>
                          <td class="ModifiedTime">1313401499000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/431.html">#431</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/431.html">Solr index testing tool</a>
                          </td>
                          <td class="description">
                            <p>
There seem to be a few conditions under which either queue processing or the indexer fail in their current state. To get a more systematic picture of these failures, we should have a small testing tool to compare the index to the database of a live CKAN instance. 
</p>

                            
                          </td>
                          <td class="PosixTime">1281963532000000
                          </td>
                          <td class="ModifiedTime">1295260262000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1345.html">#1345</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">nils.toedtmann
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1345.html">Investigate possible memory leak</a>
                          </td>
                          <td class="description">
                            <p>
There is some evidence pointing to CKAN handling memory inefficiently or even leaking under certain conditions:
</p>
<p>
When we migrated ckan.net/thedatahub.org from eu7.okfn.org (32bit) to s053.okserver.org (64bit) (<a class="ext-link" href="http://trac.okfn.org/ticket/882"><span class="icon">​</span>ticket</a>) we experienced extraordinary memory usage peaks (<a class="ext-link" href="http://trac.okfn.org/ticket/904"><span class="icon">​</span>ticket</a>). Here are the observed value with Apache default settings:
</p>
<ul><li>eu7, mpm-prefork: base level ~0.6GB, peaks up to 2GB
</li><li>s055, mpm-prefork: base level ~1GB, peaks up to 4GB
</li><li>s055, mpm-worker: base level ~1.5GB, peaks up to 6GB
</li></ul><p>
William reduced the life-time of a WSGI CKAN process from 500 requests down to 25 requests (<a class="ext-link" href="https://bitbucket.org/okfn/sysadmin/changeset/126290aead28"><span class="icon">​</span>changeset</a>). This (together with two other tweaks) changed the situation drastically:
</p>
<ul><li>s055, mpm-event: base level ~1.4GB, no peaks
</li></ul><p>
This suggests that the more requests a CKAN processes serves over time, the more memory it consumes, aka bad memory management or a leak.
</p>
<p>
To prove this theory, one could reduce the total number of WSGI CKAN processes as much as possible without killing the performance (e.g. down to <em>processes=3</em>), and then observing the relation between <em>maximum-requests=25...500</em> and memory consumption.
</p>
<p>
On 14/09/11 17:49, David Read wrote:
</p>
<blockquote class="citation">
<p>
Someone to do a bit of top-down memory-use profiling would be very useful. Also useful would be something in the tests that reported what test cases use lots of memory - this could be in the nose plugin.
</p>
</blockquote>
<p>
+1
</p>

                            
                          </td>
                          <td class="PosixTime">1316041450000000
                          </td>
                          <td class="ModifiedTime">1343215489000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2824.html">#2824</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">danieljohnlewis
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/demo&#32;phase&#32;4.html">demo phase 4</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2824.html">Multiple of the same Flag Issues</a>
                          </td>
                          <td class="description">
                            <p>
There is some bizarre language flag issues.
1) Log in to <a class="ext-link" href="http://s031.okserver.org:2375/"><span class="icon">​</span>http://s031.okserver.org:2375/</a> (I'm logged in as danieljohnlewis)
2) Visit the apps page: <a class="ext-link" href="http://s031.okserver.org:2375/apps"><span class="icon">​</span>http://s031.okserver.org:2375/apps</a>
3) Have a look at the languages drop down, flags look fine (although Deutsche does have an EU flag rather than the German flag.. but that's irrelevant)
4) Change filters to, say, type: Application and sort: Newest, and apply. Web address becomes: <a class="ext-link" href="http://s031.okserver.org:2375/apps?page=1&amp;type=application&amp;sort=created_desc"><span class="icon">​</span>http://s031.okserver.org:2375/apps?page=1&amp;type=application&amp;sort=created_desc</a>
5) Look at the languages drop down: Flags are largely incorrect, with more than one country having the same flag.
</p>
<p>
Please see the attached screenshot.
</p>
<p>
Note: this was originally tested with Google Chrome on Linux (Ubuntu).
</p>

                            
                          </td>
                          <td class="PosixTime">1344505215000000
                          </td>
                          <td class="ModifiedTime">1344532640000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/899.html">#899</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/899.html">Optimise check_real_change</a>
                          </td>
                          <td class="description">
                            <p>
There is no need to re-query the database to detect if there has been a changed as sqlalchemy knows this. It saves about 15 secs in the ckan tests. <a class="ext-link" href="https://bitbucket.org/kindly/vdm/changeset/0050d023ca4e"><span class="icon">​</span>https://bitbucket.org/kindly/vdm/changeset/0050d023ca4e</a>
</p>
<p>
From David Raznick
</p>

                            
                          </td>
                          <td class="PosixTime">1294659583000000
                          </td>
                          <td class="ModifiedTime">1294916615000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/270.html">#270</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/270.html">Refactor ckan/lib/importer and ckanclient/loader.</a>
                          </td>
                          <td class="description">
                            <p>
There is code to create packages in-process (ckan/lib/importer) and via HTTP (ckanclient/loaders/base). There is also code to read different kinds of package source (Google Spreadsheets spreadsheet, other spreadsheet).
</p>
<p>
Propose to refactor all this to have template method in base command class (subclasses may implement command line interface, graphical user interface, or Web interface), where the template method calls on aggregated strategy objects for: reading raw spreadsheet data from spreadsheet application; for inferring CKAN package entities from the raw spreadsheet data; and for writing package entities to CKAN service.
</p>
<p>
Spreadsheet readers to be factored to allow for variations of spreadsheet application.
</p>
<p>
Raw data inferrers to allow for variations in spreadsheet cell structure.
</p>
<p>
CKAN writer strategies to allow for either CKAN client or direct linking.
</p>
<p>
Actual cases then supported by specifying existing strategies (or defining new ones) in a script that invokes the command class.
</p>

                            
                          </td>
                          <td class="PosixTime">1268671804000000
                          </td>
                          <td class="ModifiedTime">1290596640000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2666.html">#2666</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">aron.carroll
                          </td>
                          <td class="reporter">toby
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2666.html">templates/package/resource_edit.html</a>
                          </td>
                          <td class="description">
                            <p>
There is a new template for editing resources outside of the add dataset logic
</p>
<p>
this is the template it just throws some crap onto the page at the moment - we need to create a form - the form will end up with the usual data/edit stuff but for now you can use the resource to populate the form and I can then change it to use data - I just want to know which fields we'll have
</p>
<p>
templates/package/resource_edit.html
</p>
<p>
when done reassign to me and I'll get it functioning
</p>

                            
                          </td>
                          <td class="PosixTime">1342084373000000
                          </td>
                          <td class="ModifiedTime">1343220176000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2233.html">#2233</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-03-19.html">ckan-sprint-2012-03-19</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2233.html">Make package show, use custom json schema</a>
                          </td>
                          <td class="description">
                            <p>
There is a disrepency between what we put in and get out when using a custom form/api. Narrow this gap by making sure package_show shows the correct serilization.
</p>

                            
                          </td>
                          <td class="PosixTime">1331865349000000
                          </td>
                          <td class="ModifiedTime">1332178421000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2709.html">#2709</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">icmurray
                          </td>
                          <td class="reporter">markw
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2709.html">Atom feeds are undocumented</a>
                          </td>
                          <td class="description">
                            <p>
There doesn't seem to be any documentation yet for Atom feeds.
</p>

                            
                          </td>
                          <td class="PosixTime">1342624310000000
                          </td>
                          <td class="ModifiedTime">1342626212000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/900.html">#900</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/900.html">Intermittent error with new revision not having id</a>
                          </td>
                          <td class="description">
                            <p>
There are still some intermittent errors due to objects not having a revision_id, if you save an object at the same time as the revision.  We add the uuid earlier to fix this.    <a class="ext-link" href="https://bitbucket.org/kindly/vdm/changeset/0050d023ca4e"><span class="icon">​</span>https://bitbucket.org/kindly/vdm/changeset/0050d023ca4e</a>.
</p>
<p>
From David Raznick
</p>

                            
                          </td>
                          <td class="PosixTime">1294659696000000
                          </td>
                          <td class="ModifiedTime">1294916587000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/817.html">#817</a>
                          </td>
                          <td class="type">requirement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">cygri
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.3.html">ckan-v1.3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">worksforme
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/817.html">Proposed redesign of Resources table on package pages</a>
                          </td>
                          <td class="description">
                            <p>
There are some problems with the Resources table on package pages:
</p>
<ol><li>The column labelled “URL” doesn't contain URLs, but just the word “Download”.
</li><li>The links labelled “Download” often are not download links, but something else (example links, API endpoints, documentation links).
</li></ol><p>
Attached is a screenshot for a proposed redesign. The changes are:
</p>
<ol><li>Move the Format column to the right of the Description column (description is more important)
</li><li>Make the description a clickable link
</li><li>Drop the “URL/Download” column because it's now redundant
</li><li>Rename “Description” to “Resource” (not that important)
</li></ol>
                            
                          </td>
                          <td class="PosixTime">1289997384000000
                          </td>
                          <td class="ModifiedTime">1297073724000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/3006.html">#3006</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.8.1.html">ckan-v1.8.1</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/3006.html">Update translations from Transifex</a>
                          </td>
                          <td class="description">
                            <p>
There are some new translations already on the CKAN 1.8 resource on Transifex already (e.g. 100% Norwegian translation I think). We should at least pull these from Transifex for 1.8.1, and may as well do a call for translations too.
</p>

                            
                          </td>
                          <td class="PosixTime">1351506144000000
                          </td>
                          <td class="ModifiedTime">1351506144000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1278.html">#1278</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1278.html">Refactor authorized_query calls</a>
                          </td>
                          <td class="description">
                            <p>
There are some functions that still use the Auhtorizer().authorized_query method:
</p>
<pre class="wiki">./ckan/controllers/authorization_group.py:24:        query = ckan.authz.Authorizer().authorized_query(c.user, model.AuthorizationGroup)
./ckan/lib/base.py:237:        groups = ckan.authz.Authorizer.authorized_query(c.user, model.Group, 
./ckan/lib/search/sql.py:55:        q = authz.Authorizer().authorized_query(username, model.Group)
./ckan/lib/search/sql.py:118:        q = authz.Authorizer().authorized_query(self.options.get('username'), model.Package)
./ckan/logic/action/get.py:154:    query = Authorizer().authorized_query(user, model.Group, model.Action.EDIT)

./ckan/tests/test_authz.py:158:        q = self.authorizer.authorized_query(self.notadmin.name, model.Package)
./ckan/tests/test_authz.py:353:        q = self.authorizer.authorized_query(self.notmember.name, model.Package)
./ckan/tests/test_authz.py:357:        q = self.authorizer.authorized_query(self.member.name, model.Package)
./ckan/tests/functional/test_authorization_group.py:44:        group_count = Authorizer.authorized_query(u'russianfan', model.AuthorizationGroup).count()
</pre>
                            
                          </td>
                          <td class="PosixTime">1313415177000000
                          </td>
                          <td class="ModifiedTime">1313415177000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2505.html">#2505</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-06-25.html">ckan-sprint-2012-06-25</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2505.html">Docs improvements for 1.7.1</a>
                          </td>
                          <td class="description">
                            <p>
There are some areas where the documentation could use some improvement and it would be good to have it available for 1.7.1.
</p>
<ul><li>Add an introduction to harvesting support
</li><li>Add an introduction to CSW support
</li><li>Better upgrade docs: Some users suggested improvements to the upgrade docs on the list <a class="missing changeset" title="No default repository defined">[1]</a>. Also we should mention how the upgrade would work for point point releases
</li><li>Source install: see <a class="new ticket" href="../ticket/2406.html" title="defect: Errors in source install doc (new)">#2406</a>
</li></ul><p>
<a class="missing changeset" title="No default repository defined">[1]</a> <a class="ext-link" href="http://lists.okfn.org/pipermail/ckan-dev/2012-May/002178.html"><span class="icon">​</span>http://lists.okfn.org/pipermail/ckan-dev/2012-May/002178.html</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1339166533000000
                          </td>
                          <td class="ModifiedTime">1340018770000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/537.html">#537</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">wwaites
                          </td>
                          <td class="reporter">wwaites
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/537.html">Caching and Performance improvement</a>
                          </td>
                          <td class="description">
                            <p>
There are several places where performance is unacceptably slow. Even in places where it is not, the system could still be more responsive for read requests.
</p>
<p>
Introducing caching has to be done carefully and should be done in a <em>standards compliant manner</em>.
</p>
<h2 id="Generalstrategy">General strategy</h2>
<ul><li>Where possible, cache output within the pylons app (beaker).
</li><li>Facilitate external caching in an end-user's web browser or a caching proxy
</li><li>Slightly stale data is not necessarily much of a problem so allow the output to be cached for a relatively short period (e.g. 5-15 minutes).
</li><li>When cache expiry has been reached, a request will be made to the server. The server should check if its internally cached data is still valid, and serve that, otherwise regenerate the data.
</li></ul><h2 id="Tasks">Tasks</h2>
<p>
These tasks should be broken into sub-tickets:
</p>
<ul><li>caching of parts of templates that are expensive to render (package list, tag list, group list)
</li><li>caching of entire output using beaker particularly for API read operations.
</li><li>need to perform a check to see if the cache should be invalidated by checking if anything in the output would have changed -- i.e. checking timestamps on package modifications. this is a natural place to introduce the ETag which will help browsers and web caches.
</li><li>cache infrastructure front end - varnish, squid, etc. To do this right, the controllers need to set the cache control headers appropriately (max-age, must-revalidate). This is a good resource: <a class="ext-link" href="http://www.mnot.net/cache_docs/#CACHE-CONTROL"><span class="icon">​</span>http://www.mnot.net/cache_docs/#CACHE-CONTROL</a>
<ul><li>Deploy varnish on a host dedicated to this purpose for research. This will be useful for other sites as well
</li><li>Do not configure varnish to ignore cache control headers or otherwise behave in a non HTTP/1.1 compliant manner
</li></ul></li></ul><h2 id="FutureWork">Future Work</h2>
<ul><li>Investigate ckanclient library maintaining a local cache as a web browser would
</li><li>Investigate using a CDN like Google Storage or Amazon for serving cached data.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1283184362000000
                          </td>
                          <td class="ModifiedTime">1311178929000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2952.html">#2952</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">seanh
                          </td>
                          <td class="reporter">icmurray
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan&#32;2.0.html">ckan 2.0</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2952.html">incorporate javascriopt translations into translations workflow</a>
                          </td>
                          <td class="description">
                            <p>
There are now javascript translations.  There's a paster command, <tt>trans js</tt>.  This is a ticket to ensure that using <tt>trans js</tt> is documented in the normal ckan translation workflow (which is followed after a feature freeze, prior to release).  And to see if there's any need for further incorporation into the current translation process.
</p>

                            
                          </td>
                          <td class="PosixTime">1349118945000000
                          </td>
                          <td class="ModifiedTime">1349118945000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1452.html">#1452</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1452.html">Offer detected browser language, rather than auto-switch</a>
                          </td>
                          <td class="description">
                            <p>
There are issues with setting the site's language according to the browser detection:
</p>
<ul><li>Many browsers have the language setting incorrectly set. e.g. people who download US versions of Mozilla, pirated US copies in the far east.
</li></ul><ul><li>Although thedatahub.org has a worldwide audience, many CKAN instances are designed for a particular country's citizens. So Open Berlin should probably be in German as default for all.
</li></ul><p>
I suggest the site should have a default language saved in the config. The browser language *should* be detected, and that prompts a flash message offering to change to that language. And if you change language that is saved in the cookie (as we currently do). 
</p>
<p>
Then do some testing to see if this suits people.
</p>

                            
                          </td>
                          <td class="PosixTime">1320682652000000
                          </td>
                          <td class="ModifiedTime">1340190587000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2307.html">#2307</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">icmurray
                          </td>
                          <td class="reporter">icmurray
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-04-30.html">ckan-sprint-2012-04-30</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2307.html">Merge 1.6.1 into master</a>
                          </td>
                          <td class="description">
                            <p>
There are a number of features developed against 1.6.1 that need to be merged into master.
</p>

                            
                          </td>
                          <td class="PosixTime">1334591402000000
                          </td>
                          <td class="ModifiedTime">1335440476000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/826.html">#826</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-1.html">ckan-v1.4-sprint-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/826.html">Resource 'extra' fields</a>
                          </td>
                          <td class="description">
                            <p>
There are a number of extra properties we want to store in a resource: 
</p>
<ul><li>resource size (in bytes, no. triples etc.) - <a class="ext-link" href="https://trac.dataco.coi.gov.uk/projects/datagov/ticket/673"><span class="icon">​</span>https://trac.dataco.coi.gov.uk/projects/datagov/ticket/673</a>
</li><li>resource hash is 'static' (default) or 'changeable' - <a class="ext-link" href="https://trac.dataco.coi.gov.uk/projects/datagov/ticket/674"><span class="icon">​</span>https://trac.dataco.coi.gov.uk/projects/datagov/ticket/674</a>
</li><li>alternative link (e.g. TNA Web Archive) to use the link is broken - <a class="ext-link" href="https://trac.dataco.coi.gov.uk/projects/datagov/ticket/173"><span class="icon">​</span>https://trac.dataco.coi.gov.uk/projects/datagov/ticket/173</a>
</li></ul><p>
i.e. this is a much needed enhancement
</p>
<p>
Need to be able to read/write these values in web interface and API.
</p>
<p>
(At some point we may wish to have custom form widgets for these new fields in the resource table, but let's leave this for the future.)
</p>
<h1 id="Implementation">Implementation</h1>
<p>
I suggest these are arbitrary key/value pairs, just like package extras, reusing <a class="missing wiki">PackageExtra?</a> code as much as possible.
(Other much more radical alternative is to move model to RDF.)
</p>

                            
                          </td>
                          <td class="PosixTime">1290611905000000
                          </td>
                          <td class="ModifiedTime">1306766057000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2406.html">#2406</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">markw
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.9.html">ckan-v1.9</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2406.html">Errors in source install doc</a>
                          </td>
                          <td class="description">
                            <p>
There are a few errors or unclarities in the source install doc - see
</p>
<p>
<a class="ext-link" href="http://lists.okfn.org/pipermail/ckan-dev/2012-May/002203.html"><span class="icon">​</span>http://lists.okfn.org/pipermail/ckan-dev/2012-May/002203.html</a>
<a class="ext-link" href="http://lists.okfn.org/pipermail/ckan-dev/2012-May/002204.html"><span class="icon">​</span>http://lists.okfn.org/pipermail/ckan-dev/2012-May/002204.html</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1337595093000000
                          </td>
                          <td class="ModifiedTime">1340636804000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2288.html">#2288</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.7.html">ckan-v1.7</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2288.html">Fix i18n of strings on auth group add/edit pages</a>
                          </td>
                          <td class="description">
                            <p>
There are a couple of strings on the authorization group add/edit form that are not being translated:
</p>
<p>
"Name: Please enter a value" (error message when you try to add an auth group with no name)
</p>
<p>
"User name"
</p>
<p>
"Save" button
</p>
<p>
The form seems to be built using <a class="missing wiki">FormBuilder?</a>. See ckan/forms/authorizationgroup.py, builder.set_displayed_fields()
</p>

                            
                          </td>
                          <td class="PosixTime">1334255003000000
                          </td>
                          <td class="ModifiedTime">1339411611000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2289.html">#2289</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">toby
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.8.html">ckan-v1.8</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2289.html">Flash messages are not being translated?</a>
                          </td>
                          <td class="description">
                            <p>
There are a couple of flash messages in ckan/controllers/user.py that show up in English, even if another language is in use, and even though the strings are marked for translation with gettext and have translations in the po and mo files:
</p>
<p>
"[USER NAME] is now logged in"
</p>
<p>
"Login failed. Bad username or password. (Or if using OpenID, it hasn't been associated with a user account.)"
</p>

                            
                          </td>
                          <td class="PosixTime">1334255836000000
                          </td>
                          <td class="ModifiedTime">1341314151000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2520.html">#2520</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">seanh
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.9.html">ckan-v1.9</a>
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2520.html">Document undocumented config options</a>
                          </td>
                          <td class="description">
                            <p>
There are 21 undocumented config options in CKAN, some of which are not mentioned in the config file template either:
</p>
<p>
ckan.admin.name
ckan.admin.email
ckan.default.group_type
ckan.page_cache_enabled
ckan.cache_enabled
ckan.cache_expires
ckan.extra_resource_fields
ckan.extra_resource_group_fields
ckan.storage.key_prefix
ckan.storage.max_content_length
ckan.feeds.authority_name *
ckan.feeds.date *
ckan.feeds.author_name *
ckan.feeds.author_link *
ckan.mail_from
ckan.gravatar_default *
ckan.plugins
ckan.api_url
ckan.auth.profile
ckan.datastore.enabled
ckan.tracking_enabled
</p>
<p>
There are also some options that are in the default deployment.ini even though they're deprecated:
</p>
<p>
ckan.async_notifier
carrot_messaging_library
ckan.build_search_index_synchronously
</p>
<p>
See email to ckan-dev from David Read: <a class="ext-link" href="http://lists.okfn.org/pipermail/ckan-dev/2012-June/002447.html"><span class="icon">​</span>http://lists.okfn.org/pipermail/ckan-dev/2012-June/002447.html</a>
</p>
<p>
It'd be best if the docs could be automatically pulled from the source into sphinx using autodoc, see <a class="assigned ticket" href="../ticket/1358.html" title="enhancement: Generate configuration documentation automatically from the ... (assigned)">#1358</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1339588368000000
                          </td>
                          <td class="ModifiedTime">1340624908000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1645.html">#1645</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">icmurray
                          </td>
                          <td class="reporter">icmurray
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-01-23.html">ckan-sprint-2012-01-23</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1645.html">Update and test existing DGU package form : Apply a simple theme</a>
                          </td>
                          <td class="description">
                            <p>
Theme the DGU form.
</p>
<p>
Doesn't need to be an exact replica of DGU, but just enough to show it's possible.
</p>

                            
                          </td>
                          <td class="PosixTime">1326394622000000
                          </td>
                          <td class="ModifiedTime">1327311679000000
                          </td>
              </tr>
          </tbody>
      </table>
      <div class="paging">
    <span class="previous">
      <a href="22%3Fsort=description&amp;asc=0&amp;page=5.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=1.html" title="Page 1">1</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=2.html" title="Page 2">2</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=3.html" title="Page 3">3</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=4.html" title="Page 4">4</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=5.html" title="Page 5">5</a>
      </span>
      <span>
        <span class="current">6</span>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=7.html" title="Page 7">7</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=8.html" title="Page 8">8</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=9.html" title="Page 9">9</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=10.html" title="Page 10">10</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=11.html" title="Page 11">11</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=12.html" title="Page 12">12</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=13.html" title="Page 13">13</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=14.html" title="Page 14">14</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=15.html" title="Page 15">15</a>
      </span>
      <span>
        <a href="22%3Fsort=description&amp;asc=0&amp;page=16.html" title="Page 16">16</a>
      </span>
    <span class="next">
      <a href="22%3Fsort=description&amp;asc=0&amp;page=7.html" title="Next Page">→</a>
    </span>
</div>
      <div id="help"><strong>Note:</strong>
        See <a href="../wiki/TracReports.html">TracReports</a> for help on using and creating reports.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="22%3Fsort=description&amp;asc=0&amp;format=rss" class="rss">RSS Feed</a>
        </li><li>
          <a rel="nofollow" href="22%3Fsort=description&amp;asc=0&amp;format=csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="22%3Fsort=description&amp;asc=0&amp;format=tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="../report%3Fid=22&amp;format=sql">SQL Query</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.3</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>