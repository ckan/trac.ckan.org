<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      {22} Trac tickets – CKAN
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">window.location.hash = window.location.hash;</script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="22%3Fsort=summary&amp;asc=0&amp;format=rss" type="application/rss+xml" class="rss" title="RSS Feed" /><link rel="alternate" href="22%3Fsort=summary&amp;asc=0&amp;format=csv" type="text/plain" title="Comma-delimited Text" /><link rel="alternate" href="22%3Fsort=summary&amp;asc=0&amp;format=tab" type="text/plain" title="Tab-delimited Text" /><link rel="alternate" href="../report%3Fid=22&amp;format=sql" type="text/plain" title="SQL Query" />
        <link rel="up" href="../report.html" title="Available Reports" />
        <link rel="next" href="22%3Fsort=summary&amp;asc=0&amp;page=12.html" title="Next Page" />
        <link rel="start" href="../wiki.1.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/report.css" type="text/css" />
        <link rel="prev" href="22%3Fsort=summary&amp;asc=0&amp;page=10.html" title="Previous Page" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search CKAN" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://ckan.org/"><img src="http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png" alt="CKAN Trac" height="70" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../login.html">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li><a href="../about.html">About Trac</a></li><li class="last"><a href="../register.html">Register</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li><a href="../search.html">Search</a></li><li class="last"><a href="../wiki.1.html">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="../report.html">Available Reports</a></li><li class="last"><a href="../query.html">Custom Query</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="report">
      <h1>{22} Trac tickets
        <span class="numrows">(2647 matches)</span>
      </h1>
      <form method="get" action="22%3Fsort=summary&amp;asc=0&amp;page=11.html">
        <div id="prefs">
          <div>
            <label>
              Max items per page
              <input type="text" name="max" size="10" value="100" />
            </label>
          </div>
          <div class="buttons">
            <input type="submit" value="Update" />
          </div>
        </div>
      </form>
      <div id="description">
        <p>
<a class="ext-link" href="https://github.com/roskakori/tratihubis/blob/master/query_tickets.sql"><span class="icon">​</span>https://github.com/roskakori/tratihubis/blob/master/query_tickets.sql</a>
</p>

      </div>
      <div class="buttons">
      </div>
      <h2 class="report-result">
        Results <span class="numresults">(1001 - 1100 of 2647)</span>
      </h2>
      <div class="paging">
    <span class="previous">
      <a href="22%3Fsort=summary&amp;asc=0&amp;page=10.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=1.html" title="Page 1">1</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=2.html" title="Page 2">2</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=3.html" title="Page 3">3</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=4.html" title="Page 4">4</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=5.html" title="Page 5">5</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=6.html" title="Page 6">6</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=7.html" title="Page 7">7</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=8.html" title="Page 8">8</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=9.html" title="Page 9">9</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=10.html" title="Page 10">10</a>
      </span>
      <span>
        <span class="current">11</span>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=12.html" title="Page 12">12</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=13.html" title="Page 13">13</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=14.html" title="Page 14">14</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=15.html" title="Page 15">15</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=16.html" title="Page 16">16</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=17.html" title="Page 17">17</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=18.html" title="Page 18">18</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=19.html" title="Page 19">19</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=20.html" title="Page 20">20</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=21.html" title="Page 21">21</a>
      </span>
    <span class="next">
      <a href="22%3Fsort=summary&amp;asc=0&amp;page=12.html" title="Next Page">→</a>
    </span>
</div>
      <table class="listing tickets">
          <thead>
        <tr class="trac-columns">
          <th>
            <a href="22%3Fsort=id&amp;asc=1&amp;page=11.html">
              Id
            </a>
          </th><th>
            <a href="22%3Fsort=type&amp;asc=1&amp;page=11.html">
              Type
            </a>
          </th><th>
            <a href="22%3Fsort=owner&amp;asc=1&amp;page=11.html">
              Owner
            </a>
          </th><th>
            <a href="22%3Fsort=reporter&amp;asc=1&amp;page=11.html">
              Reporter
            </a>
          </th><th>
            <a href="22%3Fsort=milestone&amp;asc=1&amp;page=11.html">
              Milestone
            </a>
          </th><th>
            <a href="22%3Fsort=status&amp;asc=1&amp;page=11.html">
              Status
            </a>
          </th><th>
            <a href="22%3Fsort=resolution&amp;asc=1&amp;page=11.html">
              Resolution
            </a>
          </th><th class="desc">
            <a href="22%3Fsort=summary&amp;asc=1&amp;page=11.html">
              Summary
            </a>
          </th><th>
            <a href="22%3Fsort=description&amp;asc=1&amp;page=11.html">
              Description
            </a>
          </th><th>
            <a href="22%3Fsort=PosixTime&amp;asc=1&amp;page=11.html">
              Posixtime
            </a>
          </th><th colspan="100">
            <a href="22%3Fsort=ModifiedTime&amp;asc=1&amp;page=11.html">
              Modifiedtime
            </a>
          </th>
        </tr>
          </thead>
          <tbody>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1000.html">#1000</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-3.html">ckan-v1.4-sprint-3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1000.html">Remove call timings code</a>
                          </td>
                          <td class="description">
                            <p>
Not used and extra overhead. Very useful to strip this out and low cost.
</p>
<p>
Places where it seems to be:
</p>
<ul><li>lib/base.py: c.time_call_started
</li><li>....
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1298489643000000
                          </td>
                          <td class="ModifiedTime">1298912726000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2972.html">#2972</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan&#32;2.0.html">ckan 2.0</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2972.html">Remove any imports of authz.py and delete file</a>
                          </td>
                          <td class="description">
                            <p>
it is no longer used
</p>

                            
                          </td>
                          <td class="PosixTime">1350297442000000
                          </td>
                          <td class="ModifiedTime">1350297442000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1239.html">#1239</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1239.html">Remove and re-add tag on package not working</a>
                          </td>
                          <td class="description">
                            <p>
See reports on list at:
</p>
<ul><li><a class="ext-link" href="http://lists.okfn.org/pipermail/ckan-dev/2011-July/001103.html"><span class="icon">​</span>http://lists.okfn.org/pipermail/ckan-dev/2011-July/001103.html</a>
</li><li><a class="ext-link" href="http://lists.okfn.org/pipermail/ckan-dev/2011-July/001107.html"><span class="icon">​</span>http://lists.okfn.org/pipermail/ckan-dev/2011-July/001107.html</a>
</li></ul><p>
Tracked this to issue in dictization/model_save whereby was ignoring case where Package Tag already there but in deleted state. Rather than describe at length see fix.
</p>

                            
                          </td>
                          <td class="PosixTime">1311441020000000
                          </td>
                          <td class="ModifiedTime">1312453156000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1172.html">#1172</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">thejimmyg
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1172.html">Remove all try: except: blocks that don't re-raise the original exception</a>
                          </td>
                          <td class="description">
                            <p>
The current codebase has one or two try: except; blocks that don't catch specific exceptions. Under no circumstances should any broad try: except: blocks be allowed unless the exceptions they catch are immediately re-raised. Uncaught exceptions are wasting us quite a lot of time when trying to track down problems.
</p>

                            
                          </td>
                          <td class="PosixTime">1306926049000000
                          </td>
                          <td class="ModifiedTime">1314118883000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2987.html">#2987</a>
                          </td>
                          <td class="type">refactor
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan&#32;2.0.html">ckan 2.0</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2987.html">Remove all direct calls to logic action and auth functions</a>
                          </td>
                          <td class="description">
                            <p>
From Toby
</p>

                            
                          </td>
                          <td class="PosixTime">1350298287000000
                          </td>
                          <td class="ModifiedTime">1350298287000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1684.html">#1684</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">ross
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1684.html">Remove all config from ckanext-archiver</a>
                          </td>
                          <td class="description">
                            <p>
ckanext-archiver currently has a settings file (and a default) and it should be passed in all relevant information from the context.
</p>
<p>
Remove all settings (ARCHIVE_DIR and MAX_CONTENT_LENGTH and others) and pass them in from CKAN.
</p>

                            
                          </td>
                          <td class="PosixTime">1326983821000000
                          </td>
                          <td class="ModifiedTime">1346670037000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2504.html">#2504</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">aron.carroll
                          </td>
                          <td class="reporter">aron.carroll
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-06-25.html">ckan-sprint-2012-06-25</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2504.html">Remove all Genshi templates from demo theme</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1339156577000000
                          </td>
                          <td class="ModifiedTime">1339409776000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/390.html">#390</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/390.html">Remove a package for SB</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1280418625000000
                          </td>
                          <td class="ModifiedTime">1282214629000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1064.html">#1064</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1064.html">Remove Workers from ckanext-queue</a>
                          </td>
                          <td class="description">
                            <p>
The current implementation of Workers in ckanext-queue is broken. Basically the various consume / callback functions expect three arguments (routing_key, operation, payload) when they are in fact receiving only two of them (message_data, message).
This is fairly easy to fix, but the question is if Workers add an extra complexity to use the messaging library directly.
</p>

                            
                          </td>
                          <td class="PosixTime">1301417891000000
                          </td>
                          <td class="ModifiedTime">1323169787000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2882.html">#2882</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.8.1.html">ckan-v1.8.1</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2882.html">Remove User Stories Overview from docs?</a>
                          </td>
                          <td class="description">
                            <p>
Why is this here? Is it up to date? Is anyone keeping it up to date? Does this belong in some sort of CKAN planning or roadmap document rather than in the documentation?
</p>
<p>
<a class="ext-link" href="http://docs.ckan.org/en/latest/user-stories.html"><span class="icon">​</span>http://docs.ckan.org/en/latest/user-stories.html</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1345540723000000
                          </td>
                          <td class="ModifiedTime">1345540723000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2414.html">#2414</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">ross
                          </td>
                          <td class="reporter">ross
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-06-25.html">ckan-sprint-2012-06-25</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2414.html">Remove LXML as a dependency on core CKAN</a>
                          </td>
                          <td class="description">
                            <p>
Core CKAN currently has a dependency on LXML and it would be nice if we could remove it (although this *may* be indirectly through genshi).
</p>

                            
                          </td>
                          <td class="PosixTime">1337761192000000
                          </td>
                          <td class="ModifiedTime">1338471374000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2919.html">#2919</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.8.html">ckan-v1.8</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2919.html">Remove IController from docs</a>
                          </td>
                          <td class="description">
                            <p>
Still in docs but seems gone from code
</p>

                            
                          </td>
                          <td class="PosixTime">1347461253000000
                          </td>
                          <td class="ModifiedTime">1347461253000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2366.html">#2366</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">ross
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-06-25.html">ckan-sprint-2012-06-25</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2366.html">Remove Authorization Groups</a>
                          </td>
                          <td class="description">
                            <p>
1.7 will hide the link on the footer and put a deprecation notice on the related pages, but they should be completely removed on 1.8.
</p>

                            
                          </td>
                          <td class="PosixTime">1335892563000000
                          </td>
                          <td class="ModifiedTime">1346316322000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1289.html">#1289</a>
                          </td>
                          <td class="type">CREP
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1289.html">Remove 'relationships'</a>
                          </td>
                          <td class="description">
                            <h2 id="Abstract">Abstract</h2>
<p>
Package Relationships have not taken off in the 18 months we've had them in the API. There are some issues with them and we need to spend more time improving them or consider getting rid of them.
</p>
<h2 id="TheProblem">The Problem</h2>
<p>
Original use cases are expressed here: <a class="assigned ticket" href="../ticket/253.html" title="enhancement: Package relationships (assigned)">#253</a> Here are comments about how we could handle these specific examples better:
</p>
<ol><li>groups of packages - maybe better with a custom tag?
</li><li>fragment resources - soon to be covered by 'kind' resource field <a class="closed ticket" href="../ticket/957.html" title="enhancement: new &#34;kind &#34; field added to resources (closed: wontfix)">#957</a>
</li></ol><p>
3&amp;5. derived resource - better to have some sort of resource relationship perhaps?
</p>
<ol start="4"><li>linked resource - again better to have some sort of resource relationship perhaps?
</li></ol><p>
Outstanding issues needing serious effort to fix:
</p>
<ul><li><a class="assigned ticket" href="../ticket/256.html" title="requirement: Package relationships - 3. Edit in WUI (assigned)">#256</a> Editing them in Web UI (not done yet)
</li><li><a class="new ticket" href="../ticket/1288.html" title="defect: Package edit/creation can't include 'relationships' field (new)">#1288</a> Package edit/creation can't include 'relationships' field
</li></ul><h2 id="Specification">Specification</h2>
<p>
Remove relationships from model, API, tests, Web UI. Data migration to remove from db.
</p>
<h2 id="Whydoitthisway">Why do it this way</h2>
<p>
Getting frustrated having problems with the code, when it's not used much. Often asked about what it's for, but rarely used. Seems an overly complicated design.
</p>
<h2 id="BackwardsCompatibility">Backwards Compatibility</h2>
<p>
n/a
</p>
<h2 id="Implementationplan">Implementation plan</h2>
<h3 id="Deliverables">Deliverables</h3>
<p>
See Specification
</p>
<h3 id="Risksandmitigations">Risks and mitigations</h3>
<p>
Risk: a customer suddenly wants this, and the new ways to relate resources are not in place yet.
</p>
<p>
Mitigation: discuss this decision thoroughly to make sure we are confident the use cases are not important. Discuss with team, ckan-discuss and specifically the LOD people who have some related packages on thedatahub.org.
</p>
<h3 id="Participants">Participants</h3>
<p>
David Read
</p>
<h3 id="Progress">Progress</h3>
<p>
Not yet.
</p>

                            
                          </td>
                          <td class="PosixTime">1314206502000000
                          </td>
                          <td class="ModifiedTime">1317315211000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/687.html">#687</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/687.html">Release ckanclient 0.4</a>
                          </td>
                          <td class="description">
                            <p>
Done.
Added release process here: <a class="wiki" href="../wiki/ReleaseProcess.html">wiki:ReleaseProcess</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1286452098000000
                          </td>
                          <td class="ModifiedTime">1286452650000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/742.html">#742</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.3.html">ckan-v1.3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/742.html">Release ckan 1.2 to metastable</a>
                          </td>
                          <td class="description">
                            <p>
Need to make sure <a class="closed ticket" href="../ticket/700.html" title="bug: Groups in package form (closed: fixed)">#700</a> is fixed.
</p>

                            
                          </td>
                          <td class="PosixTime">1288002397000000
                          </td>
                          <td class="ModifiedTime">1289824163000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/420.html">#420</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/420.html">Release ckan 1.1</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1281432518000000
                          </td>
                          <td class="ModifiedTime">1281522091000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1786.html">#1786</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">mirko.spasic@…
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-02-20.html">ckan-sprint-2012-02-20</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1786.html">Relationships lost when editing package</a>
                          </td>
                          <td class="description">
                            <p>
If I have a relationship between two packages, and then I edit any property of one of them (Author email, for example), the relationship will automatically be lost.
</p>

                            
                          </td>
                          <td class="PosixTime">1328635226000000
                          </td>
                          <td class="ModifiedTime">1328640597000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1695.html">#1695</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1695.html">Relationships - improvements</a>
                          </td>
                          <td class="description">
                            <p>
Suggested by Richard Cyganiak in <a class="ext-link" href="http://lists.okfn.org/pipermail/ckan-discuss/2012-January/001977.html"><span class="icon">​</span>http://lists.okfn.org/pipermail/ckan-discuss/2012-January/001977.html</a>
</p>
<ul><li>new relationship type links_to / linked_from
<ul><li>Maybe with extra 'count' property?
</li></ul></li><li>creating a new relationship should be post to the relationship register, not the source entity.
</li><li>add missing doc about creating a new relationship
</li><li>'Model Formats' section seems to be missed out of the docs since release 1.4.2. See: <a class="ext-link" href="http://readthedocs.org/docs/ckan/en/ckan-1.4.2/api/version2.html#model-formats"><span class="icon">​</span>http://readthedocs.org/docs/ckan/en/ckan-1.4.2/api/version2.html#model-formats</a>
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1327323280000000
                          </td>
                          <td class="ModifiedTime">1330085001000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2515.html">#2515</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">ross
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2515.html">Related tab doesn't look selected when selected</a>
                          </td>
                          <td class="description">
                            <p>
The related tab on the dataset page doesn't change its appearance when selected like the other tabs do
</p>

                            
                          </td>
                          <td class="PosixTime">1339578247000000
                          </td>
                          <td class="ModifiedTime">1340967971000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2347.html">#2347</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">icmurray
                          </td>
                          <td class="reporter">ross
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.8.html">ckan-v1.8</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2347.html">Related stuff dashboard and changes</a>
                          </td>
                          <td class="description">
                            <p>
Some additions to the related stuff functionality to make it more useful post the 1.7 release.
</p>
<p>
[x] Edit item (after checking auth)
</p>
<p>
[x] My related things on my user page
</p>
<blockquote>
<p>
[x] Show user created related things on the users' page with links direct to the related page of that dataset. {0.5d}
</p>
</blockquote>
<p>
  
</p>
<p>
[x] Related stuff usage counts { 1d }
</p>
<blockquote>
<p>
Record the number of times the link for a related item is clicked.  This is likely to mean that the link fires to call CKAN and then redirects to the actual URL.
</p>
</blockquote>
<p>
[x] Un-attached related items {0.25d}
</p>
<blockquote>
<p>
Allow related items to be created without being attached to datasets.  This may mean that the dataset field is optional in the API.
</p>
</blockquote>
<p>
[ ] Dashboard for related 
</p>
<blockquote>
<p>
A dashboard for related items, site-wide (not package specific) and orderable by date, views, {rating}, popularity of the dataset.  Would be useful (possibly) for site-admin to mark one or more as 'featured'
</p>
</blockquote>
<blockquote>
<p>
[x] Dashboard + Controller (Related) {1d}
</p>
</blockquote>
<blockquote>
<p>
[x] Ordering at logic layer (date, views, rating, popularity of package, featured) {1d}
</p>
<blockquote>
<p>
[x] date
[x] views
[x] featured
</p>
</blockquote>
</blockquote>
<blockquote>
<p>
[x] 'Featured' related item with mechanism to fetch it. {0.5d}
</p>
</blockquote>
<blockquote>
<blockquote>
<p>
[ ] UI within dashboard for sysadmins to check/uncheck feature status {0.5d}
</p>
</blockquote>
</blockquote>
<p>
[x] Changing auth for related.
</p>
<blockquote>
<p>
Currently auth is based on deletion being possible by dataset owner and the related owner but it may be that a lot of the auth for related items should be configured to have more restrictive auth.
</p>
</blockquote>
<blockquote>
<p>
[x] Implement auth changes for publisher auth profile. { 0.5d }
</p>
</blockquote>
<p>
[x] General issues
</p>
<blockquote>
<p>
[x] Serverside validation of URLs
</p>
</blockquote>
<blockquote>
<p>
[x] Activity updates
</p>
</blockquote>
<blockquote>
<p>
[x] Make optional
</p>
</blockquote>
<blockquote>
<p>
[x] Related item only includes App, Idea, Visualization but not API | Post | Paper | News Article options as in original ticket <a class="closed ticket" href="../ticket/2204.html" title="enhancement: [super] Related (Stuff) Extension (closed: fixed)">#2204</a>
</p>
</blockquote>
<p>
[ ] UI Changes
</p>
<blockquote>
<p>
[ ] General tidy up, fix form etc (icon for menu bar)
</p>
</blockquote>
<blockquote>
<p>
[ ]  Highlight featured items py:if=&#34;related.featured"
</p>
</blockquote>
<blockquote>
<p>
[ ] Show either view count or popularity ${ related.view_count }
</p>
</blockquote>
<blockquote>
<p>
[ ] A user's related items should be on their home page
</p>
</blockquote>
<blockquote>
<p>
[ ] Related item plus sign is very poorly aligned within box
</p>
</blockquote>
<blockquote>
<p>
[ ] Add related items should be in drop down like for resources (?) to make it easy to add items
</p>
</blockquote>
<blockquote>
<p>
[ ] Hover should show a title that gives some information about what related are (not at all clear)
</p>
<blockquote>
<p>
"Apps, Ideas, Visualization and other material related to this dataset"
</p>
</blockquote>
</blockquote>
<p>
[x] Related is a pretty terrible name in the UI - much better to have it called Apps, Ideas etc (perhaps title tag could even give more details e.g. "Apps, Ideas, Visualization and other material related to this dataset") -- btw i thought this was in <a class="closed ticket" href="../ticket/2332.html" title="enhancement: Fixes for v1.7 release (closed: fixed)">#2332</a> but realize it wasn't (apologies for that!)
</p>
<ul><li>Went with Apps &amp; Ideas (for now)
</li></ul><p>
[x] Documentation, documentation, documentation - AFAICT I can't see anything in v1.7 or master docs. I imagine this would be a short section like <a class="ext-link" href="http://docs.ckan.org/en/ckan-1.7/commenting.html"><span class="icon">​</span>http://docs.ckan.org/en/ckan-1.7/commenting.html</a> (and probably coming right after that in the ToC) which says
</p>
<ul><li>What it does
</li><li>How to enable (and perhaps includes a nice-screenshot!)
</li><li>How to customize (e.g. can one customize the list of options of things one can create (e.g. can I set it to just be app and idea or ...)
</li><li>Also liase with Mark W re a blog post about this from the user perspective (a screenshot walkthrough ...)
</li></ul><p>
[ ] Clearly mark the old extension as deprecated from v1.7 forward: <a class="ext-link" href="https://github.com/okfn/ckanext-apps"><span class="icon">​</span>https://github.com/okfn/ckanext-apps</a> (I just met someone last week who was working on integrating this and had no idea it was replaced by something better in v1.7)
</p>

                            
                          </td>
                          <td class="PosixTime">1335879539000000
                          </td>
                          <td class="ModifiedTime">1343226149000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2381.html">#2381</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">ross
                          </td>
                          <td class="reporter">ross
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.8.html">ckan-v1.8</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2381.html">Related item count on ALL dataset pages</a>
                          </td>
                          <td class="description">
                            <p>
Make sure the related item count is available on all dataset pages (inc. follow) when it is enabled.
</p>

                            
                          </td>
                          <td class="PosixTime">1337009133000000
                          </td>
                          <td class="ModifiedTime">1337011327000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2819.html">#2819</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">danieljohnlewis
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/demo&#32;phase&#32;5.html">demo phase 5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">worksforme
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2819.html">Related Item Summary of Descriptions Markdown Issue</a>
                          </td>
                          <td class="description">
                            <p>
Problem: When creating a related item it mentions that you can use markdown in the description, however markdown doesn't render in apps page nor in related items page.
Expected: Make shortened descriptions (on apps page &amp; related items page) render markdown
</p>

                            
                          </td>
                          <td class="PosixTime">1344504321000000
                          </td>
                          <td class="ModifiedTime">1344545479000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1451.html">#1451</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">johnglover
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-01-09.html">ckan-sprint-2012-01-09</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1451.html">Reintegrate download stats on dataset and resource view page - 0.5d</a>
                          </td>
                          <td class="description">
                            <ul><li>css class: resource-url-analytics
</li><li>Assign to the link tag (a) everywhere we want to count (dataset, resource view) - 0.25d
</li><li>Display counts in same place ...
</li></ul><p>
And deploy on <a class="ext-link" href="http://thedatahub.org/"><span class="icon">​</span>http://thedatahub.org/</a> - 0.25d
</p>
<p>
Possible: Also move analytics extension into core (decided not to).
</p>

                            
                          </td>
                          <td class="PosixTime">1320677859000000
                          </td>
                          <td class="ModifiedTime">1324401792000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1598.html">#1598</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1598.html">Reinstate Ratings</a>
                          </td>
                          <td class="description">
                            <p>
Ratings were disabled approximately a year ago because:
</p>
<ul><li>Unclear purpose and UX. What did ratings tell you? How useful were they?
</li><li>Spamming (esp by bots: you could submit an anonymous rating via a GET request which caused problems)
</li></ul><p>
Both problems are solvable and it would be nice to have this feature reinstated.
</p>
<ul><li>Purpose: can make this more purposable by limiting to logged in users (or at least distinguishing logged in from non-logged in users)
<ul><li>Even better we could allow ratings to be made public (I'm interested in what someone else I respect finds important)
</li></ul></li><li>Spamming: limit to logged in users and / or use AJAX over an API to submit ...
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1325177524000000
                          </td>
                          <td class="ModifiedTime">1325474818000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/207.html">#207</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">nickstenning
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/207.html">Reimplement tag selection in jQuery</a>
                          </td>
                          <td class="description">
                            <p>
Remove the current dependency on Yahoo YUI toolkit for doing tag autocompletion on package edit forms.
</p>
<p>
The (KForge-derived) behaviour files for CKAN can easily be switched to the new jQuery-based ones: see <a class="closed ticket" href="../ticket/212.html" title="enhancement: Switch to using m.okfn.org &#34;kforge&#34; media (css and behaviour) (closed: fixed)">ticket:212</a>. Once this is done, it would make sense to implement the tag-selection code with jQuery.
</p>
<p>
Relevant pages include:
</p>
<ul><li><a class="ext-link" href="http://bassistance.de/jquery-plugins/jquery-plugin-autocomplete/"><span class="icon">​</span>http://bassistance.de/jquery-plugins/jquery-plugin-autocomplete/</a>
</li><li>e.g. <a class="ext-link" href="http://ckan.net/package/edit/acawiki"><span class="icon">​</span>http://ckan.net/package/edit/acawiki</a>
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1260200340000000
                          </td>
                          <td class="ModifiedTime">1271250740000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/163.html">#163</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.11.html">v0.11</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/163.html">Regularly put CKAN RDF on Talis CC</a>
                          </td>
                          <td class="description">
                            <p>
Related to:
<a class="closed ticket" href="../ticket/90.html" title="enhancement: Link to RDF versions of CKAN data (closed: fixed)">ticket:90</a> Link to RDF version of CKAN data on Talis Connected Commons
<a class="closed ticket" href="../ticket/164.html" title="enhancement: Creating RDF data from CKAN (closed: fixed)">ticket:164</a> Creating RDF data from CKAN
</p>
<p>
Regularly re-upload the CKAN RDF data to Talis CC.
</p>
<p>
In the long run may wish to only re-convert packages changed since the last upload. However given relatively smaller size of full dataset this optimization is probably not yet required.
</p>
<p>
Cost: ? (1d+ depending on e.g. how easy integration with Talis CC is)
</p>

                            
                          </td>
                          <td class="PosixTime">1256052587000000
                          </td>
                          <td class="ModifiedTime">1265891374000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/106.html">#106</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/106.html">Regularly convert CKAN data to RDF and put on Talis CC</a>
                          </td>
                          <td class="description">
                            <p>
Sister to <a class="closed ticket" href="../ticket/90.html" title="enhancement: Link to RDF versions of CKAN data (closed: fixed)">ticket:90</a> (Link to RDF version of CKAN data on Talis Connected Commons).
</p>
<p>
Talis have already kindly done an initial conversion. We should repeat this process regularly and re-upload the data to Talis CC.
</p>
<p>
In the long run may wish to only re-convert packages changed since the last upload. However given relatively smaller size of full dataset this optimization is probably not yet required.
</p>
<p>
Attached is the ruby script used by Talis for conversion
</p>
<p>
Cost: ? (1d+ depending on e.g. how easy integration with Talis CC is)
</p>

                            
                          </td>
                          <td class="PosixTime">1251454474000000
                          </td>
                          <td class="ModifiedTime">1256140649000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1532.html">#1532</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-12-19.html">ckan-sprint-2011-12-19</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1532.html">Registration with OpenID has misleading error message</a>
                          </td>
                          <td class="description">
                            <p>
The log-in page says "Login using Open ID" and gives instructions for signing up. YET this is only available to users who've already added openid to their account. If you have not done this and then sign-in via OpenID (which is successful from the OpenID end) then you are told "Login failed. Bad username or password." in a flash message.
</p>
<p>
Proposed solution (i don't know if this is possible):
</p>
<ul><li>When you log-in for the first time via OpenID, it doesn't actually log you in in CKAN. It just sends you to the 'Create User' page with the OpenID field pre-filled, and puts up a flash message "This OpenID account is not yet registered on thedatahub. Please complete your details.". This allows you to complete the registration and logs you in, and allows you to log-in directly with OpenID in the future.
</li></ul><p>
Alternatives:
</p>
<ul><li>Just change the error message to be 'You need to register in CKAN first. Quote your OpenID in the registration form to use it in future.'
</li><li>Remove OpenID altogether
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1323276392000000
                          </td>
                          <td class="ModifiedTime">1323956027000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/499.html">#499</a>
                          </td>
                          <td class="type">story
                          </td>
                          <td class="owner">thejimmyg
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/499.html">Registration and management of UKLII related code lists, controlled vocabularies and other forms of reference/static data</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1282432571000000
                          </td>
                          <td class="ModifiedTime">1296593038000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1416.html">#1416</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-11-07.html">ckan-sprint-2011-11-07</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1416.html">Registering with blank email can cause exception</a>
                          </td>
                          <td class="description">
                            <p>
This might well be a bot, but not POSTing the email field should not cause an exception - it should be 400 and then the sysadmin doesn't get these nags.
</p>
<pre class="wiki">http://www.publicdata.eu/user/register
...
Module ckan.controllers.user:79 in register
&lt;&lt;              c.login = request.params.getone('login')
                   c.fullname = request.params.getone('fullname')
                   c.email = request.params.getone('email')
                   if not model.User.check_name_available(c.login):
                       h.flash_error(_("That username is not available."))
&gt;&gt;  c.email = request.params.getone('email')
Module webob.multidict:335 in getone
&lt;&lt;          values were found.
               """
               return self._decode_value(self.multi.getone(self._encode_key(key)))
       
           def mixed(self):
&gt;&gt;  return self._decode_value(self.multi.getone(self._encode_key(key)))
Module webob.multidict:99 in getone
&lt;&lt;          v = self.getall(key)
               if not v:
                   raise KeyError('Key not found: %r' % key)
               if len(v) &gt; 1:
                   raise KeyError('Multiple values match %r: %r' % (key, v))
&gt;&gt;  raise KeyError('Key not found: %r' % key)
KeyError: "Key not found: 'email'"
</pre><pre class="wiki">HTTP_USER_AGENT	'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; MRA 4.3 (build 01218); .NET CLR 1.1.4322)'
webob._parsed_post_vars	(MultiDict([('login', 'ahusernames9'), ('fullname', 'ahusernames9'), ('password1', '******'), ('password2', '******'), ('s', 'Sign up')]), &lt;FakeCGIBody at 0xb9d7c5ec viewing MultiDict([('lo...p')])&gt;)
</pre>
                            
                          </td>
                          <td class="PosixTime">1319533989000000
                          </td>
                          <td class="ModifiedTime">1320153507000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1309.html">#1309</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">zephod
                          </td>
                          <td class="reporter">zephod
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-09-12.html">ckan-sprint-2011-09-12</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1309.html">Registering new user requires immediate login</a>
                          </td>
                          <td class="description">
                            <p>
Registering a new user directs you to that user's profile page but does not log you in. There is an empty set of "Recent changes" and no ability to modify the page. Users must follow the login link in the top-right corner to continue.
</p>
<p>
Registering a new user should immediately log you in.
</p>

                            
                          </td>
                          <td class="PosixTime">1315225510000000
                          </td>
                          <td class="ModifiedTime">1315586335000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/27.html">#27</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.6.html">v0.6</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/27.html">Register/Update a package via a web-api</a>
                          </td>
                          <td class="description">
                            <h1 id="AsA">As A</h1>
<p>
User
</p>
<h1 id="IwantTo">I want To</h1>
<p>
Create/register and update a package via a web api.
</p>

                            
                          </td>
                          <td class="PosixTime">1152551379000000
                          </td>
                          <td class="ModifiedTime">1215543933000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1033.html">#1033</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1033.html">Register user with blank password causes 500</a>
                          </td>
                          <td class="description">
                            <p>
Go to <a class="ext-link" href="http://ckan.net/user/register"><span class="icon">​</span>http://ckan.net/user/register</a> and fill in all the fields apart from password. On submit you get 500 error.
</p>

                            
                          </td>
                          <td class="PosixTime">1299796274000000
                          </td>
                          <td class="ModifiedTime">1308310446000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/9.html">#9</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">somebody
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/milestone1.html">milestone1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/9.html">Register new package</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
Authenticated User
</p>
<h2 id="Iwantto">I want to</h2>
<p>
Create/register a package
</p>
<h2 id="Sothat">So that</h2>
<p>
The package will be listed in the system and visible to users
</p>
<h2 id="Notes">Notes</h2>
<ul><li>Full package registration process may be broken down into:
<ol><li>Creating a package by provision of minimal attributes:
<ol><li>name: unique and web-usable
</li><li>auto-generation of default values such as:
<ol><li>date-registered (today's date)
</li><li>first owner (one owner should be created corresponding to the authenticated user performing this action)
</li></ol></li><li>(?) auto-generate a default release
</li></ol></li><li>updating the created package -&gt; ../UseCase12
</li></ol></li></ul>
                            
                          </td>
                          <td class="PosixTime">1152550171000000
                          </td>
                          <td class="ModifiedTime">1152555104000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2.html">#2</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">somebody
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/milestone1.html">milestone1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2.html">Register as user on the service</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
Visitor
</p>
<h2 id="Iwantto">I want to</h2>
<p>
Be able to register as a user on the service
</p>
<h2 id="Sothat">So that</h2>
<p>
One can login and be an authenticated user and perform the actions that only authenticated users can perform
</p>
<h2 id="Notes">Notes</h2>
<ul><li>Registration involves the provisional of a minimal set of user details, namely:
<ol><li>username (unique in lifetime of the service)
</li><li>fullname
</li><li>email
</li><li>password
</li></ol></li></ul>
                            
                          </td>
                          <td class="PosixTime">1152549635000000
                          </td>
                          <td class="ModifiedTime">1152553157000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/249.html">#249</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/249.html">Regex search</a>
                          </td>
                          <td class="description">
                            <p>
Search of package name and title (and other fields) using regular expressions.
</p>
<p>
Current example use-case: Wanting to specify packages with title beginning with 'B'.
</p>
<p>
Issues:
</p>
<ul><li>Syntax for specifying regex over natural language search - could it be contained in the q param so be available to users of the WUI, or do we simply make it alternative fields?
</li></ul><p>
Implementation:
</p>
<ul><li>Postgres reg ex searching detailed here:
</li></ul><p>
<a class="ext-link" href="http://www.postgresql.org/docs/current/static/functions-matching.html#FUNCTIONS-POSIX-TABLE"><span class="icon">​</span>http://www.postgresql.org/docs/current/static/functions-matching.html#FUNCTIONS-POSIX-TABLE</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1265994509000000
                          </td>
                          <td class="ModifiedTime">1311182450000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/338.html">#338</a>
                          </td>
                          <td class="type">story
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.1.html">v1.1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/338.html">Reference groups by ID in addition to name, since group names can change</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1275901137000000
                          </td>
                          <td class="ModifiedTime">1280446480000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1078.html">#1078</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1078.html">Refactors WUI controllers and forms to use logic layer</a>
                          </td>
                          <td class="description">
                            <ul><li>Deserialize forms to new dict format.
</li><li>Replace controllers/forms to use dictization.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1302509347000000
                          </td>
                          <td class="ModifiedTime">1305828973000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2310.html">#2310</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">icmurray
                          </td>
                          <td class="reporter">icmurray
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2310.html">Refactor the search-query construction in feeds.py</a>
                          </td>
                          <td class="description">
                            <p>
The feeds controller, used to construct atom feeds, duplicates code found in the package controller's search action (in order to construct the custom feed).
</p>
<p>
Refactor this to remove duplication.
</p>

                            
                          </td>
                          <td class="PosixTime">1334592091000000
                          </td>
                          <td class="ModifiedTime">1337159386000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/80.html">#80</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.10.html">v0.10</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/80.html">Refactor or remove modes code</a>
                          </td>
                          <td class="description">
                            <p>
Get rid of modes in the RESTful API. Do json stuff directly in controllers.
</p>
<ul><li>package will have to_dict and from_dict methods (called by rest controller) which provide and consume JSON friendly dictionaries representing the object. from_dict - class_method. stuff in forms for tags as_string, maybe factor out. reuse validation stuff.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1247844263000000
                          </td>
                          <td class="ModifiedTime">1265890912000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1279.html">#1279</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">ross
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.8.html">ckan-v1.8</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1279.html">Refactor or deprecate Authorization Groups</a>
                          </td>
                          <td class="description">
                            <p>
Authorization Groups are going to be deprecated in 1.8
</p>
<p>
It is still unclear how Authorization Groups fit in the new authz model, so they have been left out of the logic and auth refactoring (Tickets <a class="closed ticket" href="../ticket/1229.html" title="enhancement: Refactor all database code out of the controllers and into the logic layer (closed: fixed)">#1229</a> and <a class="closed ticket" href="../ticket/1253.html" title="enhancement: Authz refactor (closed: fixed)">#1253</a>)
</p>

                            
                          </td>
                          <td class="PosixTime">1313415367000000
                          </td>
                          <td class="ModifiedTime">1338212028000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2983.html">#2983</a>
                          </td>
                          <td class="type">refactor
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan&#32;2.0.html">ckan 2.0</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2983.html">Refactor lib/base.py to remove circular import issues</a>
                          </td>
                          <td class="description">
                            <p>
From Toby: c) refactor lib/base.py to remove the circular import issues (render
functions to lib/render.py - would fix much of that)
</p>

                            
                          </td>
                          <td class="PosixTime">1350298044000000
                          </td>
                          <td class="ModifiedTime">1350298044000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1403.html">#1403</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">zephod
                          </td>
                          <td class="reporter">zephod
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1403.html">Refactor groups index page</a>
                          </td>
                          <td class="description">
                            <p>
Groups are listed alphabetically with paging - not an ideal user experience. We would like to list groups in order of 'popularity': The number of datasets they contain.
</p>
<p>
Following this chain of thought, then, it would be nice to rearrange the groups table by clicking on column headers and having it sort by that column.
</p>
<p>
Furthermore, then, we'd like to implement a full-fledged groups search feature (if this is at all feasible).
</p>
<p>
The forthcoming groups refactor will probably have some bearing on this task.
</p>

                            
                          </td>
                          <td class="PosixTime">1318847512000000
                          </td>
                          <td class="ModifiedTime">1318847566000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/281.html">#281</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/281.html">Refactor forms to be plugin-able</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1270542248000000
                          </td>
                          <td class="ModifiedTime">1270723675000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/286.html">#286</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/286.html">Refactor forms templates</a>
                          </td>
                          <td class="description">
                            <p>
Use Nick's examples as a basis to revamp the formalchemy usage, principally in the package edit form.
</p>
<ul><li><a class="ext-link" href="http://static.whiteink.com/css/examples/forms.html"><span class="icon">​</span>http://static.whiteink.com/css/examples/forms.html</a>
</li><li><a class="ext-link" href="http://whiteink.com/temp/ckan-forms/"><span class="icon">​</span>http://whiteink.com/temp/ckan-forms/</a>
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1270723513000000
                          </td>
                          <td class="ModifiedTime">1270723629000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2915.html">#2915</a>
                          </td>
                          <td class="type">refactor
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan&#32;2.0.html">ckan 2.0</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2915.html">Refactor form_to_db_schema_options()</a>
                          </td>
                          <td class="description">
                            <p>
Having two methods form_to_db_schema(self) and form_to_db_schema_options(self, options) seems unnecessary, why not just have form_to_db_schema(self, options=None)?
</p>
<p>
Fixing this might break existing extensions although I don't think any are using form_to_db_schema_options() so it should be okay.
</p>
<p>
The same thing goes for db_to_form_schema_options().
</p>
<p>
Also why are we passing a dict 'options' that always contains the same three keys 'api', 'context' and 'type'? Why not three params api=None, contenxt=None, type=None?
</p>

                            
                          </td>
                          <td class="PosixTime">1347446269000000
                          </td>
                          <td class="ModifiedTime">1347447588000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/409.html">#409</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/datapkg-0.8.html">datapkg-0.8</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/409.html">Refactor cli to be more 'pluggable'</a>
                          </td>
                          <td class="description">
                            <ul><li><del>(Load cli commands from setuptools entry point name datapkg.cli)</del>
</li><li>Document how other can write new commands
</li><li>Refactor base Command class to support this pluggability (if necessary)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1281348659000000
                          </td>
                          <td class="ModifiedTime">1297074197000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1420.html">#1420</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">johnglover
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-11-21.html">ckan-sprint-2011-11-21</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1420.html">Refactor ckanext-qa to work as a celery task</a>
                          </td>
                          <td class="description">
                            <p>
Currently can run as a celery task launched by paster command. 
</p>
<p>
Still have to add a CKAN plugin so that QA will run when a resource is added or URL changed, and then update the extension controller/templates to look for QA data from the task_status table instead of directly on the resource.
</p>

                            
                          </td>
                          <td class="PosixTime">1319626138000000
                          </td>
                          <td class="ModifiedTime">1320843789000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/270.html">#270</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/270.html">Refactor ckan/lib/importer and ckanclient/loader.</a>
                          </td>
                          <td class="description">
                            <p>
There is code to create packages in-process (ckan/lib/importer) and via HTTP (ckanclient/loaders/base). There is also code to read different kinds of package source (Google Spreadsheets spreadsheet, other spreadsheet).
</p>
<p>
Propose to refactor all this to have template method in base command class (subclasses may implement command line interface, graphical user interface, or Web interface), where the template method calls on aggregated strategy objects for: reading raw spreadsheet data from spreadsheet application; for inferring CKAN package entities from the raw spreadsheet data; and for writing package entities to CKAN service.
</p>
<p>
Spreadsheet readers to be factored to allow for variations of spreadsheet application.
</p>
<p>
Raw data inferrers to allow for variations in spreadsheet cell structure.
</p>
<p>
CKAN writer strategies to allow for either CKAN client or direct linking.
</p>
<p>
Actual cases then supported by specifying existing strategies (or defining new ones) in a script that invokes the command class.
</p>

                            
                          </td>
                          <td class="PosixTime">1268671804000000
                          </td>
                          <td class="ModifiedTime">1290596640000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1074.html">#1074</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1074.html">Refactor authz web user interface to have common code and templating</a>
                          </td>
                          <td class="description">
                            <p>
Currently repeat the same template and code across Package Authz, Group Authz, and Authz Group authz.
</p>
<p>
Having now implemented a new, cleaner setup in ckanext-admin we should port this back into core.
</p>
<ul><li>Common template code (checkbox template)
</li><li>Logic code (or just common code) for wiring into authz system
</li><li>Look for all places thoroughout the system where usernames, authzgroups or groups need to be typed into boxes, and make sure that they auto-complete appropriately.
</li></ul><p>
Will also deliver a significant improvement in the form of ajax user lookup.
</p>

                            
                          </td>
                          <td class="PosixTime">1302271586000000
                          </td>
                          <td class="ModifiedTime">1314303581000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1596.html">#1596</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-future.html">ckan-future</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1596.html">Refactor authz roles</a>
                          </td>
                          <td class="description">
                            <p>
Suggestions from rgrp:
</p>
<ul><li>Get rid of Roles, and replace them with direct assignment of actions, even though there are many actions, and extensions can add arbitrary ones.
</li><li>Debatable whether we should cut the number of actions to correspond to the three roles defined by the base system.
</li><li>Have a method of finding roles (or, in future, actions) relevant to a given protection object (e.g. FILE-UPLOAD(ER) not relevant to Packages)
</li></ul><p>
(This ticket is split off from <a class="closed ticket" href="../ticket/1065.html" title="enhancement: [super] Change Authorization System (closed: fixed)">#1065</a>)
</p>

                            
                          </td>
                          <td class="PosixTime">1324549888000000
                          </td>
                          <td class="ModifiedTime">1338205019000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1278.html">#1278</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1278.html">Refactor authorized_query calls</a>
                          </td>
                          <td class="description">
                            <p>
There are some functions that still use the Auhtorizer().authorized_query method:
</p>
<pre class="wiki">./ckan/controllers/authorization_group.py:24:        query = ckan.authz.Authorizer().authorized_query(c.user, model.AuthorizationGroup)
./ckan/lib/base.py:237:        groups = ckan.authz.Authorizer.authorized_query(c.user, model.Group, 
./ckan/lib/search/sql.py:55:        q = authz.Authorizer().authorized_query(username, model.Group)
./ckan/lib/search/sql.py:118:        q = authz.Authorizer().authorized_query(self.options.get('username'), model.Package)
./ckan/logic/action/get.py:154:    query = Authorizer().authorized_query(user, model.Group, model.Action.EDIT)

./ckan/tests/test_authz.py:158:        q = self.authorizer.authorized_query(self.notadmin.name, model.Package)
./ckan/tests/test_authz.py:353:        q = self.authorizer.authorized_query(self.notmember.name, model.Package)
./ckan/tests/test_authz.py:357:        q = self.authorizer.authorized_query(self.member.name, model.Package)
./ckan/tests/functional/test_authorization_group.py:44:        group_count = Authorizer.authorized_query(u'russianfan', model.AuthorizationGroup).count()
</pre>
                            
                          </td>
                          <td class="PosixTime">1313415177000000
                          </td>
                          <td class="ModifiedTime">1313415177000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1372.html">#1372</a>
                          </td>
                          <td class="type">refactor
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">johnglover
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-24.html">ckan-sprint-2011-10-24</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1372.html">Refactor archiver to work as a celery task</a>
                          </td>
                          <td class="description">
                            <p>
Take the resource archiver (currently part of ckanext-qa) and make it into a standalone extension that works as a celery task.
</p>

                            
                          </td>
                          <td class="PosixTime">1317808970000000
                          </td>
                          <td class="ModifiedTime">1319625783000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1229.html">#1229</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">thejimmyg
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-24.html">ckan-sprint-2011-10-24</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1229.html">Refactor all database code out of the controllers and into the logic layer</a>
                          </td>
                          <td class="description">
                            <p>
Progress can be tracked in this document:
</p>
<p>
<a class="ext-link" href="https://spreadsheets.google.com/spreadsheet/ccc?key=0Atp3cZFjuIOAdFQzRnVoUHV6ckoyblI5TUdEcnJLVlE&amp;hl=en_US#gid=0"><span class="icon">​</span>https://spreadsheets.google.com/spreadsheet/ccc?key=0Atp3cZFjuIOAdFQzRnVoUHV6ckoyblI5TUdEcnJLVlE&amp;hl=en_US#gid=0</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1311093924000000
                          </td>
                          <td class="ModifiedTime">1319645778000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/669.html">#669</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/669.html">Refactor Solr to become a generic worker</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1286189594000000
                          </td>
                          <td class="ModifiedTime">1293057161000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/921.html">#921</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">sebbacon
                          </td>
                          <td class="reporter">thejimmyg
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/921.html">Refactor DGU Harvesting</a>
                          </td>
                          <td class="description">
                            <p>
Refactor harvesting code to simplify.
</p>

                            
                          </td>
                          <td class="PosixTime">1295389237000000
                          </td>
                          <td class="ModifiedTime">1300197629000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/910.html">#910</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/910.html">Refactor CKANrdf to support extras</a>
                          </td>
                          <td class="description">
                            <p>
Extra fields should be represented in some manner. 
</p>

                            
                          </td>
                          <td class="PosixTime">1295266026000000
                          </td>
                          <td class="ModifiedTime">1310128544000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1079.html">#1079</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-5.html">ckan-v1.4-sprint-5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1079.html">Refactor API to use new logic layer and dictization</a>
                          </td>
                          <td class="description">
                            <ul><li>Convert current api saves to the new standard dict format.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1302509530000000
                          </td>
                          <td class="ModifiedTime">1302777504000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/230.html">#230</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/230.html">Refactor 'package preview' to use 'package read'</a>
                          </td>
                          <td class="description">
                            <ul><li>Requires Package Read to not use the side-bar
</li><li>Need to sync params to a package object that is taken out of the session so that it doesn't go into the database.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1262788084000000
                          </td>
                          <td class="ModifiedTime">1265293953000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1013.html">#1013</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">sebbacon
                          </td>
                          <td class="reporter">sebbacon
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-5.html">ckan-v1.4-sprint-5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1013.html">Refactor &amp; write tests for Wordpresser extension</a>
                          </td>
                          <td class="description">
                            <p>
The Wordpresser extension seems to be working well for DataGM, but needs caching and tests.
</p>

                            
                          </td>
                          <td class="PosixTime">1298887392000000
                          </td>
                          <td class="ModifiedTime">1301909717000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1815.html">#1815</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-future.html">ckan-future</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1815.html">Reenable Sparql endpoint on publicdata.eu</a>
                          </td>
                          <td class="description">
                            <p>
Estimate: ?
</p>
<p>
The 4store Sparql endpoint has been down for a long time.
It needs to be reenabled and we need to check that the necessary informtion is pushed when creating /editing a dataset.
</p>

                            
                          </td>
                          <td class="PosixTime">1329757723000000
                          </td>
                          <td class="ModifiedTime">1338204641000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2949.html">#2949</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2949.html">Reenable Data API button on the new theme</a>
                          </td>
                          <td class="description">
                            <p>
The checks to show or not the button need to be updated for the latest datastore version
</p>

                            
                          </td>
                          <td class="PosixTime">1349107464000000
                          </td>
                          <td class="ModifiedTime">1349107464000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2428.html">#2428</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">seanh
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.8.html">ckan-v1.8</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2428.html">Reduce/sort out CKAN's dependencies</a>
                          </td>
                          <td class="description">
                            <p>
This ticket depends on <a class="closed ticket" href="../ticket/2423.html" title="enhancement: Get rid of CKAN's lxml dependency (closed: duplicate)">#2423</a>, <a class="closed ticket" href="../ticket/2424.html" title="enhancement: Get rid of CKAN's autoneg dependency (closed: duplicate)">#2424</a>, <a class="closed ticket" href="../ticket/2425.html" title="enhancement: Get rid of CKAN's flup dependency (closed: fixed)">#2425</a>, <a class="new ticket" href="../ticket/2426.html" title="enhancement: Get rid of CKAN's formalchemy dependency (new)">#2426</a> and <a class="new ticket" href="../ticket/2427.html" title="enhancement: Reduce cruft installed into CKAN's virtualenv due to Pylons (new)">#2427</a>.
</p>
<ul><li>Try to remove as many of CKAN's dependencies as possible
</li></ul><ul><li>Try to update as many of the remaining ones as possible
</li></ul><ul><li>Try to get rid of some dependencies that are fetched from random hg or git servers instead of pypi
</li></ul><ul><li>Then try to get the order of deps in the requirements files right so that you end up with the right versions of everything
</li></ul><ul><li>Each module in the dependencies file should specify the exact version, to protect us from changes due to them upgrading versions under us and breaking things or changing their own deps
</li></ul><ul><li>Consider shipping dependencies with ckan instead of pip installing them?
</li></ul><ul><li>This is related to moving CKAN to Ubuntu 12.04
</li></ul><ul><li>Add a test case that runs pip freeze and tests that all the right versions of deps are installed?
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1337946896000000
                          </td>
                          <td class="ModifiedTime">1341314475000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2427.html">#2427</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.9.html">ckan-v1.9</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2427.html">Reduce cruft installed into CKAN's virtualenv due to Pylons</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1337946507000000
                          </td>
                          <td class="ModifiedTime">1341268323000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2947.html">#2947</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dominik
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2947.html">Redirect to the resource page from /resource/{res-id}</a>
                          </td>
                          <td class="description">
                            <p>
Use story:
As a user of the datasore I want to be able to put the resource id without the dataset name in a url and see the resource page.
</p>
<p>
Proposed redirect:
</p>
<p>
/resource/{res-id} -&gt; dataset/foo-bar/resource/{res-id}
</p>

                            
                          </td>
                          <td class="PosixTime">1349097325000000
                          </td>
                          <td class="ModifiedTime">1349097325000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/937.html">#937</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">sebbacon
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-5.html">ckan-v1.4-sprint-5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/937.html">Record download stats for resources (extension)</a>
                          </td>
                          <td class="description">
                            <p>
As a User (especially as a Package <a class="missing wiki">Owner/Maintainer?</a>) I want to know how many times a resource has been downloaded (and when).
</p>
<p>
So let's record download stats (as in clicks on the link for a resource).
</p>
<h2 id="Implementation">Implementation</h2>
<ul><li>Use the existing support for this feature in google analytics or piwiki
</li><li>For google analytics see:
<ul><li>Integrate to record: <a class="ext-link" href="http://www.google.com/support/analytics/bin/answer.py?answer=55529"><span class="icon">​</span>http://www.google.com/support/analytics/bin/answer.py?answer=55529</a>
</li><li>Accessing analytics data via API (for showing download counts): <a class="ext-link" href="http://code.google.com/apis/analytics/docs/gdata/gdataDeveloperGuide.html"><span class="icon">​</span>http://code.google.com/apis/analytics/docs/gdata/gdataDeveloperGuide.html</a>
</li></ul></li><li>Limitations only record downloads by browsers with js turned on.
<ul><li>This is OK I think (in any case machine download via e.g. datapkg does not get downloaded)
</li></ul></li></ul><h3 id="OldSpecdoitinCKAN">Old Spec (do it in CKAN)</h3>
<ul><li>Record info of form: resource id (or url?), timestamp
</li><li>Do this via javascript capturing of onclick event talking to an api
</li><li>API: /api/resource/{id}/download
<ul><li>POST to increment (how do we stop spamming -- could use a nonce setup with a random string set on each page load for the js)
</li><li>GET to get data back { total: X, day_count: [ [yyyy-mm-dd, count], ... ] }
</li></ul></li></ul><h2 id="Questions">Questions</h2>
<ul><li>Do we record ip addresses (to handle de-botting etc)?
</li><li>Do we count preview clicks as well?
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1296340273000000
                          </td>
                          <td class="ModifiedTime">1302513831000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/75.html">#75</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/75.html">Record and display package "usage" information</a>
                          </td>
                          <td class="description">
                            <ul><li>Number of package page visits on ckan (can we get this straight from google analytics)
</li><li>Number of times url or download url is used - now <a class="closed ticket" href="../ticket/937.html" title="enhancement: Record download stats for resources (extension) (closed: fixed)">ticket:937</a> (Record download stats for resoures)
</li></ul><p>
How do we do this?
</p>
<ul><li>Google analytics will miss a lot of this usage (and how do we get that data out anyway)
</li><li>Could use javascript but again misses usage.
</li><li>One option is to redirect link but that is kind of nasty (but may be only option ...)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1247828785000000
                          </td>
                          <td class="ModifiedTime">1296341223000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2955.html">#2955</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dominik
                          </td>
                          <td class="reporter">dominik
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan&#32;2.0.html">ckan 2.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2955.html">Recline should be updated</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1349270534000000
                          </td>
                          <td class="ModifiedTime">1350577952000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2944.html">#2944</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dominik
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/2944.html">Recline preview does not work in Opera</a>
                          </td>
                          <td class="description">
                            <p>
Opera cannot show a recline preview. I shows 0 records.
</p>

                            
                          </td>
                          <td class="PosixTime">1349090802000000
                          </td>
                          <td class="ModifiedTime">1349090802000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/3011.html">#3011</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">johnglover
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan&#32;2.0.html">ckan 2.0</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/3011.html">Recline fixes and updates for CKAN 2.0</a>
                          </td>
                          <td class="description">
                            <p>
Fixes and updates to Recline / Datapreview for CKAN 2.0.
</p>

                            
                          </td>
                          <td class="PosixTime">1352288455000000
                          </td>
                          <td class="ModifiedTime">1352288455000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1807.html">#1807</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">seanh
                          </td>
                          <td class="reporter">seanh
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-03-05.html">ckan-sprint-2012-03-05</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1807.html">Recently added/updated datasets for EC portal</a>
                          </td>
                          <td class="description">
                            <p>
For EC Portal need a page (or HTML snippet embedded in the front page?) listing recently added or updated datasets.
</p>
<ul><li>Could be generated from the activity streams
</li></ul><ul><li>Should it list datasets only, or other activities as well?
</li></ul><ul><li>May be related to <a class="accepted ticket" href="../ticket/1785.html" title="enhancement: Replace 'Revisions' page with site-wide activity stream (accepted)">#1785</a> (Replace 'Revisions' page with site-wide activity stream)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1329742326000000
                          </td>
                          <td class="ModifiedTime">1330809641000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/523.html">#523</a>
                          </td>
                          <td class="type">requirement
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/iati-1.html">iati-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/523.html">Read/write APIs for users and publishing entities</a>
                          </td>
                          <td class="description">
                            <p>
Read/write APIs for users and publishing entities to access and register data
</p>
<ul><li>Users have read access
</li><li>Publishing entities have both (though can only write to 'their' records)
</li><li>Priority: 4 for write (read access is 3)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1282893743000000
                          </td>
                          <td class="ModifiedTime">1283897688000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/763.html">#763</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-future.html">ckan-future</a>
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/763.html">Read-only mode - Setup</a>
                          </td>
                          <td class="description">
                            <p>
Admin configures entering read-only mode in one of two places:
</p>
<ul><li>CKAN config file (e.g. ckan.ini)
</li><li>environment variable from Apache config
</li></ul><p>
Once enabled, no writes can occur to the database (including user ratings and other usage stats).
</p>

                            
                          </td>
                          <td class="PosixTime">1288091506000000
                          </td>
                          <td class="ModifiedTime">1338206204000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/765.html">#765</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/765.html">Read-only mode - API usage</a>
                          </td>
                          <td class="description">
                            <p>
All writes to the API are captured and you are returned an error explaining the reason.
</p>
<p>
Possible errors: 
</p>
<ul><li>503 temporary maintenance
</li><li>403 forbidden (if server if permanently read-only)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1288091897000000
                          </td>
                          <td class="ModifiedTime">1338206123000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/501.html">#501</a>
                          </td>
                          <td class="type">requirement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/501.html">Read-only maintenance mode</a>
                          </td>
                          <td class="description">
                            <p>
CKAN should have a read-only maintenance mode with a nice little banner on all pages, appropriate REST messages etc. Bonus points if this is triggered via an environment variable and thus can be triggered by the surrounding apache. 
</p>

                            
                          </td>
                          <td class="PosixTime">1282554617000000
                          </td>
                          <td class="ModifiedTime">1282724566000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/761.html">#761</a>
                          </td>
                          <td class="type">story
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/761.html">Read-only CKAN for maintenance</a>
                          </td>
                          <td class="description">
                            <p>
Administrator wants to upgrade CKAN or move it to another server. During this time the database is being administered and either edits are lost or can't be done.
</p>

                            
                          </td>
                          <td class="PosixTime">1288090334000000
                          </td>
                          <td class="ModifiedTime">1288091977000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/764.html">#764</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">thejimmyg
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/764.html">Read-only CKAN Web UI</a>
                          </td>
                          <td class="description">
                            <p>
Whilse using CKAN web interface, you are not tempted to edit stuff:
</p>
<ul><li>You know at all times this CKAN is read-only
</li><li>All editing facilities are still seen but greyed-out with an indication why it is.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1288091619000000
                          </td>
                          <td class="ModifiedTime">1310133334000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/630.html">#630</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/630.html">Read attribute 'use constraints' from local copy of metadata document</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1284221210000000
                          </td>
                          <td class="ModifiedTime">1285443069000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/632.html">#632</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/632.html">Read attribute 'topic category' from local copy of metadata document</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1284221246000000
                          </td>
                          <td class="ModifiedTime">1285443078000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/624.html">#624</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/624.html">Read attribute 'title' from local copy of metadata document</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1284221083000000
                          </td>
                          <td class="ModifiedTime">1284675746000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/631.html">#631</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/631.html">Read attribute 'resource-locator' from local copy of metadata document</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1284221223000000
                          </td>
                          <td class="ModifiedTime">1284675741000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/626.html">#626</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/626.html">Read attribute 'point of contact' from local copy of metadata document</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1284221117000000
                          </td>
                          <td class="ModifiedTime">1285443038000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/629.html">#629</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/629.html">Read attribute 'keywords' from local copy of metadata document</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1284221191000000
                          </td>
                          <td class="ModifiedTime">1285443055000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/627.html">#627</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/627.html">Read attribute 'guid' from local copy of metadata document</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1284221134000000
                          </td>
                          <td class="ModifiedTime">1284598028000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/628.html">#628</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/628.html">Read attribute 'bounding-box' from local copy of metadata document</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1284221156000000
                          </td>
                          <td class="ModifiedTime">1285443047000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/625.html">#625</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/625.html">Read attribute 'abstract' from local copy of metadata document</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1284221101000000
                          </td>
                          <td class="ModifiedTime">1284675753000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/633.html">#633</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/633.html">Read attribute '' from local copy of metadata document</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1284221272000000
                          </td>
                          <td class="ModifiedTime">1285443112000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/634.html">#634</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/634.html">Read attribute '' from local copy of metadata document</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1284221284000000
                          </td>
                          <td class="ModifiedTime">1285443115000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/635.html">#635</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/635.html">Read attribute '' from local copy of metadata document</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1284221305000000
                          </td>
                          <td class="ModifiedTime">1285443119000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/637.html">#637</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnbywater
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/637.html">Read UKLII package data from given metadata document</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1284222536000000
                          </td>
                          <td class="ModifiedTime">1284223104000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1023.html">#1023</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1023.html">Re-queueing of worker requests with errors</a>
                          </td>
                          <td class="description">
                            <p>
Schedule worker calls to be ran several times, with certain intervals. 
</p>

                            
                          </td>
                          <td class="PosixTime">1299493179000000
                          </td>
                          <td class="ModifiedTime">1340626231000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1406.html">#1406</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">zephod
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1406.html">Re-enable RSS subscriptions</a>
                          </td>
                          <td class="description">
                            <p>
RSS 'subscribe' buttons appeared in many places on the site but were not very helpful. They took (confused) users pointed to the raw feed code, and Google Reader could not understand the feed. Safari, however, could interpret it correctly.
</p>
<p>
Their presentation needs to be clear and consistent; the RSS feed really needs testing in a variety of readers; and we need to decide exactly which items should get a feed. (Package updates? Groups?)
</p>

                            
                          </td>
                          <td class="PosixTime">1318861327000000
                          </td>
                          <td class="ModifiedTime">1320930088000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/362.html">#362</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/362.html">Ratings should not be created with a GET</a>
                          </td>
                          <td class="description">
                            <h2 id="Background">Background</h2>
<p>
In the Web UI, when you rate a package it simply links to something like:
</p>
<p>
<a class="ext-link" href="http://ckan.net/package/rate/mke-liquor-licenses?rating=3"><span class="icon">​</span>http://ckan.net/package/rate/mke-liquor-licenses?rating=3</a>
</p>
<p>
This creates a GET request. 
</p>
<p>
This is bad because:
</p>
<ul><li>Search engine crawlers follow links to find pages, and in this case end up creating a rating (although we've got a robots.txt to try and avoid this)
</li><li>There are occasions when we want to make a CKAN instance read-only, so we put a &lt;<a class="missing wiki">LimitExcept?</a> GET&gt; Apache instruction in. But the database may still get written for these ratings.
</li><li>Best practise for web requests is for GET to be a read-only request.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1278925451000000
                          </td>
                          <td class="ModifiedTime">1311176564000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/77.html">#77</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.11.html">v0.11</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/77.html">Rate packages</a>
                          </td>
                          <td class="description">
                            <h1 id="AsaUserorVisitor">As a User or Visitor</h1>
<p>
I wish to rate a package in some way. On the package view, below Openness, there is a 'Rating' heading with the star rating which is selectable.
</p>
<p>
Rating out of 5. One user or IP, one vote.
</p>
<p>
package_rating table:
</p>
<p>
package      | user                  | rating 
annakarenina | joe.bloggs.openid.com | 4
annakarenina | 154.2.5.47            | 1
</p>

                            
                          </td>
                          <td class="PosixTime">1247829193000000
                          </td>
                          <td class="ModifiedTime">1255176732000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1267.html">#1267</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1267.html">Random exception: cannot set the body to a unicode value</a>
                          </td>
                          <td class="description">
                            <p>
Occasionally see this problem when producing an error page. Here's an example
</p>
<pre class="wiki">WebApp Error: &lt;type 'exceptions.TypeError'&gt;: You cannot set the body to a unicode value without a charset
URL: http://at.ckan.net/authorizationgroup/new
Module weberror.errormiddleware:162 in __call__
&lt;&lt;              __traceback_supplement__ = Supplement, self, environ
                   sr_checker = ResponseStartChecker(start_response)
                   app_iter = self.application(environ, sr_checker)
                   return self.make_catching_iter(app_iter, environ, sr_checker)
               except:
&gt;&gt;  app_iter = self.application(environ, sr_checker)
Module beaker.middleware:73 in __call__
&lt;&lt;                                                     self.cache_manager)
               environ[self.environ_key] = self.cache_manager
               return self.app(environ, start_response)
&gt;&gt;  return self.app(environ, start_response)
Module beaker.middleware:152 in __call__
&lt;&lt;                          headers.append(('Set-cookie', cookie))
                   return start_response(status, headers, exc_info)
               return self.wrap_app(environ, session_start_response)
           
           def _get_session(self):
&gt;&gt;  return self.wrap_app(environ, session_start_response)
Module routes.middleware:130 in __call__
&lt;&lt;                  environ['SCRIPT_NAME'] = environ['SCRIPT_NAME'][:-1]
               
               response = self.app(environ, start_response)
               
               # Wrapped in try as in rare cases the attribute will be gone already
&gt;&gt;  response = self.app(environ, start_response)
Module pylons.wsgiapp:125 in __call__
&lt;&lt;          
               controller = self.resolve(environ, start_response)
               response = self.dispatch(controller, environ, start_response)
               
               if 'paste.testing_variables' in environ and hasattr(response,
&gt;&gt;  response = self.dispatch(controller, environ, start_response)
Module pylons.wsgiapp:324 in dispatch
&lt;&lt;          if log_debug:
                   log.debug("Calling controller class with WSGI interface")
               return controller(environ, start_response)
           
           def load_test_env(self, environ):
&gt;&gt;  return controller(environ, start_response)
Module ckan.lib.base:117 in __call__
&lt;&lt;          # available in environ['pylons.routes_dict']    
               try:
                   return WSGIController.__call__(self, environ, start_response)
               finally:
                   model.Session.remove()
&gt;&gt;  return WSGIController.__call__(self, environ, start_response)
Module pylons.controllers.core:284 in __call__
&lt;&lt;              if log_debug:
                       log.debug("Calling Response object to return WSGI data")
                   return response(environ, self.start_response)
               
               if log_debug:
&gt;&gt;  return response(environ, self.start_response)
Module webob.exc:248 in __call__
&lt;&lt;              return []
               if not self.body and not self.empty_body:
                   return self.generate_response(environ, start_response)
               return Response.__call__(self, environ, start_response)
&gt;&gt;  return self.generate_response(environ, start_response)
Module webob.exc:239 in generate_response
&lt;&lt;              status=self.status,
                   headerlist=headerlist,
                   content_type=content_type
               )
               return resp(environ, start_response)
&gt;&gt;  content_type=content_type
Module webob.response:94 in __init__
&lt;&lt;                  if charset is None:
                           raise TypeError(
                               "You cannot set the body to a unicode value without a charset")
                       body = body.encode(charset)
                   self._body = body
&gt;&gt;  "You cannot set the body to a unicode value without a charset")
TypeError: You cannot set the body to a unicode value without a charset
</pre>
                            
                          </td>
                          <td class="PosixTime">1312889084000000
                          </td>
                          <td class="ModifiedTime">1312897724000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1359.html">#1359</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-02-20.html">ckan-sprint-2012-02-20</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1359.html">Radically simplify standard list of licenses</a>
                          </td>
                          <td class="description">
                            <p>
Major UX grip and incredibly simple to do. May also want to have basic autocomplete support within the list (trivial to do as well I believe).
</p>
<p>
(Talk to RP about this re how we define lists of licenses).
</p>

                            
                          </td>
                          <td class="PosixTime">1317077855000000
                          </td>
                          <td class="ModifiedTime">1329132464000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/312.html">#312</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/312.html">Race condition creating PackageRating</a>
                          </td>
                          <td class="description">
                            <p>
On ckan.net there are a few packages which cause a 403 exception when you try to rate them:
<a class="ext-link" href="http://www.ckan.net/package/rate/coins-data?rating=3"><span class="icon">​</span>http://www.ckan.net/package/rate/coins-data?rating=3</a>
</p>
<p>
The exception is occuring here:
ckan.rating:39 in set_rating
rating_obj = rating_query.one()
<a class="missing wiki">InvalidRequestError?</a>: Multiple rows returned for one()
</p>
<p>
It looks like this package got rated twice in quick succession, creating two similar <a class="missing wiki">PackageRating?</a> objects. This race condition needs to be solved and these particular rating objects repaired.
</p>

                            
                          </td>
                          <td class="PosixTime">1273482785000000
                          </td>
                          <td class="ModifiedTime">1311176173000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/167.html">#167</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.11.html">v0.11</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/167.html">REST interface you can't update multiple tags</a>
                          </td>
                          <td class="description">
                            <p>
Only first tag is updated.
</p>

                            
                          </td>
                          <td class="PosixTime">1256209993000000
                          </td>
                          <td class="ModifiedTime">1265891178000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/293.html">#293</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/293.html">REST PackageResource update causes exception</a>
                          </td>
                          <td class="description">
                            <p>
This is caused by editing a package with resources over the REST interface.
</p>
<p>
Exception:
</p>
<pre class="wiki">URL: http://de.ckan.net/api/rest/package/destatis
Module weberror.errormiddleware:162 in __call__
&lt;&lt;              __traceback_supplement__ = Supplement, self, environ
                   sr_checker = ResponseStartChecker(start_response)
                   app_iter = self.application(environ, sr_checker)
                   return self.make_catching_iter(app_iter, environ, sr_checker)
               except:
&gt;&gt;  app_iter = self.application(environ, sr_checker)
Module repoze.who.middleware:107 in __call__
&lt;&lt;          wrapper = StartResponseWrapper(start_response)
               app_iter = app(environ, wrapper.wrap_start_response)
       
               # The challenge decider almost(?) always needs information from the
&gt;&gt;  app_iter = app(environ, wrapper.wrap_start_response)
Module beaker.middleware:73 in __call__
&lt;&lt;                                                     self.cache_manager)
               environ[self.environ_key] = self.cache_manager
               return self.app(environ, start_response)
&gt;&gt;  return self.app(environ, start_response)
Module beaker.middleware:152 in __call__
&lt;&lt;                          headers.append(('Set-cookie', cookie))
                   return start_response(status, headers, exc_info)
               return self.wrap_app(environ, session_start_response)
           
           def _get_session(self):
&gt;&gt;  return self.wrap_app(environ, session_start_response)
Module routes.middleware:130 in __call__
&lt;&lt;                  environ['SCRIPT_NAME'] = environ['SCRIPT_NAME'][:-1]
               
               response = self.app(environ, start_response)
               
               # Wrapped in try as in rare cases the attribute will be gone already
&gt;&gt;  response = self.app(environ, start_response)
Module pylons.wsgiapp:125 in __call__
&lt;&lt;          
               controller = self.resolve(environ, start_response)
               response = self.dispatch(controller, environ, start_response)
               
               if 'paste.testing_variables' in environ and hasattr(response,
&gt;&gt;  response = self.dispatch(controller, environ, start_response)
Module pylons.wsgiapp:324 in dispatch
&lt;&lt;          if log_debug:
                   log.debug("Calling controller class with WSGI interface")
               return controller(environ, start_response)
           
           def load_test_env(self, environ):
&gt;&gt;  return controller(environ, start_response)
Module ckan.lib.base:51 in __call__
&lt;&lt;          # available in environ['pylons.routes_dict']
               try:
                   return WSGIController.__call__(self, environ, start_response)
               finally:
                   model.Session.remove()
&gt;&gt;  return WSGIController.__call__(self, environ, start_response)
Module pylons.controllers.core:221 in __call__
&lt;&lt;                  return response(environ, self.start_response)
               
               response = self._dispatch_call()
               if not start_response_called:
                   self.start_response = start_response
&gt;&gt;  response = self._dispatch_call()
Module pylons.controllers.core:172 in _dispatch_call
&lt;&lt;              req.environ['pylons.action_method'] = func
                   
                   response = self._inspect_call(func)
               else:
                   if log_debug:
&gt;&gt;  response = self._inspect_call(func)
Module pylons.controllers.core:107 in _inspect_call
&lt;&lt;                        func.__name__, args)
               try:
                   result = self._perform_call(func, args)
               except HTTPException, httpe:
                   if log_debug:
&gt;&gt;  result = self._perform_call(func, args)
Module pylons.controllers.core:60 in _perform_call
&lt;&lt;          """Hide the traceback for everything above this method"""
               __traceback_hide__ = 'before_and_this'
               return func(**args)
           
           def _inspect_call(self, func):
&gt;&gt;  return func(**args)
Module ckan.controllers.rest:145 in update
&lt;&lt;                  fs = ckan.forms.group_fs_combined
                   fs = fs.bind(entity, data=request_fa_dict)
                   validation = fs.validate_on_edit(entity.name, entity.id)
                   if not validation:
                       response.status_int = 409
&gt;&gt;  validation = fs.validate_on_edit(entity.name, entity.id)
Module ckan.forms.package:385 in validate_on_edit
&lt;&lt;              temp_name = orig_pkg_name
                   self.data['Package-%s-name' % record_id] = u'something_unique'
               validation = self.validate()
               if temp_name:
                   # restore it
&gt;&gt;  validation = self.validate()
Module formalchemy.forms:175 in validate
&lt;&lt;          if self.readonly:
                   raise Exception('Cannot validate a read-only FieldSet')
               return AbstractFieldSet.validate(self)
       
           def sync(self):
&gt;&gt;  return AbstractFieldSet.validate(self)
Module formalchemy.forms:104 in validate
&lt;&lt;          success = True
               for field in self.render_fields.itervalues():
                   success = field._validate() and success
               # run this _after_ the field validators, since each field validator
               # resets its error list. we want to allow the global validator to add
&gt;&gt;  success = field._validate() and success
Module formalchemy.fields:763 in _validate
&lt;&lt;          try:
                   value = self._deserialize()
               except validators.ValidationError, e:
                   self.errors.append(e)
&gt;&gt;  value = self._deserialize()
Module formalchemy.fields:1354 in _deserialize
&lt;&lt;          if self.is_composite_foreign_key:
                   return self.query(self.relation_type()).get(python_pk(self.renderer.deserialize()))
               return self.renderer.deserialize()
&gt;&gt;  return self.renderer.deserialize()
Module formalchemy.fields:183 in deserialize
&lt;&lt;          if self.field.is_collection:
                   return [self._deserialize(subdata) for subdata in self._serialized_value()]
               return self._deserialize(self._serialized_value())
       
           def _deserialize(self, data):
&gt;&gt;  return self._deserialize(self._serialized_value())
Module formalchemy.fields:167 in _serialized_value
&lt;&lt;          if self.field.is_collection:
                   return self._params.getall(self.name)
               return self._params.getone(self.name)
       
           def deserialize(self):
&gt;&gt;  return self._params.getone(self.name)
Module formalchemy.base:63 in getone
&lt;&lt;          if v is None or isinstance(v, basestring) or isinstance(v, cgi.FieldStorage):
                   return v
               return v[0]
           def getall(self, key):
               v = dict.get(self, key)
&gt;&gt;  return v[0]
TypeError: 'int' object is unsubscriptable
</pre><p>
Thanks to Friedrich for spotting this.
</p>

                            
                          </td>
                          <td class="PosixTime">1271756102000000
                          </td>
                          <td class="ModifiedTime">1271940083000000
                          </td>
              </tr>
          </tbody>
      </table>
      <div class="paging">
    <span class="previous">
      <a href="22%3Fsort=summary&amp;asc=0&amp;page=10.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=1.html" title="Page 1">1</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=2.html" title="Page 2">2</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=3.html" title="Page 3">3</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=4.html" title="Page 4">4</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=5.html" title="Page 5">5</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=6.html" title="Page 6">6</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=7.html" title="Page 7">7</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=8.html" title="Page 8">8</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=9.html" title="Page 9">9</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=10.html" title="Page 10">10</a>
      </span>
      <span>
        <span class="current">11</span>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=12.html" title="Page 12">12</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=13.html" title="Page 13">13</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=14.html" title="Page 14">14</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=15.html" title="Page 15">15</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=16.html" title="Page 16">16</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=17.html" title="Page 17">17</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=18.html" title="Page 18">18</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=19.html" title="Page 19">19</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=20.html" title="Page 20">20</a>
      </span>
      <span>
        <a href="22%3Fsort=summary&amp;asc=0&amp;page=21.html" title="Page 21">21</a>
      </span>
    <span class="next">
      <a href="22%3Fsort=summary&amp;asc=0&amp;page=12.html" title="Next Page">→</a>
    </span>
</div>
      <div id="help"><strong>Note:</strong>
        See <a href="../wiki/TracReports.html">TracReports</a> for help on using and creating reports.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="22%3Fsort=summary&amp;asc=0&amp;format=rss" class="rss">RSS Feed</a>
        </li><li>
          <a rel="nofollow" href="22%3Fsort=summary&amp;asc=0&amp;format=csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="22%3Fsort=summary&amp;asc=0&amp;format=tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="../report%3Fid=22&amp;format=sql">SQL Query</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.3</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>