<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      {23} Trac comments – CKAN
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">window.location.hash = window.location.hash;</script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="23%3Fsort=PosixTime&amp;asc=1&amp;format=rss" type="application/rss+xml" class="rss" title="RSS Feed" /><link rel="alternate" href="23%3Fsort=PosixTime&amp;asc=1&amp;format=csv" type="text/plain" title="Comma-delimited Text" /><link rel="alternate" href="23%3Fsort=PosixTime&amp;asc=1&amp;format=tab" type="text/plain" title="Tab-delimited Text" /><link rel="alternate" href="../report%3Fid=23&amp;format=sql" type="text/plain" title="SQL Query" />
        <link rel="up" href="../report.html" title="Available Reports" />
        <link rel="next" href="23%3Fsort=PosixTime&amp;asc=1&amp;page=21.html" title="Next Page" />
        <link rel="start" href="../wiki.1.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/report.css" type="text/css" />
        <link rel="prev" href="23%3Fsort=PosixTime&amp;asc=1&amp;page=19.html" title="Previous Page" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search CKAN" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://ckan.org/"><img src="http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png" alt="CKAN Trac" height="70" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../login.html">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li><a href="../about.html">About Trac</a></li><li class="last"><a href="../register.html">Register</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li><a href="../search.html">Search</a></li><li class="last"><a href="../wiki.1.html">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="../report.html">Available Reports</a></li><li class="last"><a href="../query.html">Custom Query</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="report">
      <h1>{23} Trac comments
        <span class="numrows">(3729 matches)</span>
      </h1>
      <form method="get" action="23%3Fsort=PosixTime&amp;asc=1&amp;page=20.html">
        <div id="prefs">
          <div>
            <label>
              Max items per page
              <input type="text" name="max" size="10" value="100" />
            </label>
          </div>
          <div class="buttons">
            <input type="submit" value="Update" />
          </div>
        </div>
      </form>
      <div id="description">
        <p>
<a class="ext-link" href="https://github.com/roskakori/tratihubis/blob/master/query_comments.sql"><span class="icon">​</span>https://github.com/roskakori/tratihubis/blob/master/query_comments.sql</a>
</p>

      </div>
      <div class="buttons">
      </div>
      <h2 class="report-result">
        Results <span class="numresults">(1901 - 2000 of 3729)</span>
      </h2>
      <div class="paging">
    <span class="previous">
      <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=19.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=10.html" title="Page 10">10</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=11.html" title="Page 11">11</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=12.html" title="Page 12">12</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=13.html" title="Page 13">13</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=14.html" title="Page 14">14</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=15.html" title="Page 15">15</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=16.html" title="Page 16">16</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=17.html" title="Page 17">17</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=18.html" title="Page 18">18</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=19.html" title="Page 19">19</a>
      </span>
      <span>
        <span class="current">20</span>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=21.html" title="Page 21">21</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=22.html" title="Page 22">22</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=23.html" title="Page 23">23</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=24.html" title="Page 24">24</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=25.html" title="Page 25">25</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=26.html" title="Page 26">26</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=27.html" title="Page 27">27</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=28.html" title="Page 28">28</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=29.html" title="Page 29">29</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=30.html" title="Page 30">30</a>
      </span>
    <span class="next">
      <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=21.html" title="Next Page">→</a>
    </span>
</div>
      <table class="listing tickets">
          <thead>
        <tr class="trac-columns">
          <th>
            <a href="23%3Fsort=ticket&amp;asc=1&amp;page=20.html">
              Ticket
            </a>
          </th><th class="asc">
            <a href="23%3Fsort=PosixTime&amp;asc=0&amp;page=20.html">
              Posixtime
            </a>
          </th><th>
            <a href="23%3Fsort=author&amp;asc=1&amp;page=20.html">
              Author
            </a>
          </th><th colspan="100">
            <a href="23%3Fsort=newvalue&amp;asc=1&amp;page=20.html">
              Newvalue
            </a>
          </th>
        </tr>
          </thead>
          <tbody>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/987.html">#987</a>
                          </td>
                          <td class="PosixTime">1311177705000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">This has largely been implemented now for publicdata.eu. There is a CREP #1134 outstanding to take the harvesting to the next level so marking this one as duplicate for now.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1062.html">#1062</a>
                          </td>
                          <td class="PosixTime">1311178145000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">Hi John,

Can you please check that the new webstore+preview works correctly with this one please?

Cheers,

James
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1150.html">#1150</a>
                          </td>
                          <td class="PosixTime">1311178163000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">Hi John,

Can you please check that the new webstore+preview works correctly with this one too please?

Cheers,

James
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/225.html">#225</a>
                          </td>
                          <td class="PosixTime">1311178276000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">This ticket is more than 6 months old so closing it in line with our new ticketing policy.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1167.html">#1167</a>
                          </td>
                          <td class="PosixTime">1311178516000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">I've now written a 20 page guide on using CKAN on Amazon EC2. I haven't explicitly created an AMI, but I don't think we should do that anyway for a few reasons:

 * it is fiddly
 * there is no advantage to the user as CKAN installation is so easy and so well documented
 * we don't want to have to maintain the image going forward
 * we might not want to promote a non-open approach

The guide will form part of Anna PS's work on the overall documentation but you can also see the original version here:

https://bitbucket.org/okfn/ckan-debs-public/src/489a5ecf369f/ec2/
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/543.html">#543</a>
                          </td>
                          <td class="PosixTime">1311178918000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">Consolidation of caching has been moved in ticket #995.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/537.html">#537</a>
                          </td>
                          <td class="PosixTime">1311178929000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">Consolidation of caching has been moved in ticket #995.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/995.html">#995</a>
                          </td>
                          <td class="PosixTime">1311179009000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">See also previous tickets:

 * #537 Caching and Performance improvement
 * #543 Investigate partial page caching and edge-side includes
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/103.html">#103</a>
                          </td>
                          <td class="PosixTime">1311179429000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">David, I'm in the middle of a ticket refactor. Please don't open tickets I've just closed ;)

This will be taken forward as part of #1233
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1204.html">#1204</a>
                          </td>
                          <td class="PosixTime">1311179980000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">Sorry, is this a CKAN issue or a datacatalogs.org one? If it is datacatalogs.org do you mean a catalog rather than a package? If so, can you give an example of the sort of change you've made?

Marking as invalid until we get more information.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1108.html">#1108</a>
                          </td>
                          <td class="PosixTime">1311180204000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">See also comment on #1200 about using the pdeu theme.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1200.html">#1200</a>
                          </td>
                          <td class="PosixTime">1311180218000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">This is a duplicate of #1108. Let's have the discussion there please.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/830.html">#830</a>
                          </td>
                          <td class="PosixTime">1311180263000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">We can now implement themes via extensions or change them via config options. See https://bitbucket.org/okfn/ckanext-exampletheme/ for an example.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/103.html">#103</a>
                          </td>
                          <td class="PosixTime">1311180850000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Ah, you should have mentioned the new ticket! ;-)
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/990.html">#990</a>
                          </td>
                          <td class="PosixTime">1311180850000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">This now works.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/78.html">#78</a>
                          </td>
                          <td class="PosixTime">1311181280000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">This ticket is now more than 6 months old so closing in line with our new ticketing policy.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/143.html">#143</a>
                          </td>
                          <td class="PosixTime">1311181336000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">Baze is looking into this and also into most followed packages.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/165.html">#165</a>
                          </td>
                          <td class="PosixTime">1311181391000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">This is more than 6 months old so closing.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1183.html">#1183</a>
                          </td>
                          <td class="PosixTime">1311181719000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">Hi John,

Can you have a look at this one too please?

Cheers,

James
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1096.html">#1096</a>
                          </td>
                          <td class="PosixTime">1311182262000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">Milestone ckan-v-future deleted
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/249.html">#249</a>
                          </td>
                          <td class="PosixTime">1311182450000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">This is over 6 months old so closing in line with our ticketing policy. Also, I shouldn't think we really want such a complicated search anyway.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/449.html">#449</a>
                          </td>
                          <td class="PosixTime">1311182945000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">This ticket is now more than 6 months old so marking as invalid in line with our ticketing policy.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/659.html">#659</a>
                          </td>
                          <td class="PosixTime">1311183031000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">Since there is already an implementation and already exists as a ticket in the OKFN tasks, I'm marking this as closed. If there is a reason this is still open, please add it to a more appropriate ticket, such as the API version 3 one.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/660.html">#660</a>
                          </td>
                          <td class="PosixTime">1311183115000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">This ticket is more than 6 months old so closing it in line with our ticketing policy.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1234.html">#1234</a>
                          </td>
                          <td class="PosixTime">1311183328000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed in cset:1ed3fde56a61 for 1.4.3.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/820.html">#820</a>
                          </td>
                          <td class="PosixTime">1311325226000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This has been fixed
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1207.html">#1207</a>
                          </td>
                          <td class="PosixTime">1311325343000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This has been fixed.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1195.html">#1195</a>
                          </td>
                          <td class="PosixTime">1311332049000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Also this one: http://ckan.net/storage/f/file/
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1236.html">#1236</a>
                          </td>
                          <td class="PosixTime">1311351476000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Working on it on branch enh-1236-view-package-revision
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1239.html">#1239</a>
                          </td>
                          <td class="PosixTime">1311442163000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Fixed in cset:adf254b7c507 (see https://bitbucket.org/okfn/ckan/changeset/adf254b7c507)
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1208.html">#1208</a>
                          </td>
                          <td class="PosixTime">1311525306000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Propose this ticket can be closed as webstore is now functional and being used. Can open new tickets for specific improvements / adaptations as the need arises.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1238.html">#1238</a>
                          </td>
                          <td class="PosixTime">1311583876000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">I cannot reproduce this, to me it looks like it does get the correct revision.  If you for example look at the package a millisecond before i.e
http://ckan.net/package/osm%402010-11-30%2000%3A21%3A49.627829
the tags are no longer there that were added in that revision.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1002.html">#1002</a>
                          </td>
                          <td class="PosixTime">1311675754000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Can you also delete the "paster changes" in ckan/lib/cli with this removal?
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1002.html">#1002</a>
                          </td>
                          <td class="PosixTime">1311676199000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Reopening this, since it has not been pushed or merged in afaict.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1236.html">#1236</a>
                          </td>
                          <td class="PosixTime">1311699843000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This is merged to default (for rel 1.2.5) but isn't brilliant yet because of bug #1238.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1238.html">#1238</a>
                          </td>
                          <td class="PosixTime">1311759784000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Apologies, I have a problem instead with the way I identify the revision in #1236.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1236.html">#1236</a>
                          </td>
                          <td class="PosixTime">1311759816000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">The bug is in fact in the way I work out what revision I'm displaying - it just looks at the PackageRevision.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/318.html">#318</a>
                          </td>
                          <td class="PosixTime">1311770683000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">The QA code should identify invalid URLs. Resources with invalid urls will have an 'openness_score' of 0 and an 'openness_score_reason' of 'Invalid url scheme' or 'invalid URL'.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1183.html">#1183</a>
                          </td>
                          <td class="PosixTime">1311771069000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Fixed in new datapreview code (currently running on the test.ckan.net), which now gets the preview data from a webstore instead of the dataproxy API. It also only now shows a preview button for resources that were successfully archived and saved in the webstore.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/888.html">#888</a>
                          </td>
                          <td class="PosixTime">1311773103000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Dataproxy / Dataapi now deprecated in favour of the combination of new QA archive / process commands and the webstore.

Changes in relation to Dataproxy / Dataapi:
* Currently only supports CSV files, but plans to add support for excel and google docs spreadsheets soon.
* Uses David Raznick's CSV parser instead of Brewery for parsing, handles messy CSV data better.

Changes in relation to old QA functionality:
* decoupled archiving (downloading) and QA process
* added a new 'process' command which parses downloaded files and adds them to a local webstore

Closing for now, any improvements/feature requests should be in tickets relating to either the QA functionality or the webstore.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1062.html">#1062</a>
                          </td>
                          <td class="PosixTime">1311773731000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">The file is in Turtle format (serialisation format for RDF, which we currently don't archive and have no preview code for. The new preview code will not even create a preview button for this file type. Moving to the backlog for now, support for RDF and related formats should be added along with support for excel docs and google spreadsheets.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1150.html">#1150</a>
                          </td>
                          <td class="PosixTime">1311774141000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Unicode data should be fine in the new datapreview code, for example: http://test.ckan.net/package/afghanistan-election-data
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1195.html">#1195</a>
                          </td>
                          <td class="PosixTime">1311841763000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Fixed in https://bitbucket.org/okfn/ckanext-storage/changeset/49734285f1ef
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1246.html">#1246</a>
                          </td>
                          <td class="PosixTime">1311863583000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">We have an unresolved issue with the display of the 'open data' icon that showed up when we upgraded ckan.net to the latest beta last week, but I didn't realise the search page http://ckan.net/package was showing all packages as open (the revision page and package pages seem fine).

Last week when I upgraded from 1.4.1 to 1.4.2beta, there was an exception thrown when loading the home page. The exception was in doing the isopen call. It was solved by making some code changes directly on the ckan.net server to make it an attribute query instead of function call. It was strange because this behaviour didn't occur on my machine and all the tests passed. Here are the manual patches on ckan.net (the application.js change is unrelated, by someone else):

{{{

diff -r adf254b7c507 ckan/public/scripts/application.js
--- a/ckan/public/scripts/application.js	Sat Jul 23 18:16:15 2011 +0100
+++ b/ckan/public/scripts/application.js	Thu Jul 28 14:10:23 2011 +0000
@@ -2,6 +2,7 @@
   $(document).ready(function () {
     CKAN.Utils.setupUserAutocomplete($('input.autocomplete-user'));
     CKAN.Utils.setupAuthzGroupAutocomplete($('input.autocomplete-authzgroup'));
+    // $('.resource-url').parent(
   });
 }(jQuery));
 
diff -r adf254b7c507 ckan/templates/_util.html
--- a/ckan/templates/_util.html	Sat Jul 23 18:16:15 2011 +0100
+++ b/ckan/templates/_util.html	Thu Jul 28 14:10:23 2011 +0000
@@ -43,7 +43,7 @@
         standard package listing --&gt;
   &lt;ul py:def="package_list(packages)" class="packages"&gt;
     &lt;li py:for="package in packages"
-        class="${'fullyopen' if (package.isopen() and package.resources) else None}"&gt;
+        class="${'fullyopen' if (package.isopen and package.resources) else None}"&gt;
         &lt;div class="header"&gt;
 			&lt;span class="title"&gt;
 				${h.link_to(package.title or package.name, h.url_for(controller='package', action='read', id=package.name))}
@@ -60,7 +60,7 @@
           &lt;/ul&gt;
         &lt;/py:if&gt;
         &lt;ul class="openness"&gt;
-          &lt;py:if test="package.isopen()"&gt;
+          &lt;py:if test="package.isopen"&gt;
             &lt;li&gt;
               &lt;a href="http://opendefinition.org/okd/" title="This package satisfies the Open Definition."&gt;
                   &lt;img src="http://assets.okfn.org/images/ok_buttons/od_80x15_blue.png" alt="[Open Data]" /&gt;
@@ -72,7 +72,7 @@
               &lt;/a&gt;
             &lt;/li&gt;
           &lt;/py:if&gt;
-          &lt;py:if test="not package.isopen()"&gt;
+          &lt;py:if test="not package.isopen"&gt;
             &lt;li&gt;
               &lt;span class="closed"&gt;
                 ${h.icon('lock')} Not Openly Licensed
diff -r adf254b7c507 ckan/templates/home/index.html
--- a/ckan/templates/home/index.html	Sat Jul 23 18:16:15 2011 +0100
+++ b/ckan/templates/home/index.html	Thu Jul 28 14:10:23 2011 +0000
@@ -64,6 +64,7 @@
     &lt;/py:if&gt;
 
     &lt;h4&gt;Recently changed packages&lt;/h4&gt;
+    &lt;!-- ${c.latest_packages} --&gt;
     ${package_list_from_dict(c.latest_packages)}
 
     &lt;p&gt;&lt;a href="${h.url_for(controller='revision', action='index',
diff -r adf254b7c507 ckan/templates/layout_base.html
--- a/ckan/templates/layout_base.html	Sat Jul 23 18:16:15 2011 +0100
+++ b/ckan/templates/layout_base.html	Thu Jul 28 14:10:23 2011 +0000
@@ -101,6 +101,7 @@
     am_authorized_package_create = h.am_authorized(c, actions.PACKAGE_CREATE)
 ?&gt;
           &lt;li py:if="am_authorized_package_create"&gt;${h.nav_link(c, _('Add a package'), controller='package', action='new', id=None)}&lt;/li&gt;
+          &lt;li&gt;&lt;a href="/storage/upload"&gt;Upload Data&lt;/a&gt;&lt;/li&gt;
           &lt;li&gt;${h.nav_link(c, _('Tags'), controller='tag', action='index', id=None)}&lt;/li&gt;
           &lt;li&gt;${h.nav_link(c, _('Groups'), controller='group', action='index', id=None, highlight_actions = 'new index')}&lt;/li&gt;
           &lt;li&gt;${h.nav_link(c, _('About'), controller='home', action='about', id=None)}&lt;/li&gt;
diff -r adf254b7c507 ckan/templates/package/read.html
--- a/ckan/templates/package/read.html	Sat Jul 23 18:16:15 2011 +0100
+++ b/ckan/templates/package/read.html	Thu Jul 28 14:10:23 2011 +0000
@@ -56,7 +56,7 @@
     &lt;/py:if&gt;
     
     &lt;li class="widget-container widget_text"&gt;
-    &lt;py:if test="c.pkg.isopen() and c.pkg.resources"&gt;
+    &lt;py:if test="c.pkg.isopen and c.pkg.resources"&gt;
       &lt;h3&gt;
         This Package is Open
       &lt;/h3&gt;
@@ -80,7 +80,7 @@
       &lt;/p&gt;
     &lt;/py:if&gt;
 
-    &lt;py:if test="not(c.pkg.isopen() and c.pkg.resources)"&gt;
+    &lt;py:if test="not(c.pkg.isopen and c.pkg.resources)"&gt;
       &lt;h3 i18n:msg=""&gt;This package is Not Open&lt;/h3&gt; 
       
       &lt;p&gt;Either because it is not openly licensed or is missing
}}}
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1123.html">#1123</a>
                          </td>
                          <td class="PosixTime">1311863798000000
                          </td>
                          <td class="author">nils.toedtmann
                          </td>
                          <td class="newvalue">Looks like the packages on apt.okfn.org are now architecture "all" - great. 

To avoid future confusion, i change this ticket's solution to "fixed".
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1245.html">#1245</a>
                          </td>
                          <td class="PosixTime">1311864530000000
                          </td>
                          <td class="author">annapowellsmith
                          </td>
                          <td class="newvalue">Would be nice to list some extensions somewhere on this site (features page perhaps). 

Along the lines of: http://docs.ckan.org/extensions.html#finding-extensions

It wasn't until I wrote this list that I realised just how many extensions there were, and what it said about the CKAN community that there were so many... 

So I think it would be a good sales point.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1246.html">#1246</a>
                          </td>
                          <td class="PosixTime">1311885360000000
                          </td>
                          <td class="author">pudo
                          </td>
                          <td class="newvalue">I'm afraid to say I don't understand any of this: the faulty display of openness is triggered as removing the brackets turns the isopen() check into a check for the existence of the method. Reverting the changes on the server seems to work without generating exceptions. What exactly is the issue that was supposed to be fixed originally? 
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1247.html">#1247</a>
                          </td>
                          <td class="PosixTime">1311955176000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Done. See http://ckan.readthedocs.org/ and http://docs.ckan.org/ will propagate soon.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1249.html">#1249</a>
                          </td>
                          <td class="PosixTime">1311959356000000
                          </td>
                          <td class="author">pudo
                          </td>
                          <td class="newvalue">fixed in cset:0398243111d4
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1192.html">#1192</a>
                          </td>
                          <td class="PosixTime">1312191462000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Marking this as closed as Anna has completed and this is now deployed at http://docs.ckan.org/.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1229.html">#1229</a>
                          </td>
                          <td class="PosixTime">1312191530000000
                          </td>
                          <td class="author">amercader
                          </td>
                          <td class="newvalue">Done, except for Revision related stuff, which probably overlaps with work being done by David Raznick.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1208.html">#1208</a>
                          </td>
                          <td class="PosixTime">1312191646000000
                          </td>
                          <td class="author">pudo
                          </td>
                          <td class="newvalue">This should be closed: 

 * https://github.com/okfn/webstore - See README for details
 * Python client lib: https://github.com/okfn/webstore-client
 * http://webstore.thedatahub.org/ - Demo install
 * http://wiki.ckan.net/Webstore - Overview
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/816.html">#816</a>
                          </td>
                          <td class="PosixTime">1312192499000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">What about idea of 'model' refactor for resource, specifically to have:

 * format: human created format string with possible nesting e.g. zip:csv
 * kind: file | api | example | service
 * mimetype: standard mimetype (e.g. for zipped csv would be application/zip)
 * mimetype-inner: mimetype of innermost object (so for example would be text/csv)

See http://lists.okfn.org/pipermail/ckan-discuss/2011-April/001139.html
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/816.html">#816</a>
                          </td>
                          <td class="PosixTime">1312212782000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">I like rgrp's idea to change the model. But since it's complicated it would be good to have a UI.

e.g. You might make format field simply a drop-down with only some common options: 'CSV, Excel, Zip, Other'. If you go for Other, then a more substantial UI appears, to cover more filetypes, APIs, services and a text box for Other. And if you select 'Zip' then another set of options appears to say what is in the zip. etc.etc.

Another approach would be to have a background process downloading the data file and filling this in for you.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/816.html">#816</a>
                          </td>
                          <td class="PosixTime">1312295371000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">I have implemented the resource autocomplete so am closing this for now.

I agree that more information on the resource would be a good addition. It seems a bit of a different issue to just adding autocomplete though, with potentially far more changes to the codebase, so maybe it would be better discussed in a separate ticket/CREP. However, any new fields would presumably want to either be constrained or have an autocomplete and so can reuse the work done on this feature.

Cheers,
John
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1250.html">#1250</a>
                          </td>
                          <td class="PosixTime">1312370201000000
                          </td>
                          <td class="author">pudo
                          </td>
                          <td class="newvalue">The issue is caused after search returns from solr and tries to get objects from the database. These are by default ordered by name and we need to restore the original order after fetching them from the database. 

Fixed in module.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1041.html">#1041</a>
                          </td>
                          <td class="PosixTime">1312372367000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">James says this is not priority and he does not plan to do docs for debs until he has got that system functioning.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1256.html">#1256</a>
                          </td>
                          <td class="PosixTime">1312409296000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">This has also caused problems in authorization for deleted packages.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1239.html">#1239</a>
                          </td>
                          <td class="PosixTime">1312453156000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed in 1.4.2 release. Broken in UI in 1.4.1 and API in 1.4 &amp; 1.4.1.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1140.html">#1140</a>
                          </td>
                          <td class="PosixTime">1312491320000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed cset:987da68ea4f6

The package group table needed to trigger a reindex of the package.

                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1140.html">#1140</a>
                          </td>
                          <td class="PosixTime">1312537257000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Broken since CKAN v1.1. I have added this fix to v1.4.2 and v1.4.3 releases.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1265.html">#1265</a>
                          </td>
                          <td class="PosixTime">1312566052000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed in cset:a1b8dd169f4e on 1.4.3 release and merged to default.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1266.html">#1266</a>
                          </td>
                          <td class="PosixTime">1312797477000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed in 987dc4fe078e on 1.4.3 branch and default.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1256.html">#1256</a>
                          </td>
                          <td class="PosixTime">1312813529000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed cset:357cf9377b25
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1258.html">#1258</a>
                          </td>
                          <td class="PosixTime">1312813614000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">cset:e22d4e385fc8
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1267.html">#1267</a>
                          </td>
                          <td class="PosixTime">1312889130000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">John thinks it is a problem with WebOb 1.0.6
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1267.html">#1267</a>
                          </td>
                          <td class="PosixTime">1312890962000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This error has been occurring on at.ckan.net which has webob 0.9.7.1-1
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1267.html">#1267</a>
                          </td>
                          <td class="PosixTime">1312894071000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Running tests with WebOb 0.9.7.1, we see the error! Am now trying to fix.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1267.html">#1267</a>
                          </td>
                          <td class="PosixTime">1312897724000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed in cset:db5bf5b45b4f for ckan 1.4.3.

Later versions of webob add the charset header for unicode errors (webob/exc.py:generate_response):
{{{
        extra_kw = {}
        if isinstance(body, unicode):
            extra_kw.update(charset='utf-8')
        resp = Response(body,
            status=self.status,
            headerlist=headerlist,
            content_type=content_type,
            **extra_kw
        )
}}}
This was fixed in webob cset:25fc14d49623 which went into WebOb 1.0. 

This problem affects versions from CKAN 1.4.2 back to 1.3.1. We had been avoiding this in CKAN previously by only doing abort() with a plain string.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1270.html">#1270</a>
                          </td>
                          <td class="PosixTime">1312912188000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed in cset:ca5295c9c8cf and released as ckanclient version 0.9
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1172.html">#1172</a>
                          </td>
                          <td class="PosixTime">1312991332000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">I've started this on branch defect-1172-exceptions
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1272.html">#1272</a>
                          </td>
                          <td class="PosixTime">1313745867000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Assume these are the 3 spatial fields listed on http://wiki.ckan.net/Geospatial_Capabilities. I'm a big +1 here. Starting point would be a bit more documentation on that wiki page. Questions:

 * Is this work going in ckanext-spatial?
 * What is being proposed here, I assume, is to automatically index those fields in our geospatial search.
 * Should we develop a simple display widget using google maps or similar (this is orthogonal to the WMS preview i think) which *just* uses the core fields. This is probably a separate ticket and possibly separate from ckanext-spatial extension.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1271.html">#1271</a>
                          </td>
                          <td class="PosixTime">1313753663000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Closed in cset:749cb3a087e3
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1142.html">#1142</a>
                          </td>
                          <td class="PosixTime">1313775665000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">This was completed 4 weeks ago and can now be marked as complete. See http://docs.ckan.org/ and http://wiki.ckan.net/ and http://ckan.org/
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1281.html">#1281</a>
                          </td>
                          <td class="PosixTime">1314021919000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Done by pudo in cset:eaf342823caf on default branch, so headed for release 1.4.4. 

"Work around the fact that locale changes do not affect
the running request and therefore led to an incorrect flashing
message. Now manually changing language."
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1262.html">#1262</a>
                          </td>
                          <td class="PosixTime">1314029150000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Pudo - I'm not sure what's meant here. Are you talking about moderation for new users? Or some other sort of enforcement? Is it spam you want to target?

The links you're concerned about - are they the spam ones in the User's 'about' field? If so, I think we *should* allow users to have links, although continue with applying them with 'nofollow' and attack spammers back in a concerted strategy across all editable fields - see ticket #1257.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1263.html">#1263</a>
                          </td>
                          <td class="PosixTime">1314029279000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This was fixed in cset:8d293393a9f2 for release 1.4.3.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1226.html">#1226</a>
                          </td>
                          <td class="PosixTime">1314029434000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This appears to have gone away. No sign of it for two weeks on any OKF sites.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1214.html">#1214</a>
                          </td>
                          <td class="PosixTime">1314029628000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This appears to have been fixed by version 1.4.3.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1202.html">#1202</a>
                          </td>
                          <td class="PosixTime">1314030352000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">The CKAN package page links to datapkg at: http://blog.okfn.org/2010/02/23/introducing-datapkg/ (it has always been this link).

I think Rolf is referring to the three links to knowledgeforge.net in the blog post itself. These need to be edited by Rufus. Note datapkg has moved again to github.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1175.html">#1175</a>
                          </td>
                          <td class="PosixTime">1314030683000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Hi Flavio, is this still a concern? I'd like to close this ticket unless you can provide details of the error from your logs or exception email.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/951.html">#951</a>
                          </td>
                          <td class="PosixTime">1314031006000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Specific problem explained by having two users with the same name - one was authorized and one wasn't. See: http://lists.okfn.org/pipermail/ckan-dev/2011-April/000550.html
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/947.html">#947</a>
                          </td>
                          <td class="PosixTime">1314031310000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This was done in #1025 through configuration. Happily you can setup config in an extension, so covers this ticket's aims too.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/803.html">#803</a>
                          </td>
                          <td class="PosixTime">1314031451000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">We now use nose to test migrations instead.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/503.html">#503</a>
                          </td>
                          <td class="PosixTime">1314031851000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Relationships exist now on ckan.net. e.g. http://ckan.net/package/rkb-explorer-ibm

No current DGU interest.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1275.html">#1275</a>
                          </td>
                          <td class="PosixTime">1314110016000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Completed in branch feature-1275-solr-search. Up to date with current default but not yet merged into default.

John
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/948.html">#948</a>
                          </td>
                          <td class="PosixTime">1314112642000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Note: Packages will now be excluded from the search view (see #1283). Also there is now no redirect requirement from DGU any more.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1172.html">#1172</a>
                          </td>
                          <td class="PosixTime">1314118281000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Is in cset:47225f03e2af and merged to default for 1.4.4.

It now barfs instead of failing silently:

* if the ckan config file has any errors
* search indexing error

There are some other "except Exception" statements
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1172.html">#1172</a>
                          </td>
                          <td class="PosixTime">1314118883000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">I took out "raise" by mistake in ckan/lib/search/worker.py:26 but John has added it in in the corresponding place in ckan/lib/search/__init__.py on branch feature-1275-solr-search anyway.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1154.html">#1154</a>
                          </td>
                          <td class="PosixTime">1314120497000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Fixed in core (branch feature-1275-solr-search).
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1154.html">#1154</a>
                          </td>
                          <td class="PosixTime">1314177477000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Looking at the changeset, it now does a connection check at start-up of CKAN. If it fails then CKAN runs but doesn't show any packages, apart from via the Tags interface, and the search page and widget on the front-page are removed. (BTW Is this a useful thing to do? Without search, perhaps CKAN should simply not start?)

I believe the problem pudo is referring to is temporary periods when the SOLR server is slow/overloaded/down. During this time pudo and I get exception emails saying connection failed for request. e.g.
{{{
Module ckan.controllers.home:29 in index
&lt;&lt;          query = query_for(model.Package)
               query.run(query='*:*', facet_by=g.facets,
                         limit=0, offset=0, username=c.user)
               c.facets = query.facets
               c.fields = []
&gt;&gt;  limit=0, offset=0, username=c.user)
Module ckan.lib.search.common:115 in run
&lt;&lt;          self.query = QueryParser(query, terms, fields)
               self.query.validate()
               self._run()
               self._format_results()
               return {'results': self.results, 'count': self.count}
&gt;&gt;  self._run()
Module ckanext.solr.backend:63 in _run
&lt;&lt;              # this wrapping will be caught further up in the WUI.
                   log.exception(e)
                   raise SearchError(e)
               finally:
                   conn.close()
&gt;&gt;  raise SearchError(e)
SearchError: [Errno 111] Connection refused
}}} (recently from nl.ckan.net)
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1154.html">#1154</a>
                          </td>
                          <td class="PosixTime">1314178325000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">&gt; Looking at the changeset, it now does a connection check at start-up of CKAN. If it fails then CKAN runs but doesn't show any
&gt; packages, apart from via the Tags interface, and the search page and widget on the front-page are removed. (BTW Is this a 
&gt; useful thing to do? Without search, perhaps CKAN should simply not start?)

When discussing the ticket we agreed that we should allow ckan to start without search. It is possible that people simply want to list/view information without searching for it and we decided not to prevent them from doing so.

&gt; I believe the problem pudo is referring to is temporary periods when the SOLR server is slow/overloaded/down. During this 
&gt; time pudo and I get exception emails saying connection failed for request.

Ok, other options then:

 * if an error occurs during search, return 0 results
 * if an error occurs during search, redirect to a generic 'search is unavailable' page
 * if an error occurs during search, retry the query a certain number of times before giving up and doing one of the above.

What do you suggest?
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1154.html">#1154</a>
                          </td>
                          <td class="PosixTime">1314179290000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Search requests - option one seems like a bad user experience, and option three seems too complicated. I should do option 2, explain it may well be a temporary problem, and let the user press reload, as per any normal web request.

A more difficult problem though is what to do about a failed search indexing. Because of the try/except catch we've had until the patch yesterday, we get no exception emails for this, but I'm worried that this has caused packages to not be indexed, and hence are essentially lost in CKAN (unless someone realises there is a problem and does a reindex at some point).

BTW I added paster command 'search-index check' for looking at this problem, but I don't think it was ever added to solr. Is it easy to add get_all_entity_ids for the purpose of checking for this problem?
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1240.html">#1240</a>
                          </td>
                          <td class="PosixTime">1314180488000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">I basically agree, but just thought I'd add a couple of comments into the mix.

&gt; GET at root returns whole package set (a *bad* idea)

Sure it has a cost, but I don't see what the problem with this is if the list is cached. Forcing developers to paging through the list of packages is putting unnecessary obligations. I'd say that the top two RESTful operations are listing objects and getting a particular one, and you'd be taking away one of those.

&gt; Unify on /api/v{version num}/... structure

Where is it not currently unified?
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1154.html">#1154</a>
                          </td>
                          <td class="PosixTime">1314191496000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Ok I'll implement option 2 for search query issues.

Yes it is easy to get a list of IDs from Solr so I'll have a look at that command and make sure that it works. I think a case could be made for not allowing a package to be added if it cannot be indexed however, and making the user simply retry the request.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1154.html">#1154</a>
                          </td>
                          <td class="PosixTime">1314192324000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Yes, forcing a retry may be possible, although I guess on these occasions you'd be looking at rolling back the creation of the package object too, which is not really in the spirit of the notifications system at present. This is why we had the queue for solr for occasions like this - is it here no longer?
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1154.html">#1154</a>
                          </td>
                          <td class="PosixTime">1314192753000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Not in core, there is a queue feature in the extension still which I could add to core. I think though it was a case of using either the queue or synchronous search, I don't think it would automatically fall back to the queue if there was an indexing problem, but we could look at that. Was there not talk of changing the queue system recently though? There are also no tests for the Solr queue so that would take a bit of work as well.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1154.html">#1154</a>
                          </td>
                          <td class="PosixTime">1314193633000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">RE search queries failing: Just having a look through the controller code and the package search controller and the search api  both perform option 2 already, so I'll just update the home controller.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1154.html">#1154</a>
                          </td>
                          <td class="PosixTime">1314195684000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Ok, I chatted to David about this and we feel it should go like this: notification to search indexer fails and raises an exception, this gets passed through the notification system back up to the code that creates the package, and you do a roll back. Does this tally with what you mentioned in the last comment or is what's there better?

Thanks for the info on the queue and ckanext-solr. It sounds like this isn't deployed successfully anywhere (or does pudo know if it is?). In this case we should be clear that it is not what it says it is: "This extension adds support for package search using Apache Solr to CKAN" and maybe simply mark it as deprecated. Pudo what do you think?
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1154.html">#1154</a>
                          </td>
                          <td class="PosixTime">1314196683000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">&gt; Ok, I chatted to David about this and we feel it should go like this: notification to search indexer fails and raises an exception, 
&gt; this gets passed through the notification system back up to the code that creates the package, and you do a roll back. Does this 
&gt; tally with what you mentioned in the last comment or is what's there better?

This sounds good to me, definitely better than what is currently there.

&gt; Thanks for the info on the queue and ckanext-solr. It sounds like this isn't deployed successfully anywhere (or does pudo
&gt; know if it is?).

I'm not actually sure if the queue works or not, but if it does I'll have to write some tests for it before we could add it to core. A working queue system would be useful generally however, as there are other things that it would be useful for (such as QA), but yes, going forward the Solr extension should really be deprecated.
                          </td>
              </tr>
          </tbody>
      </table>
      <div class="paging">
    <span class="previous">
      <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=19.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=10.html" title="Page 10">10</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=11.html" title="Page 11">11</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=12.html" title="Page 12">12</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=13.html" title="Page 13">13</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=14.html" title="Page 14">14</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=15.html" title="Page 15">15</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=16.html" title="Page 16">16</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=17.html" title="Page 17">17</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=18.html" title="Page 18">18</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=19.html" title="Page 19">19</a>
      </span>
      <span>
        <span class="current">20</span>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=21.html" title="Page 21">21</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=22.html" title="Page 22">22</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=23.html" title="Page 23">23</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=24.html" title="Page 24">24</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=25.html" title="Page 25">25</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=26.html" title="Page 26">26</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=27.html" title="Page 27">27</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=28.html" title="Page 28">28</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=29.html" title="Page 29">29</a>
      </span>
      <span>
        <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=30.html" title="Page 30">30</a>
      </span>
    <span class="next">
      <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=21.html" title="Next Page">→</a>
    </span>
</div>
      <div id="help"><strong>Note:</strong>
        See <a href="../wiki/TracReports.html">TracReports</a> for help on using and creating reports.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="23%3Fsort=PosixTime&amp;asc=1&amp;format=rss" class="rss">RSS Feed</a>
        </li><li>
          <a rel="nofollow" href="23%3Fsort=PosixTime&amp;asc=1&amp;format=csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="23%3Fsort=PosixTime&amp;asc=1&amp;format=tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="../report%3Fid=23&amp;format=sql">SQL Query</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.3</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>