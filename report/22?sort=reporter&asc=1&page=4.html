<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      {22} Trac tickets – CKAN
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">window.location.hash = window.location.hash;</script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="22%3Fsort=reporter&amp;asc=1&amp;format=rss" type="application/rss+xml" class="rss" title="RSS Feed" /><link rel="alternate" href="22%3Fsort=reporter&amp;asc=1&amp;format=csv" type="text/plain" title="Comma-delimited Text" /><link rel="alternate" href="22%3Fsort=reporter&amp;asc=1&amp;format=tab" type="text/plain" title="Tab-delimited Text" /><link rel="alternate" href="../report%3Fid=22&amp;format=sql" type="text/plain" title="SQL Query" />
        <link rel="up" href="../report.html" title="Available Reports" />
        <link rel="next" href="22%3Fsort=reporter&amp;asc=1&amp;page=5.html" title="Next Page" />
        <link rel="start" href="../wiki.1.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/report.css" type="text/css" />
        <link rel="prev" href="22%3Fsort=reporter&amp;asc=1&amp;page=3.html" title="Previous Page" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search CKAN" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://ckan.org/"><img src="http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png" alt="CKAN Trac" height="70" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../login.html">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li><a href="../about.html">About Trac</a></li><li class="last"><a href="../register.html">Register</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li><a href="../search.html">Search</a></li><li class="last"><a href="../wiki.1.html">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="../report.html">Available Reports</a></li><li class="last"><a href="../query.html">Custom Query</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="report">
      <h1>{22} Trac tickets
        <span class="numrows">(2647 matches)</span>
      </h1>
      <form method="get" action="22%3Fsort=reporter&amp;asc=1&amp;page=4.html">
        <div id="prefs">
          <div>
            <label>
              Max items per page
              <input type="text" name="max" size="10" value="100" />
            </label>
          </div>
          <div class="buttons">
            <input type="submit" value="Update" />
          </div>
        </div>
      </form>
      <div id="description">
        <p>
<a class="ext-link" href="https://github.com/roskakori/tratihubis/blob/master/query_tickets.sql"><span class="icon">​</span>https://github.com/roskakori/tratihubis/blob/master/query_tickets.sql</a>
</p>

      </div>
      <div class="buttons">
      </div>
      <h2 class="report-result">
        Results <span class="numresults">(301 - 400 of 2647)</span>
      </h2>
      <div class="paging">
    <span class="previous">
      <a href="22%3Fsort=reporter&amp;asc=1&amp;page=3.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=1.html" title="Page 1">1</a>
      </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=2.html" title="Page 2">2</a>
      </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=3.html" title="Page 3">3</a>
      </span>
      <span>
        <span class="current">4</span>
      </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=5.html" title="Page 5">5</a>
      </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=6.html" title="Page 6">6</a>
      </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=7.html" title="Page 7">7</a>
      </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=8.html" title="Page 8">8</a>
      </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=9.html" title="Page 9">9</a>
      </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=10.html" title="Page 10">10</a>
      </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=11.html" title="Page 11">11</a>
      </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=12.html" title="Page 12">12</a>
      </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=13.html" title="Page 13">13</a>
      </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=14.html" title="Page 14">14</a>
      </span>
    <span class="next">
      <a href="22%3Fsort=reporter&amp;asc=1&amp;page=5.html" title="Next Page">→</a>
    </span>
</div>
      <table class="listing tickets">
          <thead>
        <tr class="trac-columns">
          <th>
            <a href="22%3Fsort=id&amp;asc=1&amp;page=4.html">
              Id
            </a>
          </th><th>
            <a href="22%3Fsort=type&amp;asc=1&amp;page=4.html">
              Type
            </a>
          </th><th>
            <a href="22%3Fsort=owner&amp;asc=1&amp;page=4.html">
              Owner
            </a>
          </th><th class="asc">
            <a href="22%3Fsort=reporter&amp;asc=0&amp;page=4.html">
              Reporter
            </a>
          </th><th>
            <a href="22%3Fsort=milestone&amp;asc=1&amp;page=4.html">
              Milestone
            </a>
          </th><th>
            <a href="22%3Fsort=status&amp;asc=1&amp;page=4.html">
              Status
            </a>
          </th><th>
            <a href="22%3Fsort=resolution&amp;asc=1&amp;page=4.html">
              Resolution
            </a>
          </th><th>
            <a href="22%3Fsort=summary&amp;asc=1&amp;page=4.html">
              Summary
            </a>
          </th><th>
            <a href="22%3Fsort=description&amp;asc=1&amp;page=4.html">
              Description
            </a>
          </th><th>
            <a href="22%3Fsort=PosixTime&amp;asc=1&amp;page=4.html">
              Posixtime
            </a>
          </th><th colspan="100">
            <a href="22%3Fsort=ModifiedTime&amp;asc=1&amp;page=4.html">
              Modifiedtime
            </a>
          </th>
        </tr>
          </thead>
          <tbody>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/216.html">#216</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">nickstenning
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/216.html">UI Review - Search</a>
                          </td>
                          <td class="description">
                            <ul><li>allow clicking on 'only openly licensed'/'only downloadable' to select/deselect checkboxes: make them &lt;label&gt;s.
</li><li>cut 'only's -- use word 'filter' instead
</li><li>doesn't appear to match substrings!? A search for 'anna' doesn't return match the 'annakarenina' package.
</li><li>autocomplete package names &amp; tags
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1260879802000000
                          </td>
                          <td class="ModifiedTime">1273596102000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/217.html">#217</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">nickstenning
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.11.html">v0.11</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/217.html">UI Review - Search results</a>
                          </td>
                          <td class="description">
                            <p>
Package search results page <a href="http://localhost/package/search?q=something">package/search</a>
</p>
<ul><li>need clearer delineation between search entry form and results.
</li><li>0 results needs to be clearer, and the alternative suggestion: 'would you like to create a new package' needs to not look like a search result.
</li><li>"N tags found" -- why do I care? this should be presented as "filter results by tag" -- very unlikely that I'm looking for a tag: I'm looking for a package, but tags might help me narrow down my search.
</li><li>tags should be displayed more like the way they're displayed when you add them to a package (i.e. blue 'tag' background)
</li><li>filter out particular tags
</li><li>tag cloud?
</li><li>copywriting: "Packages - Search" -&gt; "Search packages"
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1260879870000000
                          </td>
                          <td class="ModifiedTime">1263406092000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/218.html">#218</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">nickstenning
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.11.html">v0.11</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/218.html">UI Review - Package listing</a>
                          </td>
                          <td class="description">
                            <ul><li>openness/downloadability ticks/crosses are totally inscrutable to non-techies (those who don't know about the title attribute). need better icons, and a key in a box on RHS.
</li><li>maybe highlight two-tick entries with a particular colour, but the open knowledge badge is horrendous, and breaks visual cadence.
</li><li>results data should be tabulated, with the project names and descriptions made most prominent. &lt;li&gt; blobs are unnecessary visual noise.
</li><li>maybe links should go on the full titles? Get rid of package names.
</li><li>Should have filter by name (à la KForge alphanum widget) and also by tag: list of most common tags in box on RHS?
</li><li>same comments as search listing (<a class="closed ticket" href="../ticket/217.html" title="enhancement: UI Review - Search results (closed: fixed)">ticket:217</a>)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1260879903000000
                          </td>
                          <td class="ModifiedTime">1263406033000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/219.html">#219</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">nickstenning
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/219.html">UI Review - Package</a>
                          </td>
                          <td class="description">
                            <ul><li>Propose three-column package listing: two lists of highest-scorers on some metric and last column is an invitation to register a new package, with a little copy explaining what's involved and why you'd want to.
</li><li>Add in search widget
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1260879947000000
                          </td>
                          <td class="ModifiedTime">1294914901000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/220.html">#220</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">nickstenning
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.11.html">v0.11</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/220.html">UI Review - Package read</a>
                          </td>
                          <td class="description">
                            <p>
Package page <a href="http://localhost/package/mypackagename">package/mypackagename</a>
</p>
<ul><li>Design
<ul><li>In general: a huge amount of visual and typographic noise: "Package:" is redundant.
</li><li>"{edit}", "{history}" -- ugly, and it's not clear that these are primary actions on this page. Notably, why on earth is "make an enquiry with Is It Open?" bigger than these?
</li><li>Openness/downloadability icons: need help, as discussed earlier
</li><li>"Rating:" redundant, as is the second set of stars -- why can't both the display and rate widget
<ul><li>Rating - alternative to GET on set_rating.
</li></ul></li><li>"Metadata:" technospeak, probably redundant.
</li><li>&lt;li&gt; bullets add nothing.
</li><li>Title, Version, URL can probably go in one line.
</li><li>Resources can be made more prominent.
</li><li>Author, author email and Maintainer, maintainer email can be merged.
</li><li>Groups, tags in little boxes?
</li><li>Notes made more delineated -- Markdown has the capacity to look like other parts of the page: perhaps monospace the typeface?
</li><li>Don't show extras unless there are any.
</li></ul></li></ul>
                            
                          </td>
                          <td class="PosixTime">1260880136000000
                          </td>
                          <td class="ModifiedTime">1265286499000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/221.html">#221</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/221.html">UI Review - Package edit</a>
                          </td>
                          <td class="description">
                            <p>
Package edit page <a href="http://localhost/package/edit/mypackagename">package/edit/mypackagename</a>
</p>
<ul><li>Ability to add the package to groups on this page.
</li><li>Fields could be grouped.
</li><li>Inconsistent capitalisation (Url -&gt; URL).
</li><li>Tag editor YUI script appears to break occasionally.
</li><li>Perhaps move to two column forms to save vertical space?
</li><li>Notes field to monospace?
</li><li>Extras fields need some jQuery love -- shouldn't have a fixed number available.
</li><li>Typography is a bit of a mess.
</li></ul><p>
        
</p>

                            
                          </td>
                          <td class="PosixTime">1260880175000000
                          </td>
                          <td class="ModifiedTime">1271756757000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/222.html">#222</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">nickstenning
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/222.html">UI Review - Package history</a>
                          </td>
                          <td class="description">
                            <p>
Package history page <a href="http://localhost/package/history/mypackagename">package/history/mypackagename</a>
</p>
<ul><li>"Revisions" is redundant
</li><li>"Compare" button is in a ridiculous place. It should be above/below (both) the table, but not *in* it!
</li><li>Ditto to overall "Recent Changes" page comments w.r.t. timestamps, GUIDs (ellipsis), and (if poss) author links.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1260880198000000
                          </td>
                          <td class="ModifiedTime">1282909280000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/223.html">#223</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">nickstenning
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/223.html">UI Review - Tag</a>
                          </td>
                          <td class="description">
                            <p>
Tags landing page <a href="http://localhost/tag">tag</a>
</p>
<ul><li>Both search for tags *and* browse the list of tags right here
</li><li>Big cloud of tags (sorted by popularity/usage?) filterable with a search box.
</li><li>Tags search page <a href="http://localhost/tag/search">tag/search</a> and list <a href="http://localhost/tag/list">tag/list</a> are both redundant and should be merged straight into <a href="http://localhost/tag">tag</a>.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1260880276000000
                          </td>
                          <td class="ModifiedTime">1273596111000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/224.html">#224</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">nickstenning
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.11.html">v0.11</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/224.html">UI Review - Groups</a>
                          </td>
                          <td class="description">
                            <p>
Groups landing page <a href="http://localhost/group">group</a>
</p>
<ul><li>Yeesh! What's up with the typography for "Just login..."?
</li><li>Truncated description along with group name.
</li><li>Explanation text about what groups are for (RHS)
</li><li>Another case of &lt;li&gt; bullets adding nothing.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1260880360000000
                          </td>
                          <td class="ModifiedTime">1267100560000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/225.html">#225</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/225.html">UI Review - swap URL order</a>
                          </td>
                          <td class="description">
                            <p>
Not so keen on URLS such as /package/edit/mypackagename. These seem to be task-oriented rather than resource oriented (which would be /package/mypackagename/edit), and unstable: there is a common root for /package/edit/mypackage and /package/history/mypackage which is not reflected in the URL structure.
</p>

                            
                          </td>
                          <td class="PosixTime">1260880487000000
                          </td>
                          <td class="ModifiedTime">1311178276000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/226.html">#226</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">nickstenning
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.1.html">v1.1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/226.html">UI Review - History</a>
                          </td>
                          <td class="description">
                            <p>
Repository History <a href="http://localhost/revision">revision</a>
</p>
<ul><li>What is this page called? "Recent Changes", "Repository History", "/revision": standardise. Between the link in the nav and the page &lt;title&gt; particularly, but the route is also important. Perhaps /changes or something similar?
<ul><li>Will change page title on /revision/ to Revision History. Will not change route for the time being.
</li></ul></li><li><del>needs copyediting.</del>
</li><li><del>Pagination has similar issues to elsewhere. Also, most obvious here, is the fact that we don't need to display a link to every possible page. Please can we limit it to, say, a dozen nearby pages and an ellipsis.</del>
</li><li><del>Without looking at dates, its not clear whether I'm seeing most recent or oldest changes. Change pagination to say "Older"/"More recent" rather than "Previous"/"Next".</del> (wontfix: now have text saying we are showing most recent changes)
</li><li>Table layout is pretty ugly (yes, I'm aware this is my fault).
<ul><li>wontfix - nothing better at the moment
</li></ul></li><li>Timestamps are horribly unreadable. At the absolute minimum get rid of the micros. Hover for more detail? 
</li><li>Can we link to an author page? Yes!
</li><li><del>Atom feed should have a feed icon~~
</del></li><li>Why are we adding another &lt;link rel="alternate"&gt; to this page? We already have one for recent changes on every page in the site and the one we're adding has a less descriptive title. Which is correct? Use that one as a feed for every page.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1260880515000000
                          </td>
                          <td class="ModifiedTime">1279130390000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/227.html">#227</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">nickstenning
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.1.html">v1.1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/227.html">UI Review - General checks</a>
                          </td>
                          <td class="description">
                            <ul><li>There is huge inconsistency in the titles of pages across the site: to give one example "Edit Package:&#34; vs &#34;Package: mypkg [not linked]" vs "History - mypkg [linked to package page]"
<ul><li>Normalize and use terminology: "Data Package" - also change in navbar (but nowhere else for the time being). So hvae Data Package - mypkg, Data Package - mypkg - Edit etc
</li></ul></li><li>pagination is currently lost in amongst the results list. needs to be *much* more obvious, and should appear top and bottom, or at the very least at the bottom!
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1260880552000000
                          </td>
                          <td class="ModifiedTime">1279192621000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/229.html">#229</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v0.11.html">v0.11</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/229.html">Resource hashes</a>
                          </td>
                          <td class="description">
                            <p>
New field for resources - hash of the resource file.
</p>
<ul><li>CKAN itself will not calculate the hash value - user just pastes it in.
</li><li>Display text field in resource table.
</li><li>Requires migration script.
</li></ul><p>
Questions for the field's value:
</p>
<ol><li>Which hash to use? Restrict to python hashlib and other major hash libraries.
</li></ol><ol start="2"><li>Should we use merkle trees?
</li></ol><p>
Thanks to Julien D'Assanges for the suggestion.
</p>

                            
                          </td>
                          <td class="PosixTime">1262686287000000
                          </td>
                          <td class="ModifiedTime">1265891612000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/230.html">#230</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/230.html">Refactor 'package preview' to use 'package read'</a>
                          </td>
                          <td class="description">
                            <ul><li>Requires Package Read to not use the side-bar
</li><li>Need to sync params to a package object that is taken out of the session so that it doesn't go into the database.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1262788084000000
                          </td>
                          <td class="ModifiedTime">1265293953000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/235.html">#235</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">tobes
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.9.html">ckan-v1.9</a>
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/235.html">Resource format normalization and detection</a>
                          </td>
                          <td class="description">
                            <p>
Try to gather proper MIME  information for all package resources in CKAN. This is a shared ticket with dcat-tools (<a class="ext-link" href="https://bitbucket.org/pudo/dcat-tools"><span class="icon">​</span>https://bitbucket.org/pudo/dcat-tools</a>), i.e. opendatasearch.org. This can then also be used by ckanrdf, the CKAN RDF conversion service. 
</p>
<p>
Sub-tasks: 
</p>
<ul><li>Create a Google Spreadsheet with two Worksheets: "MIME-Mappings", i.e. "CSV" -&gt; "text/csv" and "Name mappings", i.e. "text/csv" -&gt; "Comma-Separated Spreadsheet". 
</li><li>Collect and map surface forms from all CKANs
</li><li>Access this via Swiss and apply, store as a <a class="missing wiki">PackageResource?</a> extra field pending <a class="closed ticket" href="../ticket/826.html" title="enhancement: Resource 'extra' fields (closed: fixed)">#826</a> (Resource extras). 
</li><li>Add heuristics for format auto-detections: 
<ul><li>Map well-known file extensions 
</li><li>Recognize obvious magic (Zip, Tar)
</li><li>Peek into <a class="missing wiki">Zipfile/Tarfiles?</a>
</li></ul></li><li>Define a convention for generic data types (many CKAN packages have only "Spreadsheet" defined, either detect specific type or set MIME to */tabular-data or similar)
</li><li>See also: <a class="closed ticket" href="../ticket/816.html" title="enhancement: Autocomplete for the resource format field (closed: fixed)">#816</a> (Autocomplete for the resource format field)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1263827604000000
                          </td>
                          <td class="ModifiedTime">1340627624000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/239.html">#239</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/239.html">Test migrate scripts</a>
                          </td>
                          <td class="description">
                            <p>
Integrate new test upgrade into testmigrate stuff. 
</p>
<p>
New "migrate.ini" config file programmed with the db to be used for migrate tests and a param saying where the db dump is.
</p>

                            
                          </td>
                          <td class="PosixTime">1264439926000000
                          </td>
                          <td class="ModifiedTime">1265286521000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/241.html">#241</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/241.html">License doesn't preview correctly</a>
                          </td>
                          <td class="description">
                            <p>
4 failing tests, including 2 in misc/package_saver and 2 in functional/test_package.
</p>

                            
                          </td>
                          <td class="PosixTime">1265625546000000
                          </td>
                          <td class="ModifiedTime">1270569769000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/243.html">#243</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">worksforme
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/243.html">Repetition of number of packages in a group</a>
                          </td>
                          <td class="description">
                            <p>
<a class="ext-link" href="http://ckan.net/group/publicdomain"><span class="icon">​</span>http://ckan.net/group/publicdomain</a> has:
</p>
<p>
"There is 16 package in this group.
There are 16 packages in this group."
</p>

                            
                          </td>
                          <td class="PosixTime">1265750250000000
                          </td>
                          <td class="ModifiedTime">1266837796000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/244.html">#244</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/244.html">Several links preceded by link URL</a>
                          </td>
                          <td class="description">
                            <p>
e.g. Text on ckan.net home page:
</p>
<p>
"All material available under an /licenseopen license"
</p>
<p>
Also seen on the package edit page:
"/user/loginClick here to sign in"
</p>
<p>
I believe this is due to the i18n additions from Benoit. Maybe needs new Genshi. Maybe best to work round in the meantime.
</p>

                            
                          </td>
                          <td class="PosixTime">1265750419000000
                          </td>
                          <td class="ModifiedTime">1271248968000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/249.html">#249</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/249.html">Regex search</a>
                          </td>
                          <td class="description">
                            <p>
Search of package name and title (and other fields) using regular expressions.
</p>
<p>
Current example use-case: Wanting to specify packages with title beginning with 'B'.
</p>
<p>
Issues:
</p>
<ul><li>Syntax for specifying regex over natural language search - could it be contained in the q param so be available to users of the WUI, or do we simply make it alternative fields?
</li></ul><p>
Implementation:
</p>
<ul><li>Postgres reg ex searching detailed here:
</li></ul><p>
<a class="ext-link" href="http://www.postgresql.org/docs/current/static/functions-matching.html#FUNCTIONS-POSIX-TABLE"><span class="icon">​</span>http://www.postgresql.org/docs/current/static/functions-matching.html#FUNCTIONS-POSIX-TABLE</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1265994509000000
                          </td>
                          <td class="ModifiedTime">1311182450000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/250.html">#250</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">icmurray
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.9.html">ckan-v1.9</a>
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/250.html">RDF link in Atom feed</a>
                          </td>
                          <td class="description">
                            <p>
Add link to RDF representation of a package in our Atom feed.
</p>

                            
                          </td>
                          <td class="PosixTime">1266507695000000
                          </td>
                          <td class="ModifiedTime">1340631430000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/253.html">#253</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/253.html">Package relationships</a>
                          </td>
                          <td class="description">
                            <h1 id="Overview">Overview</h1>
<p>
Functionality to formally associate packages. We see a need for specific parent-child, inheriting or dependency relations. Not only should this help navigation between packages in the web interface, but it also provides a mechanism to automatically pull dependencies when downloading a data package, in a similar manner as we see in software package management.
</p>
<h1 id="Examples">Examples</h1>
<ol><li>There are 27 packages in data.gov.uk to do with the Data4NR's Health Poverty Index. There is currently no common link between these, unless you search for 'HPI' (which also brings up House Price Index), or look under tag 'health' (which also has 600 other results). There should be a link on each HPI package page to navigate to the other 'sibling' HPI packages, and to a 'root' package that has info about the set. This could be partially achieved using the existing tag or group concepts, but a more explicit/official/obvious marking of their relationship could be beneficial.
</li></ol><ol start="2"><li>In ckan.net is freedict, a collection of translation dictionaries. You could make each dictionary a child package and use this system. But it would probably be better to make each dictionary a different resource in the same package. (There are other ideas to denote a resource as the data making up a 'portion' of package, or a 'whole' of the package, to help people downloading datasets in the software package style.)
</li></ol><ol start="3"><li>OSM has had some Naptan data imported (bus stops), with special permission - i.e. a more liberal license. It would be useful to show this link on both OSM and Naptan packages in CKAN: OSM 'derives from' Naptan with a comment about the license change. I'm not sure this is useful to an automatic download or use of these datasets, but may aid exploration on the CKAN website and understanding the provenance of the bus stop data on it.
</li></ol><ol start="4"><li>IPCC collection of data linked / mirrored. Not sure if there are useful relationships here?
</li></ol><ol start="5"><li>Dracos gets postbox locations from crowd sourcing and OSM. We could say Dracos 'derives from' OSM.
</li></ol><p>
See more examples discussed here: <a class="ext-link" href="http://trac.ckan.org/ticket/253"><span class="icon">​</span>http://trac.ckan.org/ticket/253</a>
</p>
<h1 id="Implementation">Implementation</h1>
<p>
This is split into four tickets:
</p>
<ul><li>Model: <a class="closed ticket" href="../ticket/254.html" title="enhancement: Package relationships - 1. model (closed: fixed)">ticket:254</a>
</li><li>Read in WUI: <a class="closed ticket" href="../ticket/255.html" title="enhancement: Package relationships - 2. Read in WUI (closed: fixed)">ticket:255</a>
</li><li>Edit in WUI: <a class="assigned ticket" href="../ticket/256.html" title="requirement: Package relationships - 3. Edit in WUI (assigned)">ticket:256</a>
</li><li>API: <a class="closed ticket" href="../ticket/257.html" title="enhancement: Package relationships - 4. Read in API (closed: fixed)">ticket:257</a>
</li></ul><p>
No need for write access to be provided API for the moment.
</p>
<p>
This ticket also encompasses <a class="closed ticket" href="../ticket/169.html" title="enhancement: Package derivations (closed: duplicate)">ticket:169</a> (Package derivations) and <a class="closed ticket" href="../ticket/176.html" title="enhancement: Package dependencies (closed: duplicate)">ticket:176</a> (Package dependencies).
</p>

                            
                          </td>
                          <td class="PosixTime">1266854721000000
                          </td>
                          <td class="ModifiedTime">1339774726000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/254.html">#254</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/254.html">Package relationships - 1. model</a>
                          </td>
                          <td class="description">
                            <p>
New domain object: <a class="missing wiki">PackageRelationship?</a> (revisioned)
</p>
<p>
Attributes:
</p>
<ul><li>subject (Package reference)
</li><li>object (Package reference)
</li><li>type (string)
</li><li>comment
</li></ul><p>
Relationship type values:
depends_on (dependency_of)
derives_from (has_derivation)
child_of (parent_of)
</p>
<p>
Relationship type is stored as a string, as given in the first column. The reverse relationship (bracketed) is given just for display purposes only.
</p>
<p>
Subject / Object - as in a sentence: "Dracos is derived from OSM" is &lt;subject&gt; &lt;predicate&gt; &lt;object&gt;. We'll use 'type' instead of 'predicate' as that is a more familiar word.
</p>

                            
                          </td>
                          <td class="PosixTime">1266928449000000
                          </td>
                          <td class="ModifiedTime">1273596180000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/255.html">#255</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/255.html">Package relationships - 2. Read in WUI</a>
                          </td>
                          <td class="description">
                            <p>
WUI:
</p>
<ul><li>View: show both sides of the relationship (but think carefully -- e.g. a given package may have *many* dependents ...)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1266928542000000
                          </td>
                          <td class="ModifiedTime">1273596174000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/256.html">#256</a>
                          </td>
                          <td class="type">requirement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/256.html">Package relationships - 3. Edit in WUI</a>
                          </td>
                          <td class="description">
                            <p>
WUI:
</p>
<ul><li>Editable as part of package or separately? (e.g. like authz)
</li><li>Do we normalize to only one type name of the pair?
</li><li>Do we allow create of relationship from both ends (e.g. only from dependency to dependent or either way?)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1266928561000000
                          </td>
                          <td class="ModifiedTime">1339774714000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/257.html">#257</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/257.html">Package relationships - 4. Read in API</a>
                          </td>
                          <td class="description">
                            <p>
API:
</p>
<ul><li>Appear in package listing Example: 'relationships': [{'is_dependency_of':'osm', comments:'Since version 0.2'}, {'is_parent_of':'bobs_maps'}]
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1266928630000000
                          </td>
                          <td class="ModifiedTime">1273596170000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/258.html">#258</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/258.html">Add uuids into package in REST</a>
                          </td>
                          <td class="description">
                            <p>
Add uuids into package in REST interface.
</p>

                            
                          </td>
                          <td class="PosixTime">1266954722000000
                          </td>
                          <td class="ModifiedTime">1273596163000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/259.html">#259</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/259.html">isitopen enquiry broken</a>
                          </td>
                          <td class="description">
                            <p>
Pressing the 'make an enquiry' link on the package read page gives 404. (Also links should also be changed from isitopen.ckan.net to isitopendata.org)
</p>
<p>
Example link is: 
</p>
<p>
<a class="ext-link" href="http://isitopen.ckan.net/enquiry/create/?ckan_package=zeno"><span class="icon">​</span>http://isitopen.ckan.net/enquiry/create/?ckan_package=zeno</a>
</p>
<p>
which gets forwarded to:
</p>
<p>
<a class="ext-link" href="http://www.isitopendata.org/enquiry/create/?ckan_package=zeno"><span class="icon">​</span>http://www.isitopendata.org/enquiry/create/?ckan_package=zeno</a> 
</p>
<p>
which gives 404
</p>

                            
                          </td>
                          <td class="PosixTime">1267012666000000
                          </td>
                          <td class="ModifiedTime">1273596153000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/265.html">#265</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/265.html">More detail shown in Atom feed</a>
                          </td>
                          <td class="description">
                            <h2 id="Usecase">Use case</h2>
<p>
As a user I want to stay abreast of package changes, such as a new package being created, newer data is available for a package or a new download is available for a package.
</p>
<h2 id="Implementation">Implementation</h2>
<p>
Add into the Atom feed:
</p>
<ol><li>a package is a new one
</li><li>the resources have been changed
</li><li>the last_updated field has been changed
</li></ol>
                            
                          </td>
                          <td class="PosixTime">1267708364000000
                          </td>
                          <td class="ModifiedTime">1271636891000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/266.html">#266</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/266.html">Package feed</a>
                          </td>
                          <td class="description">
                            <p>
As a user I want to track changes to a particular package.
</p>
<p>
Provide an Atom feed, linked from the package read page.
</p>

                            
                          </td>
                          <td class="PosixTime">1267716417000000
                          </td>
                          <td class="ModifiedTime">1271636901000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/268.html">#268</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/268.html">Select groups in Package edit form</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1268068896000000
                          </td>
                          <td class="ModifiedTime">1285070682000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/269.html">#269</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/269.html">Improve gov package form</a>
                          </td>
                          <td class="description">
                            <p>
If the notes field could use a WYSIWYG editor with word cleanup this would really help users who may well be pasting in text from Word (and I guess may have been approved or written by someone else)
</p>
<p>
having auto-complete on tags would both make the system easier to use - and reduce the risk of synonymous tags being created inadvertently.
</p>
<p>
Does the department drop down options list interact with user permissions - so that users who only have rights to one department only see that option ?
</p>
<p>
Similarly for licenses - can this reduce to the set of allowed options for this user/
</p>
<p>
What level of validation is there on the fields?
</p>

                            
                          </td>
                          <td class="PosixTime">1268220853000000
                          </td>
                          <td class="ModifiedTime">1291897538000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/277.html">#277</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">zephod
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/277.html">Set some config options / settings in WUI (extension)</a>
                          </td>
                          <td class="description">
                            <h2 id="Usecase">Use case</h2>
<p>
As a ckan administrator I want to easily change options about the CKAN install.
</p>
<h2 id="Implementation">Implementation</h2>
<h3 id="SettingstobeinDB">Settings to be in DB</h3>
<p>
Suggested:
</p>
<pre class="wiki">## Title of site (using in several places including templates and &lt;title&gt; tag
ckan.site_title = CKAN

## Logo image to use (replaces site_title string on front page if defined)
ckan.site_logo = http://assets.okfn.org/p/ckan/img/ckan_logo_box.png

## Site tagline / description (used on front page)
ckan.site_description = 

## Used in creating some absolute urls (such as rss feeds, css files) and 
## dump filenames
ckan.site_url =

## Favicon (default is the CKAN software favicon)
ckan.favicon = http://assets.okfn.org/p/ckan/img/ckan.ico


## An 'id' for the site (using, for example, when creating entries in a common search index) 
## If not specified derived from the site_url
# ckan.site_id = ckan.net

## API url to use (e.g. in AJAX callbacks)
## Enable if the API is at a different domain
# ckan.api_url = http://www.ckan.net

## html content to be inserted just before &lt;/body&gt; tag (e.g. google analytics code)
## NB: can use html e.g. &lt;strong&gt;blah&lt;/strong&gt;
## NB: can have multiline strings just indent following lines
# ckan.template_footer_end = 
</pre><p>
NB: these will still need to be stored somewhere for loading on initialization. do this in db init function ...
</p>
<h3 id="SettingsOptionsKeyValuesTable">Settings / Options / <a class="missing wiki">KeyValues?</a> Table</h3>
<p>
Columns:
</p>
<ul><li>[namespace]: ? only if <a class="missing wiki">KeyValues?</a> (for settings this would then always be settings)
</li><li>key
</li><li>label
</li><li>value (json)
</li><li>type (e.g. date and to specify in advance what type should be)
</li><li>description
</li><li>tags: ?? (for grouping ...)
</li></ul><h3 id="LoadingsettingsfromDB">Loading settings from DB</h3>
<p>
Do this in ckan/config/environment.py
</p>
<h3 id="WUI">WUI</h3>
<ul><li>/ckan-admin/settings
</li><li>Show label, plus description plus text field
</li></ul><h2 id="Depends">Depends</h2>
<ul><li>Would be part of ckan-admin section and hence build on <a class="closed ticket" href="../ticket/833.html" title="enhancement: [super] Administrative dashboard extension (closed: fixed)">ticket:833</a> (Administrative dashboard)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1269274861000000
                          </td>
                          <td class="ModifiedTime">1318247121000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/278.html">#278</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/278.html">Spaces in extra field keys</a>
                          </td>
                          <td class="description">
                            <p>
If the key to an extra field has a space in it then various form code doesn't work. Either need to disallow spaces or cope with them.
</p>

                            
                          </td>
                          <td class="PosixTime">1269520845000000
                          </td>
                          <td class="ModifiedTime">1271173752000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/279.html">#279</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/279.html">Ensure package's license is an option when it's edited</a>
                          </td>
                          <td class="description">
                            <p>
With forms configurable to show a subset of licenses and ckan instances moving packages from server to server, there is a chance that a user will edit a package and the existing package's license is not displayed in the form. If the user submits this form without touching the license dropdown, then the value is lost. 
</p>
<p>
So for this case we should add the package's license to the list displayed.
</p>

                            
                          </td>
                          <td class="PosixTime">1270205931000000
                          </td>
                          <td class="ModifiedTime">1272451384000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/280.html">#280</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/280.html">Disappearing extra fields</a>
                          </td>
                          <td class="description">
                            <p>
When I edit a package on no.ckan.net with lots of extra fields, lots of them completely disappear.
</p>
<p>
Metastable branch.
</p>

                            
                          </td>
                          <td class="PosixTime">1270209684000000
                          </td>
                          <td class="ModifiedTime">1271173769000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/281.html">#281</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/281.html">Refactor forms to be plugin-able</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1270542248000000
                          </td>
                          <td class="ModifiedTime">1270723675000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/282.html">#282</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">thejimmyg
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/282.html">Provide diverts when package name changes</a>
                          </td>
                          <td class="description">
                            <p>
When a package's name is changed, references to the old name (in the WUI and REST) are redirected to the new name (assuming the old name is not being reused by another package).
</p>

                            
                          </td>
                          <td class="PosixTime">1270659003000000
                          </td>
                          <td class="ModifiedTime">1338206417000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/283.html">#283</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/283.html">Manage deletions of unwanted packages</a>
                          </td>
                          <td class="description">
                            <h2 id="Usecase">Use case</h2>
<p>
As a user I want to notify the CKAN admins of a spammed or unsuitable package for deletion.
</p>
<h2 id="Suggestedsolution">Suggested solution</h2>
<p>
In the package view side-bar, there is a note: "To have this package completely removed, contact the [ca.ckan.net administrators admin@…]."
</p>
<h2 id="Othersolutions">Other solutions</h2>
<p>
A more complicated solution would be to allow packages to be tagged for deletion, which would auto-alert administrators, and allow easier administration of this. But this might be overkill. 
</p>
<p>
c.f. <a class="ext-link" href="http://en.wikipedia.org/wiki/Deleting_an_article"><span class="icon">​</span>http://en.wikipedia.org/wiki/Deleting_an_article</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1270660210000000
                          </td>
                          <td class="ModifiedTime">1311325526000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/286.html">#286</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/286.html">Refactor forms templates</a>
                          </td>
                          <td class="description">
                            <p>
Use Nick's examples as a basis to revamp the formalchemy usage, principally in the package edit form.
</p>
<ul><li><a class="ext-link" href="http://static.whiteink.com/css/examples/forms.html"><span class="icon">​</span>http://static.whiteink.com/css/examples/forms.html</a>
</li><li><a class="ext-link" href="http://whiteink.com/temp/ckan-forms/"><span class="icon">​</span>http://whiteink.com/temp/ckan-forms/</a>
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1270723513000000
                          </td>
                          <td class="ModifiedTime">1270723629000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/287.html">#287</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/287.html">Customise Canadian package edit form</a>
                          </td>
                          <td class="description">
                            <p>
Spec - see attached, which is a copy of the Pirate Pad from Lauren: 
<a class="ext-link" href="http://piratepad.net/2C2iwiLDhd"><span class="icon">​</span>http://piratepad.net/2C2iwiLDhd</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1270801086000000
                          </td>
                          <td class="ModifiedTime">1270801210000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/288.html">#288</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/288.html">Foreign and escaped characters in extras fields</a>
                          </td>
                          <td class="description">
                            <p>
These don't work.
</p>

                            
                          </td>
                          <td class="PosixTime">1271171899000000
                          </td>
                          <td class="ModifiedTime">1271173777000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/289.html">#289</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/289.html">Document config options</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1271248690000000
                          </td>
                          <td class="ModifiedTime">1271249368000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/290.html">#290</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/290.html">Revision API - docs</a>
                          </td>
                          <td class="description">
                            <p>
doc/api.rst needs to cover the new Revision REST interface.
</p>

                            
                          </td>
                          <td class="PosixTime">1271268759000000
                          </td>
                          <td class="ModifiedTime">1271636910000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/291.html">#291</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">worksforme
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/291.html">Investigate search options encoding</a>
                          </td>
                          <td class="description">
                            <p>
On ckan.net there is this unchecked-in 'temporary hack'. It seems to be to do with foreign characters in search options. See what its doing and if necessary, put check it in.
</p>
<pre class="wiki">diff -r 813ad8b5de0b ckan/lib/search.py
--- a/ckan/lib/search.py	Mon Mar 01 22:23:36 2010 +0100
+++ b/ckan/lib/search.py	Thu Apr 15 19:11:42 2010 +0200
@@ -63,6 +63,9 @@
     def query(self, options):
         '''For the given search options, returns a query object.'''
         self._options = options
+        # temporary hack!
+        if self._options.q:
+            self._options.q = self._options.q.encode('utf8')
         general_terms, field_specific_terms = self._parse_query_string()
 
         if not general_terms and \

</pre>
                            
                          </td>
                          <td class="PosixTime">1271351670000000
                          </td>
                          <td class="ModifiedTime">1273254895000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/292.html">#292</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/292.html">PackageResources are created new on every package edit</a>
                          </td>
                          <td class="description">
                            <p>
When you edit a package, all of its resources are deleted and a fresh set created. This causes all history of them to be lost.
</p>

                            
                          </td>
                          <td class="PosixTime">1271755964000000
                          </td>
                          <td class="ModifiedTime">1272286005000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/293.html">#293</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/293.html">REST PackageResource update causes exception</a>
                          </td>
                          <td class="description">
                            <p>
This is caused by editing a package with resources over the REST interface.
</p>
<p>
Exception:
</p>
<pre class="wiki">URL: http://de.ckan.net/api/rest/package/destatis
Module weberror.errormiddleware:162 in __call__
&lt;&lt;              __traceback_supplement__ = Supplement, self, environ
                   sr_checker = ResponseStartChecker(start_response)
                   app_iter = self.application(environ, sr_checker)
                   return self.make_catching_iter(app_iter, environ, sr_checker)
               except:
&gt;&gt;  app_iter = self.application(environ, sr_checker)
Module repoze.who.middleware:107 in __call__
&lt;&lt;          wrapper = StartResponseWrapper(start_response)
               app_iter = app(environ, wrapper.wrap_start_response)
       
               # The challenge decider almost(?) always needs information from the
&gt;&gt;  app_iter = app(environ, wrapper.wrap_start_response)
Module beaker.middleware:73 in __call__
&lt;&lt;                                                     self.cache_manager)
               environ[self.environ_key] = self.cache_manager
               return self.app(environ, start_response)
&gt;&gt;  return self.app(environ, start_response)
Module beaker.middleware:152 in __call__
&lt;&lt;                          headers.append(('Set-cookie', cookie))
                   return start_response(status, headers, exc_info)
               return self.wrap_app(environ, session_start_response)
           
           def _get_session(self):
&gt;&gt;  return self.wrap_app(environ, session_start_response)
Module routes.middleware:130 in __call__
&lt;&lt;                  environ['SCRIPT_NAME'] = environ['SCRIPT_NAME'][:-1]
               
               response = self.app(environ, start_response)
               
               # Wrapped in try as in rare cases the attribute will be gone already
&gt;&gt;  response = self.app(environ, start_response)
Module pylons.wsgiapp:125 in __call__
&lt;&lt;          
               controller = self.resolve(environ, start_response)
               response = self.dispatch(controller, environ, start_response)
               
               if 'paste.testing_variables' in environ and hasattr(response,
&gt;&gt;  response = self.dispatch(controller, environ, start_response)
Module pylons.wsgiapp:324 in dispatch
&lt;&lt;          if log_debug:
                   log.debug("Calling controller class with WSGI interface")
               return controller(environ, start_response)
           
           def load_test_env(self, environ):
&gt;&gt;  return controller(environ, start_response)
Module ckan.lib.base:51 in __call__
&lt;&lt;          # available in environ['pylons.routes_dict']
               try:
                   return WSGIController.__call__(self, environ, start_response)
               finally:
                   model.Session.remove()
&gt;&gt;  return WSGIController.__call__(self, environ, start_response)
Module pylons.controllers.core:221 in __call__
&lt;&lt;                  return response(environ, self.start_response)
               
               response = self._dispatch_call()
               if not start_response_called:
                   self.start_response = start_response
&gt;&gt;  response = self._dispatch_call()
Module pylons.controllers.core:172 in _dispatch_call
&lt;&lt;              req.environ['pylons.action_method'] = func
                   
                   response = self._inspect_call(func)
               else:
                   if log_debug:
&gt;&gt;  response = self._inspect_call(func)
Module pylons.controllers.core:107 in _inspect_call
&lt;&lt;                        func.__name__, args)
               try:
                   result = self._perform_call(func, args)
               except HTTPException, httpe:
                   if log_debug:
&gt;&gt;  result = self._perform_call(func, args)
Module pylons.controllers.core:60 in _perform_call
&lt;&lt;          """Hide the traceback for everything above this method"""
               __traceback_hide__ = 'before_and_this'
               return func(**args)
           
           def _inspect_call(self, func):
&gt;&gt;  return func(**args)
Module ckan.controllers.rest:145 in update
&lt;&lt;                  fs = ckan.forms.group_fs_combined
                   fs = fs.bind(entity, data=request_fa_dict)
                   validation = fs.validate_on_edit(entity.name, entity.id)
                   if not validation:
                       response.status_int = 409
&gt;&gt;  validation = fs.validate_on_edit(entity.name, entity.id)
Module ckan.forms.package:385 in validate_on_edit
&lt;&lt;              temp_name = orig_pkg_name
                   self.data['Package-%s-name' % record_id] = u'something_unique'
               validation = self.validate()
               if temp_name:
                   # restore it
&gt;&gt;  validation = self.validate()
Module formalchemy.forms:175 in validate
&lt;&lt;          if self.readonly:
                   raise Exception('Cannot validate a read-only FieldSet')
               return AbstractFieldSet.validate(self)
       
           def sync(self):
&gt;&gt;  return AbstractFieldSet.validate(self)
Module formalchemy.forms:104 in validate
&lt;&lt;          success = True
               for field in self.render_fields.itervalues():
                   success = field._validate() and success
               # run this _after_ the field validators, since each field validator
               # resets its error list. we want to allow the global validator to add
&gt;&gt;  success = field._validate() and success
Module formalchemy.fields:763 in _validate
&lt;&lt;          try:
                   value = self._deserialize()
               except validators.ValidationError, e:
                   self.errors.append(e)
&gt;&gt;  value = self._deserialize()
Module formalchemy.fields:1354 in _deserialize
&lt;&lt;          if self.is_composite_foreign_key:
                   return self.query(self.relation_type()).get(python_pk(self.renderer.deserialize()))
               return self.renderer.deserialize()
&gt;&gt;  return self.renderer.deserialize()
Module formalchemy.fields:183 in deserialize
&lt;&lt;          if self.field.is_collection:
                   return [self._deserialize(subdata) for subdata in self._serialized_value()]
               return self._deserialize(self._serialized_value())
       
           def _deserialize(self, data):
&gt;&gt;  return self._deserialize(self._serialized_value())
Module formalchemy.fields:167 in _serialized_value
&lt;&lt;          if self.field.is_collection:
                   return self._params.getall(self.name)
               return self._params.getone(self.name)
       
           def deserialize(self):
&gt;&gt;  return self._params.getone(self.name)
Module formalchemy.base:63 in getone
&lt;&lt;          if v is None or isinstance(v, basestring) or isinstance(v, cgi.FieldStorage):
                   return v
               return v[0]
           def getall(self, key):
               v = dict.get(self, key)
&gt;&gt;  return v[0]
TypeError: 'int' object is unsubscriptable
</pre><p>
Thanks to Friedrich for spotting this.
</p>

                            
                          </td>
                          <td class="PosixTime">1271756102000000
                          </td>
                          <td class="ModifiedTime">1271940083000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/294.html">#294</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">thejimmyg
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/294.html">Add/remove extra fields in Package edit form</a>
                          </td>
                          <td class="description">
                            <p>
Currently the package form gives you 3 fields for extras. To get more you have to hit preview. This is obscure. It would be better to have some buttons to add/remove fields, just like with the resources.
</p>

                            
                          </td>
                          <td class="PosixTime">1271756591000000
                          </td>
                          <td class="ModifiedTime">1291830960000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/295.html">#295</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/295.html">Add multiple packages when editing a group</a>
                          </td>
                          <td class="description">
                            <p>
In Group edit page, you can only add one package at a time. It would be better to use some scripting to allow adding more than one at once, to make it easier and quicker when you have a long list to add.
</p>
<p>
Ticket is split off from <a class="closed ticket" href="../ticket/221.html" title="enhancement: UI Review - Package edit (closed: fixed)">ticket:221</a>
</p>
<p>
See also <a class="closed ticket" href="../ticket/155.html" title="enhancement: Adding multiple packages to a group (closed: duplicate)">ticket:155</a> (duplicate).
</p>

                            
                          </td>
                          <td class="PosixTime">1271756713000000
                          </td>
                          <td class="ModifiedTime">1272384758000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/300.html">#300</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/300.html">Resource ordering issue</a>
                          </td>
                          <td class="description">
                            <p>
Failing test: ckan.tests.models.test_resource.<a class="missing wiki">TestResourceLifecycle?</a>.test_03_reorder_resources
</p>
<p>
Not clear how visible this is to the user.
</p>
<p>
Related to <a class="closed ticket" href="../ticket/292.html" title="defect: PackageResources are created new on every package edit (closed: fixed)">ticket:292</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1272285994000000
                          </td>
                          <td class="ModifiedTime">1272384474000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/302.html">#302</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/302.html">Advertise a package's feed visually</a>
                          </td>
                          <td class="description">
                            <p>
Visual display of a package's feed in the Package Read (/package/xyz) and Package History (/package/history/xyz) pages.
</p>
<p>
Motivation: each package's Atom feed is mentioned in the &lt;link rel="alternate" type="application/atom+xml" ...&gt; tag, which Firefox displays with a feed icon, but the other 3/4 of users may not discover it.
</p>
<p>
The Repo History (/revision) page has a visual link the feed.
</p>
<p>
PS It would be nice to display the feed icon in both these places too.
</p>

                            
                          </td>
                          <td class="PosixTime">1272370397000000
                          </td>
                          <td class="ModifiedTime">1272453821000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/303.html">#303</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.0.html">v1.0</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/303.html">Package history &amp; diff &amp; feed to show changes to tags, extras and resources</a>
                          </td>
                          <td class="description">
                            <p>
Currently a package's history page (/package/history/xyz) and related feed only shows changes to the core package i.e. ones which create a <a class="missing wiki">PackageResource?</a>. This doesn't include changes to tags, extras and resources. These need to be added.
</p>
<p>
There is the complication that the 'diff' function doesn't currently work beyond <a class="missing wiki">PackageResource?</a>. Unless this is quick and simple to fix, I suggest we let the diff remain slightly broken for now.
</p>
<p>
Rufus suggests alongside the existing methods:
</p>
<pre class="wiki">pkg.all_revisions()
pkg.diff()
</pre><p>
we have ones which also include the related objects (tags, extras, resources):
</p>
<pre class="wiki">pkg.all_revisions_full()
pkg.diff_full()
</pre><p>
You could have a function which returned these related objects. Ideas:
</p>
<pre class="wiki">revobjlist = [ self, resources, extras ]
list of tuples: (revobj, changed_revobjs)
list of tuples: (revobj, {objtype: [changed_revobjs]})
tuple: (rev1, {Package: [ object_id, object_id], PackageTag: [object_id, object_id2] ...}
</pre>
                            
                          </td>
                          <td class="PosixTime">1272370659000000
                          </td>
                          <td class="ModifiedTime">1272989728000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/309.html">#309</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/309.html">Tag list shows unused tags</a>
                          </td>
                          <td class="description">
                            <p>
Deleted tags are visible on the /tag page and are searchable.
</p>
<p>
Delete tags are ones that were in use once and then discarded, so this includes ones which are not used on any packages any more, including misspelling, mistakes, and deprecated tags. It would makes sense to remove them.
</p>
<p>
Example tag that is viewed at /tag and searchable:
<a class="ext-link" href="http://ckan.net/tag/2rand[0"><span class="icon">​</span>http://ckan.net/tag/2rand[0</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1273247648000000
                          </td>
                          <td class="ModifiedTime">1280743432000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/312.html">#312</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/312.html">Race condition creating PackageRating</a>
                          </td>
                          <td class="description">
                            <p>
On ckan.net there are a few packages which cause a 403 exception when you try to rate them:
<a class="ext-link" href="http://www.ckan.net/package/rate/coins-data?rating=3"><span class="icon">​</span>http://www.ckan.net/package/rate/coins-data?rating=3</a>
</p>
<p>
The exception is occuring here:
ckan.rating:39 in set_rating
rating_obj = rating_query.one()
<a class="missing wiki">InvalidRequestError?</a>: Multiple rows returned for one()
</p>
<p>
It looks like this package got rated twice in quick succession, creating two similar <a class="missing wiki">PackageRating?</a> objects. This race condition needs to be solved and these particular rating objects repaired.
</p>

                            
                          </td>
                          <td class="PosixTime">1273482785000000
                          </td>
                          <td class="ModifiedTime">1311176173000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/313.html">#313</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.1.html">v1.1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/313.html">Allow packages to be specified by IDs in REST interface</a>
                          </td>
                          <td class="description">
                            <p>
If a package name changes, a simple CKAN client may not be aware of this (not monitoring the push notifications, revisions or feed), so it is preferable to refer to the package by its (invariant) ID.
</p>
<p>
It is still useful to refer to a package by its name though, so both should be valid arguments in the REST interface.
</p>

                            
                          </td>
                          <td class="PosixTime">1273606248000000
                          </td>
                          <td class="ModifiedTime">1275404524000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/316.html">#316</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/316.html">Search URL escaping</a>
                          </td>
                          <td class="description">
                            <p>
If you search for unescaped characters such as '`' (backtick) in the URL in Chrome then you get a 500 error.
</p>
<p>
e.g.
<a class="ext-link" href="http://www.ckan.net/package/search?q=fjdkf2B%C2%B4gfhgfkgf{gpk"><span class="icon">​</span>http://www.ckan.net/package/search?q=fjdkf2B%C2%B4gfhgfkgf{gpk</a>
fjdkf2B´gfhgfkgf{gpk
</p>
<p>
returns this exception:
</p>
<pre class="wiki">URL: http://www.ckan.net/package/search?q=fjdkf%2B%C2%B4gfhgfkgf%7Bg%C2%B4pk&amp;search=Search+Packages+%C2%BB
Module weberror.errormiddleware:162 in __call__
&lt;&lt;              __traceback_supplement__ = Supplement, self, environ
                   sr_checker = ResponseStartChecker(start_response)
                   app_iter = self.application(environ, sr_checker)
                   return self.make_catching_iter(app_iter, environ, sr_checker)
               except:
&gt;&gt;  app_iter = self.application(environ, sr_checker)
Module repoze.who.middleware:107 in __call__
&lt;&lt;          wrapper = StartResponseWrapper(start_response)
               app_iter = app(environ, wrapper.wrap_start_response)
       
               # The challenge decider almost(?) always needs information from the
&gt;&gt;  app_iter = app(environ, wrapper.wrap_start_response)
Module beaker.middleware:73 in __call__
&lt;&lt;                                                     self.cache_manager)
               environ[self.environ_key] = self.cache_manager
               return self.app(environ, start_response)
&gt;&gt;  return self.app(environ, start_response)
Module beaker.middleware:152 in __call__
&lt;&lt;                          headers.append(('Set-cookie', cookie))
                   return start_response(status, headers, exc_info)
               return self.wrap_app(environ, session_start_response)
           
           def _get_session(self):
&gt;&gt;  return self.wrap_app(environ, session_start_response)
Module routes.middleware:130 in __call__
&lt;&lt;                  environ['SCRIPT_NAME'] = environ['SCRIPT_NAME'][:-1]
               
               response = self.app(environ, start_response)
               
               # Wrapped in try as in rare cases the attribute will be gone already
&gt;&gt;  response = self.app(environ, start_response)
Module pylons.wsgiapp:125 in __call__
&lt;&lt;          
               controller = self.resolve(environ, start_response)
               response = self.dispatch(controller, environ, start_response)
               
               if 'paste.testing_variables' in environ and hasattr(response,
&gt;&gt;  response = self.dispatch(controller, environ, start_response)
Module pylons.wsgiapp:324 in dispatch
&lt;&lt;          if log_debug:
                   log.debug("Calling controller class with WSGI interface")
               return controller(environ, start_response)
           
           def load_test_env(self, environ):
&gt;&gt;  return controller(environ, start_response)
Module ckan.lib.base:50 in __call__
&lt;&lt;          # available in environ['pylons.routes_dict']
               try:
                   return WSGIController.__call__(self, environ, start_response)
               finally:
                   model.Session.remove()
&gt;&gt;  return WSGIController.__call__(self, environ, start_response)
Module pylons.controllers.core:221 in __call__
&lt;&lt;                  return response(environ, self.start_response)
               
               response = self._dispatch_call()
               if not start_response_called:
                   self.start_response = start_response
&gt;&gt;  response = self._dispatch_call()
Module pylons.controllers.core:172 in _dispatch_call
&lt;&lt;              req.environ['pylons.action_method'] = func
                   
                   response = self._inspect_call(func)
               else:
                   if log_debug:
&gt;&gt;  response = self._inspect_call(func)
Module pylons.controllers.core:107 in _inspect_call
&lt;&lt;                        func.__name__, args)
               try:
                   result = self._perform_call(func, args)
               except HTTPException, httpe:
                   if log_debug:
&gt;&gt;  result = self._perform_call(func, args)
Module pylons.controllers.core:60 in _perform_call
&lt;&lt;          """Hide the traceback for everything above this method"""
               __traceback_hide__ = 'before_and_this'
               return func(**args)
           
           def _inspect_call(self, func):
&gt;&gt;  return func(**args)
Module ckan.controllers.package:52 in search
&lt;&lt;                  collection=query,
                       page=request.params.get('page', 1),
                       items_per_page=50
                   )
                   # filter out ranks from the query result
&gt;&gt;  items_per_page=50
Module webhelpers.paginate:333 in __init__
&lt;&lt;              self.item_count = item_count
               else:
                   self.item_count = len(self.collection)
       
               # Compute the number of the first and last available page
&gt;&gt;  self.item_count = len(self.collection)
Module webhelpers.paginate:204 in __len__
&lt;&lt;      def __len__(self):
               return self.obj.count()
       
       # Since the items on a page are mainly a list we subclass the "list" type
&gt;&gt;  return self.obj.count()
Module sqlalchemy.orm.query:1094 in count
&lt;&lt;              q = q.params(params)
               q = q._legacy_select_kwargs(**kwargs)
               return q._count()
       
           def _count(self):
&gt;&gt;  return q._count()
Module sqlalchemy.orm.query:1103 in _count
&lt;&lt;          """
               return self._col_aggregate(sql.literal_column('1'), sql.func.count, nested_cols=list(self.mapper.primary_key))
       
           def _col_aggregate(self, col, func, nested_cols=None):
&gt;&gt;  return self._col_aggregate(sql.literal_column('1'), sql.func.count, nested_cols=list(self.mapper.primary_key))
Module sqlalchemy.orm.query:1125 in _col_aggregate
&lt;&lt;          if self._autoflush and not self._populate_existing:
                   self.session._autoflush()
               return self.session.scalar(s, params=self._params, mapper=self.mapper)
       
           def compile(self):
&gt;&gt;  return self.session.scalar(s, params=self._params, mapper=self.mapper)
Module sqlalchemy.orm.session:635 in scalar
&lt;&lt;          engine = self.get_bind(mapper, clause=clause, instance=instance)
       
               return self.__connection(engine, close_with_result=True).scalar(clause, params or {})
       
           def close(self):
&gt;&gt;  return self.__connection(engine, close_with_result=True).scalar(clause, params or {})
Module sqlalchemy.engine.base:834 in scalar
&lt;&lt;          """
       
               return self.execute(object, *multiparams, **params).scalar()
       
           def statement_compiler(self, statement, **kwargs):
&gt;&gt;  return self.execute(object, *multiparams, **params).scalar()
Module sqlalchemy.engine.base:844 in execute
&lt;&lt;          for c in type(object).__mro__:
                   if c in Connection.executors:
                       return Connection.executors[c](self, object, multiparams, params)
               else:
                   raise exceptions.InvalidRequestError("Unexecutable object type: " + str(type(object)))
&gt;&gt;  return Connection.executors[c](self, object, multiparams, params)
Module sqlalchemy.engine.base:895 in execute_clauseelement
&lt;&lt;          else:
                   keys = None
               return self._execute_compiled(elem.compile(dialect=self.dialect, column_keys=keys, inline=len(params) &gt; 1), distilled_params=params)
       
           def _execute_compiled(self, compiled, multiparams=None, params=None, distilled_params=None):
&gt;&gt;  return self._execute_compiled(elem.compile(dialect=self.dialect, column_keys=keys, inline=len(params) &gt; 1), distilled_params=params)
Module sqlalchemy.engine.base:907 in _execute_compiled
&lt;&lt;          context.pre_execution()
               self.__execute_raw(context)
               context.post_execution()
               self._autocommit(context)
&gt;&gt;  self.__execute_raw(context)
Module sqlalchemy.engine.base:916 in __execute_raw
&lt;&lt;              self._cursor_executemany(context.cursor, context.statement, context.parameters, context=context)
               else:
                   self._cursor_execute(context.cursor, context.statement, context.parameters[0], context=context)
       
           def _execute_ddl(self, ddl, params, multiparams):
&gt;&gt;  self._cursor_execute(context.cursor, context.statement, context.parameters[0], context=context)
Module sqlalchemy.engine.base:958 in _cursor_execute
&lt;&lt;              self.engine.logger.info(repr(parameters))
               try:
                   self.dialect.do_execute(cursor, statement, parameters, context=context)
               except Exception, e:
                   self._handle_dbapi_exception(e, statement, parameters, cursor)
&gt;&gt;  self.dialect.do_execute(cursor, statement, parameters, context=context)
Module sqlalchemy.engine.default:133 in do_execute
&lt;&lt;      def do_execute(self, cursor, statement, parameters, context=None):
               cursor.execute(statement, parameters)
       
           def is_disconnect(self, e):
&gt;&gt;  cursor.execute(statement, parameters)
UnicodeEncodeError: 'ascii' codec can't encode character u'\xb4' in position 6: ordinal not in range(128)
</pre>
                            
                          </td>
                          <td class="PosixTime">1274265928000000
                          </td>
                          <td class="ModifiedTime">1291831177000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/319.html">#319</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/319.html">Local Authority license misnamed in migration script 18</a>
                          </td>
                          <td class="description">
                            <p>
Migration script 18 converts license "OKD Compliant::Local Authority Copyright with data.gov.uk rights" into "uklocalauthority-withrights" when it should be "localauth-withrights", according to the license service SoS 2. This causes clients difficulties looking it up.
</p>

                            
                          </td>
                          <td class="PosixTime">1274349714000000
                          </td>
                          <td class="ModifiedTime">1274366882000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/322.html">#322</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.1.html">v1.1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/322.html">Client interface for Notification Service</a>
                          </td>
                          <td class="description">
                            <h3 id="Usecases">Use cases</h3>
<ul><li>Register for package changes
</li><li>Register for all revisions
</li><li>Notified of a package change
</li><li>Notified of a revision
</li><li>Deregistration
</li><li>Configuration of port in pylons config
</li></ul><h3 id="Design">Design</h3>
<ul><li>Default port: 5672 (standard for AMQP)
</li><li>Exchange name: 'ckan'
</li><li>Exchange type: topic exchange (most flexible)
</li><li>Routing keys: (see below)
</li></ul><h3 id="Routingdetail">Routing detail</h3>
<p>
Routing key format: "OBJ_TYPE"
(NB tags should be identified by their name, not ID)
</p>
<p>
Example routing keys
</p>
<ul><li>'package' - Package edited/created
</li><li>'resource' - Resource edited/created
</li><li>'revision' - Any change
</li><li>'db.clean'
</li><li>'db.rebuild'
</li></ul><p>
Example queue bindings that clients may use: 
</p>
<ul><li>* - no filtering - client receives all notifications
</li><li>package - only changes to packages
</li><li>revision - all revisions
</li><li>db - all database operations
</li></ul><h3 id="Versioning">Versioning</h3>
<p>
Since message payloads will be tied into the REST Entities, it makes sense to join up with the REST versioning. This could be achieved by providing new exchanges called 'ckan-1.1' perhaps?
</p>
<h3 id="Documentation">Documentation</h3>
<ul><li>How to use
</li><li>simple example of an external client?
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1274720042000000
                          </td>
                          <td class="ModifiedTime">1277722821000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/323.html">#323</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.1.html">v1.1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/323.html">Notification message</a>
                          </td>
                          <td class="description">
                            <h3 id="Whicheventstonotifyon">Which events to notify on</h3>
<p>
Listed by domain object, these are the notification message 'change types' that will be sent:
</p>
<ul><li>Package
</li><li>PackageResource
</li></ul><p>
Also it is clear that it could be useful to know when db-wide maintenance is carried out:
</p>
<ul><li>db - 'clean', 'rebuild' (db is wiped and replaced with new data), 'upgrade' (migration)
</li></ul><h3 id="Ignoreddomainobjects">Ignored domain objects</h3>
<p>
These parts of the domain model will not carry notifications as no use case has been identified for them:
</p>
<ul><li>Revision
</li><li>Group 
</li><li>Tag
</li><li>Rating
</li><li>User - list of users is sensitive info
</li><li>Relationships - complicated
</li><li>Authz - complicated and sensitive info
</li><li>License - change of a license's metadata is a question for the 'license service'
</li></ul><h3 id="Messageformat">Message format</h3>
<p>
A notification message's header contains the routing key, identifying the object type. The client is probably interested in the object (all use cases so far), so it makes sense to send the object in the payload. This should be the JSON-encoded dictionary exactly as provided for the object's REST Entity.
</p>
<p>
For the 'db' notifications there shall be no payload.
</p>

                            
                          </td>
                          <td class="PosixTime">1274723333000000
                          </td>
                          <td class="ModifiedTime">1278578841000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/324.html">#324</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.1.html">v1.1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/324.html">Search indexing using notifications</a>
                          </td>
                          <td class="description">
                            <p>
Currently search indexing is triggered directly using a Postgresql db callback. Now take advantage of the Notification system to register interest in all package changes and db changes to trigger this instead.
</p>
<p>
The indexing shall run in a separate shell/process, managed by supervisord.
</p>

                            
                          </td>
                          <td class="PosixTime">1274723483000000
                          </td>
                          <td class="ModifiedTime">1278599927000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/325.html">#325</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.1.html">v1.1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/325.html">Event push notification</a>
                          </td>
                          <td class="description">
                            <h3 id="Asa">As a</h3>
<p>
CKAN client program
</p>
<h3 id="Iwantto">I want to</h3>
<p>
be notified when changes to the CKAN metadata occur.
</p>
<h3 id="Examplesofuse">Examples of use</h3>
<ol><li>An external search engine needing to (re)index a package. (interest: Package)
</li><li>A front-end system that caches package info and wants to know when it changes, to keep in step. (interest: Package or Revision) See further details here: <a class="closed ticket" href="../ticket/352.html" title="enhancement: Package notification worker - sends XML-RPC (closed: wontfix)">ticket:352</a> and previous iteration here: <a class="closed ticket" href="../ticket/333.html" title="enhancement: CKAN front end requirements for package notifications (closed: wontfix)">ticket:333</a>.
</li><li>A system for automatically checking package URLs and resource URLs as they are put on the system. This could alert to bad URLs and automatically email feedback to (meta)data owners. (interest: PackageResource)
</li><li>Do some processing on resource (e.g. extract sample data for display) (interest: PackageResource)
</li></ol><h3 id="Context">Context</h3>
<p>
The current state of CKAN can be queried through the REST API, you can keep track of changes by reviewing the feeds, but there is no way to find out the instant something is changed, without costly polling.
</p>
<h3 id="Design">Design</h3>
<p>
Split-off into two tickets:
</p>
<ul><li>Notification message - <a class="closed ticket" href="../ticket/323.html" title="enhancement: Notification message (closed: fixed)">ticket:323</a>
<ul><li>Which events to notify on
</li><li>Message format
</li></ul></li><li>Interface for Notifier Service - <a class="closed ticket" href="../ticket/322.html" title="enhancement: Client interface for Notification Service (closed: fixed)">ticket:322</a>
</li></ul><h3 id="Testing">Testing</h3>
<p>
To test notifications, Carrot / AMQP will be configured to use a native-Python Queue, instead of requiring RabbitMQ to be running on the machine.
</p>
<h3 id="Related">Related</h3>
<ul><li>Run CKAN search indexing using this system - <a class="closed ticket" href="../ticket/324.html" title="enhancement: Search indexing using notifications (closed: fixed)">ticket:324</a>
</li><li>Run SOLR indexing using this system - <a class="closed ticket" href="../ticket/353.html" title="defect: SOLR search indexing (closed: fixed)">ticket:353</a>
</li><li>Web hooks for notifications - <a class="closed ticket" href="../ticket/327.html" title="defect: Create a web hook worker for CKAN (closed: wontfix)">ticket:327</a> 
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1274723512000000
                          </td>
                          <td class="ModifiedTime">1278599979000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/326.html">#326</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.1.html">v1.1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/326.html">Centralise importation of json library</a>
                          </td>
                          <td class="description">
                            <p>
Later versions of python use json which is better than simplejson, but it must be kept as an option for compatibility. So centralise the import of json to ckan.lib.helpers.
</p>

                            
                          </td>
                          <td class="PosixTime">1274784223000000
                          </td>
                          <td class="ModifiedTime">1274789296000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/329.html">#329</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.1.html">v1.1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/329.html">Bad dates cause exception on Gov form</a>
                          </td>
                          <td class="description">
                            <h2 id="Reproduction">Reproduction</h2>
<p>
Using the government form, create a new package with name 'test' and date released of '23/5/0210'. The result is a 500 error and 'Server Error' message.
</p>
<p>
Affects all versions of CKAN.
</p>
<h2 id="Whyitshappening">Why it's happening</h2>
<p>
The dates module is raising an exception on the invalid date when saving the date, which is not being caught. The exception should have been raised only during the earlier 'validation' step and that would be caught.
</p>

                            
                          </td>
                          <td class="PosixTime">1275060617000000
                          </td>
                          <td class="ModifiedTime">1275079189000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/330.html">#330</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/330.html">getdata/ons timezone not recognised on non-British servers</a>
                          </td>
                          <td class="description">
                            <p>
The python time module is supposed to recognise timezones such as 'UTC', 'GMT' and 'BST' using the %Z parameter. This works fine on British installs, but the buildbot (for example) gives this error:
</p>
<p>
<a class="missing wiki">DateConvertError?</a>: Could not read date as ISO format "%a, %d %b %Y %H:%M:%S %Z". Date provided: "Mon, 04 Jan 2010 09:30:00 BST"
</p>
<p>
It turns out that it only recognises local names of timezones.
</p>
<p>
The ONS import doesn't care much about timezone, so we should just ignore it, avoiding these problems.
</p>

                            
                          </td>
                          <td class="PosixTime">1275300271000000
                          </td>
                          <td class="ModifiedTime">1275303122000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/333.html">#333</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.1.html">v1.1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/333.html">CKAN front end requirements for package notifications</a>
                          </td>
                          <td class="description">
                            <h2 id="Usecase:newpackage">Use case: new package</h2>
<ol><li>An external front-end system provides a web page with a list of packages. Each package has the option to edit it or and there is also a button to create a new package. 
</li></ol><ol start="2"><li>User: clicks 'new package'. 
</li></ol><ol start="3"><li>CKAN presents the package/new form to the user. 
</li></ol><ol start="4"><li>(After a couple of previews) User: clicks 'commit'. 
</li></ol><ol start="5"><li>Notification message goes from CKAN to the front-end detailing the new package.
</li></ol><ol start="6"><li>The user is redirected back to the front-end web page displaying the list of packages, which contains the new one.
</li></ol><p>
The notification message (step 5) has to get through to the front-end that the new package is created before the redirect (step 6). This suggests that the message sending needs to be *synchronous*, i.e. acknowledged by the front-end, before CKAN redirects the user to the front-end package listing page (step 6).
</p>
<p>
In addition, this use case suggests the front-end listens for package notifications, to save another call to CKAN to get the package details, before the displaying the list of packages. If this isn't possible (see next use case) and it must listen for revision notifications instead, then perhaps it is worth including the full package details in the payload for the revision notification message. Would there be a problem with such a large message in the next use case, with 100 packages?
</p>
<h2 id="Usecase:CKANimportspackages">Use case: CKAN imports packages</h2>
<ol><li>CKAN administrator runs a script that adds 100 new packages into CKAN. 
</li></ol><ol start="2"><li>CKAN sends notification message to front-end to report the new packages/revisions.
</li></ol><ol start="3"><li>Knowing there are new revisions, the front-end queries the CKAN revision interface to get the list of new packages.
</li></ol><ol start="4"><li>The front-end queries CKAN for each new package one-by-one.
</li></ol><ol start="5"><li>A new user request to the front-end will include the info about the new packages.
</li></ol><p>
The package addition could be achieved in 1 revision, 100 revisions or some compromise:
</p>
<ul><li>If it is 1 revision then potentially there are problems displaying the long list of packages in the 'recent changes'. 
</li></ul><ul><li>If it is 100 revisions, then the notification webhook would be called 100 times, which creates unnecessary load on the front-end. Suppose each Webhook call-back (step 2) triggers the front-end to make a call to CKAN to get the latest revisions (step3), in this case it would make 100 calls, most of them fruitless, causing unnecessary load on CKAN.
</li></ul><p>
This use case suggests a bulk import of packages should go into one revision, and therefore generate one revision notification message and 100 package notification messages. The front-end client should listen to only revision messages.
</p>

                            
                          </td>
                          <td class="PosixTime">1275324042000000
                          </td>
                          <td class="ModifiedTime">1275407987000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/334.html">#334</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/334.html">Wrong link for package feed icon</a>
                          </td>
                          <td class="description">
                            <p>
This is a problem with the package page e.g. <a class="ext-link" href="http://ckan.net/package/open-election-data-project"><span class="icon">​</span>http://ckan.net/package/open-election-data-project</a> . The feed icon links to <a class="missing changeset" title="No default repository defined">[1]</a>  and the text next to it "Subscribe" links to <a class="missing changeset" title="No default repository defined">[2]</a>. Surely these should be the same? The second link seems to right one to me.
</p>
<ul><li><a class="missing changeset" title="No default repository defined">[1]</a> <a class="ext-link" href="http://ckan.net/package/open-election-data-project?format=atom"><span class="icon">​</span>http://ckan.net/package/open-election-data-project?format=atom</a>
</li><li><a class="missing changeset" title="No default repository defined">[2]</a> <a class="ext-link" href="http://ckan.net/package/history/open-election-data-project?format=atom&amp;days=7"><span class="icon">​</span>http://ckan.net/package/history/open-election-data-project?format=atom&amp;days=7</a>
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1275407445000000
                          </td>
                          <td class="ModifiedTime">1280743667000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/335.html">#335</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.1.html">v1.1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/335.html">Post-package-edit redirect to configurable URL</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
third-party interface to a CKAN instance
</p>
<h2 id="Iwantto">I want to</h2>
<p>
link to CKAN's package creation/editing pages. On 'commit', have the user redirected back to a URL in my interface that I can control. Also, when the package is created new, I need to be told what the new package's name is on return.
</p>
<h2 id="Design">Design</h2>
<ol><li>The 'return URL' is passed as a parameter to CKAN.
</li><li>CKAN substitutes the package name into the return URL.
</li></ol><p>
 
</p>
<h2 id="Example">Example</h2>
<p>
Front-end links to:
http://ca.ckan.net/package/new?return_to=http://datadotgc.ca/dataset/&lt;NAME&gt; (but with the parameter URL-encoded)
</p>
<p>
When finished editing and the user commits, CKAN redirects the user to: http://datadotgc.ca/dataset/pollution_data
</p>

                            
                          </td>
                          <td class="PosixTime">1275408834000000
                          </td>
                          <td class="ModifiedTime">1276179605000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/340.html">#340</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/v1.1.html">v1.1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/340.html">Web UI theme easier to configure</a>
                          </td>
                          <td class="description">
                            <p>
An install of CKAN should be configurable without changing any of the installed files. This makes it clear to upgrade CKAN. Complete the changes in this wiki page to allow static files to be served from outside CKAN paths over CKAN versions and additional CSS file to be pulled in.
</p>
<p>
<a class="ext-link" href="http://wiki.okfn.org/ckan/doc/theme"><span class="icon">​</span>http://wiki.okfn.org/ckan/doc/theme</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1276009729000000
                          </td>
                          <td class="ModifiedTime">1328807317000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/341.html">#341</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/341.html">Web UI accepts package IDs in URLs</a>
                          </td>
                          <td class="description">
                            <p>
(in the same way that we can refer to packages in the API by ID as well as name.)
</p>
<h2 id="Asa">As a</h2>
<p>
client of CKAN
</p>
<h2 id="Iwantto">I want to</h2>
<p>
link to a package page in the UI, referring to it by ID
</p>

                            
                          </td>
                          <td class="PosixTime">1276162400000000
                          </td>
                          <td class="ModifiedTime">1277483030000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/342.html">#342</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/342.html">JSONP parameter in API</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
CKAN client using JQuery
</p>
<h2 id="Iwantto">I want to</h2>
<p>
call the CKAN API and instead of receiving back JSON I get JSONP. i.e. "%s(%s)" % (callback, json_content)
</p>
<h2 id="Suggestedimplementation">Suggested implementation</h2>
<p>
All API calls allow the JSONP 'callback' parameter to be specified in the request and this wraps the JSON response. See suggested patch to rest.py by Donovan Hide:
</p>
<p>
<a class="ext-link" href="http://knowledgeforge.net/ckan/trac/attachment/ticket/336/resource.patch"><span class="icon">​</span>http://knowledgeforge.net/ckan/trac/attachment/ticket/336/resource.patch</a>
</p>
<h2 id="Test">Test</h2>
<p>
import re
import unittest
</p>
<p>
def test_jsonp_callback():
</p>
<blockquote>
<p>
response = self.app.get('/api/search/resource/?url=<a class="ext-link" href="http://www.scraperwiki.com&amp;callback=jsoncallback"><span class="icon">​</span>http://www.scraperwiki.com&amp;callback=jsoncallback</a>')
match = re.match('jsoncallback\(.*\);',response)
self.assertTrue(match)
</p>
</blockquote>
<blockquote>
<p>
response = self.app.get('/api/search/resource/?url=<a class="ext-link" href="http://www.scraperwiki.com"><span class="icon">​</span>http://www.scraperwiki.com</a>')
match = re.match('jsoncallback\(.*\);',response)
self.assertFalse(match)
</p>
</blockquote>
<p>
I think the point needs to be made that JSONP only works for GET
requests and not POST/PUT/DELETE, so there needs to be a check
for that in the _finish_ok method.
</p>
<p>
(thanks to Donovan Hide for test)
</p>

                            
                          </td>
                          <td class="PosixTime">1276166426000000
                          </td>
                          <td class="ModifiedTime">1276278485000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/343.html">#343</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/343.html">Packages referred by ID in API</a>
                          </td>
                          <td class="description">
                            <p>
When you do a Package Search or query a Package Relationship in the API version 2, the responses have relationships which refer to packages by name, not by ID.
</p>

                            
                          </td>
                          <td class="PosixTime">1276180179000000
                          </td>
                          <td class="ModifiedTime">1278066420000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/344.html">#344</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/344.html">REST Create package with incorrect format gives 500 error</a>
                          </td>
                          <td class="description">
                            <p>
PUT to /rest/api/package of <tt> {"name": "name", "resources": ["someurl.com/data"] } </tt> (i.e. resource is a string, not a dictionary) gives 500 error, when it should give a 400 error and helpful error message.
</p>
<p>
Exception:
</p>
<pre class="wiki">Module ckan.controllers.rest:154 in create
&lt;&lt;              if register == 'package' and not subregister:
                       fs = ckan.forms.get_standard_fieldset()
                       request_fa_dict = ckan.forms.edit_package_dict(ckan.forms.get_package_dict(fs=fs), request_data)
                       fs = fs.bind(model.Package, data=request_fa_dict, session=model.Session)
                   elif register == 'package' and subregister in model.PackageRelationship.get_all_types():
&gt;&gt;  request_fa_dict = ckan.forms.edit_package_dict(ckan.forms.get_package_dict(fs=fs), request_data)
Module ckan.forms.package_dict:88 in edit_package_dict
&lt;&lt;                      for res_dict in value:
                               res_dict_str = {}
                               for key, value in res_dict.items():
                                   res_dict_str[str(key)] = value
                               resources.append(res_dict_str)
&gt;&gt;  for key, value in res_dict.items():
AttributeError: 'unicode' object has no attribute 'items'
</pre>
                            
                          </td>
                          <td class="PosixTime">1276341172000000
                          </td>
                          <td class="ModifiedTime">1277477712000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/350.html">#350</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">reopened
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/350.html">Search engine optimisation</a>
                          </td>
                          <td class="description">
                            <p>
Need to research what can easily be done to improve CKAN packages in the search rankings.
</p>
<p>
Comments from Glen Barnes:
</p>
<p>
We've been pretty successful at SEO without even really trying (see <a class="ext-link" href="http://www.google.co.nz/search?client=safari&amp;rls=en&amp;q=auckland+google+transit+feed&amp;ie=UTF-8&amp;oe=UTF-8&amp;redir_esc=&amp;ei=dsYSTOzJLs2eceuZiI8I"><span class="icon">​</span>http://www.google.co.nz/search?client=safari&amp;rls=en&amp;q=auckland+google+transit+feed&amp;ie=UTF-8&amp;oe=UTF-8&amp;redir_esc=&amp;ei=dsYSTOzJLs2eceuZiI8I</a> as an example). This to me is key. If we are to make data available it has to be findable which is the main reason for a catalogue. There are probably things we should be doing on CKAN like using slugged urls (<a class="ext-link" href="http://www.ckan.net/package/ascoe"><span class="icon">​</span>http://www.ckan.net/package/ascoe</a> -&gt; <a class="ext-link" href="http://www.ckan.net/package/ascoe/atmospheric-chemistry-studies-in-the-oceanic-environment"><span class="icon">​</span>http://www.ckan.net/package/ascoe/atmospheric-chemistry-studies-in-the-oceanic-environment</a>), setting the H1 tag correctly ("Atmospheric Chemistry Studies in the Oceanic Environment"  on the example above). Some basic SEO 101 on page optimisations. 
</p>

                            
                          </td>
                          <td class="PosixTime">1276594541000000
                          </td>
                          <td class="ModifiedTime">1339774690000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/351.html">#351</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/351.html">Homepage: list new, updated and 'hot' packages</a>
                          </td>
                          <td class="description">
                            <p>
Have a simpler list of exciting data, as opposed to the big revision list.
</p>
<p>
For example:
</p>
<pre class="wiki">Hot data
===========

New packages: package1, package2, package3
Updated resources: package1, package2, package3
Popular packages: 
</pre>
                            
                          </td>
                          <td class="PosixTime">1276595816000000
                          </td>
                          <td class="ModifiedTime">1339774677000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/352.html">#352</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/352.html">Package notification worker - sends XML-RPC</a>
                          </td>
                          <td class="description">
                            <h2 id="Asan">As an</h2>
<p>
external front-end
</p>
<h2 id="Iwantto">I want to</h2>
<p>
be notified (by XML-RPC) about package creations and updates.
</p>
<h2 id="Implementation">Implementation</h2>
<ol><li>A message queue worker waits for package update notifications
</li><li>On reception, it constructs XML detailing the changes and PUSHes it to a configured URI.
</li></ol><p>
Rather than turning the package fields into XML fields, the JSON dump of the list of package dictionaries will become a single XML parameter.
</p>
<p>
Config - in the CKAN config will be:
</p>
<ul><li>URI to callback to
</li><li>API version to use (version 2 gives packages referred by ID not name)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1276597996000000
                          </td>
                          <td class="ModifiedTime">1286375870000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/353.html">#353</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/353.html">SOLR search indexing</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
SOLR instance
</p>
<h2 id="Iwantto">I want to</h2>
<p>
keep my search index of CKAN packages up-to-date 
</p>
<h2 id="Implementation">Implementation</h2>
<ul><li>Using asynchronous event notifications
</li><li>Running in a separate process to CKAN
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1277123480000000
                          </td>
                          <td class="ModifiedTime">1280756399000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/358.html">#358</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/358.html">Resources in REST API</a>
                          </td>
                          <td class="description">
                            <p>
(spun out of <a class="closed ticket" href="../ticket/336.html" title="defect: Resource Search API (closed: fixed)">ticket:336</a>)
</p>
<p>
Resource added to model API at:
</p>
<p>
api/rest/resource
</p>
<h3 id="Examplemodelrequest">Example model request</h3>
<p>
GET to: /api/2/rest/resource/a3dd8f64-9078-4f04-845c-e3f047125028
</p>
<p>
returns:
</p>
<pre class="wiki"> [{"id": "a3dd8f64-9078-4f04-845c-e3f047125028",
   "package_id": "b8a325c8-af2a-43f3-8245-9db7d73dfbfe",
   "URL": "http://scraperwiki.com/lincolnshire-councillors", 
   "format": "CSV", 
   "Description": "Scrape of www.lincs.gov/councillors.pdf by ScraperWiki.",
   "hash": "", 
   "position": 2
 }]
</pre><h2 id="Authorization">Authorization</h2>
<ol><li>Have it generic (ie. not per resource) and use an action/role on system
</li><li>Require all resources to attach to packages an inherit their permissions (i.e. read/write etc if and only read/write on associated packages)
</li><li>Introduce Resource in authorization system (requires migration)
</li></ol><p>
Mixed model
</p>
<pre class="wiki">Create / Edit:

if resource associated to package:
    check_permissions(package, update)
else:
    check_system_permissions(c.user, model.Action.Resouce Create/Update, model.System)
</pre>
                            
                          </td>
                          <td class="PosixTime">1277483282000000
                          </td>
                          <td class="ModifiedTime">1310128782000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/362.html">#362</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/362.html">Ratings should not be created with a GET</a>
                          </td>
                          <td class="description">
                            <h2 id="Background">Background</h2>
<p>
In the Web UI, when you rate a package it simply links to something like:
</p>
<p>
<a class="ext-link" href="http://ckan.net/package/rate/mke-liquor-licenses?rating=3"><span class="icon">​</span>http://ckan.net/package/rate/mke-liquor-licenses?rating=3</a>
</p>
<p>
This creates a GET request. 
</p>
<p>
This is bad because:
</p>
<ul><li>Search engine crawlers follow links to find pages, and in this case end up creating a rating (although we've got a robots.txt to try and avoid this)
</li><li>There are occasions when we want to make a CKAN instance read-only, so we put a &lt;<a class="missing wiki">LimitExcept?</a> GET&gt; Apache instruction in. But the database may still get written for these ratings.
</li><li>Best practise for web requests is for GET to be a read-only request.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1278925451000000
                          </td>
                          <td class="ModifiedTime">1311176564000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/363.html">#363</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/363.html">Blank revisions</a>
                          </td>
                          <td class="description">
                            <p>
Occasionally we seem to get revisions that are not connected to packages. These shouldn't appear, since all revisioned objects are linked to a package aren't they?
</p>
<p>
They appear on the 'Recently changed' list on the home page with an empty 'Packages' column.
</p>

                            
                          </td>
                          <td class="PosixTime">1278947772000000
                          </td>
                          <td class="ModifiedTime">1310125872000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/364.html">#364</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.3.html">ckan-v1.3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/364.html">Search for 'statistic' returns nothing</a>
                          </td>
                          <td class="description">
                            <p>
On ckan.net there are plenty of packages (and indeed their tags) with the word 'statistic' in them, but no packages turn up when you search for it:
</p>
<p>
<a class="ext-link" href="http://ckan.net/package/search?q=statistic&amp;search=Search+Packages+%C2%BB"><span class="icon">​</span>http://ckan.net/package/search?q=statistic&amp;search=Search+Packages+%C2%BB</a>
</p>
<p>
(Using Postgres full text search)
</p>

                            
                          </td>
                          <td class="PosixTime">1278949620000000
                          </td>
                          <td class="ModifiedTime">1291637291000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/365.html">#365</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/365.html">ResourceNotifications</a>
                          </td>
                          <td class="description">
                            <p>
If you change a resource then you not only get a <a class="missing wiki">PackageNotification?</a>, but also a <a class="missing wiki">ResourceNofication?</a>.
</p>

                            
                          </td>
                          <td class="PosixTime">1279037411000000
                          </td>
                          <td class="ModifiedTime">1279300621000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/366.html">#366</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4.html">ckan-v1.4</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/366.html">A flash message says why you are redirected to the 'user login' page</a>
                          </td>
                          <td class="description">
                            <p>
You get redirected for a number of different reasons - often confuses me let alone the average user!
</p>
<p>
Cost: 1h
</p>

                            
                          </td>
                          <td class="PosixTime">1279128058000000
                          </td>
                          <td class="ModifiedTime">1300212171000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/367.html">#367</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/367.html">Notfication monitor</a>
                          </td>
                          <td class="description">
                            <p>
Runs on the commandline and prints out notifications.
</p>

                            
                          </td>
                          <td class="PosixTime">1279303310000000
                          </td>
                          <td class="ModifiedTime">1279303693000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/407.html">#407</a>
                          </td>
                          <td class="type">requirement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/407.html">Link to Scraperwiki</a>
                          </td>
                          <td class="description">
                            <h2 id="Asa">As a</h2>
<p>
user browsing a CKAN package which has a resource in a bad format
</p>
<h2 id="Iwantto">I want to</h2>
<p>
be alerted to the possibility of scraping it on scraperwiki
</p>
<h2 id="Implementation">Implementation</h2>
<p>
This should be done in a CKAN extension. It should appear in a side-bar on the package read page.
</p>
<p>
If the package does not have a resource with scraperwiki.com in the url, then it displays this message:
</p>
<p>
Title: Scrape it<br />
Image: (Scraperwiki dumper truck)<br />
Body text: Could this data be in a better format? Why not use Scraperwiki to extract data from tables, Excel or PDF for everyone's benefit? You can <a class="ext-link" href="http://scraperwiki.com/market/request/"><span class="icon">​</span>request</a> this data is scraped or even <a class="ext-link" href="http://scraperwiki.com/editor/"><span class="icon">​</span>write the scraper</a> yourself.
</p>

                            
                          </td>
                          <td class="PosixTime">1281348368000000
                          </td>
                          <td class="ModifiedTime">1330769956000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/414.html">#414</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/414.html">Change the Apache and Varnish ports</a>
                          </td>
                          <td class="description">
                            <p>
Ask Paul for a new machine for testing. Then one for varnish-live and one for varnish-test.
</p>

                            
                          </td>
                          <td class="PosixTime">1281431639000000
                          </td>
                          <td class="ModifiedTime">1288003770000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/415.html">#415</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/415.html">Chase Talis about loading RDF from CKAN.</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1281431656000000
                          </td>
                          <td class="ModifiedTime">1288003954000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/416.html">#416</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">johnbywater
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/416.html">Meet Evan at COI at 1 o'clock Tuesday 10th August 2010 (to progress Forms API)</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1281431677000000
                          </td>
                          <td class="ModifiedTime">1281529736000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/418.html">#418</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/418.html">With COI, get SOLR working</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1281431691000000
                          </td>
                          <td class="ModifiedTime">1291637919000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/420.html">#420</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/420.html">Release ckan 1.1</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1281432518000000
                          </td>
                          <td class="ModifiedTime">1281522091000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/421.html">#421</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/421.html">Upgrade test-hmg.ckan.net to latest ckan 1.1</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1281432541000000
                          </td>
                          <td class="ModifiedTime">1282909772000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/422.html">#422</a>
                          </td>
                          <td class="type">story
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.3.html">ckan-v1.3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/422.html">Administrator imports meta-data into CKAN</a>
                          </td>
                          <td class="description">
                            <p>
Requirements:
</p>
<ul><li>cater naturally for multiple packages with multiple resources
</li><li>international encoding
</li><li>large number of packages
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1281433490000000
                          </td>
                          <td class="ModifiedTime">1292586586000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/424.html">#424</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/424.html">Tell JF the format spec &amp; examples</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1281436534000000
                          </td>
                          <td class="ModifiedTime">1282919429000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/426.html">#426</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/426.html">Ask list for suggestions improving API docs</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1281436574000000
                          </td>
                          <td class="ModifiedTime">1282925305000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/427.html">#427</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">thejimmyg
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-3.html">ckan-v1.4-sprint-3</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/427.html">Match licenses from GEMINI document</a>
                          </td>
                          <td class="description">
                            <ul><li>examples of posting a new package
</li><li>example license_id - explain
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1281436611000000
                          </td>
                          <td class="ModifiedTime">1299164063000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/428.html">#428</a>
                          </td>
                          <td class="type">requirement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/428.html">Daily dump of DGU CKAN available</a>
                          </td>
                          <td class="description">
                            <p>
End users want to get hold of a JSON &amp; CSV dump of the DGU data.
</p>

                            
                          </td>
                          <td class="PosixTime">1281703251000000
                          </td>
                          <td class="ModifiedTime">1285757316000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/429.html">#429</a>
                          </td>
                          <td class="type">requirement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/429.html">ONS data is imported daily to DGU</a>
                          </td>
                          <td class="description">
                            
                            
                          </td>
                          <td class="PosixTime">1281703294000000
                          </td>
                          <td class="ModifiedTime">1285757274000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/432.html">#432</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/432.html">Creating package over REST gives 500 error</a>
                          </td>
                          <td class="description">
                            <p>
This occurs when CKAN is run with mod_wsgi (not under paster).
</p>
<p>
This is because of a unicode header being creating in rest.py.
</p>

                            
                          </td>
                          <td class="PosixTime">1282065101000000
                          </td>
                          <td class="ModifiedTime">1282552819000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/434.html">#434</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/434.html">Logged in user to si.ckan.net causes genshi exception</a>
                          </td>
                          <td class="description">
                            <p>
Here's the trace:
</p>
<pre class="wiki">[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197] Error - &lt;type 'exceptions.IndexError'&gt;: list index out of range
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197] mod_wsgi (pid=6195): Exception occurred processing WSGI script '/home/okfn/var/srvc/si.ckan.net/py
env/bin/si.ckan.net.py'.
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197] Traceback (most recent call last):
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/paste/cascade.py", line 
130, in __call__
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     return self.apps[-1](environ, start_response)
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/paste/registry.py", line
 375, in __call__
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     app_iter = self.application(environ, start_response)
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/repoze/who/middleware.py
", line 107, in __call__
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     app_iter = app(environ, wrapper.wrap_start_response)
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/pylons/middleware.py", l
ine 214, in __call__
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     self.app, new_environ, catch_exc_info=True)
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/pylons/util.py", line 94
, in call_wsgi_application
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     app_iter = application(environ, start_response)
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/weberror/errormiddleware
.py", line 156, in __call__
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     return self.application(environ, start_response)
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/beaker/middleware.py", l
ine 73, in __call__
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     return self.app(environ, start_response)
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/beaker/middleware.py", l
ine 152, in __call__
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     return self.wrap_app(environ, session_start_response)
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/routes/middleware.py", l
ine 130, in __call__
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     response = self.app(environ, start_response)
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/pylons/wsgiapp.py", line
 125, in __call__
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     response = self.dispatch(controller, environ, start_response)
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/pylons/wsgiapp.py", line
 324, in dispatch
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     return controller(environ, start_response)
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/src/ckan/ckan/lib/base.py", line 73, in __call__
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     return WSGIController.__call__(self, environ, start_response)
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/pylons/controllers/core.
py", line 221, in __call__
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     response = self._dispatch_call()
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/pylons/controllers/core.
py", line 172, in _dispatch_call
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     response = self._inspect_call(func)
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/pylons/controllers/core.
py", line 107, in _inspect_call
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     result = self._perform_call(func, args)
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/pylons/controllers/core.
py", line 60, in _perform_call
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     return func(**args)
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/src/ckan/ckan/controllers/error.py", line 32, in doc
ument
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     ckan_template = render('error_document_template.html')
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/src/ckan/ckan/lib/base.py", line 38, in render
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     return render_template()
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/src/ckan/ckan/lib/base.py", line 36, in render_templ
ate
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     return literal(stream.render(method=method, encoding=None))
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/genshi/core.py", line 18
3, in render
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     return encode(generator, method=method, encoding=encoding, out=out)
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/genshi/output.py", line 
57, in encode
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     return _encode(''.join(list(iterator)))
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/genshi/output.py", line 339, in __call__
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     for kind, data, pos in stream:
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/genshi/output.py", line 670, in __call__
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     for kind, data, pos in stream:
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/genshi/output.py", line 771, in __call__
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     for kind, data, pos in chain(stream, [(None, None, None)]):
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/genshi/output.py", line 586, in __call__
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     for ev in stream:
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/genshi/core.py", line 288, in _ensure
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     for event in stream:
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/genshi/template/base.py", line 618, in _include
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     for event in tmpl.generate(ctxt, **vars):
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/genshi/template/base.py", line 618, in _include
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     for event in tmpl.generate(ctxt, **vars):
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/genshi/template/base.py", line 605, in _include
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     for event in stream:
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/genshi/template/markup.py", line 327, in _match
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     for event in stream:
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/genshi/template/base.py", line 545, in _flatten
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     for kind, data, pos in stream:
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/genshi/filters/i18n.py", line 177, in _generate
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     for event in msgbuf.translate(gettext(msgbuf.format())):
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/genshi/filters/i18n.py", line 1029, in translate
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     parts = parse_msg(string)
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]   File "/home/okfn/var/srvc/si.ckan.net/pyenv/lib/python2.5/site-packages/genshi/filters/i18n.py", line 1143, in parse_msg
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197]     parts.append((stack[-1], string))
[Wed Aug 18 11:10:19 2010] [error] [client 89.212.104.197] IndexError: list index out of range
</pre><p>
ckan: 1e403927f2bb (metastable)
genshi: 0.6
lang: slovenian
</p>

                            
                          </td>
                          <td class="PosixTime">1282130515000000
                          </td>
                          <td class="ModifiedTime">1283189807000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/435.html">#435</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">thejimmyg
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4.html">ckan-v1.4</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/435.html">Switching between ckan instances causes orphaned postgres processes</a>
                          </td>
                          <td class="description">
                            <p>
Analysis using pg_top reveals orphaed processes:
</p>
<p>
<a class="ext-link" href="https://trac.dataco.coi.gov.uk/projects/datagov/ticket/460#comment:6"><span class="icon">​</span>https://trac.dataco.coi.gov.uk/projects/datagov/ticket/460#comment:6</a>
</p>
<p>
This followed switching ckan instances on the dgu machine. Do these hang around forever clogging up a db server? Can switching between instances be smoothed to avoid this?
</p>

                            
                          </td>
                          <td class="PosixTime">1282147736000000
                          </td>
                          <td class="ModifiedTime">1298284084000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/436.html">#436</a>
                          </td>
                          <td class="type">bug
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.2.html">ckan-v1.2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/436.html">Investigate exception: resource search JSON</a>
                          </td>
                          <td class="description">
                            <p>
Here's the dump from 22:10 last night:
</p>
<p>
URL: <a class="ext-link" href="http://ckan.net/api/search/resource?all_fields=1&amp;offset=0&amp;limit=20&amp;qjson=%3Cspan%20class="><span class="icon">​</span>http://ckan.net/api/search/resource?all_fields=1&amp;offset=0&amp;limit=20&amp;qjson=%3Cspan%20class=</a>
Module weberror.errormiddleware:162 in <span class="underline">call</span>
&lt;&lt;              <span class="underline">traceback_supplement</span> = Supplement, self, environ
</p>
<blockquote>
<p>
sr_checker = <a class="missing wiki">ResponseStartChecker?</a>(start_response)
app_iter = self.application(environ, sr_checker)
return self.make_catching_iter(app_iter, environ, sr_checker)
</p>
</blockquote>
<blockquote>
<p>
except:
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
app_iter = self.application(environ, sr_checker)
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module beaker.middleware:73 in <span class="underline">call</span>
&lt;&lt;                                                     self.cache_manager)
</p>
<blockquote>
<p>
environ[self.environ_key] = self.cache_manager
return self.app(environ, start_response)
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
return self.app(environ, start_response)
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module beaker.middleware:152 in <span class="underline">call</span>
&lt;&lt;                          headers.append(('Set-cookie', cookie))
</p>
<blockquote>
<p>
return start_response(status, headers, exc_info)
</p>
</blockquote>
<blockquote>
<p>
return self.wrap_app(environ, session_start_response)
</p>
</blockquote>
<p>
           
</p>
<blockquote>
<p>
def _get_session(self):
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
return self.wrap_app(environ, session_start_response)
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module routes.middleware:130 in <span class="underline">call</span>
&lt;&lt;                  environ<a class="missing wiki">SCRIPT_NAME?</a> = environ<a class="missing wiki">SCRIPT_NAME?</a>[:-1]
               
</p>
<blockquote>
<p>
response = self.app(environ, start_response)
</p>
</blockquote>
<p>
               
</p>
<blockquote>
<p>
# Wrapped in try as in rare cases the attribute will be gone already
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
response = self.app(environ, start_response)
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module pylons.wsgiapp:125 in <span class="underline">call</span>
&lt;&lt;          
</p>
<blockquote>
<p>
controller = self.resolve(environ, start_response)
response = self.dispatch(controller, environ, start_response)
</p>
</blockquote>
<p>
               
</p>
<blockquote>
<p>
if 'paste.testing_variables' in environ and hasattr(response,
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
response = self.dispatch(controller, environ, start_response)
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module pylons.wsgiapp:324 in dispatch
&lt;&lt;          if log_debug:
</p>
<blockquote>
<p>
log.debug("Calling controller class with WSGI interface")
</p>
</blockquote>
<blockquote>
<p>
return controller(environ, start_response)
</p>
</blockquote>
<p>
           
</p>
<blockquote>
<p>
def load_test_env(self, environ):
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
return controller(environ, start_response)
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module ckan.lib.base:73 in <span class="underline">call</span>
&lt;&lt;          # available in environ<a class="missing wiki">pylons.routes_dict?</a>    
</p>
<blockquote>
<p>
try:
</p>
<blockquote>
<p>
return WSGIController.<span class="underline">call</span>(self, environ, start_response)
</p>
</blockquote>
<p>
finally:
</p>
<blockquote>
<p>
model.Session.remove()
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
return WSGIController.<span class="underline">call</span>(self, environ, start_response)
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module pylons.controllers.core:221 in <span class="underline">call</span>
&lt;&lt;                  return response(environ, self.start_response)
               
</p>
<blockquote>
<p>
response = self._dispatch_call()
if not start_response_called:
</p>
<blockquote>
<p>
self.start_response = start_response
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
response = self._dispatch_call()
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module pylons.controllers.core:172 in _dispatch_call
&lt;&lt;              req.environ<a class="missing wiki">pylons.action_method?</a> = func
                   
</p>
<blockquote>
<p>
response = self._inspect_call(func)
</p>
</blockquote>
<blockquote>
<p>
else:
</p>
<blockquote>
<p>
if log_debug:
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
response = self._inspect_call(func)
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module pylons.controllers.core:107 in _inspect_call
&lt;&lt;                        func.<span class="underline">name</span>, args)
</p>
<blockquote>
<p>
try:
</p>
<blockquote>
<p>
result = self._perform_call(func, args)
</p>
</blockquote>
<p>
except HTTPException, httpe:
</p>
<blockquote>
<p>
if log_debug:
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
result = self._perform_call(func, args)
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module pylons.controllers.core:60 in _perform_call
&lt;&lt;          """Hide the traceback for everything above this method"""
</p>
<blockquote>
<p>
<span class="underline">traceback_hide</span> = 'before_and_this'
return func(<strong>args)
</strong></p>
</blockquote>
<p>
           
</p>
<blockquote>
<p>
def _inspect_call(self, func):
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
return func(<strong>args)
</strong></p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module ckan.controllers.rest:400 in search
&lt;&lt;                      response.status_int = 400
</p>
<blockquote>
<p>
return gettext('Blank qjson parameter')
</p>
</blockquote>
<blockquote>
<p>
params = json.loads(request.params<a class="missing wiki">qjson?</a>)
</p>
</blockquote>
<blockquote>
<p>
elif request.params.values() and request.params.values() != [u<em>] and request.params.values() != [u'1']:
</em></p>
<blockquote>
<p>
params = request.params
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
params = json.loads(request.params<a class="missing wiki">qjson?</a>)
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module simplejson:384 in loads
&lt;&lt;              parse_constant is None and object_pairs_hook is None
</p>
<blockquote>
<p>
and not use_decimal and not kw):
</p>
</blockquote>
<blockquote>
<p>
return _default_decoder.decode(s)
</p>
</blockquote>
<blockquote>
<p>
if cls is None:
</p>
<blockquote>
<p>
cls = JSONDecoder
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
return _default_decoder.decode(s)
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module simplejson.decoder:402 in decode
&lt;&lt;          """
</p>
<blockquote>
<p>
obj, end = self.raw_decode(s, idx=_w(s, 0).end())
end = _w(s, end).end()
if end != len(s):
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
obj, end = self.raw_decode(s, idx=_w(s, 0).end())
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
Module simplejson.decoder:420 in raw_decode
&lt;&lt;              obj, end = self.scan_once(s, idx)
</p>
<blockquote>
<p>
except <a class="missing wiki">StopIteration?</a>:
</p>
<blockquote>
<p>
raise JSONDecodeError("No JSON object could be decoded", s, idx)
</p>
</blockquote>
<p>
return obj, end
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
raise JSONDecodeError("No JSON object could be decoded", s, idx)
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>
JSONDecodeError: No JSON object could be decoded: line 1 column 0 (char 0)
CGI Variables
DOCUMENT_ROOT        '/htdocs'
GATEWAY_INTERFACE        'CGI/1.1'
HTTP_ACCEPT        'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8, application/json'
HTTP_ACCEPT_CHARSET        'ISO-8859-1,utf-8;q=0.7,*;q=0.7'
HTTP_ACCEPT_ENCODING        'gzip,deflate'
HTTP_ACCEPT_LANGUAGE        'en-us,en;q=0.5'
HTTP_CONNECTION        'keep-alive'
HTTP_COOKIE        '<span class="underline">utma=27730403.1245320310.1281386803.1281386803.1282164955.2; </span>utmz=27730403.1282164955.2.2.utmcsr=jira|utmccn=(referral)|utmcmd=referral|utmcct=/browse/PLATFORM-892; <span class="underline">utmb=27730403.3.10.1282164955; </span>utmc=27730403'
HTTP_HOST        'ckan.net'
HTTP_KEEP_ALIVE        '300'
HTTP_REFERER        '<a class="ext-link" href="http://jira/browse/PLATFORM-892"><span class="icon">​</span>http://jira/browse/PLATFORM-892</a>'
HTTP_USER_AGENT        'Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.1.7) Gecko/20091221 Firefox/3.5.7'
PATH        '/usr/local/bin:/usr/bin:/bin'
PATH_INFO        '/api/search/resource'
PATH_TRANSLATED        '/home/okfn/var/srvc/ckan.net/pyenv/bin/ckan.net.py/api/search/resource'
QUERY_STRING        'all_fields=1&amp;offset=0&amp;limit=20&amp;qjson=%3Cspan%20class='
REMOTE_ADDR        '64.235.97.218'
REMOTE_PORT        '20720'
REQUEST_METHOD        'GET'
REQUEST_URI        '/api/search/resource?all_fields=1&amp;offset=0&amp;limit=20&amp;qjson=%3Cspan%20class='
SCRIPT_FILENAME        '/home/okfn/var/srvc/ckan.net/pyenv/bin/ckan.net.py'
SCRIPT_URI        '<a class="ext-link" href="http://ckan.net/api/search/resource"><span class="icon">​</span>http://ckan.net/api/search/resource</a>'
SCRIPT_URL        '/api/search/resource'
SERVER_ADDR        '10.226.226.118'
SERVER_ADMIN        '[no address given]'
SERVER_NAME        'ckan.net'
SERVER_PORT        '80'
SERVER_PROTOCOL        'HTTP/1.1'
SERVER_SIGNATURE        '&lt;address&gt;Apache/2.2.9 (Debian) mod_wsgi/2.5 Python/2.5.2 Server at ckan.net Port 80&lt;/address&gt;\n'
SERVER_SOFTWARE        'Apache/2.2.9 (Debian) mod_wsgi/2.5 Python/2.5.2'
WSGI Variables
application        &lt;beaker.middleware.<a class="missing wiki">CacheMiddleware?</a> object at 0xa1c13ec&gt;
beaker.cache        &lt;beaker.cache.<a class="missing wiki">CacheManager?</a> object at 0xa1c142c&gt;
beaker.get_session        &lt;bound method <a class="missing wiki">SessionMiddleware?</a>._get_session of &lt;beaker.middleware.<a class="missing wiki">SessionMiddleware?</a> object at 0xa1c12ac&gt;&gt;
beaker.session        {'_accessed_time': 1282165818.0880959, '_creation_time': 1282165818.0880959}
mod_wsgi.application_group        'ckan.net|'
mod_wsgi.callable_object        'application'
mod_wsgi.listener_host        <em>
mod_wsgi.listener_port        '80'
mod_wsgi.process_group        </em>
mod_wsgi.reload_mechanism        '0'
mod_wsgi.script_reloading        '1'
mod_wsgi.version        (2, 5)
paste.cookies        (&lt;SimpleCookie: __utma='27730403.1245320310.1281386803.1281386803.1282164955.2' __utmb='27730403.3.10.1282164955' __utmc='27730403' __utmz='27730403.1282164955.2.2.utmcsr=jira|utmccn=(referral)|utmcmd=referral|utmcct=/browse/PLATFORM-892'&gt;, '<span class="underline">utma=27730403.1245320310.1281386803.1281386803.1282164955.2; </span>utmz=27730403.1282164955.2.2.utmcsr=jira|utmccn=(referral)|utmcmd=referral|utmcct=/browse/PLATFORM-892; <span class="underline">utmb=27730403.3.10.1282164955; </span>utmc=27730403')
paste.parsed_querystring        ([('all_fields', '1'), ('offset', '0'), ('limit', '20'), ('qjson', '&lt;span class=')], 'all_fields=1&amp;offset=0&amp;limit=20&amp;qjson=%3Cspan%20class=')
paste.registry        &lt;paste.registry.Registry object at 0x130ed84c&gt;
paste.throw_errors        True
pylons.action_method        &lt;bound method <a class="missing wiki">RestController?</a>.search of &lt;ckan.controllers.rest.<a class="missing wiki">RestController?</a> object at 0xe9bbe0c&gt;&gt;
pylons.controller        &lt;ckan.controllers.rest.<a class="missing wiki">RestController?</a> object at 0xe9bbe0c&gt;
pylons.environ_config        {'session': 'beaker.session', 'cache': 'beaker.cache'}
pylons.pylons        &lt;pylons.util.<a class="missing wiki">PylonsContext?</a> object at 0xe9bbe8c&gt;
pylons.routes_dict        {'action': u'search', 'controller': u'rest', 'register': u'resource'}
repoze.who.logger        &lt;logging.Logger instance at 0xa3cb0cc&gt;
repoze.who.plugins        {'openid': &lt;<a class="missing wiki">OpenIdIdentificationPlugin?</a> 170067148&gt;, 'auth_tkt': &lt;<a class="missing wiki">AuthTktCookiePlugin?</a> 171739788&gt;}
routes.route        &lt;routes.route.Route object at 0xa102fac&gt;
routes.url        &lt;routes.util.URLGenerator object at 0x13a5a3cc&gt;
webob._parsed_query_vars        (GET([('all_fields', '1'), ('offset', '0'), ('limit', '20'), ('qjson', '&lt;span class=')]), 'all_fields=1&amp;offset=0&amp;limit=20&amp;qjson=%3Cspan%20class=')
webob.adhoc_attrs        {'language': 'en-us'}
wsgi process        'Multi process AND threads (?)'
wsgi.file_wrapper        &lt;built-in method file_wrapper of mod_wsgi.Adapter object at 0x12f53530&gt;
wsgiorg.routing_args        (&lt;routes.util.URLGenerator object at 0x13a5a3cc&gt;, {'action': u'search', 'controller': u'rest', 'register': u'resource'})
</p>

                            
                          </td>
                          <td class="PosixTime">1282206959000000
                          </td>
                          <td class="ModifiedTime">1288003983000000
                          </td>
              </tr>
          </tbody>
      </table>
      <div class="paging">
    <span class="previous">
      <a href="22%3Fsort=reporter&amp;asc=1&amp;page=3.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=1.html" title="Page 1">1</a>
      </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=2.html" title="Page 2">2</a>
      </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=3.html" title="Page 3">3</a>
      </span>
      <span>
        <span class="current">4</span>
      </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=5.html" title="Page 5">5</a>
      </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=6.html" title="Page 6">6</a>
      </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=7.html" title="Page 7">7</a>
      </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=8.html" title="Page 8">8</a>
      </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=9.html" title="Page 9">9</a>
      </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=10.html" title="Page 10">10</a>
      </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=11.html" title="Page 11">11</a>
      </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=12.html" title="Page 12">12</a>
      </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=13.html" title="Page 13">13</a>
      </span>
      <span>
        <a href="22%3Fsort=reporter&amp;asc=1&amp;page=14.html" title="Page 14">14</a>
      </span>
    <span class="next">
      <a href="22%3Fsort=reporter&amp;asc=1&amp;page=5.html" title="Next Page">→</a>
    </span>
</div>
      <div id="help"><strong>Note:</strong>
        See <a href="../wiki/TracReports.html">TracReports</a> for help on using and creating reports.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="22%3Fsort=reporter&amp;asc=1&amp;format=rss" class="rss">RSS Feed</a>
        </li><li>
          <a rel="nofollow" href="22%3Fsort=reporter&amp;asc=1&amp;format=csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="22%3Fsort=reporter&amp;asc=1&amp;format=tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="../report%3Fid=22&amp;format=sql">SQL Query</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.3</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>