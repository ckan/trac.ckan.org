<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      {23} Trac comments – CKAN
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">window.location.hash = window.location.hash;</script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="23%3Fsort=newvalue&amp;asc=0&amp;format=rss" type="application/rss+xml" class="rss" title="RSS Feed" /><link rel="alternate" href="23%3Fsort=newvalue&amp;asc=0&amp;format=csv" type="text/plain" title="Comma-delimited Text" /><link rel="alternate" href="23%3Fsort=newvalue&amp;asc=0&amp;format=tab" type="text/plain" title="Tab-delimited Text" /><link rel="alternate" href="../report%3Fid=23&amp;format=sql" type="text/plain" title="SQL Query" />
        <link rel="up" href="../report.html" title="Available Reports" />
        <link rel="next" href="23%3Fsort=newvalue&amp;asc=0&amp;page=34.html" title="Next Page" />
        <link rel="start" href="../wiki.1.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/report.css" type="text/css" />
        <link rel="prev" href="23%3Fsort=newvalue&amp;asc=0&amp;page=32.html" title="Previous Page" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search CKAN" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://ckan.org/"><img src="http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png" alt="CKAN Trac" height="70" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../login.html">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li><a href="../about.html">About Trac</a></li><li class="last"><a href="../register.html">Register</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li><a href="../search.html">Search</a></li><li class="last"><a href="../wiki.1.html">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="../report.html">Available Reports</a></li><li class="last"><a href="../query.html">Custom Query</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="report">
      <h1>{23} Trac comments
        <span class="numrows">(3729 matches)</span>
      </h1>
      <form method="get" action="23%3Fsort=newvalue&amp;asc=0&amp;page=33.html">
        <div id="prefs">
          <div>
            <label>
              Max items per page
              <input type="text" name="max" size="10" value="100" />
            </label>
          </div>
          <div class="buttons">
            <input type="submit" value="Update" />
          </div>
        </div>
      </form>
      <div id="description">
        <p>
<a class="ext-link" href="https://github.com/roskakori/tratihubis/blob/master/query_comments.sql"><span class="icon">​</span>https://github.com/roskakori/tratihubis/blob/master/query_comments.sql</a>
</p>

      </div>
      <div class="buttons">
      </div>
      <h2 class="report-result">
        Results <span class="numresults">(3201 - 3300 of 3729)</span>
      </h2>
      <div class="paging">
    <span class="previous">
      <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=32.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=23.html" title="Page 23">23</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=24.html" title="Page 24">24</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=25.html" title="Page 25">25</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=26.html" title="Page 26">26</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=27.html" title="Page 27">27</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=28.html" title="Page 28">28</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=29.html" title="Page 29">29</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=30.html" title="Page 30">30</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=31.html" title="Page 31">31</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=32.html" title="Page 32">32</a>
      </span>
      <span>
        <span class="current">33</span>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=34.html" title="Page 34">34</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=35.html" title="Page 35">35</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=36.html" title="Page 36">36</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=37.html" title="Page 37">37</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=38.html" title="Page 38">38</a>
      </span>
    <span class="next">
      <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=34.html" title="Next Page">→</a>
    </span>
</div>
      <table class="listing tickets">
          <thead>
        <tr class="trac-columns">
          <th>
            <a href="23%3Fsort=ticket&amp;asc=1&amp;page=33.html">
              Ticket
            </a>
          </th><th>
            <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=33.html">
              Posixtime
            </a>
          </th><th>
            <a href="23%3Fsort=author&amp;asc=1&amp;page=33.html">
              Author
            </a>
          </th><th colspan="100" class="desc">
            <a href="23%3Fsort=newvalue&amp;asc=1&amp;page=33.html">
              Newvalue
            </a>
          </th>
        </tr>
          </thead>
          <tbody>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2787.html">#2787</a>
                          </td>
                          <td class="PosixTime">1344543473000000
                          </td>
                          <td class="author">toby
                          </td>
                          <td class="newvalue">Closing as too general and part of any plugin update
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2527.html">#2527</a>
                          </td>
                          <td class="PosixTime">1340116130000000
                          </td>
                          <td class="author">aron.carroll
                          </td>
                          <td class="newvalue">Closing as this has been superceded by #2553
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1462.html">#1462</a>
                          </td>
                          <td class="PosixTime">1326284357000000
                          </td>
                          <td class="author">amercader
                          </td>
                          <td class="newvalue">Closing as this has been fixed and deployed.

@thejimmyg Not sure if there are still issues regarding packaging. Feel free to create a specific ticket for this if we need to work on it.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1516.html">#1516</a>
                          </td>
                          <td class="PosixTime">1323360020000000
                          </td>
                          <td class="author">amercader
                          </td>
                          <td class="newvalue">Closing as the main Solr servers are ready to support different Solr schemas. I.e they have two different cores:

* http://&lt;server&gt;/solr/ckan-schema-1.2
* http://&lt;server&gt;/solr/ckan-schema-1.3

to which CKAN instances can point to.

The CKAN instances that have not been updated (the ones under s004) are pointing to a Solr core with an old version of the schema, so they can wait until upgraded to 1.5.1 to update the solr_url property and rebuild the index.

Data.gov.uk can be dealt with during the next deployment.

It's not clear which Solr server are using the rest of the instances, but they can be updated as necessary when they upgrade their CKAN instance.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1245.html">#1245</a>
                          </td>
                          <td class="PosixTime">1317422640000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Closing as now mostly done and not really a ticket item.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/90.html">#90</a>
                          </td>
                          <td class="PosixTime">1265890334000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Closing as main part done and alternative formats part is now ticket:247
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/455.html">#455</a>
                          </td>
                          <td class="PosixTime">1291637172000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Closing as invalid as not clear what task is and now almost certainly out of date.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/962.html">#962</a>
                          </td>
                          <td class="PosixTime">1301364987000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Closing as have now reworked to:

 * Support plain text previews for many formats (including xml based formats)
 * Try to handle everything else as html with an iframe ...
 * Do not show preview button where not useful
 * Normalize formats for better recognition (e.g. text/csv, application/xls)

See: https://bitbucket.org/okfn/ckanext-datapreview/changeset/c1d672a6c368 and previous.

Also re-updated the dataproxy so it works again (had got out of sync when mistakenly reverted the dataproxy a couple of weeks ago).

Could still do api/sparql (using sparql js wrapper) and handle json (as plain text ...?) but these can be new tickets.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1508.html">#1508</a>
                          </td>
                          <td class="PosixTime">1328000871000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Closing as fixed -- while there are some remaining things to do mentioned here such as wordpresser it is agreed these aren't for the immediate present (and we can open new tickets for theme as and when we need them).
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1568.html">#1568</a>
                          </td>
                          <td class="PosixTime">1325267998000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Closing as duplicate of #1129 and #1141
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/75.html">#75</a>
                          </td>
                          <td class="PosixTime">1296341223000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Closing as duplicate (invalid also):

 * Not sure recording view stats for a given package page is that useful -- so invalid here
 * Resource download is now ticket:937
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1801.html">#1801</a>
                          </td>
                          <td class="PosixTime">1343144718000000
                          </td>
                          <td class="author">amercader
                          </td>
                          <td class="newvalue">Closing as both old and new theme now show password reset links
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/945.html">#945</a>
                          </td>
                          <td class="PosixTime">1325259350000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Closing as all subcomponents now done. (parts of this duplicate the other super ticket #1032). Also move to ckan-v1.6 as that is when last parts were done.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1615.html">#1615</a>
                          </td>
                          <td class="PosixTime">1328888870000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Closing - looks ok to me
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/540.html">#540</a>
                          </td>
                          <td class="PosixTime">1302694845000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Closing - all the suggestions have been implemented: squid instance and cache headers set for high traffic pages.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/245.html">#245</a>
                          </td>
                          <td class="PosixTime">1297066620000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Closed in favour of https://bitbucket.org/okfn/vdm/issue/1/support-for-composite-primary-keys
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/729.html">#729</a>
                          </td>
                          <td class="PosixTime">1288012854000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Closed in cset:a9006fd56450
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/305.html">#305</a>
                          </td>
                          <td class="PosixTime">1272994804000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Closed in cset:8136e7369c0c
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1271.html">#1271</a>
                          </td>
                          <td class="PosixTime">1313753663000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Closed in cset:749cb3a087e3
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/828.html">#828</a>
                          </td>
                          <td class="PosixTime">1290696586000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Closed in cset:66a3efe16ed4
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1074.html">#1074</a>
                          </td>
                          <td class="PosixTime">1314303581000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Closed in cset:18a5b48bbee6. Note the templating isn't completely reused but rather uses common methods from _util.html. Likely that a bit more refactoring could be done to share common code but not worth it at present.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2570.html">#2570</a>
                          </td>
                          <td class="PosixTime">1340107841000000
                          </td>
                          <td class="author">aron.carroll
                          </td>
                          <td class="newvalue">Closed in a3939a4
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/422.html">#422</a>
                          </td>
                          <td class="PosixTime">1283165156000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Closed by mistake - task remains.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/253.html">#253</a>
                          </td>
                          <td class="PosixTime">1319709714000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Closed by mistake
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/869.html">#869</a>
                          </td>
                          <td class="PosixTime">1292059662000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Closed by cset:83734b5e251c which implements an IConfigurer interface.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1650.html">#1650</a>
                          </td>
                          <td class="PosixTime">1346670010000000
                          </td>
                          <td class="author">ross
                          </td>
                          <td class="newvalue">Closed as unnecessary now.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2695.html">#2695</a>
                          </td>
                          <td class="PosixTime">1343138217000000
                          </td>
                          <td class="author">aron.carroll
                          </td>
                          <td class="newvalue">Closed as of b661e75. Further improvements can be created as new tickets
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2767.html">#2767</a>
                          </td>
                          <td class="PosixTime">1343645517000000
                          </td>
                          <td class="author">aron.carroll
                          </td>
                          <td class="newvalue">Closed as of 25d7499. All form.select() calls now require a tuple/list in the form.

{{{
options = (
  {"value": "opt1-value", "text": "Option One Text"},
  {"value": "opt2-value", "text": "Option Two Text"}
)
}}
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1109.html">#1109</a>
                          </td>
                          <td class="PosixTime">1303916487000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Close ticket?
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2808.html">#2808</a>
                          </td>
                          <td class="PosixTime">1344944258000000
                          </td>
                          <td class="author">aron.carroll
                          </td>
                          <td class="newvalue">Close in 97d92ba
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2206.html">#2206</a>
                          </td>
                          <td class="PosixTime">1331046486000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Close enough for now. Still have to restyle language drop-down to match template, but will fix when updating the list of languages.

Also still to decide on menu styles/locations (for CKAN login and main menu, and ODP main menu).
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2560.html">#2560</a>
                          </td>
                          <td class="PosixTime">1340617540000000
                          </td>
                          <td class="author">aron.carroll
                          </td>
                          <td class="newvalue">Clicking "previous" should take you to the last edited resource.
Clicking "previous" should take you to the last edited resource but stage 3 should remain active.
Clicking "previous" should take you to the last edited resource, clicking next should take you to stage three with the same data as when you went back.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2550.html">#2550</a>
                          </td>
                          <td class="PosixTime">1340626589000000
                          </td>
                          <td class="author">ross
                          </td>
                          <td class="newvalue">Clarify
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2552.html">#2552</a>
                          </td>
                          <td class="PosixTime">1340626635000000
                          </td>
                          <td class="author">ross
                          </td>
                          <td class="newvalue">Clarify
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1087.html">#1087</a>
                          </td>
                          <td class="PosixTime">1310134714000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">Child ticket of #954
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1107.html">#1107</a>
                          </td>
                          <td class="PosixTime">1310134646000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">Child ticket of #954
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1041.html">#1041</a>
                          </td>
                          <td class="PosixTime">1310135309000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">Child ticket of #1142
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2937.html">#2937</a>
                          </td>
                          <td class="PosixTime">1348238875000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">Cherry-picked into 1.8
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1504.html">#1504</a>
                          </td>
                          <td class="PosixTime">1324035928000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Cherry picked for 1.5.1.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1425.html">#1425</a>
                          </td>
                          <td class="PosixTime">1319735012000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Cheers for taking this on Tom
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1530.html">#1530</a>
                          </td>
                          <td class="PosixTime">1323283663000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Cheers Lucy. Ok the gap between the name field and its help text is way too big. Zeph, any chance you can take a look?
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2837.html">#2837</a>
                          </td>
                          <td class="PosixTime">1344847463000000
                          </td>
                          <td class="author">aron.carroll
                          </td>
                          <td class="newvalue">Checkboxes created with {{{ form.checkbox() }}} should be styled correctly. Got a link to an example?
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2349.html">#2349</a>
                          </td>
                          <td class="PosixTime">1336555121000000
                          </td>
                          <td class="author">ross
                          </td>
                          <td class="newvalue">Chased Openlink today for update
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1012.html">#1012</a>
                          </td>
                          <td class="PosixTime">1301943096000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Changing this to 'Fixed' and #103 to 'Wont fix' to ensure this feature is noted.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1122.html">#1122</a>
                          </td>
                          <td class="PosixTime">1306747706000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Changing this to "won't fix" just to be clear
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/179.html">#179</a>
                          </td>
                          <td class="PosixTime">1257762996000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Changeset was to solve 'deprecated' messages.

See line 46 ff. of changeset.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/363.html">#363</a>
                          </td>
                          <td class="PosixTime">1291733459000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Changes to user properties aren't linked to a package.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2239.html">#2239</a>
                          </td>
                          <td class="PosixTime">1334581838000000
                          </td>
                          <td class="author">ross
                          </td>
                          <td class="newvalue">Changes to schema/rdf output
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1670.html">#1670</a>
                          </td>
                          <td class="PosixTime">1328519319000000
                          </td>
                          <td class="author">ross
                          </td>
                          <td class="newvalue">Changed to reflect the need to generate documentation
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/979.html">#979</a>
                          </td>
                          <td class="PosixTime">1315221162000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Changed the title back - it was accurate. The comment was because with formalchemy, WUI and API ran off the same 'form' code.

This functionality may already be there with the new stuff, but certainly needs tests.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2255.html">#2255</a>
                          </td>
                          <td class="PosixTime">1332934041000000
                          </td>
                          <td class="author">ross
                          </td>
                          <td class="newvalue">Changed description based on docs of stuff to verify.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/842.html">#842</a>
                          </td>
                          <td class="PosixTime">1296468313000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Change to awaitingtriage as definitely not critical.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/979.html">#979</a>
                          </td>
                          <td class="PosixTime">1314404905000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Change from Edit Resource extras in the API to Edit Resource extras in the WUI as believe we already have API editing and reference to #978 implies this is about the WUI.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/888.html">#888</a>
                          </td>
                          <td class="PosixTime">1294830297000000
                          </td>
                          <td class="author">Stiivi
                          </td>
                          <td class="newvalue">Chages to Data Proxy:
* tests added with configurable list of known URLs

* use brewery for transformations (included reference to brewery framework in a new vendor directory)
* side effect: code to make google find external packages in vendor directory (from now on, all external packages should go there and be referenced from .hgsub if they are mercurial repositories)

* changed response contents: moved from 'headers' to root, renamed 'response' to 'data', added field list as 'fields'
* changed way of registering transformers (now class object is used instead of name)
* added 'encoding' and 'dialect' parameters for CSV
* added optional data audit (parameter 'audit')

Changes: https://bitbucket.org/Stiivi/dataproxy/changeset/fccbdd275be5

Data information: http://databrewery.org/doc/data_quality.html#brewery.dq.FieldStatistics

                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1809.html">#1809</a>
                          </td>
                          <td class="PosixTime">1330528828000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Caught exceptions in QA instead, error message stored as openness_score_reason
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/414.html">#414</a>
                          </td>
                          <td class="PosixTime">1288003770000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Catalogue API went live with caching a couple of weeks ago
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1138.html">#1138</a>
                          </td>
                          <td class="PosixTime">1316965357000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Cannot see this issue any more on default (as deployed on e.g. test).
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/293.html">#293</a>
                          </td>
                          <td class="PosixTime">1271885457000000
                          </td>
                          <td class="author">johnbywater
                          </td>
                          <td class="newvalue">Can't reproduce this exception. Have added tests covering adding, removing and updating resources, and it all seems to work.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2865.html">#2865</a>
                          </td>
                          <td class="PosixTime">1345131215000000
                          </td>
                          <td class="author">ross
                          </td>
                          <td class="newvalue">Can't replicate locally in either master or release-v1.8

/el/ isn't a valid locale, and so the problem is unicode in urls where ckan is trying to generate a 404.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2209.html">#2209</a>
                          </td>
                          <td class="PosixTime">1331551393000000
                          </td>
                          <td class="author">ross
                          </td>
                          <td class="newvalue">Can't edit comments .. so

Current thinking is that option 4 is a default (as per ckanext-rdf) rdf output that is generated not in code (as currently) but using a genshi xml template to read the package into an RDF format (as if it were HTML). This would then be overrideable so that for ecportal where the format of the RDF is different (change of vocabs etc) we can just point the config to a new template.

Pros:

  Easy to implement 

  Easy to use 

  Not hard-coded as currently 

  Fast execution


Cons:

  Requires knowledge of required RDF output if default is not useful
  RDF and not any of the other formats yet. 
  Only works with package/resource/tags unless more work is done

                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1649.html">#1649</a>
                          </td>
                          <td class="PosixTime">1331550598000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Can you elucidate on this template idea? I was thiking we want specification/configto be in the form of mappings (e.g. field X is really type Y etc rather than a specific piece of rdf/xml or n3) though perhaps that makes more sense. Let's centralize discussion on this in #2209.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1002.html">#1002</a>
                          </td>
                          <td class="PosixTime">1311675754000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Can you also delete the "paster changes" in ckan/lib/cli with this removal?
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1575.html">#1575</a>
                          </td>
                          <td class="PosixTime">1325866330000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Can we also lose the Canada government group. Let's just have have the Canada group plus a tag for gov  (e.g. just gov or gov-canada or canada-gov or ...)
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/537.html">#537</a>
                          </td>
                          <td class="PosixTime">1288023097000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Can this ticket be updated? Were any tasks listed here done? Anything remaining still planned?
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/31.html">#31</a>
                          </td>
                          <td class="PosixTime">1185472236000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Can get this functionality via Notes section of package. Might want to reopen in future if specifically need something 'comment-like' rather than 'text-wiki-like' but for time being what we have is fine.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2323.html">#2323</a>
                          </td>
                          <td class="PosixTime">1340188400000000
                          </td>
                          <td class="author">ross
                          </td>
                          <td class="newvalue">Can create a new ticket if the requirements change.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2322.html">#2322</a>
                          </td>
                          <td class="PosixTime">1344086640000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Can I confirm this is in v1.8 ...
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/283.html">#283</a>
                          </td>
                          <td class="PosixTime">1270715817000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Can I *strongly* suggest we just use the existing perfectly-good-system for flagging stuff called "tags" :)

I suggest we have agree in the community a standard set of "meta" tags for this kind of stuff. E.g. i'm already using the "duplicate" tag for marking duplicates (I also add in notes the link to duplicate package but that's optional). So I suggest we:

  1. Create "reserved" tag prefix "meta"
  2. Create following specific tags (suggestions/comments welcome):

  * meta.duplicate - duplicate of another package. If possible
indicate in notes or an extras field (to be decided) what it is
duplicate of
  * meta.spam

Editors can then just visit http://ckan.net/tag/read/meta.spam and
work through list of packages there.

If "push" notifications are required as well as "pull" then I suggest this be put in an external service (e.g. rss2email) rather than integrated into CKAN core.

                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/318.html">#318</a>
                          </td>
                          <td class="PosixTime">1283179768000000
                          </td>
                          <td class="author">wwaites
                          </td>
                          <td class="newvalue">CO may not realise the implications when they said it was low priority. The implication of this lack of validation is that it is impossible to generate valid URIs in the RDF which means it cannot be imported by Talis. So until there is a solution to this, no RDF catalog.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1692.html">#1692</a>
                          </td>
                          <td class="PosixTime">1329242042000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">CMAP are really keen on having this for groups
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1692.html">#1692</a>
                          </td>
                          <td class="PosixTime">1329242134000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">CMAP also interested in having some custom CSS for a group, but that is perhaps another ticket.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/331.html">#331</a>
                          </td>
                          <td class="PosixTime">1282833125000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">CKAN timestamps should not be in a timezone, since when the clock goes back, it could cause problems for vdm.

But there may be cases when CKAN is running on a machine
that needs the clock set for a particular country (say for a front-end
running on the same machine), and so vdm should be changed to create
timestamps using UTC specifically (rather than add a timezone, since a
mixture of timezones won't sort). And when we display it (or reply to
a request) we convert it to the local timezone, as suggested in the description.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/692.html">#692</a>
                          </td>
                          <td class="PosixTime">1294247841000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">CKAN doesn't need to implement this, Drupal does. Incidentally, the initial version is implemented on UAT anyway.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1111.html">#1111</a>
                          </td>
                          <td class="PosixTime">1304935139000000
                          </td>
                          <td class="author">lucychambers
                          </td>
                          <td class="newvalue">CKAN FAQ now complete (Sections 1,2,5,6 - needs uploading onto site): http://ckan.okfnpad.org/FAQ

At CKAN Community Meetup it was decided that Sections 3 and 4 would form a separate contributor's manual.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1699.html">#1699</a>
                          </td>
                          <td class="PosixTime">1327425070000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">CKAN 1.5.1 with EC Portal extension has been deployed to test server.

Full setup docs are in the ckanext-ecportal extension.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/405.html">#405</a>
                          </td>
                          <td class="PosixTime">1297211204000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">By mime-type and all resources done in cset:7bd693614c80 and previous (with other improvements to download system).
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2566.html">#2566</a>
                          </td>
                          <td class="PosixTime">1340119694000000
                          </td>
                          <td class="author">aron.carroll
                          </td>
                          <td class="newvalue">Buttons are added in d15cf6f. Toby could you hook these up with appropriate routes.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/144.html">#144</a>
                          </td>
                          <td class="PosixTime">1257533957000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">But we don't record views ...
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/364.html">#364</a>
                          </td>
                          <td class="PosixTime">1281451132000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">But this works with the new SOLR search now - close?
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1737.html">#1737</a>
                          </td>
                          <td class="PosixTime">1340011203000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">But not v1.7.1? (When is v1.8 due?).

Also for the record a couple of things I found when trying to use this:

 * No support for facet sort order or facet limit afaict ...
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1152.html">#1152</a>
                          </td>
                          <td class="PosixTime">1307352165000000
                          </td>
                          <td class="author">amercader
                          </td>
                          <td class="newvalue">Bumping to ckan-v1.5-sprint-3 and updating the CC email addresses so people actually get any updates.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2405.html">#2405</a>
                          </td>
                          <td class="PosixTime">1340097846000000
                          </td>
                          <td class="author">icmurray
                          </td>
                          <td class="newvalue">Bump: Questions for client team above...
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/198.html">#198</a>
                          </td>
                          <td class="PosixTime">1264688525000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Bulk of work for this is in cset:d213e942245b
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/982.html">#982</a>
                          </td>
                          <td class="PosixTime">1298887980000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Buildbot scripts now fixed.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/662.html">#662</a>
                          </td>
                          <td class="PosixTime">1301076443000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Bug: license_id field is assigned the value of the 'license' parameter.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1546.html">#1546</a>
                          </td>
                          <td class="PosixTime">1324034396000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Broken since introduction in CKAN 1.3. Fixed in CKAN 1.5.1.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1140.html">#1140</a>
                          </td>
                          <td class="PosixTime">1312537257000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Broken since CKAN v1.1. I have added this fix to v1.4.2 and v1.4.3 releases.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1293.html">#1293</a>
                          </td>
                          <td class="PosixTime">1314905799000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Branch: feature-1293-rename-package-to-dataset

Routing and test editing should be finished (all tests passings). Have not added test for redirect yet.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2771.html">#2771</a>
                          </td>
                          <td class="PosixTime">1350303564000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">Branch is here, but not finished yet: https://github.com/okfn/ckan/tree/2750-add-docs-and-examples-for-idatasetform-and-igroupform
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1515.html">#1515</a>
                          </td>
                          <td class="PosixTime">1323106050000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">Branch for this feature: https://github.com/seanh/ckan/compare/master...feature-1515-activity-streams
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1650.html">#1650</a>
                          </td>
                          <td class="PosixTime">1338206684000000
                          </td>
                          <td class="author">ross
                          </td>
                          <td class="newvalue">Branch exists for #1650
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/325.html">#325</a>
                          </td>
                          <td class="PosixTime">1278599979000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Both sending and received tickets closed.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1180.html">#1180</a>
                          </td>
                          <td class="PosixTime">1307544223000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Both issues solved using a whitelist on anchor tags. 

Second issue was a link with unicode expression of the quote. e.g. &lt;a href=\u201dsomelink\u201d&gt;somelink&lt;/a&gt;
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1156.html">#1156</a>
                          </td>
                          <td class="PosixTime">1306855111000000
                          </td>
                          <td class="author">pudo
                          </td>
                          <td class="newvalue">Both are now implemented but may need further work to adhere to developing conventions wrt to location etc.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1600.html">#1600</a>
                          </td>
                          <td class="PosixTime">1327335778000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Booted: https://github.com/okfn/help.thedatahub.org
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2251.html">#2251</a>
                          </td>
                          <td class="PosixTime">1332331650000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Big +1: everyone wants to know page views. Would like detail of how this goes into interface. Downloads already being tracked. Also isn't this just an extension to ckanext-googleanalytics.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2577.html">#2577</a>
                          </td>
                          <td class="PosixTime">1346669735000000
                          </td>
                          <td class="author">ross
                          </td>
                          <td class="newvalue">Better info was provided by jmckinney
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/868.html">#868</a>
                          </td>
                          <td class="PosixTime">1292890251000000
                          </td>
                          <td class="author">kindly@gmail.com
                          </td>
                          <td class="newvalue">Below is a patch to make the tests run at least 2.5 times faster (about 15 mins on my old laptop).  Instead of dropping the tables each time, it just deletes everything in them, using a low level connection.  All the tests pass this way. It's a surprisingly clean patch.  Here are a few points concerning it.

 * I tested truncating the tables but it's slower. If there are any big tables in the tests this way is the fastest (faster than drop).
 * The sequences (id columns) will start from where they left off.
 * I also investigated making postgres template database and cloning it, but the complication was not worth it. 
 * sqlalchemy iterates the tables in reverse dependency order, which make this possible.
 * I targeted rebuild_db as that what most of the tests I saw where using, however I have not checked all tests to see if they all are. 
 * There is a slight hack on the repo object to make sure it knows that "clean_db" is coming from the tests.
 * I refactored init_db for code reuse.
 * I have not done a version check. sqlalchemy &gt;= 0.5 do this in a different way as outlined in the comments.


{{{
diff -r 7f2239b0f743 ckan/model/__init__.py
--- a/ckan/model/__init__.py	Fri Dec 17 10:34:47 2010 +0000
+++ b/ckan/model/__init__.py	Mon Dec 20 23:25:04 2010 +0000
@@ -41,6 +41,9 @@
 
     def init_db(self):
         super(Repository, self).init_db()
+        self.add_initial_data()
+
+    def add_initial_data(self):
         # assume if this exists everything else does too
         if not User.by_name(PSEUDO_USER__VISITOR):
             visitor = User(name=PSEUDO_USER__VISITOR)
@@ -69,6 +72,26 @@
         import migrate.versioning.api as mig
         version = mig.version(self.migrate_repository)
         return version
+    
+    def clean_db(self):
+        # delete only added for tests
+        if hasattr(self, "delete_only") and self.delete_only:
+            self.delete_all()
+        else:
+            super(Repository, self).clean_db()
+    
+    def delete_all(self):
+        
+        self.session.remove()
+        ## use raw connection for performance
+        connection = self.session.connection()
+        ## sqla sorts in reverse dependancy order.
+        ## in &gt;= 0.5 use reversed(metadata.sorted_tables()) instead of table_iterator
+        for table in self.metadata.table_iterator():
+            connection.execute('delete from "%s"' % table.name)
+        self.session.commit()
+
+        self.add_initial_data()
 
     def setup_migration_version_control(self, version=None):
         import migrate.versioning.exceptions
diff -r 7f2239b0f743 ckan/tests/__init__.py
--- a/ckan/tests/__init__.py	Fri Dec 17 10:34:47 2010 +0000
+++ b/ckan/tests/__init__.py	Mon Dec 20 23:25:04 2010 +0000
@@ -55,6 +55,7 @@
 
 import ckan.model as model
 model.repo.rebuild_db()
+model.repo.delete_only = True
 
 class BaseCase(object):
}}}

 
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1788.html">#1788</a>
                          </td>
                          <td class="PosixTime">1330111162000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Believe most of these are resolved by https://github.com/okfn/ckan/commit/27f4fc776b9199621d259749cf20787328df101f

@zephod: could you check again and see if anything remains?
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1658.html">#1658</a>
                          </td>
                          <td class="PosixTime">1338206622000000
                          </td>
                          <td class="author">ross
                          </td>
                          <td class="newvalue">Being done elsewhere
                          </td>
              </tr>
          </tbody>
      </table>
      <div class="paging">
    <span class="previous">
      <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=32.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=23.html" title="Page 23">23</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=24.html" title="Page 24">24</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=25.html" title="Page 25">25</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=26.html" title="Page 26">26</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=27.html" title="Page 27">27</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=28.html" title="Page 28">28</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=29.html" title="Page 29">29</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=30.html" title="Page 30">30</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=31.html" title="Page 31">31</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=32.html" title="Page 32">32</a>
      </span>
      <span>
        <span class="current">33</span>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=34.html" title="Page 34">34</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=35.html" title="Page 35">35</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=36.html" title="Page 36">36</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=37.html" title="Page 37">37</a>
      </span>
      <span>
        <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=38.html" title="Page 38">38</a>
      </span>
    <span class="next">
      <a href="23%3Fsort=newvalue&amp;asc=0&amp;page=34.html" title="Next Page">→</a>
    </span>
</div>
      <div id="help"><strong>Note:</strong>
        See <a href="../wiki/TracReports.html">TracReports</a> for help on using and creating reports.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="23%3Fsort=newvalue&amp;asc=0&amp;format=rss" class="rss">RSS Feed</a>
        </li><li>
          <a rel="nofollow" href="23%3Fsort=newvalue&amp;asc=0&amp;format=csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="23%3Fsort=newvalue&amp;asc=0&amp;format=tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="../report%3Fid=23&amp;format=sql">SQL Query</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.3</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>