<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      {23} Trac comments – CKAN
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">window.location.hash = window.location.hash;</script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="23%3Fsort=ticket&amp;asc=0&amp;format=rss" type="application/rss+xml" class="rss" title="RSS Feed" /><link rel="alternate" href="23%3Fsort=ticket&amp;asc=0&amp;format=csv" type="text/plain" title="Comma-delimited Text" /><link rel="alternate" href="23%3Fsort=ticket&amp;asc=0&amp;format=tab" type="text/plain" title="Tab-delimited Text" /><link rel="alternate" href="../report%3Fid=23&amp;format=sql" type="text/plain" title="SQL Query" />
        <link rel="up" href="../report.html" title="Available Reports" />
        <link rel="next" href="23%3Fsort=ticket&amp;asc=0&amp;page=15.html" title="Next Page" />
        <link rel="start" href="../wiki.1.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/report.css" type="text/css" />
        <link rel="prev" href="23%3Fsort=ticket&amp;asc=0&amp;page=13.html" title="Previous Page" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search CKAN" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://ckan.org/"><img src="http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png" alt="CKAN Trac" height="70" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../login.html">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li><a href="../about.html">About Trac</a></li><li class="last"><a href="../register.html">Register</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li><a href="../search.html">Search</a></li><li class="last"><a href="../wiki.1.html">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="../report.html">Available Reports</a></li><li class="last"><a href="../query.html">Custom Query</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="report">
      <h1>{23} Trac comments
        <span class="numrows">(3729 matches)</span>
      </h1>
      <form method="get" action="23%3Fsort=ticket&amp;asc=0&amp;page=14.html">
        <div id="prefs">
          <div>
            <label>
              Max items per page
              <input type="text" name="max" size="10" value="100" />
            </label>
          </div>
          <div class="buttons">
            <input type="submit" value="Update" />
          </div>
        </div>
      </form>
      <div id="description">
        <p>
<a class="ext-link" href="https://github.com/roskakori/tratihubis/blob/master/query_comments.sql"><span class="icon">​</span>https://github.com/roskakori/tratihubis/blob/master/query_comments.sql</a>
</p>

      </div>
      <div class="buttons">
      </div>
      <h2 class="report-result">
        Results <span class="numresults">(1301 - 1400 of 3729)</span>
      </h2>
      <div class="paging">
    <span class="previous">
      <a href="23%3Fsort=ticket&amp;asc=0&amp;page=13.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=4.html" title="Page 4">4</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=5.html" title="Page 5">5</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=6.html" title="Page 6">6</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=7.html" title="Page 7">7</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=8.html" title="Page 8">8</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=9.html" title="Page 9">9</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=10.html" title="Page 10">10</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=11.html" title="Page 11">11</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=12.html" title="Page 12">12</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=13.html" title="Page 13">13</a>
      </span>
      <span>
        <span class="current">14</span>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=15.html" title="Page 15">15</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=16.html" title="Page 16">16</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=17.html" title="Page 17">17</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=18.html" title="Page 18">18</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=19.html" title="Page 19">19</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=20.html" title="Page 20">20</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=21.html" title="Page 21">21</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=22.html" title="Page 22">22</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=23.html" title="Page 23">23</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=24.html" title="Page 24">24</a>
      </span>
    <span class="next">
      <a href="23%3Fsort=ticket&amp;asc=0&amp;page=15.html" title="Next Page">→</a>
    </span>
</div>
      <table class="listing tickets">
          <thead>
        <tr class="trac-columns">
          <th class="desc">
            <a href="23%3Fsort=ticket&amp;asc=1&amp;page=14.html">
              Ticket
            </a>
          </th><th>
            <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=14.html">
              Posixtime
            </a>
          </th><th>
            <a href="23%3Fsort=author&amp;asc=1&amp;page=14.html">
              Author
            </a>
          </th><th colspan="100">
            <a href="23%3Fsort=newvalue&amp;asc=1&amp;page=14.html">
              Newvalue
            </a>
          </th>
        </tr>
          </thead>
          <tbody>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1444.html">#1444</a>
                          </td>
                          <td class="PosixTime">1340190852000000
                          </td>
                          <td class="author">ross
                          </td>
                          <td class="newvalue">7 months, no activity, dead bug.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1443.html">#1443</a>
                          </td>
                          <td class="PosixTime">1320432511000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed in cset:96b5d9af70a7 for release-v1.5
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1442.html">#1442</a>
                          </td>
                          <td class="PosixTime">1320275623000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed in cset:819a74bd1c03 for release 1.5. Note release 1.5 doesn't have #1381 feature, so you're not supposed to create with groups anyway, but this will be useful if people try it.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1441.html">#1441</a>
                          </td>
                          <td class="PosixTime">1320235062000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed in cset:35542f1c60a2 for release 1.5.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1440.html">#1440</a>
                          </td>
                          <td class="PosixTime">1320235084000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">I've done this. 'db load' now also does 'db upgrade' and 'search-index rebuild'. If you want to debug the load (or don't need the search index, cos it takes ages to do), then you can just do 'db load-only' which does what 'db load' did before.

Changed in cset:9e51df5c496b for 1.5 release.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1439.html">#1439</a>
                          </td>
                          <td class="PosixTime">1325474974000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Moving out of v1.6 (has not super ticket atm and seems of low relative importance -- nice to have but not essential).
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1437.html">#1437</a>
                          </td>
                          <td class="PosixTime">1320173496000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This can be fixed with one line of code, so I'm doing it for release 1.5.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1437.html">#1437</a>
                          </td>
                          <td class="PosixTime">1320173795000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed in cset:5d0bf20a1746 for 1.5. Broken since 1.4.3.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1436.html">#1436</a>
                          </td>
                          <td class="PosixTime">1320230896000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">This also applies to CKAN core
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1436.html">#1436</a>
                          </td>
                          <td class="PosixTime">1320243278000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Fixed in branch feature-1371-task-status-logic-layer, will merge with default after 1.5 release later today.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1435.html">#1435</a>
                          </td>
                          <td class="PosixTime">1320930310000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Interesting. What's the reason to justify the effort?
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1435.html">#1435</a>
                          </td>
                          <td class="PosixTime">1323168783000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">I personally can't see the benefit of switching to a generic paid service when we already have a highly customised and working infrastructure based on buildbot and buildkit - we do testing in VMs as well as continuous integration. 

What is the advantage?

Suggest wont fix?
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1435.html">#1435</a>
                          </td>
                          <td class="PosixTime">1323283538000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">From IRC today:
{{{
&lt;rgrp&gt; dread: btw have a big suggstion -- switch to continuous.io for our buildbot stuff ...
&lt;rgrp&gt; openspending have done this and it's a nice setup ...
&lt;dread&gt; rgrp: interesting - what's better?
&lt;dread&gt; i assume it just starts a script and reports the result?
&lt;rgrp&gt; that's right though also has integration with some bakcens (but we probably don't need that)
&lt;rgrp&gt; the point is we don't need to boot machines, install and configure buildbot etc (though we may now have automated that ...)
&lt;dread&gt; ah, i see, it's in the cloud
&lt;dread&gt; did all that months ago, and don't need to setup the machine any more.
&lt;dread&gt; if we do it again though, I'm all for it
}}}
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1434.html">#1434</a>
                          </td>
                          <td class="PosixTime">1338203960000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">At least for the core extensions, any i18n-able strings should be getting pulled into the ckan.pot file by default.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1434.html">#1434</a>
                          </td>
                          <td class="PosixTime">1341236921000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">Done for the core extensions, pull request: https://github.com/okfn/ckan/pull/47

Perhaps strings from the non-core but officially supported extensions should be added to, but we haven't decided which extensions those are yet, so add another ticket to do that later:

http://trac.ckan.org/ticket/2625
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1433.html">#1433</a>
                          </td>
                          <td class="PosixTime">1320666509000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">Done but waiting to merge after 1.5 release.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1433.html">#1433</a>
                          </td>
                          <td class="PosixTime">1321827123000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">cset: 68c37312ef70349431213465005761edf434d27e
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1433.html">#1433</a>
                          </td>
                          <td class="PosixTime">1324472583000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Has gone into CKAN 1.5.1 release.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1432.html">#1432</a>
                          </td>
                          <td class="PosixTime">1324290164000000
                          </td>
                          <td class="author">ross
                          </td>
                          <td class="newvalue">PhantomJS ( http://www.phantomjs.org/ ) looks like the perfect way to run a JS scraper offline but still within the context of a browser.

Would need to consider how the script would be executed over multi-page datasets, but I'm fairly sure it would be possible to come up with a workable solution.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1431.html">#1431</a>
                          </td>
                          <td class="PosixTime">1320084104000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed in cset:711a68a12d90 for release 1.5.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1430.html">#1430</a>
                          </td>
                          <td class="PosixTime">1320339962000000
                          </td>
                          <td class="author">amercader
                          </td>
                          <td class="newvalue">I've been digging more on this one.
To reproduce it, you just have to edit the same dataset in both sites (production and testing). Just after editing the dataset, the search index will get mixed site_ids.

I checked the jetty logs (see attached files) and just after editing a dataset there are two POST requests to update the index. The request logs don't show the requests params so it's hard to tell what the second call does (it probably is the commit):
https://bitbucket.org/okfn/ckan/src/97e1e90d66d7/ckan/lib/search/index.py#cl-144

In any case, it's clear that the problem may be related with the datasets in the two cores sharing the same id. We are currently using the dataset id as uniqueKey in SOLR, i.e in our schema.xml, we are defining:

{{{
&lt;uniqueKey&gt;id&lt;/uniqueKey&gt;
}}}

According to the SOLR docs:
"If a document is added that contains the same value for this field as an existing document, the old document will be deleted."

http://wiki.apache.org/solr/SchemaXml#The_Unique_Key_Field

I would expect the uniqueKey not to be mixed between cores, but it looks like it happens otherwise. Maybe we should generate a solr_id specific to each document for each site, as described here:
http://wiki.apache.org/solr/UniqueKey#UUID_techniques

(Note that apart from the testing/production site use case, at some point sites involved in harvesting could also end up with datasets with the same id.)

Again, I'm not a SOLR expert, so the problem could be a completely different one!

                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1430.html">#1430</a>
                          </td>
                          <td class="PosixTime">1320431138000000
                          </td>
                          <td class="author">amercader
                          </td>
                          <td class="newvalue">Right, more news on this front.

I've tested a patch which uses a hash of the dataset id and site_id to produce a unique id, and then configured the iati solr cores to use index_id as uniqueKey:
https://bitbucket.org/okfn/ckan/changeset/855f5a452f60

Unfortunately, that did not solve the issue. Again, updating the same dataset in both apps messes things up. In this case, documents don't get replaced, but duplicated, so the new uniqueKey is working.

I am more inclined to think that this is caused by a misconfiguration in the SOLR instance in s046. This is the file where the two cores are configured:

{{{
&lt;solr persistent="true" sharedLib="lib"&gt;
 &lt;cores adminPath="/admin/cores"&gt;
  &lt;core name="testing.iatiregistry.org" instanceDir="testing.iatiregistry.org"&gt;
    &lt;property name="dataDir" value="/usr/share/solr/testing.iatiregistry.org/data" /&gt;
  &lt;/core&gt;
  &lt;core name="iatiregistry.org" instanceDir="iatiregistry.org"&gt;
    &lt;property name="dataDir" value="/usr/share/solr/iatiregistry.org/data" /&gt;
  &lt;/core&gt;
 &lt;/cores&gt;
&lt;/solr&gt;
}}}

Following this paths: /usr/share/solr/iatiregistry.org symlinks to /etc/solr/iatiregistry.org, /etc/solr/iatiregistry.org/data is empty (as well as the testing equivalent).
On the other hand, looking at the admin interface and at some errors that I got it seems that the data folder that both cores are using is /var/lib/solr/data/index 

Maybe that's the problem?
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1430.html">#1430</a>
                          </td>
                          <td class="PosixTime">1320444567000000
                          </td>
                          <td class="author">pudo
                          </td>
                          <td class="newvalue">You probably know this by know but the solrconfig.xml for both points to /var/lib/solr/data (line 71).
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1430.html">#1430</a>
                          </td>
                          <td class="PosixTime">1320660144000000
                          </td>
                          <td class="author">amercader
                          </td>
                          <td class="newvalue">No, I didn't know it. Is this supposed to be the correct setting or should each core have its own data dir?
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1430.html">#1430</a>
                          </td>
                          <td class="PosixTime">1320667523000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">@pudo: brilliant spot. How did that misconfig end up there? Anyway, commenting out and rebooting means we do now have separate cores seems to fix it.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1430.html">#1430</a>
                          </td>
                          <td class="PosixTime">1320670062000000
                          </td>
                          <td class="author">amercader
                          </td>
                          <td class="newvalue">As rgrp mentioned, we commented out the &lt;dataDir&gt; directive in the solrconfig.xml files and rebooted. That made the cores use the data dir they were supposed to (the one in solr.xml) and from the tests I made looks like it finally fixed the issue.



                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1430.html">#1430</a>
                          </td>
                          <td class="PosixTime">1324033923000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed in CKAN 1.5.1. Affects all previous CKANs that use SOLR in these circumstances.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1428.html">#1428</a>
                          </td>
                          <td class="PosixTime">1319804773000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed in a3b0080467d4 for release 1.5
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1427.html">#1427</a>
                          </td>
                          <td class="PosixTime">1319709925000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Done in cset:ec9a9efc2d40 for release 1.5
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1426.html">#1426</a>
                          </td>
                          <td class="PosixTime">1319709236000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Reading http://www.checkupdown.com/status/E409.html I've changed my mind - 409 is ok for an application level validation error.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1425.html">#1425</a>
                          </td>
                          <td class="PosixTime">1319735012000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Cheers for taking this on Tom
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1425.html">#1425</a>
                          </td>
                          <td class="PosixTime">1326821722000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">There is a package_delete logic function to achieve this (and indeed group_delete too).

One of the reasons we haven't advertised it with a button is that anyone with 'edit' privileges can go round deleting packages. It's one thing spotting graffiti, but when you delete packages, it takes a lot of effort to spot nefarious deletions. 

I think should either restrict deleting to sysadmins or have a separate authz-action DELETE-PACKAGE that is not given to the average logged-in user.

I believe Wikipedia does something similar - the average Joe can edit, but can't delete pages.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1425.html">#1425</a>
                          </td>
                          <td class="PosixTime">1327605718000000
                          </td>
                          <td class="author">zephod
                          </td>
                          <td class="newvalue">Refactored it to be (a) easy to find, and (b) a two-stage process which has a little more gravity. Like Bitbucket and GitHub.

https://github.com/okfn/ckan/commit/f3a4c3de70da08d396da4e65a5d286b253be0e0b
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1425.html">#1425</a>
                          </td>
                          <td class="PosixTime">1330085282000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Went into CKAN 1.6
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1422.html">#1422</a>
                          </td>
                          <td class="PosixTime">1319645722000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Done in cset:54fc460602d2 on default for 1.5.1 release.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1421.html">#1421</a>
                          </td>
                          <td class="PosixTime">1319639311000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed in cset:109db2176fac for 1.5 release.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1419.html">#1419</a>
                          </td>
                          <td class="PosixTime">1319548778000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">I've successfully logged into thedatahub using my openid. Issues may arise especially with google openid due to changes in site (from ckan.net to thedatahub.org). See: http://lists.okfn.org/pipermail/ckan-dev/2011-October/001384.html
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1419.html">#1419</a>
                          </td>
                          <td class="PosixTime">1319795920000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This seems to work better today...! myopenid works for me fine with my existing account and by reregistering. My google id works only if I reregister, and I think that is because I hadn't registered before. Closing.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1418.html">#1418</a>
                          </td>
                          <td class="PosixTime">1319539691000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Same as #1374
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1417.html">#1417</a>
                          </td>
                          <td class="PosixTime">1319651617000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed in branch defect-1418-i18n  for release 1.5.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1416.html">#1416</a>
                          </td>
                          <td class="PosixTime">1319794595000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">In normal user submission this would result in errors reported and no 500. Happy to have this switch to 400 if you think this is a good idea.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1416.html">#1416</a>
                          </td>
                          <td class="PosixTime">1320153507000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This seems to have been fixed in #1229. Added a test for this cset:5d6a3e50fe8f on default to demonstrate it displays a validation error, as rgrp suggests. 

Note, this ticket is about spammers missing some of the form fields, rather than any normal user usage, where the browser sends all the fields whether you fill them or not.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1415.html">#1415</a>
                          </td>
                          <td class="PosixTime">1319457583000000
                          </td>
                          <td class="author">nils.toedtmann
                          </td>
                          <td class="newvalue">Arww ... sorry i only now rediscovered James' mail "CKAN Packaging" from Sept 29th where he announced the availability of the repository http://apt.okfn.org/ckan-1.4.3.1 . This package release already addresses many of the above points.

I will test those packages and refine my comments then. Sorry for the noise.

                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1415.html">#1415</a>
                          </td>
                          <td class="PosixTime">1323167941000000
                          </td>
                          <td class="author">thejimmyg
                          </td>
                          <td class="newvalue">This is all complete now. We aren't yet allowing multiple options, but we do support proper version numbers and the domain name. Other features will be implemented as different scripts for the timebeing eg ckan-setup-solr.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1413.html">#1413</a>
                          </td>
                          <td class="PosixTime">1322479113000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">I've made a first attempt at this here:

https://github.com/seanh/ckan/compare/feature-1413-ask-users-to-add-email-address

I used flash_notice() to ask the user to add an email whenever they visit their account page, if they don't have one already. This means they'll see the notice when they login, because after login they are redirected to their account page. Issues:

Is it okay to approximate 'once they log in' as 'whenever they visit their account page' like this?

Do I need to do something to support i18n for the string I added? I looked at users of flash_*() elsewhere and they seemed to be hardcoding the strings in English.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1413.html">#1413</a>
                          </td>
                          <td class="PosixTime">1322481235000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue"> approximate 'once they log in' as 'whenever they visit their account page' 
I had imagined that this would be done in the user.py:logged_in method, but doing it in your way sounds like an even better plan. 

Another thought is: a lot of people might just use the cookie and v. rarely logout/in. Perhaps it could be done when they come back to the site at intervals (e.g. daily)?

 i18n
Yes your strings should be internationalised because they are user visible.

You're right that these other strings should be internationalised. I've created a separate ticket for this: #1491
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1413.html">#1413</a>
                          </td>
                          <td class="PosixTime">1322575534000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">  Another thought is: a lot of people might just use the cookie and v. rarely logout/in. 
  Perhaps it could be done when they come back to the site at intervals (e.g. daily)?

As discussed on IRC I've moved the notice from the user account page to the front page, in the hopes that people will see it often enough even if they are always logged in via a cookie. As discussed on IRC, we could make the notice appear on every page but no more than once per day, but that would be more complicated to implement and more likely to break.

  Yes your strings should be internationalised because they are user visible.

Done.

  You're right that these other strings should be internationalised. I've created a 
  separate ticket for this: #1491

Also done! :)
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1413.html">#1413</a>
                          </td>
                          <td class="PosixTime">1322595160000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">Added a 'please enter your full name' flash notice as well (the two are combined into one if they have neither full name nor email), added unit tests, fixed some issues.

Still need to adjust the strings and change the full name notice so that it applies to people with gmail IDs only.

https://github.com/seanh/ckan/compare/feature-1413-ask-users-to-add-email-address
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1413.html">#1413</a>
                          </td>
                          <td class="PosixTime">1323088091000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">Adjusted the 'please add your email' string and changed the 'please add your full name' notice to be used only for Google OpenID users. Finished?

https://github.com/seanh/ckan/commits/feature-1413-ask-users-to-add-email-address
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1413.html">#1413</a>
                          </td>
                          <td class="PosixTime">1323269472000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Code reviewed - looks really good. Do merge in to master if it is not already.

A couple of tips: 
 * we all use 'model.User' instead of 'model.user.User' but it's not important for tests...
 * probably better to use CreateTestData.create_user() to create user objects in the future, avoiding faffing around with creating revisions etc. that are also nastier to debug when they go wrong.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1413.html">#1413</a>
                          </td>
                          <td class="PosixTime">1330020486000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Went into CKAN 1.6
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1412.html">#1412</a>
                          </td>
                          <td class="PosixTime">1328226385000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">I'm completely unable to reproduce this issue in either FF (9.0.1) or Chrome 16.0.912.75.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1410.html">#1410</a>
                          </td>
                          <td class="PosixTime">1319213205000000
                          </td>
                          <td class="author">zephod
                          </td>
                          <td class="newvalue">Oops: #1409
double posted.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1409.html">#1409</a>
                          </td>
                          <td class="PosixTime">1319306802000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">What do we do for people without email addresses (no gravatar or a standard anonymous one?)
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1409.html">#1409</a>
                          </td>
                          <td class="PosixTime">1319567582000000
                          </td>
                          <td class="author">zephod
                          </td>
                          <td class="newvalue">https://bitbucket.org/okfn/ckan/changeset/c8c62bc8766d
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1409.html">#1409</a>
                          </td>
                          <td class="PosixTime">1324047722000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">In 1.5.1 release.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1408.html">#1408</a>
                          </td>
                          <td class="PosixTime">1319794384000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Suggest that going forward we always boot a site user with the same id as site id (which we may want to leave ckan.site_id blank and force user to choose this going forward?) and give it a password. May need migration or instructions in UPGRADE.txt for existing users.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1408.html">#1408</a>
                          </td>
                          <td class="PosixTime">1320141847000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">fixed cset:51c7d51f3c17
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1407.html">#1407</a>
                          </td>
                          <td class="PosixTime">1323764239000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Fixed in https://github.com/okfn/ckanext-stats/commit/a95bbf7ffc0a36a747467f568a011b6865b64478.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1406.html">#1406</a>
                          </td>
                          <td class="PosixTime">1320930088000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Note, the Atom feeds are still working, with the links still advertised with &lt;link&gt;s home and package pages, but the visual element was removed.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1405.html">#1405</a>
                          </td>
                          <td class="PosixTime">1320152291000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fixed in cset:e68926926bee for release 1.5.

David looked for duplicates on thedatahub.org and found one - http://thedatahub.org/group/lodcloud with http://thedatahub.org/dataset/didactalia. I fixed that by opening the dataset, editing, saving.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1404.html">#1404</a>
                          </td>
                          <td class="PosixTime">1328609360000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Quite a bit of this is now duplicated in other tickets e.g. #1506. Decide what isn't and it's priority (do not have to implement).
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1401.html">#1401</a>
                          </td>
                          <td class="PosixTime">1320142359000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Hi, this is very useful to hear. Can you point out links or even better submit a patch / pull request: http://wiki.ckan.org/Submitting_a_code_patch
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1401.html">#1401</a>
                          </td>
                          <td class="PosixTime">1321037805000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Another problem is 401 redirect when your not authorized to do something, like creating a group. The redirect URL is set in the who.ini:
{{{
login_form_url= /user/login
}}}
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1401.html">#1401</a>
                          </td>
                          <td class="PosixTime">1322066474000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Patch from Augusto Herrmann for the icon URLs: http://pastebin.com/aRBQmftL
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1401.html">#1401</a>
                          </td>
                          <td class="PosixTime">1326460993000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">When javascript calls other scripts, it misses the mount-point prefix.
e.g.
application.js has hard-coded URL /api/2/util/is_slug_valid

The URL prefix is stored in request.environ['SCRIPT_NAME'] so perhaps this value should be put in the HTML somewhere for the javascript to get at?
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1401.html">#1401</a>
                          </td>
                          <td class="PosixTime">1326747111000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Links have been fixed on branch defect-1401-mount-non-root. (Instead of using c.site_url the links now just detect the mount url like the rest of the links.)

Now it needs the js and css to be fixed too. Reassigning to Tom for this.

Brazilians currently waiting for this to be fixed.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1401.html">#1401</a>
                          </td>
                          <td class="PosixTime">1327089904000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Fixed. See https://github.com/okfn/ckan/commit/7088b1fcae685e56a280ec7b396b0f9803a477d9

@dread: not at all clear why we had to change from g.site_url to h.url_for (idea was people could set site_url if the site was not at root ...)
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1401.html">#1401</a>
                          </td>
                          <td class="PosixTime">1327665399000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Basic check of the home page shows the CSS has not been fixed:
{{{
GET http://127.0.1.1/img/find.png 404 (Not Found)
GET http://127.0.1.1/img/share.png 404 (Not Found)
GET http://127.0.1.1/img/collaborate.png 404 (Not Found)
}}}
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1401.html">#1401</a>
                          </td>
                          <td class="PosixTime">1328001014000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Thanks for that dread. Have now fixed these issues as well: https://github.com/okfn/ckan/commit/abb99cae9972d45f4b3acfbf8ea711da398d8a4a

Re-closing.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1400.html">#1400</a>
                          </td>
                          <td class="PosixTime">1328529013000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">John: can you comment on status here. Have you already got docs for this?
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1400.html">#1400</a>
                          </td>
                          <td class="PosixTime">1328612209000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">I haven't written any docs for this. I'm also not sure what the status is, Ross was doing some work on it recently so he is probably the man to ask.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1400.html">#1400</a>
                          </td>
                          <td class="PosixTime">1329729653000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">@johnglover: I don't think Ross has done much here and he's obviously occupied with DGU at ;-) As you worked on this earlier would be able to look at this and a) check what docs there are b) add to them as necessary :-)
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1400.html">#1400</a>
                          </td>
                          <td class="PosixTime">1329746131000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Will document and update wiki this sprint then ping Mark about a blog post.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1400.html">#1400</a>
                          </td>
                          <td class="PosixTime">1330524586000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Async task docs are at: http://wiki.ckan.org/Writing_asynchronous_tasks
Archiver readme at: http://github.com/okfn/ckanext-archiver

Emailing Mark RE blog post.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1400.html">#1400</a>
                          </td>
                          <td class="PosixTime">1331481461000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Great to see this is done. I do have one question: why did we put this on the wiki rather than in the proper CKAN docs? In general, I think it would be better to use the wiki less and our proper docs more ...
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1400.html">#1400</a>
                          </td>
                          <td class="PosixTime">1331543941000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">I thought that we had some sort of consensus that the official docs were aimed more at system admins and people using the CKAN WUI/API, with the wiki aimed more at developers? It would be easy to move of course, but there is no real "developers" section in the official docs that I can see, and it's even called "CKAN's Administration Guide".
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1400.html">#1400</a>
                          </td>
                          <td class="PosixTime">1331544485000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Hmmm. Emerging consensus from discussions in last few months is that wiki is fairly confusing and we should move core, solid docs (from whichever area) to the main docs.

Furthermore, key dev info like how to setup and do extensions *is* already in the main docs (see http://docs.ckan.org/en/latest/writing-extensions.html) and has been for 6m+. I've created #2226 for more work on docs and you may wish to comment there.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1400.html">#1400</a>
                          </td>
                          <td class="PosixTime">1331544816000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">I'll have a look thanks. I'm +1 on using main docs instead (if we move everything), I was just trying to keep things consistent for now.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1398.html">#1398</a>
                          </td>
                          <td class="PosixTime">1321826380000000
                          </td>
                          <td class="author">kindly
                          </td>
                          <td class="newvalue">deployed on test.ckan.net

docs added cset:47216c49fcec881f4eacc7170cb02d0a443500a2
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1396.html">#1396</a>
                          </td>
                          <td class="PosixTime">1323255616000000
                          </td>
                          <td class="author">markbrough
                          </td>
                          <td class="newvalue">+1 on listing owned datasets and seeing all historical activity for a user (especially for logged in user :-) )
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1396.html">#1396</a>
                          </td>
                          <td class="PosixTime">1328179618000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">add note about needing to add datasets attribute to user dict in logic layer
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1396.html">#1396</a>
                          </td>
                          <td class="PosixTime">1328225696000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Fixed. https://github.com/okfn/ckan/commit/a22624ffa9b8cac28b78d5ef5f93d5b682558b14

Need to check performance and css possibly as loading lots of datasets could be slow via administrator could be slow.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1396.html">#1396</a>
                          </td>
                          <td class="PosixTime">1330086237000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Went into CKAN 1.6
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1395.html">#1395</a>
                          </td>
                          <td class="PosixTime">1318520543000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">The exact command that introduced the too-new webob into my virtualenv was:


{{{
pip install --ignore-installed -r pyenv/src/ckan/requires/lucid_missing.txt -r pyenv/src/ckan/requires/lucid_conflict.txt
}}}
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1395.html">#1395</a>
                          </td>
                          <td class="PosixTime">1318525201000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">This problem is mentioned here: http://docs.ckan.org/en/latest/test.html but you're right, it really should be solved in the install instructions.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1395.html">#1395</a>
                          </td>
                          <td class="PosixTime">1320857823000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">I added this to the instructions a few days ago to fix this issue for the 1.5 release:
{{{
       pip install webob==1.0.8
}}}
Cheers Sean.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1394.html">#1394</a>
                          </td>
                          <td class="PosixTime">1320663304000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">I have half a fix for this at the moment.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1394.html">#1394</a>
                          </td>
                          <td class="PosixTime">1321872676000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Not moved on during fortnight - keen to close this off.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1394.html">#1394</a>
                          </td>
                          <td class="PosixTime">1323166530000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Not moved yet, but want to finish it...
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1394.html">#1394</a>
                          </td>
                          <td class="PosixTime">1324292900000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Defo for this sprint.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1394.html">#1394</a>
                          </td>
                          <td class="PosixTime">1325604784000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Done my best here: [release-v1.5.1c c51db1a] Changed "incomplete" to "invalid" but numbering is done in Javascript, so will leave it. 

I added a test for the main part of the validation (error_dict), but the API doesn't expose the error_summary which the javascript seems to get hold of somehow, so wasn't able to test for that.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1393.html">#1393</a>
                          </td>
                          <td class="PosixTime">1318505854000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">I changed this:
{{{
diff -r 47657581fc30 ckan/tests/__init__.py
--- a/ckan/tests/__init__.py	Wed Oct 12 17:58:19 2011 +0100
+++ b/ckan/tests/__init__.py	Thu Oct 13 12:29:54 2011 +0100
@@ -373,7 +373,7 @@
     plugins.load('synchronous_search')
 
 def is_search_supported():
-    supported_db = "sqlite" not in config.get('sqlalchemy.url')
+    supported_db = True
     return supported_db
 
 def is_regex_supported():
}}}

But there seems to be a problem finding the package when trying to index it:
{{{
======================================================================
ERROR: test suite for &lt;class 'ckan.tests.functional.test_search.TestSearch'&gt;
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/dread/hgroot/pyenv-ckan/lib/python2.6/site-packages/nose/suite.py", line 208, in run
    self.setUp()
  File "/home/dread/hgroot/pyenv-ckan/lib/python2.6/site-packages/nose/suite.py", line 291, in setUp
    self.setupContext(ancestor)
  File "/home/dread/hgroot/pyenv-ckan/lib/python2.6/site-packages/nose/suite.py", line 314, in setupContext
    try_run(context, names)
  File "/home/dread/hgroot/pyenv-ckan/lib/python2.6/site-packages/nose/util.py", line 478, in try_run
    return func()
  File "/home/dread/hgroot/ckan/ckan/tests/functional/test_search.py", line 21, in setup_class
    CreateTestData.create_search_test_data()
  File "/home/dread/hgroot/ckan/ckan/lib/create_test_data.py", line 66, in create_search_test_data
    cls.create_arbitrary(search_items)
  File "/home/dread/hgroot/ckan/ckan/lib/create_test_data.py", line 197, in create_arbitrary
    model.repo.commit_and_remove()
  File "/home/dread/hgroot/pyenv-ckan/src/vdm/vdm/sqlalchemy/tools.py", line 110, in commit_and_remove
    self.commit()
  File "/home/dread/hgroot/pyenv-ckan/src/vdm/vdm/sqlalchemy/tools.py", line 100, in commit
    self.session.commit()
  File "/home/dread/hgroot/pyenv-ckan/lib/python2.6/site-packages/sqlalchemy/orm/scoping.py", line 139, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/dread/hgroot/pyenv-ckan/lib/python2.6/site-packages/sqlalchemy/orm/session.py", line 614, in commit
    self.transaction.commit()
  File "/home/dread/hgroot/pyenv-ckan/lib/python2.6/site-packages/sqlalchemy/orm/session.py", line 385, in commit
    self._prepare_impl()
  File "/home/dread/hgroot/pyenv-ckan/lib/python2.6/site-packages/sqlalchemy/orm/session.py", line 361, in _prepare_impl
    ext.before_commit(self.session)
  File "/home/dread/hgroot/ckan/ckan/model/extension.py", line 103, in before_commit
    methodcaller('before_commit', session)
  File "/home/dread/hgroot/ckan/ckan/model/extension.py", line 38, in notify_observers
    func(observer)
  File "/home/dread/hgroot/ckan/ckan/model/modification.py", line 45, in before_commit
    self.notify(obj, DomainObjectOperation.new)
  File "/home/dread/hgroot/ckan/ckan/model/modification.py", line 70, in notify
    observer.notify(entity, operation)
  File "/home/dread/hgroot/ckan/ckan/lib/search/__init__.py", line 93, in notify
    package_to_api1(entity, {'model': model}),
  File "/home/dread/hgroot/ckan/ckan/lib/dictization/model_dictize.py", line 231, in package_to_api1
    dictized = package_dictize(pkg, context)
  File "/home/dread/hgroot/ckan/ckan/lib/dictization/model_dictize.py", line 118, in package_dictize
    raise NotFound
NotFound

----------------------------------------------------------------------
Ran 1 test in 2.734s

FAILED (errors=1)

}}}

Any ideas John?
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1393.html">#1393</a>
                          </td>
                          <td class="PosixTime">1318508765000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Yes, there are a few of these problems with SQLite which is why the tests are being skipped currently. I'm not exactly sure of the reason, it seems that it sometimes drops tables from memory, but we haven't found a solution. Myself and David Raznick were going to spend some time looking at it but haven't had a chance yet.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1393.html">#1393</a>
                          </td>
                          <td class="PosixTime">1320153590000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Thanks John, reassigning to you for the future.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1392.html">#1392</a>
                          </td>
                          <td class="PosixTime">1319625243000000
                          </td>
                          <td class="author">johnglover
                          </td>
                          <td class="newvalue">Now on s054.okserver.org
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1388.html">#1388</a>
                          </td>
                          <td class="PosixTime">1320174229000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Etags fixed in cset:a3c8d4f7cf91 for release 1.5.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1387.html">#1387</a>
                          </td>
                          <td class="PosixTime">1318429228000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">I'm generally against validation. When doing any bulk import, it either have to ignore validation errors or lose data. If you ignore the errors, you find you can't edit the dataset without correcting the validation error, and you often end up guessing, just to get your other changes in. All in all, I think it is better to nudge users, with javascript pop-ups in the form, or quality scores, rather than hard-and-fast validation.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1387.html">#1387</a>
                          </td>
                          <td class="PosixTime">1320142210000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">This won't happen in v1.5.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1386.html">#1386</a>
                          </td>
                          <td class="PosixTime">1318527591000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">Fixed in https://bitbucket.org/okfn/ckan/changeset/130cad62163c
                          </td>
              </tr>
          </tbody>
      </table>
      <div class="paging">
    <span class="previous">
      <a href="23%3Fsort=ticket&amp;asc=0&amp;page=13.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=4.html" title="Page 4">4</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=5.html" title="Page 5">5</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=6.html" title="Page 6">6</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=7.html" title="Page 7">7</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=8.html" title="Page 8">8</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=9.html" title="Page 9">9</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=10.html" title="Page 10">10</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=11.html" title="Page 11">11</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=12.html" title="Page 12">12</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=13.html" title="Page 13">13</a>
      </span>
      <span>
        <span class="current">14</span>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=15.html" title="Page 15">15</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=16.html" title="Page 16">16</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=17.html" title="Page 17">17</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=18.html" title="Page 18">18</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=19.html" title="Page 19">19</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=20.html" title="Page 20">20</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=21.html" title="Page 21">21</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=22.html" title="Page 22">22</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=23.html" title="Page 23">23</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=0&amp;page=24.html" title="Page 24">24</a>
      </span>
    <span class="next">
      <a href="23%3Fsort=ticket&amp;asc=0&amp;page=15.html" title="Next Page">→</a>
    </span>
</div>
      <div id="help"><strong>Note:</strong>
        See <a href="../wiki/TracReports.html">TracReports</a> for help on using and creating reports.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="23%3Fsort=ticket&amp;asc=0&amp;format=rss" class="rss">RSS Feed</a>
        </li><li>
          <a rel="nofollow" href="23%3Fsort=ticket&amp;asc=0&amp;format=csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="23%3Fsort=ticket&amp;asc=0&amp;format=tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="../report%3Fid=23&amp;format=sql">SQL Query</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.3</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>