<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      {23} Trac comments – CKAN
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">window.location.hash = window.location.hash;</script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="23%3Fsort=ticket&amp;asc=1&amp;format=rss" type="application/rss+xml" class="rss" title="RSS Feed" /><link rel="alternate" href="23%3Fsort=ticket&amp;asc=1&amp;format=csv" type="text/plain" title="Comma-delimited Text" /><link rel="alternate" href="23%3Fsort=ticket&amp;asc=1&amp;format=tab" type="text/plain" title="Tab-delimited Text" /><link rel="alternate" href="../report%3Fid=23&amp;format=sql" type="text/plain" title="SQL Query" />
        <link rel="up" href="../report.html" title="Available Reports" />
        <link rel="start" href="../wiki.1.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/report.css" type="text/css" />
        <link rel="prev" href="23%3Fsort=ticket&amp;asc=1&amp;page=37.html" title="Previous Page" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search CKAN" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://ckan.org/"><img src="http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png" alt="CKAN Trac" height="70" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../login.html">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li><a href="../about.html">About Trac</a></li><li class="last"><a href="../register.html">Register</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li><a href="../search.html">Search</a></li><li class="last"><a href="../wiki.1.html">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="../report.html">Available Reports</a></li><li class="last"><a href="../query.html">Custom Query</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="report">
      <h1>{23} Trac comments
        <span class="numrows">(3729 matches)</span>
      </h1>
      <form method="get" action="23%3Fsort=ticket&amp;asc=1&amp;page=38.html">
        <div id="prefs">
          <div>
            <label>
              Max items per page
              <input type="text" name="max" size="10" value="100" />
            </label>
          </div>
          <div class="buttons">
            <input type="submit" value="Update" />
          </div>
        </div>
      </form>
      <div id="description">
        <p>
<a class="ext-link" href="https://github.com/roskakori/tratihubis/blob/master/query_comments.sql"><span class="icon">​</span>https://github.com/roskakori/tratihubis/blob/master/query_comments.sql</a>
</p>

      </div>
      <div class="buttons">
      </div>
      <h2 class="report-result">
        Results <span class="numresults">(3701 - 3729 of 3729)</span>
      </h2>
      <div class="paging">
    <span class="previous">
      <a href="23%3Fsort=ticket&amp;asc=1&amp;page=37.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=28.html" title="Page 28">28</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=29.html" title="Page 29">29</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=30.html" title="Page 30">30</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=31.html" title="Page 31">31</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=32.html" title="Page 32">32</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=33.html" title="Page 33">33</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=34.html" title="Page 34">34</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=35.html" title="Page 35">35</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=36.html" title="Page 36">36</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=37.html" title="Page 37">37</a>
      </span>
      <span>
        <span class="current">38</span>
      </span>
</div>
      <table class="listing tickets">
          <thead>
        <tr class="trac-columns">
          <th class="asc">
            <a href="23%3Fsort=ticket&amp;asc=0&amp;page=38.html">
              Ticket
            </a>
          </th><th>
            <a href="23%3Fsort=PosixTime&amp;asc=1&amp;page=38.html">
              Posixtime
            </a>
          </th><th>
            <a href="23%3Fsort=author&amp;asc=1&amp;page=38.html">
              Author
            </a>
          </th><th colspan="100">
            <a href="23%3Fsort=newvalue&amp;asc=1&amp;page=38.html">
              Newvalue
            </a>
          </th>
        </tr>
          </thead>
          <tbody>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2878.html">#2878</a>
                          </td>
                          <td class="PosixTime">1350561906000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">Closing as we've gone forward with a slightly different approach instead
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2879.html">#2879</a>
                          </td>
                          <td class="PosixTime">1350562096000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">Closing as we've moved forward with a slightly different approach to organizations
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2880.html">#2880</a>
                          </td>
                          <td class="PosixTime">1350561968000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">Closing as we've moved forward with a slightly different approach to organizations in core instead.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2881.html">#2881</a>
                          </td>
                          <td class="PosixTime">1345626056000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">@seanh - this was the material from the wiki moved to the docs. I agree it is somewhat incomplete but we certainly shouldn't remove it without something better in place.

Also, IMO this is currently very low priority ...
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2883.html">#2883</a>
                          </td>
                          <td class="PosixTime">1345629890000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">Also see the thread here:

http://lists.okfn.org/pipermail/ckan-discuss/2012-August/002382.html

the questions asked in the thread should give ideas what to add to the overview
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2885.html">#2885</a>
                          </td>
                          <td class="PosixTime">1345625524000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">authz_form_table() in ckan/templates/package/authz.html creates a table with non-translatable labels (anon_editor, admin, editor, reader...)
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2890.html">#2890</a>
                          </td>
                          <td class="PosixTime">1346175867000000
                          </td>
                          <td class="author">rgrp
                          </td>
                          <td class="newvalue">I know this is tricky. The issue is that Datastore does not exist *just* to provided data views - it also provides a bunch of other stuff like a Data API and, well, a Datastore. I also think there are different audiences. Data view info is about publishers and (viewing) users, while the Data API is for (non-CKAN) devs and CKAN devs and the Datastore sysadmin section is for deployers.

My feeling is therefore keeping things as is but with more stuff in the Data View seciton about it all works:

 * Data viewer: explanation for publisher, links to next 2 sections 
 * Datastore page (as we have it)
  * Includes datastorer 
 * Using Data API page (as we have it)

So main change is a better data viewer page ...
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2900.html">#2900</a>
                          </td>
                          <td class="PosixTime">1346335788000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">Why does this only happen on user profile pages and not dataset search page or group read page? Looks like maybe only user profile page uses the package_list.html snippet
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2906.html">#2906</a>
                          </td>
                          <td class="PosixTime">1346862889000000
                          </td>
                          <td class="author">shevski
                          </td>
                          <td class="newvalue">fixed by removing custom css from the stylesheet, but should look into why it happened
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2907.html">#2907</a>
                          </td>
                          <td class="PosixTime">1352206307000000
                          </td>
                          <td class="author">johnmartin
                          </td>
                          <td class="newvalue">Fixed in master
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2913.html">#2913</a>
                          </td>
                          <td class="PosixTime">1350303779000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">Moving into 2.0 milestone. Also affects 1.8.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2931.html">#2931</a>
                          </td>
                          <td class="PosixTime">1347891378000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">Also set_global() seems to have the wrong docstring
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2934.html">#2934</a>
                          </td>
                          <td class="PosixTime">1347969321000000
                          </td>
                          <td class="author">dominik
                          </td>
                          <td class="newvalue">This looks promising but seems to be discontinued: http://twill.idyll.org/python-api.html
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2934.html">#2934</a>
                          </td>
                          <td class="PosixTime">1348060201000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">The functional tests actually do cover a logged in person editing a dataset and then checking it displays correctly in the view page again.

The webtest framework we use in CKAN has form filling and link click() function which allows navigation between pages like you describe these other ones having too.

Having said that, there is no reason why a newer library shouldn't be introduced if webtest is not sufficient. And if there are stories without tests then it would be good to add them.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2937.html">#2937</a>
                          </td>
                          <td class="PosixTime">1348157780000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">This is fixed on master (commit e97b5c70e9325a1095778fef8e0d27c84e881b30) needs to be cherry-picked into 1.8
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2937.html">#2937</a>
                          </td>
                          <td class="PosixTime">1348238875000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">Cherry-picked into 1.8
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2942.html">#2942</a>
                          </td>
                          <td class="PosixTime">1348610791000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Unfortunately with a few hours hacking I couldn't find a way to get this version of WebOb to cope with this header. 

The line I think it goes wrong is {{{ctype = env.get('CONTENT_TYPE', 'application/x-www-form-urlencoded')}}} in request.py, and the commented line above looks right, but wipes the request data for some reason. I tried intercepting the bad header and deleting it, but I couldn't do that before WebOb processed it, and couldn't persuade WebOb to reprocess it once the header was edited.

I did write a failing test though if that is useful to someone in the future:
{{{
diff --git a/ckan/tests/functional/api/test_api.py b/ckan/tests/functional/api/t
index 539d184..b4cc4ce 100644
--- a/ckan/tests/functional/api/test_api.py
+++ b/ckan/tests/functional/api/test_api.py
@@ -49,6 +49,18 @@ class TestApi3(Api3TestCase, ApiTestCase):
         assert_in('Bad request - JSON Error: No request body data',
                   res.body)
 
+    def test_content_type_headers_can_be_sent(self):
+        '''#2942 Webob can only cope with very specific Content-Type header
+        values, so this tests that a work-around is in place.
+
+        This particular header value is the default for 'requests' 0.14.
+        '''
+        offset = self.offset('/action/package_search')
+        params = '%s=1' % json.dumps({'q': 'russian'})
+        headers = {'Content-Type': '; charset=utf-8'}
+        res = self.app.post(offset, params=params, headers=headers,
+                            status=[200])
+
}}}
There is a clear error to the user:

{{{
&gt;&gt;&gt; requests.post('http://datahub.io/api/action/package_list', data='{}').content
'"Bad request - JSON Error: Could not extract request body data: Bad content type: \'; charset=utf-8\'"'
}}}

The advice to users of requests would be to ensure they specify the content-type as follows:
{{{
&gt;&gt;&gt; requests.post('http://datahub.io/api/action/package_list', data='{}', headers={'content-type': 'application/x-www-form-urlencoded'}).content
}}}
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2942.html">#2942</a>
                          </td>
                          <td class="PosixTime">1348611144000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">
&gt; {{{
&gt; &gt;&gt;&gt; requests.post('http://datahub.io/api/action/package_list', data='{}', headers={'content-type': 'application/x-www-form-urlencoded'}).content
&gt; }}}

Or even better:

{{{
&gt;&gt;&gt; requests.post('http://datahub.io/api/action/package_list', data='{}', headers={'content-type': 'application/json'}).content
}}}
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2950.html">#2950</a>
                          </td>
                          <td class="PosixTime">1349168838000000
                          </td>
                          <td class="author">toby
                          </td>
                          <td class="newvalue">just a note to say fanstatic will serve minified files if it finds them in production even if they are old so we need to make sure they  are up to date.
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2951.html">#2951</a>
                          </td>
                          <td class="PosixTime">1349168981000000
                          </td>
                          <td class="author">toby
                          </td>
                          <td class="newvalue">the files like red.css should also be done as part of this. and before minification of files - should really be part of same process
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2953.html">#2953</a>
                          </td>
                          <td class="PosixTime">1349257893000000
                          </td>
                          <td class="author">toby
                          </td>
                          <td class="newvalue">awaiting merge

https://github.com/okfn/ckan/pull/145
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2956.html">#2956</a>
                          </td>
                          <td class="PosixTime">1349278531000000
                          </td>
                          <td class="author">johnmartin
                          </td>
                          <td class="newvalue">OK, this was simple... I just added an already made snippet to the page. 

Ira: Can you confirm that the attached screenshots satisfy fixing the problem?
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2956.html">#2956</a>
                          </td>
                          <td class="PosixTime">1349346442000000
                          </td>
                          <td class="author">shevski
                          </td>
                          <td class="newvalue">This needs to be a navigation menu item that includes both the name &amp; link to the dataset edit page and then underneath (nested) the links to it's resources - so that the user can easily move between the dataset edit pages and resource edit pages and know where they currently are (using the selected pointer style)
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2968.html">#2968</a>
                          </td>
                          <td class="PosixTime">1350297070000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">This also applies to other pages such as /member_new and /member_delete
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/2980.html">#2980</a>
                          </td>
                          <td class="PosixTime">1350560137000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">Won't do unless required by a specific client
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/3007.html">#3007</a>
                          </td>
                          <td class="PosixTime">1351517019000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">Only happens if you create a dataset through the web UI, creating a dataset through the API still produces just one activity.
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/3018.html">#3018</a>
                          </td>
                          <td class="PosixTime">1355140950000000
                          </td>
                          <td class="author">seanh
                          </td>
                          <td class="newvalue">https://github.com/okfn/ckan/pull/171
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/3021.html">#3021</a>
                          </td>
                          <td class="PosixTime">1353411968000000
                          </td>
                          <td class="author">johnmartin
                          </td>
                          <td class="newvalue">In code review
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/3029.html">#3029</a>
                          </td>
                          <td class="PosixTime">1355243824000000
                          </td>
                          <td class="author">dread
                          </td>
                          <td class="newvalue">Fix done here: https://github.com/datagovuk/ckan/commit/b6ad63d58dd6c0cc51677fa66c575179f908d050
which you're welcome to pull.
                          </td>
              </tr>
          </tbody>
      </table>
      <div class="paging">
    <span class="previous">
      <a href="23%3Fsort=ticket&amp;asc=1&amp;page=37.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=28.html" title="Page 28">28</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=29.html" title="Page 29">29</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=30.html" title="Page 30">30</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=31.html" title="Page 31">31</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=32.html" title="Page 32">32</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=33.html" title="Page 33">33</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=34.html" title="Page 34">34</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=35.html" title="Page 35">35</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=36.html" title="Page 36">36</a>
      </span>
      <span>
        <a href="23%3Fsort=ticket&amp;asc=1&amp;page=37.html" title="Page 37">37</a>
      </span>
      <span>
        <span class="current">38</span>
      </span>
</div>
      <div id="help"><strong>Note:</strong>
        See <a href="../wiki/TracReports.html">TracReports</a> for help on using and creating reports.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="23%3Fsort=ticket&amp;asc=1&amp;format=rss" class="rss">RSS Feed</a>
        </li><li>
          <a rel="nofollow" href="23%3Fsort=ticket&amp;asc=1&amp;format=csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="23%3Fsort=ticket&amp;asc=1&amp;format=tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="../report%3Fid=23&amp;format=sql">SQL Query</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.3</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>