<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      {22} Trac tickets – CKAN
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">window.location.hash = window.location.hash;</script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="22%3Fsort=id&amp;asc=0&amp;format=rss" type="application/rss+xml" class="rss" title="RSS Feed" /><link rel="alternate" href="22%3Fsort=id&amp;asc=0&amp;format=csv" type="text/plain" title="Comma-delimited Text" /><link rel="alternate" href="22%3Fsort=id&amp;asc=0&amp;format=tab" type="text/plain" title="Tab-delimited Text" /><link rel="alternate" href="../report%3Fid=22&amp;format=sql" type="text/plain" title="SQL Query" />
        <link rel="up" href="../report.html" title="Available Reports" />
        <link rel="next" href="22%3Fsort=id&amp;asc=0&amp;page=17.html" title="Next Page" />
        <link rel="start" href="../wiki.1.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/report.css" type="text/css" />
        <link rel="prev" href="22%3Fsort=id&amp;asc=0&amp;page=15.html" title="Previous Page" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search CKAN" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://ckan.org/"><img src="http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png" alt="CKAN Trac" height="70" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../login.html">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li><a href="../about.html">About Trac</a></li><li class="last"><a href="../register.html">Register</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li><a href="../search.html">Search</a></li><li class="last"><a href="../wiki.1.html">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="../report.html">Available Reports</a></li><li class="last"><a href="../query.html">Custom Query</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="report">
      <h1>{22} Trac tickets
        <span class="numrows">(2647 matches)</span>
      </h1>
      <form method="get" action="22%3Fsort=id&amp;asc=0&amp;page=16.html">
        <div id="prefs">
          <div>
            <label>
              Max items per page
              <input type="text" name="max" size="10" value="100" />
            </label>
          </div>
          <div class="buttons">
            <input type="submit" value="Update" />
          </div>
        </div>
      </form>
      <div id="description">
        <p>
<a class="ext-link" href="https://github.com/roskakori/tratihubis/blob/master/query_tickets.sql"><span class="icon">​</span>https://github.com/roskakori/tratihubis/blob/master/query_tickets.sql</a>
</p>

      </div>
      <div class="buttons">
      </div>
      <h2 class="report-result">
        Results <span class="numresults">(1501 - 1600 of 2647)</span>
      </h2>
      <div class="paging">
    <span class="previous">
      <a href="22%3Fsort=id&amp;asc=0&amp;page=15.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=6.html" title="Page 6">6</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=7.html" title="Page 7">7</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=8.html" title="Page 8">8</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=9.html" title="Page 9">9</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=10.html" title="Page 10">10</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=11.html" title="Page 11">11</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=12.html" title="Page 12">12</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=13.html" title="Page 13">13</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=14.html" title="Page 14">14</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=15.html" title="Page 15">15</a>
      </span>
      <span>
        <span class="current">16</span>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=17.html" title="Page 17">17</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=18.html" title="Page 18">18</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=19.html" title="Page 19">19</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=20.html" title="Page 20">20</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=21.html" title="Page 21">21</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=22.html" title="Page 22">22</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=23.html" title="Page 23">23</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=24.html" title="Page 24">24</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=25.html" title="Page 25">25</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=26.html" title="Page 26">26</a>
      </span>
    <span class="next">
      <a href="22%3Fsort=id&amp;asc=0&amp;page=17.html" title="Next Page">→</a>
    </span>
</div>
      <table class="listing tickets">
          <thead>
        <tr class="trac-columns">
          <th class="desc">
            <a href="22%3Fsort=id&amp;asc=1&amp;page=16.html">
              Id
            </a>
          </th><th>
            <a href="22%3Fsort=type&amp;asc=1&amp;page=16.html">
              Type
            </a>
          </th><th>
            <a href="22%3Fsort=owner&amp;asc=1&amp;page=16.html">
              Owner
            </a>
          </th><th>
            <a href="22%3Fsort=reporter&amp;asc=1&amp;page=16.html">
              Reporter
            </a>
          </th><th>
            <a href="22%3Fsort=milestone&amp;asc=1&amp;page=16.html">
              Milestone
            </a>
          </th><th>
            <a href="22%3Fsort=status&amp;asc=1&amp;page=16.html">
              Status
            </a>
          </th><th>
            <a href="22%3Fsort=resolution&amp;asc=1&amp;page=16.html">
              Resolution
            </a>
          </th><th>
            <a href="22%3Fsort=summary&amp;asc=1&amp;page=16.html">
              Summary
            </a>
          </th><th>
            <a href="22%3Fsort=description&amp;asc=1&amp;page=16.html">
              Description
            </a>
          </th><th>
            <a href="22%3Fsort=PosixTime&amp;asc=1&amp;page=16.html">
              Posixtime
            </a>
          </th><th colspan="100">
            <a href="22%3Fsort=ModifiedTime&amp;asc=1&amp;page=16.html">
              Modifiedtime
            </a>
          </th>
        </tr>
          </thead>
          <tbody>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1156.html">#1156</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/pdeu-1.html">pdeu-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1156.html">Scraping harvesters for Paris and Vienna Catalogues</a>
                          </td>
                          <td class="description">
                            <p>
Import metadata from both sources into PDEU via the Harvesting framework but by scraping their respective catalogue pages. 
</p>
<ul><li><a class="ext-link" href="http://data.wien.gv.at/katalog/"><span class="icon">​</span>http://data.wien.gv.at/katalog/</a>
</li><li><a class="ext-link" href="http://opendata.paris.fr/opendata/jsp/site/Portal.jsp"><span class="icon">​</span>http://opendata.paris.fr/opendata/jsp/site/Portal.jsp</a>
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1306337428000000
                          </td>
                          <td class="ModifiedTime">1306855111000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1155.html">#1155</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/pdeu-1.html">pdeu-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1155.html">Harvester for data.london.gov.uk</a>
                          </td>
                          <td class="description">
                            <p>
Write a harvester for data.london.gov.uk to import catalogue metadata into PDEU. API (or at least documentation) is available at: <a class="ext-link" href="http://sourceforge.net/projects/londondatastore/files/"><span class="icon">​</span>http://sourceforge.net/projects/londondatastore/files/</a> 
</p>

                            
                          </td>
                          <td class="PosixTime">1306337318000000
                          </td>
                          <td class="ModifiedTime">1306773174000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1154.html">#1154</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">nils.toedtmann
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1154.html">Make ckan robust against solr failure</a>
                          </td>
                          <td class="description">
                            <p>
According to pudo, a ckan with activated solr extension throws a 5xx when solr is unreachable. Instead, it should behave more like a ckan without ckanext-solr when this happens.
</p>

                            
                          </td>
                          <td class="PosixTime">1306254472000000
                          </td>
                          <td class="ModifiedTime">1314287519000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1153.html">#1153</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">lucychambers
                          </td>
                          <td class="reporter">lucychambers
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1153.html">Update CKAN wiki front page</a>
                          </td>
                          <td class="description">
                            <p>
Update CKAN wiki front page - a la <a class="missing wiki">OpenSpending?</a>: <a class="ext-link" href="http://wiki.openspending.org/Main_Page"><span class="icon">​</span>http://wiki.openspending.org/Main_Page</a>
</p>
<p>
Sections should relate to different types of people using the site: 
</p>
<p>
Developers, Users etc..
</p>

                            
                          </td>
                          <td class="PosixTime">1306155211000000
                          </td>
                          <td class="ModifiedTime">1306941386000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1152.html">#1152</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">amercader
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1152.html">True support for generic CSW servers</a>
                          </td>
                          <td class="description">
                            <p>
The CSW harvesters implemented at the moment were developed with the DGU
project in mind, and they assume all remote CSW servers to implement the
Gemini 2 specification. Gemini 2 is the profile defined in the UK for
INSPIRE complying metadata, so obviously catalogs from other countries
or non-INSPIRE complying ones won't be able to be harvested.
</p>
<p>
The changes needed to support generic CSW servers (i.e. those
implementing the ISO 19139 profile) are:
</p>
<ul><li>Handling the validators (right now are hardcoded in the harvester
</li></ul><p>
code). This probably involves issues discussed in the CREP 3
(ticket <a class="new ticket" href="../ticket/1134.html" title="CREP: CREP0003: Description and Configuration of Harvesters (new)">#1134</a>)
</p>
<ul><li>Changes in the model to adapt the specification to ISO 19139
</li></ul><ul><li>Renaming objects and classes which are now Gemini-centric
</li></ul><p>
List of CSW servers tested:
</p>
<p>
<a class="ext-link" href="https://spreadsheets.google.com/spreadsheet/ccc?key=0Atp3cZFjuIOAdDBVQWRINnlfN1d0b2lleHVEdjBSb2c&amp;hl=en_US&amp;authkey=CNu4hsEB#gid=0"><span class="icon">​</span>https://spreadsheets.google.com/spreadsheet/ccc?key=0Atp3cZFjuIOAdDBVQWRINnlfN1d0b2lleHVEdjBSb2c&amp;hl=en_US&amp;authkey=CNu4hsEB#gid=0</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1306141334000000
                          </td>
                          <td class="ModifiedTime">1313411822000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1151.html">#1151</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">timmcnamara
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2012-03-05.html">ckan-sprint-2012-03-05</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1151.html">Preview for geographic data should be a map</a>
                          </td>
                          <td class="description">
                            <p>
Data viewer / previewer for a resource that has a KML file, or others, such as GeoRSS and GeoJSON, we should provide a map.
</p>
<ul><li>Support for KML files: <a class="assigned ticket" href="../ticket/1458.html" title="enhancement: Support previewing kml files in data viewer (assigned)">#1458</a>
</li></ul><p>
This is non-trivial for external files as we need a way to jsonify. For files stored locally this is more of a recline issue (and will require a bit of work to either guess columns or allow user to specify them).
</p>

                            
                          </td>
                          <td class="PosixTime">1306043217000000
                          </td>
                          <td class="ModifiedTime">1330908188000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1150.html">#1150</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">timmcnamara
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1150.html">Non-ASCII chars prevent data preview</a>
                          </td>
                          <td class="description">
                            <p>
Characters outside of ASCII range are not supported within data previews.
</p>
<p>
Steps to reproduce:
</p>
<ol><li>Visit <a class="ext-link" href="http://ckan.net/package/kivele2010"><span class="icon">​</span>http://ckan.net/package/kivele2010</a>
</li><li>Click on [preview] for any of the resources
</li></ol>
                            
                          </td>
                          <td class="PosixTime">1306019914000000
                          </td>
                          <td class="ModifiedTime">1311774141000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1149.html">#1149</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5-sprint-1.html">ckan-v1.5-sprint-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1149.html">Change domain object modification plugin to use Session extension.</a>
                          </td>
                          <td class="description">
                            <p>
This should make it more efficient as it currently does a lot of repeating work.  i.e if you change a package and a resource in the same commit it sends out 2 notifications and should only really send out 1.   
</p>

                            
                          </td>
                          <td class="PosixTime">1305969863000000
                          </td>
                          <td class="ModifiedTime">1306090663000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1148.html">#1148</a>
                          </td>
                          <td class="type">refactor
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5-sprint-1.html">ckan-v1.5-sprint-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1148.html">test speed improvements and cleanup</a>
                          </td>
                          <td class="description">
                            <p>
The tests have been running slower recently and need fixing.  They also could do with a bit more consistency to them.
</p>

                            
                          </td>
                          <td class="PosixTime">1305969223000000
                          </td>
                          <td class="ModifiedTime">1305969925000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1147.html">#1147</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5-sprint-1.html">ckan-v1.5-sprint-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1147.html">Add expired_id to all revision tables.</a>
                          </td>
                          <td class="description">
                            <p>
Revision tables need expired_id to make querying history AND pending changes more efficient.
</p>
<p>
This involves making a session extension and a large table migration.
</p>

                            
                          </td>
                          <td class="PosixTime">1305839833000000
                          </td>
                          <td class="ModifiedTime">1307957556000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1146.html">#1146</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5-sprint-1.html">ckan-v1.5-sprint-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1146.html">make logic layer control its own state</a>
                          </td>
                          <td class="description">
                            <p>
Logic layer should not use any vdm defined state and should manage it itself.
</p>

                            
                          </td>
                          <td class="PosixTime">1305829117000000
                          </td>
                          <td class="ModifiedTime">1307957527000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1145.html">#1145</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">timmcnamara
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1145.html">Support the Handle System</a>
                          </td>
                          <td class="description">
                            <p>
The Handle System is an initiative to provide persistent references for resources. That is, it's basically a proxy system for preventing link rot.
</p>
<p>
Its documentation is here: <a class="ext-link" href="http://www.handle.net/"><span class="icon">​</span>http://www.handle.net/</a>. Servers running CKAN could host a "Local Handle Service", which redirects a hash of a resource to an actual URL.
</p>
<p>
Some suggested use cases:
</p>
<ul><li>Researcher would like to cite where data came from
</li><li>Agencies would like to have a way to prevent vendor
lock-in from CKAN if they decide to move to another
platform
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1305764775000000
                          </td>
                          <td class="ModifiedTime">1339774502000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1144.html">#1144</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">timmcnamara
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1144.html">Support DSPL</a>
                          </td>
                          <td class="description">
                            <p>
DSPL, the Dataset Publishing Language, is being promoted by Google for its "Google Public Data Explorer" system. It is an XML format with metadata.
</p>
<p>
The format is described on the <a class="ext-link" href="http://code.google.com/apis/publicdata/docs/developer_guide.html"><span class="icon">​</span>developer docs ofthe Google Code site</a>.
</p>
<p>
Google provides a <a class="ext-link" href="http://code.google.com/apis/publicdata/docs/dsplgen.html"><span class="icon">​</span>Python script which reads CSV data and generates DSPL</a>
</p>
<p>
Sample from <a class="ext-link" href="http://code.google.com/apis/publicdata/docs/dspl_sample.html"><span class="icon">​</span>http://code.google.com/apis/publicdata/docs/dspl_sample.html</a>:
</p>
<div class="code"><pre>
<span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;dspl</span> <span class="na">xmlns=</span><span class="s">"http://schemas.google.com/dspl/2010"</span>
    <span class="na">xmlns:geo=</span><span class="s">"http://www.google.com/publicdata/dataset/google/geo"</span>
    <span class="na">xmlns:geo_usa=</span><span class="s">"http://www.google.com/publicdata/dataset/google/geo/us"</span>
    <span class="na">xmlns:time=</span><span class="s">"http://www.google.com/publicdata/dataset/google/time"</span>
    <span class="na">xmlns:quantity=</span><span class="s">"http://www.google.com/publicdata/dataset/google/quantity"</span>
    <span class="na">xmlns:entity=</span><span class="s">"http://www.google.com/publicdata/dataset/google/entity"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;import</span> <span class="na">namespace=</span><span class="s">"http://www.google.com/publicdata/dataset/google/time"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;import</span> <span class="na">namespace=</span><span class="s">"http://www.google.com/publicdata/dataset/google/quantity"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;import</span> <span class="na">namespace=</span><span class="s">"http://www.google.com/publicdata/dataset/google/entity"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;import</span> <span class="na">namespace=</span><span class="s">"http://www.google.com/publicdata/dataset/google/geo"</span><span class="nt">/&gt;</span>
  
  <span class="nt">&lt;info&gt;</span>
    <span class="nt">&lt;name&gt;</span>
      <span class="nt">&lt;value&gt;</span>My statistics<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;description&gt;</span>
      <span class="nt">&lt;value&gt;</span>Some very interesting statistics about countries<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;url&gt;</span>
      <span class="nt">&lt;value&gt;</span>http://www.stats-bureau.com/mystats/info.html<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/url&gt;</span>
  <span class="nt">&lt;/info&gt;</span>

  <span class="nt">&lt;provider&gt;</span>
    <span class="nt">&lt;name&gt;</span>
      <span class="nt">&lt;value&gt;</span>Bureau of Statistics<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;url&gt;</span>
      <span class="nt">&lt;value&gt;</span>http://www.stats-bureau.com<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/url&gt;</span>
  <span class="nt">&lt;/provider&gt;</span>

  <span class="nt">&lt;topics&gt;</span>
    <span class="nt">&lt;topic</span> <span class="na">id=</span><span class="s">"geography"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;info&gt;</span>
        <span class="nt">&lt;name&gt;&lt;value&gt;</span>Geography<span class="nt">&lt;/value&gt;&lt;/name&gt;</span>
      <span class="nt">&lt;/info&gt;</span>
    <span class="nt">&lt;/topic&gt;</span>
    <span class="nt">&lt;topic</span> <span class="na">id=</span><span class="s">"social_indicators"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;info&gt;</span>
        <span class="nt">&lt;name&gt;&lt;value&gt;</span>Social indicators<span class="nt">&lt;/value&gt;&lt;/name&gt;</span>
      <span class="nt">&lt;/info&gt;</span>
      <span class="nt">&lt;topic</span> <span class="na">id=</span><span class="s">"population_indicators"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;info&gt;</span>
          <span class="nt">&lt;name&gt;&lt;value&gt;</span>Population indicators<span class="nt">&lt;/value&gt;&lt;/name&gt;</span>
        <span class="nt">&lt;/info&gt;</span>
      <span class="nt">&lt;/topic&gt;</span>
      <span class="nt">&lt;topic</span> <span class="na">id=</span><span class="s">"poverty_and_income"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;info&gt;</span>
          <span class="nt">&lt;name&gt;&lt;value&gt;</span>Poverty <span class="err">&amp;</span> income<span class="nt">&lt;/value&gt;&lt;/name&gt;</span>
        <span class="nt">&lt;/info&gt;</span>
      <span class="nt">&lt;/topic&gt;</span>
      <span class="nt">&lt;topic</span> <span class="na">id=</span><span class="s">"health"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;info&gt;</span>
          <span class="nt">&lt;name&gt;&lt;value&gt;</span>Health<span class="nt">&lt;/value&gt;&lt;/name&gt;</span>
        <span class="nt">&lt;/info&gt;</span>
      <span class="nt">&lt;/topic&gt;</span>
    <span class="nt">&lt;/topic&gt;</span>
  <span class="nt">&lt;/topics&gt;</span>

  <span class="nt">&lt;concepts&gt;</span>
    <span class="c">&lt;!-- As noted in the tutorial, this concept should extend quantity:amount.--&gt;</span>
    <span class="nt">&lt;concept</span> <span class="na">id=</span><span class="s">"population"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;info&gt;</span>
        <span class="nt">&lt;name&gt;</span>
          <span class="nt">&lt;value&gt;</span>Population<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;description&gt;</span>
          <span class="nt">&lt;value&gt;</span>Size of the resident population.<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/description&gt;</span>
      <span class="nt">&lt;/info&gt;</span>
      <span class="nt">&lt;topic</span> <span class="na">ref=</span><span class="s">"population_indicators"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;type</span> <span class="na">ref=</span><span class="s">"integer"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/concept&gt;</span>

    <span class="c">&lt;!-- This country concept is defined for educational purposes only. A country
    concept exists in the Google geo dataset. See:

    http://code.google.com/apis/publicdata/docs/canonical/geo.html --&gt;</span> 
    <span class="nt">&lt;concept</span> <span class="na">id=</span><span class="s">"country"</span> <span class="na">extends=</span><span class="s">"geo:location"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;info&gt;</span>
        <span class="nt">&lt;name&gt;</span>
          <span class="nt">&lt;value&gt;</span>Country<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;description&gt;</span>
          <span class="nt">&lt;value&gt;</span>My list of countries<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/description&gt;</span>
      <span class="nt">&lt;/info&gt;</span>
      <span class="nt">&lt;type</span> <span class="na">ref=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">id=</span><span class="s">"name"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;info&gt;</span>
          <span class="nt">&lt;name&gt;&lt;value</span> <span class="na">xml:lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>Country name<span class="nt">&lt;/value&gt;&lt;/name&gt;</span>
          <span class="nt">&lt;description&gt;</span>
            <span class="nt">&lt;value</span> <span class="na">xml:lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>The official name of the country<span class="nt">&lt;/value&gt;</span>
          <span class="nt">&lt;/description&gt;</span>
        <span class="nt">&lt;/info&gt;</span>
        <span class="nt">&lt;type</span> <span class="na">ref=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/property&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">ref=</span><span class="s">"countries_table"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/concept&gt;</span>

    <span class="c">&lt;!-- This US state concept is defined for educational purposes only. A US state
      concept exists in the Google geo US dataset. See:

      http://code.google.com/apis/publicdata/docs/canonical/geo.us.html --&gt;</span> 
    <span class="nt">&lt;concept</span> <span class="na">id=</span><span class="s">"state"</span> <span class="na">extends=</span><span class="s">"geo:location"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;info&gt;</span>
        <span class="nt">&lt;name&gt;</span>
          <span class="nt">&lt;value&gt;</span>State<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;description&gt;</span>
          <span class="nt">&lt;value&gt;</span>US states<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/description&gt;</span>
      <span class="nt">&lt;/info&gt;</span>
      <span class="nt">&lt;type</span> <span class="na">ref=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">concept=</span><span class="s">"country"</span> <span class="na">isParent=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">ref=</span><span class="s">"states_table"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/concept&gt;</span>

    <span class="nt">&lt;concept</span> <span class="na">id=</span><span class="s">"gender"</span> <span class="na">extends=</span><span class="s">"entity:entity"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;info&gt;</span>
          <span class="nt">&lt;name&gt;</span>
          <span class="nt">&lt;value&gt;</span>Gender<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;description&gt;</span>
          <span class="nt">&lt;value&gt;</span>Gender, Male or Female<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/description&gt;</span>
        <span class="nt">&lt;pluralName&gt;&lt;value&gt;</span>Genders<span class="nt">&lt;/value&gt;&lt;/pluralName&gt;</span>
        <span class="nt">&lt;totalName&gt;&lt;value&gt;</span>Both genders<span class="nt">&lt;/value&gt;&lt;/totalName&gt;</span>
      <span class="nt">&lt;/info&gt;</span>
      <span class="nt">&lt;type</span> <span class="na">ref=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">ref=</span><span class="s">"genders_table"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/concept&gt;</span>

    <span class="nt">&lt;concept</span> <span class="na">id=</span><span class="s">"unemployment_rate"</span> <span class="na">extends=</span><span class="s">"quantity:rate"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;info&gt;</span>
        <span class="nt">&lt;name&gt;</span>
          <span class="nt">&lt;value&gt;</span>unemployment rate<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;description&gt;</span>
          <span class="nt">&lt;value&gt;</span>The percent of the labor force that is unemployed, not seasonally
            adjusted.<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/description&gt;</span>
        <span class="nt">&lt;url&gt;&lt;value&gt;</span>http://www.bls.gov/cps/cps_htgm.htm<span class="nt">&lt;/value&gt;&lt;/url&gt;</span>
      <span class="nt">&lt;/info&gt;</span>
      <span class="nt">&lt;topic</span> <span class="na">ref=</span><span class="s">"social_indicators"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;type</span> <span class="na">ref=</span><span class="s">"float"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;attribute</span> <span class="na">id=</span><span class="s">"is_percentage"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;type</span> <span class="na">ref=</span><span class="s">"boolean"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
      <span class="nt">&lt;/attribute&gt;</span>
    <span class="nt">&lt;/concept&gt;</span>

  <span class="nt">&lt;/concepts&gt;</span>

  <span class="nt">&lt;slices&gt;</span>
    <span class="nt">&lt;slice</span> <span class="na">id=</span><span class="s">"countries_slice"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;dimension</span> <span class="na">concept=</span><span class="s">"country"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;dimension</span> <span class="na">concept=</span><span class="s">"time:year"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;metric</span> <span class="na">concept=</span><span class="s">"population"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">ref=</span><span class="s">"countries_slice_table"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/slice&gt;</span>

    <span class="nt">&lt;slice</span> <span class="na">id=</span><span class="s">"states_slice"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;dimension</span> <span class="na">concept=</span><span class="s">"state"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;dimension</span> <span class="na">concept=</span><span class="s">"time:year"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;metric</span> <span class="na">concept=</span><span class="s">"population"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;metric</span> <span class="na">concept=</span><span class="s">"unemployment_rate"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">ref=</span><span class="s">"states_slice_table"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/slice&gt;</span>

    <span class="nt">&lt;slice</span> <span class="na">id=</span><span class="s">"countries_gender_slice"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;dimension</span> <span class="na">concept=</span><span class="s">"country"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;dimension</span> <span class="na">concept=</span><span class="s">"gender"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;dimension</span> <span class="na">concept=</span><span class="s">"time:year"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;metric</span> <span class="na">concept=</span><span class="s">"population"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">ref=</span><span class="s">"countries_gender_slice_table"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/slice&gt;</span>

  <span class="nt">&lt;/slices&gt;</span>

  <span class="nt">&lt;tables&gt;</span>
    <span class="nt">&lt;table</span> <span class="na">id=</span><span class="s">"countries_table"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"country"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"name"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"latitude"</span> <span class="na">type=</span><span class="s">"float"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"longitude"</span> <span class="na">type=</span><span class="s">"float"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;data&gt;</span>
        <span class="nt">&lt;file</span> <span class="na">format=</span><span class="s">"csv"</span> <span class="na">encoding=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>countries.csv<span class="nt">&lt;/file&gt;</span>
      <span class="nt">&lt;/data&gt;</span>
    <span class="nt">&lt;/table&gt;</span>

    <span class="nt">&lt;table</span> <span class="na">id=</span><span class="s">"countries_slice_table"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"country"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"year"</span> <span class="na">type=</span><span class="s">"date"</span> <span class="na">format=</span><span class="s">"yyyy"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"population"</span> <span class="na">type=</span><span class="s">"integer"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;data&gt;</span>
        <span class="nt">&lt;file</span> <span class="na">format=</span><span class="s">"csv"</span> <span class="na">encoding=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>country_slice.csv<span class="nt">&lt;/file&gt;</span>
      <span class="nt">&lt;/data&gt;</span>
    <span class="nt">&lt;/table&gt;</span>

    <span class="nt">&lt;table</span> <span class="na">id=</span><span class="s">"states_table"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"state"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"name"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"country"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;value&gt;</span>US<span class="nt">&lt;/value&gt;</span>
      <span class="nt">&lt;/column&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"latitude"</span> <span class="na">type=</span><span class="s">"float"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"longitude"</span> <span class="na">type=</span><span class="s">"float"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;data&gt;</span>
        <span class="nt">&lt;file</span> <span class="na">format=</span><span class="s">"csv"</span> <span class="na">encoding=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>states.csv<span class="nt">&lt;/file&gt;</span>
      <span class="nt">&lt;/data&gt;</span>
    <span class="nt">&lt;/table&gt;</span>

    <span class="nt">&lt;table</span> <span class="na">id=</span><span class="s">"states_slice_table"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"state"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"year"</span> <span class="na">type=</span><span class="s">"date"</span> <span class="na">format=</span><span class="s">"yyyy"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"population"</span> <span class="na">type=</span><span class="s">"integer"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"unemployment_rate"</span> <span class="na">type=</span><span class="s">"float"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;data&gt;</span>
        <span class="nt">&lt;file</span> <span class="na">format=</span><span class="s">"csv"</span> <span class="na">encoding=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>state_slice.csv<span class="nt">&lt;/file&gt;</span>
      <span class="nt">&lt;/data&gt;</span>
    <span class="nt">&lt;/table&gt;</span>

    <span class="nt">&lt;table</span> <span class="na">id=</span><span class="s">"genders_table"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"gender"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"name"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;data&gt;</span>
        <span class="nt">&lt;file</span> <span class="na">format=</span><span class="s">"csv"</span> <span class="na">encoding=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>genders.csv<span class="nt">&lt;/file&gt;</span>
      <span class="nt">&lt;/data&gt;</span>
    <span class="nt">&lt;/table&gt;</span>

    <span class="nt">&lt;table</span> <span class="na">id=</span><span class="s">"countries_gender_slice_table"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"country"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"gender"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"year"</span> <span class="na">type=</span><span class="s">"date"</span> <span class="na">format=</span><span class="s">"yyyy"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;column</span> <span class="na">id=</span><span class="s">"population"</span> <span class="na">type=</span><span class="s">"integer"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;data&gt;</span>
        <span class="nt">&lt;file</span> <span class="na">format=</span><span class="s">"csv"</span> <span class="na">encoding=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>gender_country_slice.csv<span class="nt">&lt;/file&gt;</span>
      <span class="nt">&lt;/data&gt;</span>
    <span class="nt">&lt;/table&gt;</span>
  <span class="nt">&lt;/tables&gt;</span>

<span class="nt">&lt;/dspl&gt;</span>
</pre></div>
                            
                          </td>
                          <td class="PosixTime">1305763609000000
                          </td>
                          <td class="ModifiedTime">1339774517000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1143.html">#1143</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5-sprint-2.html">ckan-v1.5-sprint-2</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1143.html">Improve stats page</a>
                          </td>
                          <td class="description">
                            <ul><li>Ensure we don't include deleted packages in the stats
</li><li>Some visual improvements:
<ul><li>Number of packages:
<ul><li>fix x axis to start at first revision
</li><li>fix y axis to start at zero
</li></ul></li><li>Fix problem with legend to 'Revisions to packages' graph.
</li><li>Hide sidebar in the template, so it isn't right-cropped in the DGU theme
</li></ul></li><li>Add some testing of the stats lib - results of basic stats
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1305734836000000
                          </td>
                          <td class="ModifiedTime">1307024681000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1142.html">#1142</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">annapowellsmith
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1142.html">[super] Major Overhaul and Extension of CKAN Documentation</a>
                          </td>
                          <td class="description">
                            <p>
Child tickets:
</p>
<ul><li><a class="assigned ticket" href="../ticket/1041.html" title="enhancement: Start Using the CKAN Wiki for Tutorial-style documentation (assigned)">#1041</a> Start Using the CKAN Wiki for Tutorial-style documentation
</li><li><a class="closed ticket" href="../ticket/1192.html" title="task: Convert CKAN Sphinx docs into admin/reference manual (closed: fixed)">#1192</a> Convert CKAN Sphinx docs into admin/reference manual
</li></ul><p>
Previous super ticket (from 3m ago): <a class="ext-link" href="http://trac.ckan.org/ticket/927"><span class="icon">​</span>http://trac.ckan.org/ticket/927</a>
</p>
<ul><li>CKAN 1-page overview (for enterprise and for data hackers)
</li><li>Administrator's Guide (including install)
</li><li>Extensions Guide
</li><li>Separate CKAN.net info from Software Documentation (?)
</li></ul><p>
Also now a wiki page with more detail: <a class="ext-link" href="http://wiki.ckan.net/Documentation_Plans"><span class="icon">​</span>http://wiki.ckan.net/Documentation_Plans</a>
</p>
<h2 id="MinorItems">Minor Items</h2>

                            
                          </td>
                          <td class="PosixTime">1305727452000000
                          </td>
                          <td class="ModifiedTime">1313775665000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1141.html">#1141</a>
                          </td>
                          <td class="type">CREP
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnglover
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1141.html">[super] Moderated Edits User Interface</a>
                          </td>
                          <td class="description">
                            <p>
<strong>Proposer</strong>: John Glover<br />
<strong>Seconder</strong>: James Gardner
</p>
<h2 id="Abstract">Abstract</h2>
<p>
We are trying to achieve these goals:
</p>
<ul><li>To get people involved with making edits to CKAN metadata.
</li><li>To have an ownership model as to who can moderate and validate these changes
</li><li>To not put too huge a burden on these owners.
</li></ul><p>
This feature allows anyone to edit a package and create a new revision, but requires an owner/moderator to approve a revision before it is are made "official".
</p>
<p>
There have been a lot of discussions around the revisioning system side of this ticket (CREP 0002) and I think these are now largely resolved. We now want to discuss the user interface.
</p>
<h2 id="TheProblem">The Problem</h2>
<p>
We require the following functionality:
</p>
<ul><li>Allow a group of changes to be stored as a new revision.
</li><li>Allow a linear stack of "community" revisions. 
</li><li>Provide a way for the editor and moderator to compare previous revisions to the current one.
</li><li>When a moderator approves a change it creates a new revision flagged "moderated" (this is analogous to a merge commit)
</li><li>Provide a way for the editor and moderator comment on revisions if necessary.
</li></ul><p>
Extra features:
</p>
<ul><li>Need a way to summarise the changes (as part of the preview perhaps)
</li><li>Sysadmin needs to purge a revision completely
</li></ul><h2 id="Specification">Specification</h2>
<h3 id="UIUX">UI/UX</h3>
<p>
UI Mockup:
</p>
<p>
<a style="padding:0; border:none" href="../attachment/ticket/1141/ModeratedEdits2.png.html"><img src="../raw-attachment/ticket/1141/ModeratedEdits2.png" /></a>
</p>
<p>
Revisions:
</p>
<ul><li>Revisions are per package rather than per field.
</li><li>Internally CKAN has separate revisions for resources, extras and package metadata.  From a user's point of view this could be confusing to expose, so everything that they see on a package form when they hit save is a single revision.
</li></ul><p>
On the Edit page:
</p>
<ul><li>We have a panel on the right, listing all the revisions with the current moderated one selected. Moderated revisions are highligted in some way (red and bold?).
</li><li>The values displayed in the form are by default populated from the latest revision (whether community or moderated)
</li><li>Under each field is a "shadow", showing the value of the field in the revision selected in the panel, if it is different from the value in the field. By default the shadow values are populated from the latest moderated revision which is the one selected in the revision panel by default too.
</li><li>When you change the value of a field, a shadow may appear or disappear accordingly. If they disappear a box saying that they are the same replaces it
</li><li>If you want to edit values from a previous revision, you first select that revision to get the shadows populated. There is a button named "Replace fields with values from this revision" under the revision list. You click this, a warning pops up and then you say "Yes". You then select the moderated revision again.
</li><li>We also allow package comments the same way as the todo extension works at the moment. Additionally, we need to be able to differentiate between what the moderator wrote and what a community member wrote, and so we may need to make a small change to the todo extension to facilitate this.
</li><li>In addition to package comments, each revision will have a revision log (analogous to a commit message).
</li></ul><h3 id="TechnicalDetails">Technical Details</h3>
<ul><li>This CREP will result in a new CKAN extension.
</li><li>It depends heavily on the new revisioning system (CREP0002), some of the details of which are yet to be finalised. 
</li><li>This CREP therefore requires working closely with David Raznick to come up with an API that the UI AJAX calls can use.
</li><li>We will then use suitable test data to mimic these API calls until CREP0002 is ready.
</li></ul><h2 id="Whydoitthisway">Why do it this way</h2>
<p>
This hopefully provides a clear and consistent mechanism allowing both a community member to make new revisions and a moderator to view and approve revisions, with largely the same UI/UX.
</p>
<h2 id="Implementationplan">Implementation plan</h2>
<h3 id="Deliverables">Deliverables</h3>
<p>
A new CKAN extension, consisting of:
</p>
<ul><li>Code: Python, HTML, CSS, Javascript
</li><li>Unit tests
</li><li>Localization
</li><li>Documentation
</li></ul><h3 id="Participants">Participants</h3>
<p>
John Glover to do it.
</p>
<h3 id="Progress">Progress</h3>
<p>
John has implemented the bulk of this UI. Just some things to tidy up before it is complete:
</p>
<ul><li>Genshi stream filters to be updated with CKAN 1.5 / 1.5.1 templates
</li><li>history_ajax / read_ajax to be replaced with calls to Action API (or Util REST API)
</li></ul><p>
I've split these two off into a new ticket <a class="new ticket" href="../ticket/1604.html" title="enhancement: Get ckanext-moderatededits working with CKAN 1.5+ templates (new)">#1604</a>.
</p>
<h3 id="RelatedProgress">Related Progress</h3>
<p>
The Todo extension is written and available at: <a class="ext-link" href="https://bitbucket.org/johnglover/ckanext-todo"><span class="icon">​</span>https://bitbucket.org/johnglover/ckanext-todo</a>.
</p>
<p>
In the section 'The Problem', under extra features, we mention a need for the sysadmin to be able to purge a revision already. This is already done.
</p>
<h3 id="Seealso">See also</h3>
<p>
<a class="closed ticket" href="../ticket/1129.html" title="CREP: CREP0002: Moderated  Edits (closed: fixed)">#1129</a> Backend work
</p>

                            
                          </td>
                          <td class="PosixTime">1305721003000000
                          </td>
                          <td class="ModifiedTime">1325352507000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1140.html">#1140</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1140.html">Adding the package to the group is not search indexed</a>
                          </td>
                          <td class="description">
                            <p>
To reproduce:
</p>
<ol><li><tt>paster db init</tt>
</li><li><tt>paster create-test-data</tt>
</li><li>In Web UI: create new group 'tilo', which includes package 'annakarenina'
</li><li><tt>curl http://localhost:5000/api/search/package?groups=tilo</tt>  results in 0 results (WRONG)
</li><li><tt>paster search-index rebuild</tt>
</li><li><tt>curl http://localhost:5000/api/search/package?groups=tilo</tt>  results in 1 result
</li></ol>
                            
                          </td>
                          <td class="PosixTime">1305718290000000
                          </td>
                          <td class="ModifiedTime">1312537257000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1139.html">#1139</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">lucychambers
                          </td>
                          <td class="reporter">lucychambers
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1139.html">Create CKAN Theme Gallery</a>
                          </td>
                          <td class="description">
                            <p>
Take screenshots of existing ckan instances esp those mentioned
&lt;<a class="ext-link" href="http://wiki.ckan.net/Theming"><span class="icon">​</span>http://wiki.ckan.net/Theming</a>&gt; and put on flickr in ckan or ckan-theme
group so we can create a gallery ... (both to illustrate theming but
also to show ckan instances that are around -- could add to
<a class="ext-link" href="http://wiki.ckan.net/Instances"><span class="icon">​</span>http://wiki.ckan.net/Instances</a>)
</p>

                            
                          </td>
                          <td class="PosixTime">1305645859000000
                          </td>
                          <td class="ModifiedTime">1306941356000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1138.html">#1138</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1138.html">minor navigations behave inconsistently</a>
                          </td>
                          <td class="description">
                            <p>
For Authorization Groups, if you have admin privileges you see view, edit and authz tabs, and if you don't have the necessary privileges you only see the view tab.
</p>
<p>
For Packages, you see all tabs whatever your permissions, so there's a link you can click on which will redirect you to the login page.
</p>

                            
                          </td>
                          <td class="PosixTime">1305279888000000
                          </td>
                          <td class="ModifiedTime">1316965357000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1137.html">#1137</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1137.html">Remove need for statefulness in vdm</a>
                          </td>
                          <td class="description">
                            <p>
Statefulness, especially statefulness for relation (esp m2m) is cause of most of the complexity in vdm. It is <em>required</em> because, atm, revision objects have FKs to continuity objects.
</p>
<p>
This ticket proposes the following changes:
</p>
<p>
NB: this could be limited just to case of join tables (leaving state stuff on other tables)
</p>
<ul><li>Remove FKs from revision to continuity (or allow for them to be nullable).
<ul><li>We could just limit this to m2m stuff
</li></ul></li><li>Delete of an object leads to:
<ul><li>Deletion of continuity object
</li><li>Adding an entry in revision table with state set to deleted (we retain state on revision table)
</li></ul></li></ul><p>
If this is done we will no longer need to worry about filtering on state on relationships as join table will only contain "active" relationships.
</p>
<p>
If we do this on all tables we remove need for any state awareness in client (e.g. no need to filter tables on active state).
</p>
<p>
The only disadvantage of this change is that undeletion becomes more problematic (we have to recreate some continuity objects).
</p>

                            
                          </td>
                          <td class="PosixTime">1305211628000000
                          </td>
                          <td class="ModifiedTime">1340631974000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1136.html">#1136</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1136.html">Move to SessionExtension in vdm</a>
                          </td>
                          <td class="description">
                            <p>
When vdm was created there was no SessionExtension so we use MapperExtension for doing revisioning. Now that <a class="missing wiki">SessionExtension?</a> exists we should use it. We can also follow the existing SQLAlchemy recipe: &lt;<a class="ext-link" href="http://www.sqlalchemy.org/docs/orm/examples.html?highlight=versioning#versioned-objects"><span class="icon">​</span>http://www.sqlalchemy.org/docs/orm/examples.html?highlight=versioning#versioned-objects</a>&gt;
</p>

                            
                          </td>
                          <td class="PosixTime">1305210855000000
                          </td>
                          <td class="ModifiedTime">1340632980000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1135.html">#1135</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1135.html">Changeset model for vdm</a>
                          </td>
                          <td class="description">
                            <p>
Move to Changeset model for vdm.
</p>
<p>
A changeset model is like an Audit-Log model in which we just record Changesets with Change-Objects rather than have Revision-Objects for each Object that is revisioned.
</p>
<p>
This change would also incorporate significant simplication of vdm.
</p>

                            
                          </td>
                          <td class="PosixTime">1305209986000000
                          </td>
                          <td class="ModifiedTime">1340632267000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1134.html">#1134</a>
                          </td>
                          <td class="type">CREP
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1134.html">CREP0003: Description and Configuration of Harvesters</a>
                          </td>
                          <td class="description">
                            <p>
<strong>Proposer</strong>: Adrià Mercader
</p>
<h2 id="Abstract">Abstract</h2>
<p>
The new harvester interface allows to create harvesters for different
sources, but right now harvesters don't have many ways to describe and
configure themselves. We need a way of allowing them to:
</p>
<ul><li>Expose their type and other details so they can be used internally
and on the UI.
</li><li>Define configuration settings for particular harvester instances.
</li></ul><h2 id="TheProblem">The Problem</h2>
<h3 id="Harvesterdescription">Harvester description</h3>
<p>
The current UI for adding and editing harvest sources is the same used
in ckanext-dgu, and thus the 3 harvester types used in DGU to harvest
various GEMINI realted sources are hardcoded in the form. The form will 
be migrated to a DGU-independent one, so we need the harvesters to 
provide all the necessary data. There is a current <tt>get_type</tt> method
that returns the harvester type, but for make it compatible with the DGU
forms, it returns a machine-readable string (e.g. "CSW Server"), making
it error prone.
</p>
<h3 id="Arbitraryconfiguration">Arbitrary configuration</h3>
<p>
In the current implementation, when the harvest process is started,
ckanext-harvest looks for all the available plugins that implement the 
<tt>IHarvester</tt> interface and calls the appropiate methods for the
current stage (<tt>gather_stage</tt>,<tt>fetch_stage</tt>,<tt>import_stage</tt>).
At these stages, harvesters have no way of applying arbitrary
configuration options, so all harvesters of the same type behave on the
same way.
For instance, the CKAN harvester needs a way to define the API version
to use when harvesting remote instances (Right now, the version 2 is
hardcoded on the code).
</p>
<h2 id="Specification">Specification</h2>
<h3 id="Harvesterdescription1">Harvester description</h3>
<p>
Harvesters will need to provide the following information so the UI form
can be built:
</p>
<ul><li>name: machine-readable name (e.g. "waf"). This will be the value
stored in the database, and the one used by ckanext-harvest to
call the appropiate harvester.
</li><li>title: human-readable name (e.g. "Web Accessible Folder (WAF)").
This will appear in the form's select box.
</li><li>description: a description of what the harvester does (e.g. "A Web 
Accessible Folder (WAF) displaying a list of GEMINI 2.1 
documents"). This will appear on the form as a guidance to the
user.
</li></ul><p>
The way to provide it will be an <tt>info</tt> method that all harvesters
must implement, which will return a dictionary with the previous
elements:
</p>
<pre class="wiki">    {
        'name': 'csw',
        'title': 'CSW Server',
        'description': 'A server that implements OGC's Catalog Service 
                        for the Web (CSW) standard'
    }
</pre><h3 id="Arbitraryconfiguration1">Arbitrary configuration</h3>
<p>
As different harvesters will have very different needs, we need to
provide a way to persist arbitrary configuration flags for each harvest
source. The more flexible way given the current architecture in my
opinion would be to store the configuration options as a JSON encoded
object as a property of the harvest source (There already is an unused
DB field called <tt>config</tt> in the database) (Maybe using <a class="missing wiki">JsonType?</a>?).
</p>
<p>
This will mean adding an extra field in the harvest source form to allow
entering the configuration. This could be just a simple text field where
users enter the JSON encoded object or a more clever mechanism (i.e an 
"Add a configuration flag" link that adds two new text fields for the
key and value for each flag, and a mechanism to later build the JSON 
object). In any case, this should probably be hidden in an "Advance
options" section.
</p>
<h2 id="Whydoitthisway">Why do it this way</h2>
<h3 id="Harvesterdescription2">Harvester description</h3>
<p>
The <tt>info</tt> method would provide a single point to get all the
information related to the harvester, and future properties could be 
added to the dictionary returned without having to modify the interface.
</p>
<h3 id="Arbitraryconfiguration2">Arbitrary configuration</h3>
<p>
There is an already existing <tt>config</tt> field in the database, so we
won't need to change the model. 
Harvesters could access the config object at any of the stages. Of
course they could provide default values in their implementations so
users don't need to enter them everytime.
</p>
<h2 id="Implementationplan">Implementation plan</h2>
<h3 id="Deliverables">Deliverables</h3>
<h3 id="Risksandmitigations">Risks and mitigations</h3>
<p>
The highest risk on the harvesters <tt>info</tt> method side is that 
harvester implementation don't offer one of the necessary properties
(namely name and title). This could fire a warning when showing the 
UI form or using the CLI.
</p>
<h3 id="Participants">Participants</h3>
<p>
Adrià Mercader to do it.
</p>
<h3 id="Progress">Progress</h3>
<p>
None yet.
</p>

                            
                          </td>
                          <td class="PosixTime">1305108868000000
                          </td>
                          <td class="ModifiedTime">1339774554000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1133.html">#1133</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">worksforme
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1133.html">command line rights manipulation doesn't work</a>
                          </td>
                          <td class="description">
                            <p>
It appears that the command
</p>
<p>
$ paster rights add russianfan admin warandpeace
</p>
<p>
has no effect, even though
</p>
<p>
$ paster rights remove russianfan admin warandpeace
</p>
<p>
works fine. This may be specific to something I've done, could someone confirm?
</p>
<p>
If it's the case more generally, then I'm assuming this behaviour is untested? Tests should probably be added.
</p>

                            
                          </td>
                          <td class="PosixTime">1305054948000000
                          </td>
                          <td class="ModifiedTime">1324057072000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1132.html">#1132</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1132.html">test_authz doesn't run</a>
                          </td>
                          <td class="description">
                            <p>
Trying to run the tests in test_authz.py with
</p>
<p>
$ nosetests --ckan ckan/tests/functional/test_authz.py
results in no tests being run:
</p>
<hr />
<p>
Ran 0 tests in 0.840s
</p>
<p>
OK (SKIP=3)
</p>

                            
                          </td>
                          <td class="PosixTime">1304966923000000
                          </td>
                          <td class="ModifiedTime">1307352675000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1131.html">#1131</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-7.html">ckan-v1.4-sprint-7</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1131.html">Search param validation exception not caught</a>
                          </td>
                          <td class="description">
                            <p>
Example request:
</p>
<pre class="wiki">http://nl.ckan.net/api/2/search/package?q=delft&amp;order_by=&amp;offset=&amp;limit=&amp;tags=
</pre><p>
Gives 500 error:
</p>
<pre class="wiki">&lt;type 'exceptions.ValueError'&gt;: invalid literal for int() with base 10: ''
</pre>
                            
                          </td>
                          <td class="PosixTime">1304942023000000
                          </td>
                          <td class="ModifiedTime">1305537897000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1130.html">#1130</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">lucychambers
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1130.html">First time users</a>
                          </td>
                          <td class="description">
                            <p>
Send users to FAQ first time on CKAN
</p>

                            
                          </td>
                          <td class="PosixTime">1304938761000000
                          </td>
                          <td class="ModifiedTime">1340633514000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1129.html">#1129</a>
                          </td>
                          <td class="type">CREP
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1129.html">CREP0002: Moderated  Edits</a>
                          </td>
                          <td class="description">
                            <p>
<strong>Proposer:</strong> David Raznick<br />
</p>
<h2 id="Abstract.">Abstract.</h2>
<p>
We are trying to achieve these goals.
</p>
<ul><li>To get people involved with making edits to CKAN metadata. 
</li><li>To have an ownership model as to who can moderate and validate these changes
</li><li>To not put too huge a burden on these owners.
</li></ul><p>
In order to achieve this, a feature which lets anyone edit a package but only let the moderator/owner accept it.  The moderator should be able to look at a list of changes and accept the ones that
</p>
<p>
This cep is not about 'if' we need such a feature, it is about 'how' we go about implementing it. Another cep may needed for the 'if' case.
</p>
<h2 id="TheProblem">The Problem</h2>
<p>
We need the following to be possible.
</p>
<ul><li>Storing revision of objects that are not the current active one.
</li><li>A way of the user viewing past revisions.
</li><li>Accessing not only the history of a particular object but also of related objects at that time. i.e If a resource related to a package changes we need a way to see this when looking at the package.
</li><li>A robust way of doing this in the face of database schema changes.
</li><li>Make sure database queries are quick.
</li></ul><h2 id="Solutions.">Solutions.</h2>
<ol><li> Store the whole dictization of the package and all its related objects every time you change anything in its dictized representation and only save to the database proper if accepted.
</li></ol><blockquote>
<p>
Pros
</p>
</blockquote>
<ul><li>Easy to implement, we already have a preview which makes the dictized form of a package without actually saving it.  This will just need to be persisted in some way.
</li><li>Fast retrieval.
</li><li>Potential to store a branching revision tree of changes.
</li></ul><blockquote>
<p>
Cons
</p>
</blockquote>
<ul><li>No easy way to remake the dictized packages historically or if there is an there a change in the way we represent packages, i.e schema changes.
</li><li>Will only work for the particular objects we decide to store these changes for.
</li><li>Stores a lot of repeated information
</li></ul><ol start="2"><li> Write specialized queries for every read of the database looking only at the revision tables.
</li></ol><p>
This method requires there to be a change in the way we use VDM, so that we manage statefulness ourselves. We will need to add other states such as 'waiting for approval'.
</p>
<blockquote>
<p>
Pros
</p>
</blockquote>
<ul><li>No specialized storage required
</li><li>Only need to change queries when schema changes
</li><li>Can be made to work easily for other objects
</li></ul><blockquote>
<p>
Cons
</p>
</blockquote>
<ul><li>Slower query time on read, as even looking at the last active package will need to do a fairly complicated query.
</li></ul><h2 id="Implementationdetails.">Implementation details.</h2>
<p>
1.
</p>
<blockquote>
<p>
A new table with columns  id, user, package_id, timestamp, revision_id, parent_id, dictized_package.
revision_id should be null unless it is actually persisted to the database.  parent_id is the id that this package_dict was changed from.
</p>
</blockquote>
<blockquote>
<p>
We could store only the diffs of the dictized_package as long as we assure that everything inside the json is stably sorted, this will make getting the historical data out slower.
</p>
</blockquote>
<blockquote>
<p>
Getting out the history of the dictized packages is an intensive task, as it will require replaying the whole history of all the changes and creating the dict for each change.  This re-caching will need to be redone for every change we make to dictized representation of a package.
</p>
</blockquote>
<p>
2.
</p>
<blockquote>
<p>
Every normal packages read needs to look at the revision table to see the last accepted change in the dictized representation of the package. 
We also need to way to get what the dictized representation of the package was like at any point of its revision history.  This querying is non-trivial in sql.
</p>
</blockquote>
<h3 id="Participants">Participants</h3>
<p>
David Raznick to do it.
</p>
<h2 id="Progress.">Progress.</h2>
<p>
Decided to go with option 2. However we will change the revisioning system to be like the schema attached.
This gets rid of difficult querying problems caused by querying the revision tables by adding an end date, meaning you can do range queries.
</p>
<p>
The better and more normalized version of a revisioning system is outlined <a class="ext-link" href="https://docs.google.com/drawings/d/1Y7nMgVsrs081Pame2RdbZHlCAlV33ddTZ8VAsab1j-0/edit?hl=en_GB&amp;authkey=CJfd8vsB"><span class="icon">​</span>https://docs.google.com/drawings/d/1Y7nMgVsrs081Pame2RdbZHlCAlV33ddTZ8VAsab1j-0/edit?hl=en_GB&amp;authkey=CJfd8vsB</a>. 
We will be a step closer to that, with this change, but we will keep the current vdm more or less, intact.
</p>

                            
                          </td>
                          <td class="PosixTime">1304851498000000
                          </td>
                          <td class="ModifiedTime">1325268100000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1128.html">#1128</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-10-28.html">ckan-sprint-2011-10-28</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1128.html">Upload Scotland gov data</a>
                          </td>
                          <td class="description">
                            <p>
Upload to ckan.net:
<a class="ext-link" href="https://sites.google.com/site/scotlandsdata/"><span class="icon">​</span>https://sites.google.com/site/scotlandsdata/</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1304712293000000
                          </td>
                          <td class="ModifiedTime">1310568028000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1127.html">#1127</a>
                          </td>
                          <td class="type">CREP
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">sebbacon
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1127.html">CREP0001: Formalise new feature discussion and definition using CREPs</a>
                          </td>
                          <td class="description">
                            <p>
<strong>Proposer:</strong> Seb Bacon<br />
<strong>Seconder:</strong> Rufus Pollock<br />
<br />
</p>
<h2 id="Abstract">Abstract</h2>
<p>
When adding major new features to CKAN, a longer, more formal discussion 
will improve software design quality and documentation, better engage
the wider community, and ensure the core team are up to date with
latest developments.  
</p>
<p>
I propose a formal process (CREP -- CKAN Revision and Enhancement Proposal) for making this happen.
</p>
<h2 id="TheProblem">The Problem</h2>
<p>
The current workflow for introducing major new features into CKAN is
very informal, typically based around one person's great idea, which
they've discussed with one or two other people in the team.  The
originator of the idea is typically the only person with access to 
all the input they've had through such discussions.  Often, the only 
location of this information is  in that person's head.
</p>
<p>
However, there is a lot of experience embodied in the CKAN community
which should be drawn on before making large design decisions.  This
will lead to better software.  Additionally, building consensus in the
community around a proposal before implementation ensures positive
community engagement and buy-in to new features, making them more
likely to be a success.
</p>
<p>
We aren't great at documenting new features.  Documentation after
coding is complete is an unrewarding experience for most programmers.
Requiring skeleton documentation before code is written is a good
discipline that can form the basis of better documentation in the
future (e.g. by a writer rather than a programmer).
</p>
<h2 id="Specification">Specification</h2>
<p>
Minor features don't require a CREP, and can just be entered in the
issue tracking system as a bug or feature.  As a rule of thumb, a
feature is major if it will take more than a day to implement, or is
likely to involve matters of opinion in its design.
</p>
<p>
A developer may decide that a CREP is too formal and long-winded. The 
decision to write a CREP is at at their discretion; however, new 
features MUST always be proposed via email, even if this is just a 
couple of sentences.
</p>
<p>
If a feature requires a CREP, the proposer should find a seconder
for their idea.  This sanity check step happens before a CREP is
written to ensure at least the possibility of consensus on the CREP.
</p>
<p>
Next the proposer should write a CREP, starting by copying and pasting
the <a class="ext-link" href="http://wiki.ckan.net/CKAN_Revision_and_Enhancement_Proposals"><span class="icon">​</span>template on the wiki</a> into a new Trac ticket.  This will be with a status of "new" and Type of "CREP".  The proposer should notify
the <a class="ext-link" href="http://lists.okfn.org/mailman/listinfo/ckan-dev"><span class="icon">​</span>ckan-dev</a> mailing
list, and possibly the
<a class="ext-link" href="http://lists.okfn.org/mailman/listinfo/ckan-discuss"><span class="icon">​</span>ckan-discuss</a>
list for less technical CREPs.
</p>
<p>
The draft can be discussed via email, verbally, or via the trac
ticket.  In any case, it is the proposer's responsibility to keep the
CREP updated to reflect the current consensus.
</p>
<p>
Once consensus has been reached, the ticket should be marked with the
"accepted" status and assigned to a CKAN release milestone.
</p>
<p>
When an accepted CREP has been implemented, it should be resolved as
"fixed".
</p>
<p>
If no consensus can be reached on a draft CREP, or for some reason an
accepted CREP doesn't get completed, it should be marked as or "wontfix".
</p>
<p>
If a completed CREP becomes obsolete, it should be marked as "invalid", 
with a note pointing to the obsoleting ticket(s)
</p>
<h2 id="Whydoitthisway">Why do it this way</h2>
<p>
Given the distributed nature of the core team plus other volunteers,
some kind of written procedure is necessary to ensure a fully
documented and discussed proposal.
</p>
<p>
The idea of "Enhancement Proposals" which can be semi-formally
proposed and discussed prior to implementation is common in the Open
Source world (<a class="ext-link" href="http://www.python.org/dev/peps/pep-0001/"><span class="icon">​</span>PEPs</a>,
<a class="ext-link" href="http://dep.debian.net/"><span class="icon">​</span>DEPs</a>,
<a class="ext-link" href="http://plone.org/documentation/glossary/plip"><span class="icon">​</span>PLIPs</a>, to name three).
</p>
<p>
Existing historic proposals exist, called CEPs.  The proposed system
is called CREP (CKAN revision or enhancement proposal) to disambiguate
it from the legacy proposals, and from the delicious fungus <em>Boletus
Edulis</em>.
</p>
<p>
Giving a formal structure to the proposal is useful as it gives the
community a means to identify a CREP that's not had sufficient thought
or discussion.  An informal email thread can easily be lost and
important questions (such as backwards compatibility) overlooked.  The
use of the proposed template empowers any community member to ask the
proposer to expand on rationale, deliverables, etc.
</p>
<p>
The structure chosen is somewhere between Debian's and Plone's.  It
aims to give a structure to the debate, a clear start at
documentation, and also prompt some thinking about implementation and
timescales.
</p>
<p>
All this policy about structure should not be construed as mandatory.  
In particular, the later fields in the CREP template regarding 
Implementation Plan may be omitted if the author doesn't find them 
helpful.
</p>
<p>
Some projects (e.g. Debian) keep their enhancement proposals in a
versioning repository; others (e.g. Plone) keep them in an issue
tracking system.  Trac is proposed for CKAN because we already use it
for small feature proposals and for team planning.  It seems unlikely
that change tracking on an individual CREP will be useful; a CREP that
changes sufficiently from its original form should probably be marked
"obselete" and a new CREP started.  Using an issue tracking system also
means we can easily track CREPs by state.
</p>
<h2 id="BackwardsCompatibility">Backwards Compatibility</h2>
<p>
Some [<a class="ext-link" href="https://bitbucket.org/okfn/ceps/src/76b274888bcf/cep/"><span class="icon">​</span>https://bitbucket.org/okfn/ceps/src/76b274888bcf/cep/</a> legacy 
enhancement proposals], called CEPs, have previously been started.
</p>
<p>
They are currently all marked as "active".  Any which require
discussion should be altered by the proposer to match the new CREP
specification and submitted to trac.  The original CEP should be
updated with a banner at the top pointing a reader to the new CREP.
</p>
<p>
Any that are now obselete should be clearly marked as such in a banner
at the top, pointing a reader to the trac for new CREPs.
</p>
<h2 id="Implementationplan">Implementation plan</h2>
<h3 id="Deliverables">Deliverables</h3>
<ul><li>This CREP, agreed
</li><li>Support for proposed statuses in Trac
</li><li>Canned reports for listing CREPs in Trac
</li></ul><h3 id="Risksandmitigations">Risks and mitigations</h3>
<ul><li>That this CREP is agreed, but rarely acted on.  This risk can be
mitigated by nominating a CREP champion in the community or core
team, whose job it is to say "where's the CREP for that?" and
generally own the quality of CREPS
</li></ul><h3 id="Participants">Participants</h3>
<p>
Seb Bacon: as current Documentation Czar (May 2011), responsible for 
ensuring CREPs are up to date.
</p>
<h3 id="Progress">Progress</h3>
<p>
This document is the entire proposal.
</p>

                            
                          </td>
                          <td class="PosixTime">1304601313000000
                          </td>
                          <td class="ModifiedTime">1305622850000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1126.html">#1126</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-7.html">ckan-v1.4-sprint-7</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1126.html">Exceptions arising from error page</a>
                          </td>
                          <td class="description">
                            <p>
I'm not completely clear what the use case is for loading the error page in this way, but somehow original_request is None and that creates an unnecessary exception with the logic refactor.
</p>
<pre class="wiki">http://ckan.net/error/document?__cache=39020485
...
Module ckan.controllers.error:29 in document
&lt;&lt;          original_response = request.environ.get('pylons.original_response')
               # Bypass error template for API operations.
               if original_request.path.startswith('/api'):
                   return original_response.body
               # Otherwise, decorate original response with error template.
&gt;&gt;  if original_request.path.startswith('/api'):
AttributeError: 'NoneType' object has no attribute 'path'
</pre>
                            
                          </td>
                          <td class="PosixTime">1304586683000000
                          </td>
                          <td class="ModifiedTime">1304587078000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1125.html">#1125</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">nils.toedtmann
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1125.html">Debian package "ckan" should not depend on "postgresql"</a>
                          </td>
                          <td class="description">
                            <p>
The debian package "ckan" with the two scripts "ckan-create-instance" and "ckan-instance-maintenance" depends against "postgresql". But "ckan-create-instance" is quite handy even when the DB is remote: it creates all the data dirs with the correct permissions, and the ckan and apache configs.
</p>
<p>
Please add a flag "--without-local-db" to "ckan-create-instance" and remove the postgres dependancy from the debain package.
</p>

                            
                          </td>
                          <td class="PosixTime">1304538095000000
                          </td>
                          <td class="ModifiedTime">1310134813000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1124.html">#1124</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">thejimmyg
                          </td>
                          <td class="reporter">nils.toedtmann
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-12-05.html">ckan-sprint-2011-12-05</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1124.html">push apt package python-ckanext-solr into our debian repository</a>
                          </td>
                          <td class="description">
                            <p>
python-ckanext-solr is already available in <a class="ext-link" href="http://apt-alpha.ckan.org/datanl-dev"><span class="icon">​</span>http://apt-alpha.ckan.org/datanl-dev</a>, but not yet in <a class="ext-link" href="http://apt-alpha.ckan.org/debian"><span class="icon">​</span>http://apt-alpha.ckan.org/debian</a> (that is why we had to [pip-install it for DataGM). Please push into main repo.
</p>

                            
                          </td>
                          <td class="PosixTime">1304537793000000
                          </td>
                          <td class="ModifiedTime">1323168156000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1123.html">#1123</a>
                          </td>
                          <td class="type">requirement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">nils.toedtmann
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1123.html">Please re-package CKAN packages as "noarch"</a>
                          </td>
                          <td class="description">
                            <p>
... or, if the CKAN packages do contain architecture-specific binary code, build packages for i386 too. 
</p>
<p>
Currently, <a class="ext-link" href="http://apt-alpha.ckan.org/debian"><span class="icon">​</span>http://apt-alpha.ckan.org/debian</a> only offers packages for amd64, but e.g. "m1.small" EC2 instances are i386.
</p>
<p>
We would need this in order to migrate the community instances to a packaged based CKAN.
</p>
<p>
Rufus, pls prioritise.
</p>

                            
                          </td>
                          <td class="PosixTime">1304530050000000
                          </td>
                          <td class="ModifiedTime">1311863806000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1122.html">#1122</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">pudo
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1122.html">JSON Extra data not searchable</a>
                          </td>
                          <td class="description">
                            <p>
It is possible to use the CKAN API to insert JSON format data into package extra values, but this data is not found on searching.
</p>
<p>
Full text from Pascal:
</p>
<pre class="wiki">we encountered a Problem concerning accessing Arrays/Lists.

curl -XGET 'http://ckan.net/api/rest/package/hbz_unioncatalog'

will get you amongst others:

 "extras": {"publishingInstitution":
"[u'http://lobid.org/organisation/DE-605',
u'http://lobid.org/organisation/DE-290',
u'http://lobid.org/organisation/DE-38M',
u'http://lobid.org/organisation/DE-98',
u'http://lobid.org/organisation/DE-38',
u'http://lobid.org/organisation/DE-Kn41',
u'http://lobid.org/organisation/DE-82',
u'http://lobid.org/organisation/DE-107',
u'http://lobid.org/organisation/DE-929',
u'http://lobid.org/organisation/DE-Zw1',
u'http://lobid.org/organisation/DE-832']"}

but if I try to query this:

wget
'http://ckan.net/api/search/package?q=lobid&amp;publishingInstitution="http://lobid.org/organisation/DE-605"'

I get only two packages, among the package "hbz_unioncatalog" is
missing. (These two packages have only one value for
"publishingInstitution").

The "extra/publishingInstitution"-Array was uploaded through a "curl
-XPUT ...
 "extras": {
   "publishingInstitution":[
     "http://lobid.org/organisation/DE-605",
     "http://lobid.org/organisation/DE-290",
     "http://lobid.org/organisation/DE-38M",
     "http://lobid.org/organisation/DE-98",
     "http://lobid.org/organisation/DE-38",
     "http://lobid.org/organisation/DE-Kn41",
     "http://lobid.org/organisation/DE-82",
     "http://lobid.org/organisation/DE-107",
     "http://lobid.org/organisation/DE-929",
     "http://lobid.org/organisation/DE-Zw1",
     "http://lobid.org/organisation/DE-832"
   ]
   },
...
</pre>
                            
                          </td>
                          <td class="PosixTime">1304367510000000
                          </td>
                          <td class="ModifiedTime">1306747714000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1121.html">#1121</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1121.html">JSON extras appear in package edit form mangled</a>
                          </td>
                          <td class="description">
                            <p>
It is possible to use the CKAN API to insert JSON format data into package extra values, but this data is displayed in the package edit form.
</p>
<p>
Example: Package <a class="ext-link" href="http://ckan.net/package/hbz_unioncatalog"><span class="icon">​</span>http://ckan.net/package/hbz_unioncatalog</a> in the API the extra value as a list:
</p>
<pre class="wiki">"extras": {"publishingInstitution": ["http://lobid.org/organisation/DE-605", "http://lobid.org/organisation/DE-290"...
</pre><p>
yet when you edit the package it loses all the quotes and brackets: <a class="ext-link" href="http://ckan.net/package/edit/hbz_unioncatalog"><span class="icon">​</span>http://ckan.net/package/edit/hbz_unioncatalog</a>
{{{<a class="ext-link" href="http://lobid.org/organisation/DE-605http://lobid.org/organisation/DE-290"><span class="icon">​</span>http://lobid.org/organisation/DE-605http://lobid.org/organisation/DE-290</a>...
}}}
so when you save the package, the list is mangled into a bad string.
</p>

                            
                          </td>
                          <td class="PosixTime">1304367504000000
                          </td>
                          <td class="ModifiedTime">1307358426000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1120.html">#1120</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">tsm
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1120.html">Atom feeds of each tag</a>
                          </td>
                          <td class="description">
                            <p>
Tags could/should have an Atom feed. This would mean that every edit to relevant packages could be easily monitored. See <a class="missing changeset" title="No default repository defined">[1]</a>.
</p>
<p>
<a class="missing changeset" title="No default repository defined">[1]</a> <a class="ext-link" href="http://lists.okfn.org/pipermail/ckan-discuss/2011-May/001162.html"><span class="icon">​</span>http://lists.okfn.org/pipermail/ckan-discuss/2011-May/001162.html</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1304309285000000
                          </td>
                          <td class="ModifiedTime">1339774568000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1119.html">#1119</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-7.html">ckan-v1.4-sprint-7</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1119.html">Fully functional storage extension with file upload</a>
                          </td>
                          <td class="description">
                            <p>
Previous work in <a class="closed ticket" href="../ticket/877.html" title="enhancement: File upload in WUI (extension) (closed: fixed)">#877</a> and <a class="closed ticket" href="../ticket/879.html" title="enhancement: Storage auth API (closed: fixed)">#879</a> + <a class="closed ticket" href="../ticket/853.html" title="enhancement: Client upload to storage without having primary storage keys (closed: fixed)">#853</a> (storage API). In this ticket:
</p>
<ul><li>Improve authorization
</li><li>Establish convention for laying out files on disk
</li><li>Add documentation
</li><li>Fix bugs with <a class="closed ticket" href="../ticket/879.html" title="enhancement: Storage auth API (closed: fixed)">#879</a> (does not currently work -- boto may have changed)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1304094382000000
                          </td>
                          <td class="ModifiedTime">1305037201000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1118.html">#1118</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1118.html">tests are testing something other than the behaviour seen in the browser</a>
                          </td>
                          <td class="description">
                            <p>
I'm finding that if I try to take an action with insufficient credentials from a test then I often (but not always) get a 401 error, whereas in the browser I get redirected to the login page.
</p>
<p>
It's a bit worrying that the program in its test environment doesn't behave like it does in the browser.
</p>

                            
                          </td>
                          <td class="PosixTime">1304093017000000
                          </td>
                          <td class="ModifiedTime">1311174062000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1117.html">#1117</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">thejimmyg
                          </td>
                          <td class="reporter">nils.toedtmann
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1117.html">Depend deb package "ckan" against ubuntu package "python-pastescript"</a>
                          </td>
                          <td class="description">
                            <p>
... otherwise the scripts fails.
</p>

                            
                          </td>
                          <td class="PosixTime">1304089619000000
                          </td>
                          <td class="ModifiedTime">1304277240000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1116.html">#1116</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-7.html">ckan-v1.4-sprint-7</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1116.html">api search loses boolean q options</a>
                          </td>
                          <td class="description">
                            <p>
filter_by_openness and filter_by_downloadable options don't work when specified as URI parameters. (They do work in qjson parameters)
</p>

                            
                          </td>
                          <td class="PosixTime">1304086823000000
                          </td>
                          <td class="ModifiedTime">1304358664000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1115.html">#1115</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1115.html">can have two authzgroups with the same name</a>
                          </td>
                          <td class="description">
                            <p>
If you've got edit permission on an authzgroup, then you can change its name to be the same as another existing authzgroup.
</p>
<p>
This causes some strange UI effects at worst, and probably causes worse problems somewhere else.
</p>
<p>
Is there any reason why changing the names of existing authzgroups should be allowed? And if so, name collisions should presumably be guarded against in both the name-changing and creation functions
</p>

                            
                          </td>
                          <td class="PosixTime">1304085120000000
                          </td>
                          <td class="ModifiedTime">1324054704000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1114.html">#1114</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-7.html">ckan-v1.4-sprint-7</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1114.html">CLI for viewing search index of a package</a>
                          </td>
                          <td class="description">
                            <p>
To see what lexemes are generated for debug purposes.
</p>

                            
                          </td>
                          <td class="PosixTime">1304078353000000
                          </td>
                          <td class="ModifiedTime">1304085484000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1113.html">#1113</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1113.html">lists in extras serialized wrongly on get with the api.</a>
                          </td>
                          <td class="description">
                            <p>
Lists are being converted to unicode and then translated into a json when getting from the api.
</p>

                            
                          </td>
                          <td class="PosixTime">1304017353000000
                          </td>
                          <td class="ModifiedTime">1304024611000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1112.html">#1112</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-7.html">ckan-v1.4-sprint-7</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1112.html">Allow searching for all packages</a>
                          </td>
                          <td class="description">
                            <pre class="wiki">GET api/search/package?q=
</pre><p>
returns all packages. This is so you can filter them e.g. by openness, which is not currently possible.
</p>

                            
                          </td>
                          <td class="PosixTime">1304007852000000
                          </td>
                          <td class="ModifiedTime">1304358643000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1111.html">#1111</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">lucychambers
                          </td>
                          <td class="reporter">lucychambers
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1111.html">FAQ - For CKAN</a>
                          </td>
                          <td class="description">
                            <p>
Write CKAN FAQ (Basis can be: <a class="ext-link" href="http://wiki.ckan.net/FAQ"><span class="icon">​</span>http://wiki.ckan.net/FAQ</a>) 
</p>
<p>
Post preliminary questions on: 
</p>
<p>
<a class="ext-link" href="http://notebook.okfn.org/"><span class="icon">​</span>http://notebook.okfn.org/</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1303906561000000
                          </td>
                          <td class="ModifiedTime">1305881039000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1110.html">#1110</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1110.html">profile ckan</a>
                          </td>
                          <td class="description">
                            <p>
We need to see what areas of ckan are slow.
</p>

                            
                          </td>
                          <td class="PosixTime">1303840041000000
                          </td>
                          <td class="ModifiedTime">1340034394000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1109.html">#1109</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1109.html">When extras has a value other than a string an integrity error occurs in the api.</a>
                          </td>
                          <td class="description">
                            <p>
This is a regression that happened after refactoring the api.
</p>
<p>
It was shown by 
</p>
<p>
<a class="ext-link" href="http://pastebin.com/2v7QasZy"><span class="icon">​</span>http://pastebin.com/2v7QasZy</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1303839943000000
                          </td>
                          <td class="ModifiedTime">1305124697000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1108.html">#1108</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">zephod
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-09-12.html">ckan-sprint-2011-09-12</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1108.html">Create a more modern theme for CKAN</a>
                          </td>
                          <td class="description">
                            <p>
CKAN looks a bit aged, it should be styled more modernly and some elements could be re-arranged: 
</p>
<ul><li>Collect user info in top bar
</li><li>re-add the logo to ckan.net
</li><li>Remove tags from main menu, replace with /sitemap.xml
</li></ul><p>
Inpiration: 
</p>
<p>
quora.com, github.com, Google Projects, Google Refine, etc.
</p>
<h2 id="CKAN.netorCKANgeneraltheme">CKAN.net or CKAN general theme?</h2>
<p>
To be decided. Suggest we start with ckan.net specific and then backwards integrate (?). Existing ckan.net theme repo:
</p>
<p>
<a class="ext-link" href="https://bitbucket.org/okfn/ckan-ckan.net"><span class="icon">​</span>https://bitbucket.org/okfn/ckan-ckan.net</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1303830790000000
                          </td>
                          <td class="ModifiedTime">1315140879000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1107.html">#1107</a>
                          </td>
                          <td class="type">refactor
                          </td>
                          <td class="owner">tidy-up bitesize
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1107.html">Move package autocomplete from package controller and move to API</a>
                          </td>
                          <td class="description">
                            <p>
Currently autocomplete method on package controller. This method should be in API (like other autocomplete methods).
</p>
<p>
Will need to update client code (just forms atm I think).
</p>

                            
                          </td>
                          <td class="PosixTime">1303808480000000
                          </td>
                          <td class="ModifiedTime">1340632612000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1106.html">#1106</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-6.html">ckan-v1.4-sprint-6</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1106.html">Bugs related to routes arising from API refactor + removal of default routes</a>
                          </td>
                          <td class="description">
                            <p>
Various bugs I've been encountering:
</p>
<ul><li>Autocomplete of tag names no longer works (no longer works on <a class="ext-link" href="http://ckan.net/"><span class="icon">​</span>http://ckan.net/</a>). Appears to be due to no longer have a routes for apiv2 (i'm seeing failing calls to:  <a class="ext-link" href="http://ckan.net/apiv2/package/autocomplete?callback=callback&amp;incomplete=a"><span class="icon">​</span>http://ckan.net/apiv2/package/autocomplete?callback=callback&amp;incomplete=a</a>)
</li><li>Incorrect url generated for API in page footer (e.g.  <a class="ext-link" href="http://ckan.net/rest/get_api"><span class="icon">​</span>http://ckan.net/rest/get_api</a>) due to use of old 'rest' rather than new 'api'
</li></ul><p>
Latter issue was masked by existence of 'default' routes:
</p>
<pre class="wiki">   map.connect('/{controller}', action='index')
   map.connect('/:controller/{action}')
   map.connect('/{controller}/{action}/{id}')
</pre><p>
Having these is, I think, bad practice as it is better to be explicit and we should therefore remove asap.
</p>
<p>
In addition I think we should be cautious about 'default' routes in core such as:
</p>
<pre class="wiki">    map.connect('/api/rest/:register', controller='api', action='list',
        conditions=dict(method=['GET'])
        )
</pre><p>
As it makes it harder for extensions to introduce their own APIs (here one could perhaps add something at /api/rest/{my-object} but only by using before_map rather than after_map).
</p>

                            
                          </td>
                          <td class="PosixTime">1303747360000000
                          </td>
                          <td class="ModifiedTime">1303834069000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1105.html">#1105</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">nils.toedtmann
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1105.html">test ticket, please ignore</a>
                          </td>
                          <td class="description">
                            <p>
.
</p>

                            
                          </td>
                          <td class="PosixTime">1303508261000000
                          </td>
                          <td class="ModifiedTime">1303508330000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1104.html">#1104</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-7.html">ckan-v1.4-sprint-7</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1104.html">create-test-data doesn't index the packages it creates</a>
                          </td>
                          <td class="description">
                            <p>
With the default test data created by
</p>
<p>
paster db clean
paster db init
paster create-test-data
</p>
<p>
going to the front page shows two recently changed packages
A Wonderful Story
A Novel by Tolstoy
</p>
<p>
But none of those words "Wonderful", etc produce search hits.
In fact as far as I can tell, nothing produces any search hits.
</p>
<p>
That isn't true on ckan.net, where searching seems to work.
</p>

                            
                          </td>
                          <td class="PosixTime">1303494635000000
                          </td>
                          <td class="ModifiedTime">1303920791000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1103.html">#1103</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1103.html">searching broken in development setup</a>
                          </td>
                          <td class="description">
                            <p>
With the default test data created by
</p>
<p>
paster db clean
paster db init
paster create-test-data
</p>
<p>
going to the front page shows two recently changed packages
A Wonderful Story
A Novel by Tolstoy
</p>
<p>
But none of those words "Wonderful", etc produce search hits.
In fact as far as I can tell, nothing produces any search hits.
</p>
<p>
That isn't true on ckan.net, where searching seems to work.
</p>

                            
                          </td>
                          <td class="PosixTime">1303494538000000
                          </td>
                          <td class="ModifiedTime">1303744575000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1102.html">#1102</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1102.html">searching broken in development setup</a>
                          </td>
                          <td class="description">
                            <p>
With the default test data created by
</p>
<p>
paster db clean
paster db init
paster create-test-data
</p>
<p>
going to the front page shows two recently changed packages
A Wonderful Story
A Novel by Tolstoy
</p>
<p>
But none of those words "Wonderful", etc produce search hits.
In fact as far as I can tell, nothing produces any search hits.
</p>
<p>
That isn't true on ckan.net, where searching seems to work.
</p>

                            
                          </td>
                          <td class="PosixTime">1303491912000000
                          </td>
                          <td class="ModifiedTime">1303744552000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1101.html">#1101</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">sebbacon
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1101.html">Integrate googlanalytics into site nav</a>
                          </td>
                          <td class="description">
                            <p>
There's a stats plugin (e.g. at <a class="ext-link" href="http://trac.ckan.org/ticket/832"><span class="icon">​</span>http://trac.ckan.org/ticket/832</a>).
</p>
<p>
Output from the googleanalytics plugin should append to that page, if the stats plugin is present.
</p>
<p>
Possibly the stats plugin and the googleanalytics plugin should be merged?
</p>
<p>
Finally, if the stats plugin is active, then a link to the stats page should be added to the main site footer.
</p>

                            
                          </td>
                          <td class="PosixTime">1303393926000000
                          </td>
                          <td class="ModifiedTime">1339774582000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1100.html">#1100</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-6.html">ckan-v1.4-sprint-6</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1100.html">Get buildbot running on ckan branches</a>
                          </td>
                          <td class="description">
                            <p>
Need some changes to pip-requirements files in release branches.
</p>

                            
                          </td>
                          <td class="PosixTime">1303385267000000
                          </td>
                          <td class="ModifiedTime">1303406103000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1099.html">#1099</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1099.html">strange interactions between two browsers while playing with authz groups</a>
                          </td>
                          <td class="description">
                            <p>
While playing with the authorization groups, trying to design tests, I found that it was necessary to log in as two different users with two different browsers. Often actions of one user would cause server errors in the other user's browser.
</p>
<p>
I don't have a reproducible test case, but it happens fairly often so it shouldn't be too difficult to get one.
</p>

                            
                          </td>
                          <td class="PosixTime">1303380824000000
                          </td>
                          <td class="ModifiedTime">1324057106000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1098.html">#1098</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-6.html">ckan-v1.4-sprint-6</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1098.html">--ckan-migration tests not initialised correctly</a>
                          </td>
                          <td class="description">
                            <p>
Only tests with failing --ckan-migration fail, due to authz not being initialised.
</p>

                            
                          </td>
                          <td class="PosixTime">1303377336000000
                          </td>
                          <td class="ModifiedTime">1303406017000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1097.html">#1097</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-6.html">ckan-v1.4-sprint-6</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1097.html">Sidebar hideable</a>
                          </td>
                          <td class="description">
                            <p>
The web interface has a sidebar (#primary) which should be hidden in some pages. This is for QA extension and useful for package new and edit pages. Must be compatible with DGU theme.
</p>

                            
                          </td>
                          <td class="PosixTime">1303293416000000
                          </td>
                          <td class="ModifiedTime">1303293476000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1096.html">#1096</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">rufuspollock
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-future.html">ckan-future</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1096.html">[super] CKAN Hosted</a>
                          </td>
                          <td class="description">
                            <p>
Many users of CKAN want to have their own instance without much effort. Setting these up in separate places is a maintenance nightmare, we should much rather have some tenant separation in core CKAN. Some ideas:
</p>
<ul><li>introduce model.Site and c.site
<ul><li>site has: custom CSS, extra_template_path, title, languages list, package_form, group_form (all configured via web UI) 
</li></ul></li><li>Subdomain detector to activate sites.
</li><li>use site in Authorizer instead of System, have a <a class="missing wiki">NullSite?</a> for global things
</li><li>allow cross-site search
</li><li>packages are in a list of sites, m:n rather than 1:n
<ul><li>list of sites is string-based, can contain sites not in site table to express harvested external material which is not editable locally. 
</li></ul></li></ul>
                            
                          </td>
                          <td class="PosixTime">1303235062000000
                          </td>
                          <td class="ModifiedTime">1339774484000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1095.html">#1095</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1095.html">add way to pass in schema to logic layer.</a>
                          </td>
                          <td class="description">
                            <p>
We need a way to pass in schemas to the logic layer to deal with edge cases. 
</p>

                            
                          </td>
                          <td class="PosixTime">1303221854000000
                          </td>
                          <td class="ModifiedTime">1310134959000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1094.html">#1094</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">thejimmyg
                          </td>
                          <td class="reporter">thejimmyg
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1094.html">[super] Refactor the Auth System</a>
                          </td>
                          <td class="description">
                            <p>
Here are some proposed changes related to CKAN's authorization system - they aren't very big, but should provide for some forthcoming use cases including <a class="closed ticket" href="../ticket/787.html" title="task: Auth API (closed: fixed)">#787</a>.
</p>
<p>
Two man reasons for the changes are:
</p>
<ul><li>We have a completely refactored architecture now which introduces a logic layer. These Auth changes are designed to better support the way we work with that layer.
</li></ul><ul><li>Different CKAN extension apps may need radically different authentication/authorisation so we need to allow whatever we have to be override-able.
</li></ul><p>
The first two changes revolve around the is_authorized method, which
is called by the logic layer to ask whether a particular user (e.g.
Bob) is allowed to do a certain action (e.g. edit) on a certain object (e.g. Package).
</p>
<ol><li>The first thing the is_authorized method is a hook to a plugin
</li></ol><p>
which *overrides* the current call with its own implementation (note: in previous discussions we have considered allowing a chain of plugins, no longer!)
</p>
<p>
Reason: authorization can be completely delegated to another system
(or partially)
</p>
<ol start="2"><li>is_authorized method currently takes (username, action, object)
</li></ol><p>
but for action=create_package, the object supplied is System, and for action=edit the object supplied is the package. Instead action should always be the string name of a function in the logic layer and object should always be the object passed to that function. This means our auth system is based around the actual actions we are performing (rather than a model them) and with the actual data that forms the action (rather than a related object). You never need a System object in this model.
</p>
<ol start="3"><li>Rename these two classes to better reflect what they are
<ul><li><a class="missing wiki">AuthorizationGroup?</a> -&gt; <a class="missing wiki">UserGroup?</a>
</li><li>Group -&gt; <a class="missing wiki">PackageGroup?</a>
</li></ul></li></ol><ol start="4"><li>Rename the Editor role to <a class="missing wiki">PriveledgeUser?</a> since Editors sometimes can't edit.
</li></ol><p>
Although this sounds a bit radical we already have auth extensions.
</p>
<h2 id="Read-onlyCKANWebUI">Read-only CKAN Web UI</h2>
<p>
(Additional requirement from <a class="closed ticket" href="../ticket/764.html" title="enhancement: Read-only CKAN Web UI (closed: duplicate)">#764</a>)
</p>
<p>
Whilse using CKAN web interface, you are not tempted to edit stuff:
</p>
<ul><li>You know at all times this CKAN is read-only
</li><li>All editing facilities are still seen but greyed-out with an indication why it is.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1303117973000000
                          </td>
                          <td class="ModifiedTime">1311173649000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1093.html">#1093</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-6.html">ckan-v1.4-sprint-6</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1093.html">500 errors on GET to api/rest/licenses</a>
                          </td>
                          <td class="description">
                            <p>
CKAN gets its license list from a license service, which can be a local file, but is often the <a class="ext-link" href="http://licenses.opendefinition.org/2.0/ckan_original"><span class="icon">​</span>http://licenses.opendefinition.org/2.0/ckan_original</a> server. This server is currently flakey, but I think we only request the list on start up. The problem is we query it much more often than required. It is queried for every request to api/rest/licenses, and we are returning lots of 500 errors when the license server is timing out.
</p>

                            
                          </td>
                          <td class="PosixTime">1302862261000000
                          </td>
                          <td class="ModifiedTime">1302865470000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1092.html">#1092</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">kindly
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-6.html">ckan-v1.4-sprint-6</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1092.html">refactor logic layer to seperate out api, form logic</a>
                          </td>
                          <td class="description">
                            <p>
The logic layer is a bit too api centric. Make the reusable parts separate in preparation for the wui refactor.
</p>

                            
                          </td>
                          <td class="PosixTime">1302777929000000
                          </td>
                          <td class="ModifiedTime">1305570822000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1091.html">#1091</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1091.html">usernames of users logged in using open ids are strange</a>
                          </td>
                          <td class="description">
                            <p>
If I use my gmail openID to log into a CKAN instance, then my username is:
</p>
<p>
<a class="ext-link" href="https://www.google.com/accounts/o8/id?id=AItOawnduohQ5RgXdPJKHiq-SIPbvCBqUaERuEQ"><span class="icon">​</span>https://www.google.com/accounts/o8/id?id=AItOawnduohQ5RgXdPJKHiq-SIPbvCBqUaERuEQ</a>
</p>
<p>
This seems a bit odd.
</p>

                            
                          </td>
                          <td class="PosixTime">1302701460000000
                          </td>
                          <td class="ModifiedTime">1323102767000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1090.html">#1090</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-6.html">ckan-v1.4-sprint-6</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1090.html">Visitor can't create packages on new CKAN install</a>
                          </td>
                          <td class="description">
                            <p>
Default visitor roles in default config is reader, not anon_editor. 
</p>
<p>
Problem caused by changes in <a class="closed ticket" href="../ticket/1066.html" title="enhancement: Default reader role too permissive (closed: fixed)">#1066</a> (released in 1.3.3)
</p>
<p>
New installs will be affected, although simple to just increase permissions when the installer realises a visitor can't create packages.
</p>
<p>
The solution to the config getting out of sync with the code like this is to not have the default_roles in the config - refer to the code in the configuration instructions.
</p>

                            
                          </td>
                          <td class="PosixTime">1302635219000000
                          </td>
                          <td class="ModifiedTime">1302635699000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1089.html">#1089</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-6.html">ckan-v1.4-sprint-6</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1089.html">Check for "--ckan" when running nosetests</a>
                          </td>
                          <td class="description">
                            <p>
(because if you forget, you get difficult to understand errors, and more than one person has tripped up on this)
</p>

                            
                          </td>
                          <td class="PosixTime">1302631189000000
                          </td>
                          <td class="ModifiedTime">1302631733000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1088.html">#1088</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">wwaites
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4.html">ckan-v1.4</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1088.html">content-type autonegotiation is wonky</a>
                          </td>
                          <td class="description">
                            <p>
in ckan/controllers/package.py around line 130 it does some strange things...
</p>
<p>
perhaps replace with <a class="ext-link" href="https://github.com/wwaites/autoneg"><span class="icon">​</span>https://github.com/wwaites/autoneg</a>
</p>
<p>
and handle redirection of these content types:
</p>
<pre class="wiki">application/rdf+xml
application/turtle
text/plain
text/x-graphviz
</pre>
                            
                          </td>
                          <td class="PosixTime">1302630261000000
                          </td>
                          <td class="ModifiedTime">1303035487000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1087.html">#1087</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">wwaites
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-sprint-2011-11-21.html">ckan-sprint-2011-11-21</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1087.html">version and contact info api call</a>
                          </td>
                          <td class="description">
                            <p>
a simple api call that returns data like this:
</p>
<pre class="wiki">{ "version": ckan_software_version,
  "contact": { "name": "Some Admin", "mbox": "admin@exmaple.org" },
  "description": "Site Description",
  "url": "http://canonical.name.ckan.net/"
</pre>
                            
                          </td>
                          <td class="PosixTime">1302628944000000
                          </td>
                          <td class="ModifiedTime">1320866159000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1086.html">#1086</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">thejimmyg
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">wontfix
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1086.html">no way to delete authorization groups from web interface</a>
                          </td>
                          <td class="description">
                            <p>
as title. 
</p>

                            
                          </td>
                          <td class="PosixTime">1302625333000000
                          </td>
                          <td class="ModifiedTime">1323346552000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1085.html">#1085</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1085.html">local development copy of ckan depends on existence of ckan.net</a>
                          </td>
                          <td class="description">
                            <p>
ckan.net appears to have either gone down or be running ultra slowly.
</p>
<p>
this means that ckan copies running locally on my machine run very slowly indeed.
</p>
<p>
is this behaviour desirable?
</p>
<p>
This command finds lots of <a class="ext-link" href="http://~~~ckan.net"><span class="icon">​</span>http://~~~ckan.net</a> references in python, html and javascript files:
</p>
<p>
find ~/pyenv/src \( -name "*.py" -or -name "*.html" -or -name "*.js" \) -print0 | xargs -0 -e grep --color -nH -e "<a class="ext-link" href="http://.*ckan.net"><span class="icon">​</span>http://.*ckan.net</a>"
</p>
<p>
output for reference:
</p>
<hr />
<p>
/home/okfn/pyenv/src/ckan/ckan/<span class="underline">init__.py:5:Network (CKAN) site: <a class="ext-link" href="http://www.ckan.net"><span class="icon">​</span>http://www.ckan.net</a>.
/home/okfn/pyenv/src/ckan/ckan/lib/create_test_data.py:346:&lt;<a class="ext-link" href="http://ckan.net/"><span class="icon">​</span>http://ckan.net/</a>&gt;
/home/okfn/pyenv/src/ckan/ckan/lib/rdf.py:3:DOMAIN = '<a class="ext-link" href="http://ckan.net"><span class="icon">​</span>http://ckan.net</a>'
/home/okfn/pyenv/src/ckan/ckan/lib/rdf.py:4:CKAN_NAMESPACE = '<a class="ext-link" href="http://ckan.net/"><span class="icon">​</span>http://ckan.net/</a>#'
/home/okfn/pyenv/src/ckan/ckan/lib/talis.py:60:                      'ckan':'<a class="ext-link" href="http://ckan.net/ns"><span class="icon">​</span>http://ckan.net/ns</a>#',
/home/okfn/pyenv/src/ckan/ckan/public/scripts/bookmarklet.js:2:    f='<a class="ext-link" href="http://ckan.net/package/new?url='+encodeURIComponent(window.location.href)+'&amp;title='+encodeURIComponent(document.title"><span class="icon">​</span>http://ckan.net/package/new?url='+encodeURIComponent(window.location.href)+'&amp;title='+encodeURIComponent(document.title</a>);
/home/okfn/pyenv/src/ckan/ckan/public/scripts/test_bookmarklet.html:16:    addtockan.src='<a class="ext-link" href="http://ckan.net/scripts/bookmarklet.js"><span class="icon">​</span>http://ckan.net/scripts/bookmarklet.js</a>';
/home/okfn/pyenv/src/ckan/ckan/public/scripts/test_bookmarklet.html:27:    &lt;p&gt;&lt;strong&gt;Proper bookmarklet (compressed -- need to escape &amp;amp;):&lt;/strong&gt; &lt;a href="javascript:(function(){f='<a class="ext-link" href="http://ckan.net/package/new?url='+encodeURIComponent(window.location.href)+'&amp;amp;title='+encodeURIComponent(document.title);if((n=document.getElementsByName('description')[0])&amp;amp;&amp;amp;(d=n.content)){f+='&amp;amp;notes='+encodeURIComponent(d);}a=function(){if(!window.open(f)){location.href=f;}};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a"><span class="icon">​</span>http://ckan.net/package/new?url='+encodeURIComponent(window.location.href)+'&amp;amp;title='+encodeURIComponent(document.title);if((n=document.getElementsByName('description')[0])&amp;amp;&amp;amp;(d=n.content)){f+='&amp;amp;notes='+encodeURIComponent(d);}a=function(){if(!window.open(f)){location.href=f;}};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a</a>()}})()"&gt;Add to CKAN&lt;/a&gt;
/home/okfn/pyenv/src/ckan/ckan/templates/home/license.html:31:      For convenience, all material - including all package, tag and revision information - is available in bulk, in the form of a full dump of the CKAN database. This (gzipped) dump file is updated daily and can be downloaded from &lt;a href="<a class="ext-link" href="http://www.ckan.net/dump/"><span class="icon">​</span>http://www.ckan.net/dump/</a>"&gt;<a class="ext-link" href="http://www.ckan.net/dump/"><span class="icon">​</span>http://www.ckan.net/dump/</a>&lt;/a&gt;.
/home/okfn/pyenv/src/ckan/ckan/tests/dictization.py:71:            'notes': u'Some test notes\n\n### A 3rd level heading\n\n<strong>Some bolded text.</strong>\n\n*Some italicized text.*\n\nForeign characters:\nu with umlaut \xfc\n66-style quote \u201c\nforeign word: th\xfcmb\n \nNeeds escaping:\nleft arrow &lt;\n\n&lt;<a class="ext-link" href="http://ckan.net/"><span class="icon">​</span>http://ckan.net/</a>&gt;\n\n',
/home/okfn/pyenv/src/ckan/ckan/tests/dictization.py:137:             'notes': u'Some test notes\n\n### A 3rd level heading\n\n<strong>Some bolded text.</strong>\n\n*Some italicized text.*\n\nForeign characters:\nu with umlaut \xfc\n66-style quote \u201c\nforeign word: th\xfcmb\n \nNeeds escaping:\nleft arrow &lt;\n\n&lt;<a class="ext-link" href="http://ckan.net/"><span class="icon">​</span>http://ckan.net/</a>&gt;\n\n',
/home/okfn/pyenv/src/ckan/ckan/tests/dictization.py:447:                                  'notes': u'Some test notes\n\n### A 3rd level heading\n\n<strong>Some bolded text.</strong>\n\n*Some italicized text.*\n\nForeign characters:\nu with umlaut \xfc\n66-style quote \u201c\nforeign word: th\xfcmb\n \nNeeds escaping:\nleft arrow &lt;\n\n&lt;<a class="ext-link" href="http://ckan.net/"><span class="icon">​</span>http://ckan.net/</a>&gt;\n\n',
/home/okfn/pyenv/src/ckan/ckan/tests/dictization.py:458:                                  'notes': u'Some test notes\n\n### A 3rd level heading\n\n<strong>Some bolded text.</strong>\n\n*Some italicized text.*\n\nForeign characters:\nu with umlaut \xfc\n66-style quote \u201c\nforeign word: th\xfcmb\n \nNeeds escaping:\nleft arrow &lt;\n\n&lt;<a class="ext-link" href="http://ckan.net/"><span class="icon">​</span>http://ckan.net/</a>&gt;\n\n',
/home/okfn/pyenv/src/ckan/ckan/tests/functional/api/base.py:178:        assert '"ckan_url": "<a class="ext-link" href="http://test.ckan.net/package/annakarenina"><span class="icon">​</span>http://test.ckan.net/package/annakarenina</a>"' in msg, msg
/home/okfn/pyenv/src/ckanclient/ckanclient/</span>init__.py:116:    api e.g. <a class="ext-link" href="http://ckan.net/api"><span class="icon">​</span>http://ckan.net/api</a> rather than <a class="ext-link" href="http://ckan.net/api/rest"><span class="icon">​</span>http://ckan.net/api/rest</a>)
/home/okfn/pyenv/src/ckanclient/ckanclient/<span class="underline">init__.py:261:    :param base_location: default *<a class="ext-link" href="http://www.ckan.net/api"><span class="icon">​</span>http://www.ckan.net/api</a>*
/home/okfn/pyenv/src/ckanclient/ckanclient/</span>init__.py:267:    base_location = '<a class="ext-link" href="http://www.ckan.net/api"><span class="icon">​</span>http://www.ckan.net/api</a>'
</p>
<hr />

                            
                          </td>
                          <td class="PosixTime">1302620434000000
                          </td>
                          <td class="ModifiedTime">1302625314000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1084.html">#1084</a>
                          </td>
                          <td class="type">task
                          </td>
                          <td class="owner">wwaites
                          </td>
                          <td class="reporter">wwaites
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-6.html">ckan-v1.4-sprint-6</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1084.html">ckan.net RDF links changed</a>
                          </td>
                          <td class="description">
                            <p>
need to make some changes for the links to semantic.ckan.net. it should use <a class="ext-link" href="http://semantic.ckan.net/record/"><span class="icon">​</span>http://semantic.ckan.net/record/</a>&lt;package_id&gt; now
</p>
<p>
append .rdf, .ttl, .nt, .dot, .json (even .html for an ugly table)  to taste (or just leave off the suffix and let content negotiation take care of it)
</p>
<p>
the base url is changed, but it now uses id not name.
</p>
<p>
see for example:
</p>
<ul><li><a class="ext-link" href="http://semantic.ckan.net/record/6058c017-607b-48d9-b3cd-72106ad96e33"><span class="icon">​</span>http://semantic.ckan.net/record/6058c017-607b-48d9-b3cd-72106ad96e33</a>
</li><li><a class="ext-link" href="http://semantic.ckan.net/record/6058c017-607b-48d9-b3cd-72106ad96e33.ttl"><span class="icon">​</span>http://semantic.ckan.net/record/6058c017-607b-48d9-b3cd-72106ad96e33.ttl</a>
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1302616717000000
                          </td>
                          <td class="ModifiedTime">1304934534000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1083.html">#1083</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">johnlawrenceaspden
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5-sprint-1.html">ckan-v1.5-sprint-1</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1083.html">userobjectroles added twice can't be deleted</a>
                          </td>
                          <td class="description">
                            <p>
the add_user_to_role/remove_user_from_role functions are asymmetrical
in that the add function is happy to add the same role twice but the remove asserts that it's only in the table once and crashes if that's not true.
</p>
<p>
an attempt has been made to guard against this, but fails, I think because the add functions rely on the caller committing the change to the db.
</p>
<p>
same problem affects corresponding authorization_group functions
</p>
<p>
I'll try to sort this out. Making a note here.
</p>

                            
                          </td>
                          <td class="PosixTime">1302550660000000
                          </td>
                          <td class="ModifiedTime">1305537827000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1082.html">#1082</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1082.html">language changes behave strangely</a>
                          </td>
                          <td class="description">
                            <p>
Set language to Greek, flash message says 'Language set to: English', but page is now about half in Greek.
</p>
<p>
Set language back to English causes server error:
</p>
<p>
<a class="missing wiki">AttributeError?</a>: '<a class="missing wiki">NoneType?</a>' object has no attribute 'path'
</p>
<p>
Module ckan.controllers.error:29 in document          view
</p>
<blockquote class="citation">
<blockquote class="citation">
<blockquote>
<p>
if original_request.path.startswith('/api'):
</p>
</blockquote>
</blockquote>
</blockquote>
<p>
However going to a new page reveals that it's back to English
</p>

                            
                          </td>
                          <td class="PosixTime">1302541989000000
                          </td>
                          <td class="ModifiedTime">1315917217000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1081.html">#1081</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">johnlawrenceaspden
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1081.html">can't remove user from authz group</a>
                          </td>
                          <td class="description">
                            <p>
I've found that if I make an authorization group I sometimes can't remove myself from it. I've no idea why. I can add and remove other users. I'll investigate, just making a note of it here.
</p>

                            
                          </td>
                          <td class="PosixTime">1302541056000000
                          </td>
                          <td class="ModifiedTime">1303489474000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1079.html">#1079</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-5.html">ckan-v1.4-sprint-5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1079.html">Refactor API to use new logic layer and dictization</a>
                          </td>
                          <td class="description">
                            <ul><li>Convert current api saves to the new standard dict format.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1302509530000000
                          </td>
                          <td class="ModifiedTime">1302777504000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1078.html">#1078</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1078.html">Refactors WUI controllers and forms to use logic layer</a>
                          </td>
                          <td class="description">
                            <ul><li>Deserialize forms to new dict format.
</li><li>Replace controllers/forms to use dictization.
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1302509347000000
                          </td>
                          <td class="ModifiedTime">1305828973000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1077.html">#1077</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">kindly
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">new
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1077.html">Move to simpler vdm system</a>
                          </td>
                          <td class="description">
                            <h2 id="Option1:ChangesetModel">Option 1: 'Changeset' Model</h2>
<p>
See <a class="assigned ticket" href="../ticket/1135.html" title="enhancement: Changeset model for vdm (assigned)">ticket:1135</a> for vdm ticket. This would involve a) moving to changeset in vdm b) doing the migration in ckan to support this.
</p>
<p>
Have developed a new "changeset" based model for revisioning in vdm. 
</p>
<h3 id="Implementation">Implementation</h3>
<ul><li>The main challenge with this change is schema and data migration
</li></ul><p>
Every revisioned object has a revision_id and revision attribute.
</p>
<p>
Approximate algorithm:
</p>
<pre class="wiki">Revision -&gt; Changeset

for revtype in [PackageRevision, ...]:
    for pkgrev in package_revision:
        changeset = lookupchangeset(package_revision)
        ChangeObject(cset, (table, id), dictize(pkgrev))
</pre><p>
Question:
</p>
<ul><li>does pkg include tags attributes or not? or we have to dictize, pkgrev, pkg2tagrev, and tag. Probably the latter.
</li></ul><h2 id="Option2:SimplifyRevisionObjectModel">Option 2: Simplify Revision Object Model</h2>
<p>
Just use a simpler vdm, see <a class="assigned ticket" href="../ticket/1136.html" title="enhancement: Move to SessionExtension in vdm (assigned)">ticket:1136</a> (move to SessionExtension) and <a class="assigned ticket" href="../ticket/1137.html" title="enhancement: Remove need for statefulness in vdm (assigned)">ticket:1137</a> (remove need for statefulness in vdm).
</p>
<h2 id="Discussion">Discussion</h2>
<p>
Advantage of Option 1 versus 2:
</p>
<ul><li>Easier support for pending state and similar behaviour
</li><li>No need to introduce new tables (and hence migrations) when making something revisioned (or not).
</li></ul><h3 id="Disadvantages">Disadvantages</h3>
<ul><li>Migration is required
</li><li>More difficult to query revision history.
<ul><li>Could be addressed by having ChangeObject have separate cols for table name and id but would likely be more difficult.
</li></ul></li><li>Performance (?)
<ul><li>Have one big ChangeObject table to query when looking at changed objects rather than many revision tables.
<ul><li>Not sure this is a biggie as even with Revision model biggest revision object tables are probably on the order of the ChangeObject table
</li></ul></li></ul></li></ul><h2 id="Conclusion">Conclusion</h2>
<p>
Implement Option 2 and leave Option 1 for present.
</p>
<p>
Option 1 includes Option 2 so it seems that that is required in either case (so we may as well with Option 2).
</p>
<p>
Option 1 requires significant effort (esp migration) so leave for present and then review the situation at some later date.
</p>

                            
                          </td>
                          <td class="PosixTime">1302304464000000
                          </td>
                          <td class="ModifiedTime">1340034345000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1076.html">#1076</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnlawrenceaspden
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4.html">ckan-v1.4</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1076.html">Improve revision and package purge system</a>
                          </td>
                          <td class="description">
                            <h2 id="PurgingRevisions">Purging Revisions</h2>
<ul><li>Delete button displayed on:
<ul><li>/revision/list
</li><li><del>(/package/history)</del>
<ul><li>/package/history is problematic because html does not allow nested forms and we already have form for doing diff/comparison.
</li></ul></li><li>/revision/{id}
</li></ul></li><li>Delete button submits to delete action on revision and changes revision state to 'deleted'.
<ul><li>undelete button now displayed and revisions are marked as deleted in some way (e.g. greyed out?)
</li></ul></li><li>Sysadmins then visit /ckan-admin/trash which lists all revisions with deleted state. There is a large button: "Empty trash" (irreversible). Click button purges all revisions with deleted state.
</li></ul><h2 id="PurgingPackages">Purging Packages</h2>
<ul><li>Put into deleted state.
</li><li>Listed on /ckan-admin/trash
</li><li>Separate Empty trash button which deletes all associated revisions.
<ul><li>Should be separate from Empty trash for revisions
</li></ul></li></ul><h2 id="Currentsystem">Current system</h2>
<ul><li>Single purge link on revision listing if a sysadmin which permanently purges the revision and all associated changes (without confirmation atm!)
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1302283442000000
                          </td>
                          <td class="ModifiedTime">1303236302000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1075.html">#1075</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">johnlawrenceaspden
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-6.html">ckan-v1.4-sprint-6</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1075.html">Administrative dashboard - Edit Authorization related to System object</a>
                          </td>
                          <td class="description">
                            <p>
Roles on System object are important because admin role on system equates to being a 'sysadmin' (i.e. able to do anything).
</p>
<ul><li>Make users sysadmin (either as separate action or as part of editing roles on system object)
</li><li>/authz subpage for editing roles on system object
<ul><li>Add and update user roles
</li><li>Add and update authz group roles
</li><li>List actions associated to roles at top of page (extra points for checkbox table with editability)
</li></ul></li><li>Document on <a class="ext-link" href="http://wiki.ckan.net/Authorization"><span class="icon">​</span>http://wiki.ckan.net/Authorization</a> what roles on System object 'mean' esp sysadmin role on System
</li></ul><h2 id="RelatedTickets">Related Tickets</h2>
<p>
 
</p>
<ul><li>super ticket: <a class="closed ticket" href="../ticket/833.html" title="enhancement: [super] Administrative dashboard extension (closed: fixed)">#833</a>
</li><li>authz lib improvement and authztool refactor <a class="closed ticket" href="../ticket/1050.html" title="enhancement: Authz lib improvement and refactor of ckan/lib/authztool.py (closed: invalid)">#1050</a>
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1302279799000000
                          </td>
                          <td class="ModifiedTime">1303227982000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1074.html">#1074</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1074.html">Refactor authz web user interface to have common code and templating</a>
                          </td>
                          <td class="description">
                            <p>
Currently repeat the same template and code across Package Authz, Group Authz, and Authz Group authz.
</p>
<p>
Having now implemented a new, cleaner setup in ckanext-admin we should port this back into core.
</p>
<ul><li>Common template code (checkbox template)
</li><li>Logic code (or just common code) for wiring into authz system
</li><li>Look for all places thoroughout the system where usernames, authzgroups or groups need to be typed into boxes, and make sure that they auto-complete appropriately.
</li></ul><p>
Will also deliver a significant improvement in the form of ajax user lookup.
</p>

                            
                          </td>
                          <td class="PosixTime">1302271586000000
                          </td>
                          <td class="ModifiedTime">1314303581000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1073.html">#1073</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-5.html">ckan-v1.4-sprint-5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1073.html">Search index checker</a>
                          </td>
                          <td class="description">
                            <p>
Tool that checks which packages have not been indexed.
</p>
<p>
Required for DGU: <a class="ext-link" href="https://trac.dataco.coi.gov.uk/projects/datagov/ticket/940"><span class="icon">​</span>https://trac.dataco.coi.gov.uk/projects/datagov/ticket/940</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1302185444000000
                          </td>
                          <td class="ModifiedTime">1302185825000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1072.html">#1072</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-5.html">ckan-v1.4-sprint-5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1072.html">Add filters to authztool</a>
                          </td>
                          <td class="description">
                            <p>
It takes several minutes to print the 'rights' on DGU, which is annoying when you only want to grep for a few lines. Much quicker than grepping is to filter in the query.
</p>

                            
                          </td>
                          <td class="PosixTime">1302106311000000
                          </td>
                          <td class="ModifiedTime">1302106474000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1071.html">#1071</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-5.html">ckan-v1.4-sprint-5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1071.html">Package history API moved to /api/rest/package/revisions</a>
                          </td>
                          <td class="description">
                            <p>
api/rest/package_history is not RESTful or follow API naming conventions. Therefore move it to /api/rest/package/revisions
</p>
<p>
Also, API docs incomplete.
</p>

                            
                          </td>
                          <td class="PosixTime">1301937882000000
                          </td>
                          <td class="ModifiedTime">1301943180000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1070.html">#1070</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">rgrp
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.5.html">ckan-v1.5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1070.html">Plan a new domain model and layer architecture for CKAN</a>
                          </td>
                          <td class="description">
                            <p>
See <a class="ext-link" href="http://wiki.ckan.net/Domain_Model"><span class="icon">​</span>http://wiki.ckan.net/Domain_Model</a> especially section on v2.
</p>
<ul><li>New domain model is planned but not yet finally agreed.
</li><li>Layer architecture is complete and implemented
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1301910940000000
                          </td>
                          <td class="ModifiedTime">1310117129000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1069.html">#1069</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">tobes
                          </td>
                          <td class="reporter">rgrp
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1069.html">Stub datasets (request for datasets)</a>
                          </td>
                          <td class="description">
                            <p>
Idea is to have stubs for datasets that someone wants but don't yet exist (or haven't been discovered) in the way one has stub pages on a wiki.
</p>
<p>
We could do this within the existing model by a slight 'abuse' - create a dataset and mark it with a special tag e.g. todo.does-not-yet-exist or similar ...
</p>
<p>
(Just as we have datasets listed that exist but aren't available ...)
</p>
<p>
Alternative would be to have a request for datasets subsystem.
</p>
<p>
I prefer the stub dataset model because it's simpler, provides a simple workflow (as a dataset is found or comes into existence), and the package page provides a natural space in which to accumulate information about what is wanted and what exists.
</p>
<h2 id="Implementation">Implementation</h2>
<ul><li>Agree a new dedicated tag. e.g. todo.does-not-exist
</li></ul><h2 id="Related">Related</h2>
<ul><li>This ticket has clear links to <a class="ext-link" href="http://getthedata.org/"><span class="icon">​</span>http://getthedata.org/</a>
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1301666919000000
                          </td>
                          <td class="ModifiedTime">1340632215000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1068.html">#1068</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-5.html">ckan-v1.4-sprint-5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1068.html">metadata_modified problem</a>
                          </td>
                          <td class="description">
                            <p>
This test has been failing since the clocks changed:
</p>
<pre class="wiki">======================================================================
FAIL: ckan.tests.models.test_package.TestPackageRevisions.test_02_metadata_created_and_modified
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/dread/hgroot/pyenv-ckan2/lib/python2.6/site-packages/nose-0.11.3-py2.6.egg/nose/case.py", line 186, in runTest
    self.test(*self.arg)
  File "/home/dread/hgroot/ckan2/ckan/tests/models/test_package.py", line 283, in test_02_metadata_created_and_modified
    assert out == exp, (out, exp)
AssertionError: (datetime.datetime(2011, 4, 1, 10, 45, 50, 875509), datetime.datetime(2011, 4, 1, 9, 45, 50, 875509))

----------------------------------------------------------------------
</pre>
                            
                          </td>
                          <td class="PosixTime">1301652085000000
                          </td>
                          <td class="ModifiedTime">1302109505000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1067.html">#1067</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-5.html">ckan-v1.4-sprint-5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1067.html">CLI for loading/dumping complete databases</a>
                          </td>
                          <td class="description">
                            <p>
Use 'db dump' and 'db load' for 'pg_dump' and 'psql -f' of a database. Use pylons config to find out database options.
</p>

                            
                          </td>
                          <td class="PosixTime">1301645463000000
                          </td>
                          <td class="ModifiedTime">1302186503000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1066.html">#1066</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-5.html">ckan-v1.4-sprint-5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1066.html">Default reader role too permissive</a>
                          </td>
                          <td class="description">
                            <p>
The definition of the 'reader' role includes creating packages, which is too permissive for some CKAN instances (e.g. DGU). 'Reader' suggests only reading, so I think this role should avoid creating and editing.
</p>
<p>
All projects so far want all roles to be able to create users, so this stays as a Reader action for now, as a convenience.
</p>
<p>
Implementation:
</p>
<ul><li>Action.PACKAGE_CREATE removed from reader's default_role_actions
</li><li>Visitor has a new default role, called 'anon_editor' which can edit packages, but not groups / auth groups - you have to log in for that.
</li><li>Migration script not needed?
</li><li>Code comments written, to make clear the suggested policy
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1301645250000000
                          </td>
                          <td class="ModifiedTime">1301932136000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1065.html">#1065</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">zephod
                          </td>
                          <td class="reporter">johnlawrenceaspden
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.6.html">ckan-v1.6</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1065.html">[super] Change Authorization System</a>
                          </td>
                          <td class="description">
                            <p>
Child tickets
</p>
<ul><li><a class="new ticket" href="../ticket/1198.html" title="enhancement: Publisher hierarchy (new)">#1198</a> Publisher hierarchy
</li><li><a class="closed ticket" href="../ticket/1050.html" title="enhancement: Authz lib improvement and refactor of ckan/lib/authztool.py (closed: invalid)">#1050</a> Authz lib improvement and refactor of ckan/lib/authztool.py
</li><li><a class="closed ticket" href="../ticket/1004.html" title="defect: Group creation instructions missing (closed: fixed)">#1004</a> Group creation instructions missing
</li><li><a class="closed ticket" href="../ticket/1099.html" title="defect: strange interactions between two browsers while playing with authz groups (closed: wontfix)">#1099</a> Strange interactions between two browsers while playing with authz groups
</li><li><a class="closed ticket" href="../ticket/1115.html" title="defect: can have two authzgroups with the same name (closed: wontfix)">#1115</a> can have two authzgroups with the same name
</li><li><a class="closed ticket" href="../ticket/1133.html" title="defect: command line rights manipulation doesn't work (closed: worksforme)">#1133</a> command line rights manipulation doesn't work
</li><li><a class="closed ticket" href="../ticket/1138.html" title="enhancement: minor navigations behave inconsistently (closed: invalid)">#1138</a> minor navigations behave inconsistently
</li></ul><p>
Old ticket description:
</p>
<ol><li>Change name of <a class="missing wiki">AuthzGroup?</a> to <a class="missing wiki">UserGroup?</a> to reflect what it is for
</li></ol><ol start="2"><li>Get rid of Roles, and replace them with direct assignment of actions, even though there are many actions, and extensions can add arbitrary ones.
<ul><li>Debatable whether we should cut the number of actions to correspond to the three roles defined by the base system.
</li><li>Have a method of finding roles (or, in future, actions) relevant to a given protection object (e.g. FILE-UPLOAD(ER) not relevant to Packages)
</li></ul></li></ol><ol start="3"><li>Change <a class="missing wiki">UserGroups?</a> so that they can have a hierarchical structure, 
</li></ol><h2 id="MoreinfoonHierarchychange">More info on Hierarchy change</h2>
<p>
e.g. <a class="missing wiki">UserGroup?</a> NHS contains the User nhsysadmin, as well as the 
<a class="missing wiki">UserGroups?</a> SURREY and BERKS, which themselves contain users.
</p>
<p>
One user in SURREY is Simon the Sysadmin, who has permissions on the whole system. His permissions should not leak out to other users or groups, and user permissions generally should not.
</p>
<p>
Each Group has permissions over various objects.
</p>
<p>
A user has permissions in his own right, and also has the permissions of his own group, and of all the groups contained in his group, and so on recursively.
</p>
<p>
Algorithm:
</p>
<p>
possible(user, action, package):
</p>
<blockquote>
<p>
if user has permission for action on package
</p>
<blockquote>
<p>
or any of have that permission
</p>
<blockquote>
<p>
or any of his groups group-children (but not user-children), and so on recursively have the permission.
</p>
</blockquote>
</blockquote>
</blockquote>

                            
                          </td>
                          <td class="PosixTime">1301508331000000
                          </td>
                          <td class="ModifiedTime">1324550041000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1064.html">#1064</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">amercader
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">duplicate
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1064.html">Remove Workers from ckanext-queue</a>
                          </td>
                          <td class="description">
                            <p>
The current implementation of Workers in ckanext-queue is broken. Basically the various consume / callback functions expect three arguments (routing_key, operation, payload) when they are in fact receiving only two of them (message_data, message).
This is fairly easy to fix, but the question is if Workers add an extra complexity to use the messaging library directly.
</p>

                            
                          </td>
                          <td class="PosixTime">1301417891000000
                          </td>
                          <td class="ModifiedTime">1323169787000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1063.html">#1063</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">sebbacon
                          </td>
                          <td class="reporter">sebbacon
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1063.html">Groups listing widget on package screen shouldn't show group name by default</a>
                          </td>
                          <td class="description">
                            <p>
I've been asked if we can do something about the overflow of the Group
name in the right hand column on this page:
</p>
<blockquote>
<p>
<a class="ext-link" href="http://register.data.overheid.nl/package/europese-aanbestedingen"><span class="icon">​</span>http://register.data.overheid.nl/package/europese-aanbestedingen</a>
</p>
</blockquote>
<p>
The reason is that the list display for groups is in the form
"group_tltie (group_name)", and of course group_name can't have spaces
and so can't wrap nicely.
</p>
<p>
I was wondering if there's a good reason why we don't only display
group_title (if it exists) and group_name only when there's not a
title?
</p>

                            
                          </td>
                          <td class="PosixTime">1301408459000000
                          </td>
                          <td class="ModifiedTime">1302514033000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1062.html">#1062</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">johnglover
                          </td>
                          <td class="reporter">sebbacon
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-backlog.html">ckan-backlog</a>
                          </td>
                          <td class="status">assigned
                          </td>
                          <td class="resolution">
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1062.html">Data preview encoding error</a>
                          </td>
                          <td class="description">
                            <p>
The preview of "Species Misc Turtle Download" at <a class="ext-link" href="http://ckan.net/package/taxonconcept"><span class="icon">​</span>http://ckan.net/package/taxonconcept</a> results in the following error:
</p>
<p>
Unable to Preview - Had an error from dataproxy:
Data Transformation Error (Data transformation failed. Reason: 'utf8' codec can't decode byte 0x8b in position 1: unexpected code byte
</p>

                            
                          </td>
                          <td class="PosixTime">1301396143000000
                          </td>
                          <td class="ModifiedTime">1311773731000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1061.html">#1061</a>
                          </td>
                          <td class="type">enhancement
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-5.html">ckan-v1.4-sprint-5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">invalid
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1061.html">Orphaned home/license page</a>
                          </td>
                          <td class="description">
                            <p>
No links to home/license and it contains out of date references to knowledgeforge. Remove it.
</p>

                            
                          </td>
                          <td class="PosixTime">1301392968000000
                          </td>
                          <td class="ModifiedTime">1301922350000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1060.html">#1060</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-5.html">ckan-v1.4-sprint-5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1060.html">Spreadsheet importer tries to import readonly keys</a>
                          </td>
                          <td class="description">
                            <p>
e.g. we just added notes_rendered and that is read in as an extra field.
Tests failing in ckanext-importlib
</p>
<p>
Also related: we are missing lost metadata_created and metadata_modified in the dumps.
</p>

                            
                          </td>
                          <td class="PosixTime">1301312210000000
                          </td>
                          <td class="ModifiedTime">1301312487000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1059.html">#1059</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-5.html">ckan-v1.4-sprint-5</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1059.html">Loader coping better with poor search indexing</a>
                          </td>
                          <td class="description">
                            <p>
Loader currently checks for same name, but also should check for name_, name<span class="underline"> etc.
</span></p>

                            
                          </td>
                          <td class="PosixTime">1301310596000000
                          </td>
                          <td class="ModifiedTime">1301312516000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1058.html">#1058</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-4.html">ckan-v1.4-sprint-4</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1058.html">Give 400 error (not 500) for invalid locale or package_form</a>
                          </td>
                          <td class="description">
                            <p>
Examples which prompt annoying exception emails:
</p>
<pre class="wiki">http://ckan.net/locale?locale=ja
Module ckan.i18n:21 in set_session_locale
           assert locale in _KNOWN_LOCALES
</pre><p>
A bot has caused these:
</p>
<pre class="wiki">http://ca.ckan.net/package/new?package_form=gov
Module ckan.forms.registry:32 in get_fieldset
               raise ValueError('Could not find package_form name %r in those found: \n%r' % (package_form, [en.name for en in entrypoints]))
ValueError: Could not find package_form name u'gov)' in those found: ['gov', 'standard', 'ca']
</pre>
                            
                          </td>
                          <td class="PosixTime">1301302303000000
                          </td>
                          <td class="ModifiedTime">1301303315000000
                          </td>
              </tr>
              <tr class="even">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1057.html">#1057</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">
                          </td>
                          <td class="reporter">dread
                          </td>
                          <td class="milestone">
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1057.html">JSONP parameter isn't escaped</a>
                          </td>
                          <td class="description">
                            <pre class="wiki">$ curl "http://127.0.0.1:5000/api/rest/package/annakarenina?callback=&lt;script&gt;jsoncallback"
</pre><p>
gives:
</p>
<pre class="wiki">&lt;script&gt;jsoncallback({"id": "c10ebd31-5b45-4f6f-885d-dca9b18caec4", "name": "annakarenina", "title": "A Novel By Tolstoy",
</pre><p>
which could run script code in the client who made the call.
</p>
<p>
One idea for filtering: <a class="ext-link" href="http://tav.espians.com/sanitising-jsonp-callback-identifiers-for-security.html"><span class="icon">​</span>http://tav.espians.com/sanitising-jsonp-callback-identifiers-for-security.html</a>
Maybe just better to have a restricted whitelist of characters to be even more sure.
</p>
<p>
Same as: <a class="ext-link" href="https://trac.dataco.coi.gov.uk/projects/datagov/ticket/906"><span class="icon">​</span>https://trac.dataco.coi.gov.uk/projects/datagov/ticket/906</a>
</p>

                            
                          </td>
                          <td class="PosixTime">1301078389000000
                          </td>
                          <td class="ModifiedTime">1329150236000000
                          </td>
              </tr>
              <tr class="odd">
                          <td class="ticket">
                            <a title="View ticket" href="../ticket/1056.html">#1056</a>
                          </td>
                          <td class="type">defect
                          </td>
                          <td class="owner">dread
                          </td>
                          <td class="reporter">pudo
                          </td>
                          <td class="milestone">
                            <a title="View milestone" href="../milestone/ckan-v1.4-sprint-6.html">ckan-v1.4-sprint-6</a>
                          </td>
                          <td class="status">closed
                          </td>
                          <td class="resolution">fixed
                          </td>
                          <td class="summary">
                            <a title="View ticket" href="../ticket/1056.html">User links for OpenID users are broken</a>
                          </td>
                          <td class="description">
                            <p>
Use case:
</p>
<ul><li>Login using OpenID
</li><li>Click on 'My account' - results in 404
</li></ul><p>
Solutions:
</p>
<ul><li>User user.id instead of their name
</li><li>Escape the URL properly. 
</li></ul>
                            
                          </td>
                          <td class="PosixTime">1301060249000000
                          </td>
                          <td class="ModifiedTime">1302882616000000
                          </td>
              </tr>
          </tbody>
      </table>
      <div class="paging">
    <span class="previous">
      <a href="22%3Fsort=id&amp;asc=0&amp;page=15.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=6.html" title="Page 6">6</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=7.html" title="Page 7">7</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=8.html" title="Page 8">8</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=9.html" title="Page 9">9</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=10.html" title="Page 10">10</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=11.html" title="Page 11">11</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=12.html" title="Page 12">12</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=13.html" title="Page 13">13</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=14.html" title="Page 14">14</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=15.html" title="Page 15">15</a>
      </span>
      <span>
        <span class="current">16</span>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=17.html" title="Page 17">17</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=18.html" title="Page 18">18</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=19.html" title="Page 19">19</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=20.html" title="Page 20">20</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=21.html" title="Page 21">21</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=22.html" title="Page 22">22</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=23.html" title="Page 23">23</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=24.html" title="Page 24">24</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=25.html" title="Page 25">25</a>
      </span>
      <span>
        <a href="22%3Fsort=id&amp;asc=0&amp;page=26.html" title="Page 26">26</a>
      </span>
    <span class="next">
      <a href="22%3Fsort=id&amp;asc=0&amp;page=17.html" title="Next Page">→</a>
    </span>
</div>
      <div id="help"><strong>Note:</strong>
        See <a href="../wiki/TracReports.html">TracReports</a> for help on using and creating reports.</div>
    </div>
    <script type="text/javascript">
        jQuery.loadStyleSheet("/pygments/trac.css", "text/css");
    </script>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="22%3Fsort=id&amp;asc=0&amp;format=rss" class="rss">RSS Feed</a>
        </li><li>
          <a rel="nofollow" href="22%3Fsort=id&amp;asc=0&amp;format=csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="22%3Fsort=id&amp;asc=0&amp;format=tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="../report%3Fid=22&amp;format=sql">SQL Query</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.3</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>