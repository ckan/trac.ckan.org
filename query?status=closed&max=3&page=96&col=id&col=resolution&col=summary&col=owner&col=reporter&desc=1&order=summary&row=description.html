<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      Custom Query – CKAN
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">window.location.hash = window.location.hash;</script><![endif]-->
        <link rel="search" href="search.html" />
        <link rel="help" href="wiki/TracGuide.html" />
        <link rel="alternate" href="query%3Fstatus=closed&amp;format=rss&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description" type="application/rss+xml" class="rss" title="RSS Feed" /><link rel="alternate" href="query%3Fstatus=closed&amp;format=csv&amp;max=3&amp;page=96&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="query%3Fstatus=closed&amp;format=tab&amp;max=3&amp;page=96&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" />
        <link rel="next" href="query%3Fstatus=closed&amp;max=3&amp;page=97&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Next Page" />
        <link rel="start" href="wiki.1.html" />
        <link rel="stylesheet" href="chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="chrome/common/css/report.css" type="text/css" />
        <link rel="prev" href="query%3Fstatus=closed&amp;max=3&amp;page=95&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Previous Page" />
        <link rel="shortcut icon" href="chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="search/opensearch" title="Search CKAN" />
    <script type="text/javascript">
      var properties={"cc":{"label":"Cc","type":"text"},"changetime":{"label":"Modified","type":"time"},"component":{"label":"Component","options":["ckan","ckan hosted","contrib","datacatalogs","dgu","dpm","ecportal","iati","lod2","pdeu","uklii","vdm"],"type":"select"},"description":{"label":"Description","type":"textarea"},"id":{"label":"Ticket","type":"id"},"keywords":{"label":"Keywords","type":"text"},"milestone":{"label":"Milestone","options":["milestone15","milestone1","milestone16","milestone17","milestone18","v0.3","v0.4","v0.5","v0.6","v0.7","v0.8","v0.9","v0.10","v0.11","vdm-0.6","vdm-0.7","v1.0","v1.1","iati-1","iati-2","ckan-v1.2","datapkg-0.7","iati-3","ckan-v1.3-sprint-2","ckan-v1.3-sprint-1","ckan-v1.3-sprint-3","ckan-v1.3","datapkg-0.8","ckan-v1.4-sprint-1","ckan-sprint-2011-12-19","ckan-v1.4-sprint-2","ckan-v1.4-sprint-3","ckan-v1.4-sprint-4","ckan-v1.4-sprint-5","ckan-v1.4-sprint-6","ckan-v1.4","ckan-v1.4-sprint-7","ckan-v1.5-sprint-1","ckan-v1.5-sprint-2","pdeu-1","vdm-0.8","ckan-v1.5-sprint-3","ckan-v1.5-sprint-4","ckan-sprint-2011-09-12","iati-4","ckan-sprint-2011-09-26","ckan-sprint-2011-10-10","ckan-sprint-2011-10-24","ckan-sprint-2011-10-28","ckan-v1.5","ckan-sprint-2011-11-07","ckan-sprint-2011-11-21","ckan-sprint-2011-12-05","ckan-sprint-2012-01-09","ckan-sprint-2012-01-23","ckan-sprint-2012-02-06","ckan-sprint-2012-02-20","ckan-v1.6","ckan-sprint-2012-03-05","ckan-sprint-2012-03-19","ckan-sprint-2012-04-02","ckan-sprint-2012-04-16","ckan-sprint-2012-04-30","ckan-sprint-2012-05-15","ckan-sprint-2012-05-29","ckan-v1.7","demo phase 1","demo phase 2","demo phase 3","ckan-v1.8","ckan-sprint-2012-06-25","opendatasuite 1","ckanbuild","datahub-july","datahub-oct","opendatasuite 2","ckan-v1.9","ckan 2.0","ckan-backlog","ckan-ecportal","ckan-future","ckan-v1.8.1","demo phase 4","demo phase 5"],"type":"select"},"owner":{"label":"Owner","type":"text"},"priority":{"label":"Priority","options":["blocker","critical","major","minor","trivial","awaiting triage","awaiting merge"],"type":"select"},"repo":{"label":"Repository","options":["ckan","ckanclient","ckanext","ckanext-admin","ckanext-community","ckanext-csw","ckanext-dataapi","ckanext-no","ckanext-datapreview","ckanext-deliverance","ckanext-dgu","ckanext-geo","ckanext-harvest","ckanext-iati","ckanext-importlib","ckanext-qa","ckanext-queue","ckanext-solr","ckanext-stats","ckanext-storage","ckanext-upload","ckanext-webhooks","datapkg","vdm"],"type":"select"},"reporter":{"label":"Reporter","type":"text"},"resolution":{"label":"Resolution","options":["fixed","invalid","wontfix","duplicate","worksforme"],"type":"radio"},"status":{"label":"Status","options":["accepted","assigned","closed","new","reopened"],"type":"radio"},"summary":{"label":"Summary","type":"text"},"theme":{"label":"Theme","options":["deployment","notifications","migrations","harvesting","dictization","qa","entities","none"],"type":"select"},"time":{"label":"Created","type":"time"},"type":{"label":"Type","options":["defect","enhancement","refactor","task","requirement","CREP"],"type":"select"}};
      var modes={"id":[{"name":"is","value":""},{"name":"is not","value":"!"}],"select":[{"name":"is","value":""},{"name":"is not","value":"!"}],"text":[{"name":"contains","value":"~"},{"name":"doesn't contain","value":"!~"},{"name":"begins with","value":"^"},{"name":"ends with","value":"$"},{"name":"is","value":""},{"name":"is not","value":"!"}],"textarea":[{"name":"contains","value":"~"},{"name":"doesn't contain","value":"!~"}]};
    </script>
    <script type="text/javascript" src="chrome/common/js/jquery.js"></script><script type="text/javascript" src="chrome/common/js/babel.js"></script><script type="text/javascript" src="chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="chrome/common/js/trac.js"></script><script type="text/javascript" src="chrome/common/js/search.js"></script><script type="text/javascript" src="chrome/common/js/query.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript" src="chrome/common/js/folding.js"></script>
    <script type="text/javascript">/*<![CDATA[*/
      jQuery(document).ready(function($) {
        initializeFilters();
        $("#group").change(function() {
          $("#groupdesc").enable(this.selectedIndex != 0)
        }).change();
        $("fieldset legend.foldable").enableFolding(false);
        /* Hide the filters for saved queries. */
        if (window.location.href.search(/[?&]report=[0-9]+/) != -1)
          $("#filters").toggleClass("collapsed");
        /* Hide the columns by default. */
        $("#columns").toggleClass("collapsed");
      });
    /*]]>*/</script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://ckan.org/"><img src="http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png" alt="CKAN Trac" height="70" /></a>
      </div>
      <form id="search" action="search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="login.html">Login</a></li><li><a href="prefs.html">Preferences</a></li><li><a href="wiki/TracGuide.html">Help/Guide</a></li><li><a href="about.html">About Trac</a></li><li class="last"><a href="register.html">Register</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="timeline.html">Timeline</a></li><li><a href="roadmap.html">Roadmap</a></li><li class="active"><a href="report.html">View Tickets</a></li><li><a href="search.html">Search</a></li><li class="last"><a href="wiki.1.html">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="report.html">Available Reports</a></li><li class="last">Custom Query</li>
          </ul>
        <hr />
      </div>
    <div id="content" class="query">
      <h1>Custom Query <span class="numrows">(2152 matches)</span></h1>
      <form id="query" method="post" action="query.html"><div><input type="hidden" name="__FORM_TOKEN" value="93d81ccf9a7bb1c456462f62" /></div>
        <fieldset id="filters">
          <legend class="foldable">Filters</legend>
          <table summary="Query filters">
            <tbody>
              <tr style="display: none">
                <td>
		  <div class="trac-clause-lsep"> <hr /></div>
		  <div class="trac-clause-msep">Or</div>
		  <div class="trac-clause-rsep"> <hr /></div>
		</td>
              </tr>
              <tr><td class="trac-clause">
                <table class="trac-clause">
                  <tbody>
                    <tr class="status">
                      <td>
                        <div class="inlinebuttons">
                          <input type="submit" name="rm_filter_0_status_0" value="–" />
                        </div>
                      </td>
                          <th scope="row"><label id="label_0_status">Status</label></th>
                      <td class="filter" colspan="2">
                            <input type="checkbox" id="_0_status_accepted" name="0_status" value="accepted" />
                            <label for="_0_status_accepted" class="control">accepted</label>
                            <input type="checkbox" id="_0_status_assigned" name="0_status" value="assigned" />
                            <label for="_0_status_assigned" class="control">assigned</label>
                            <input type="checkbox" id="_0_status_closed" name="0_status" value="closed" checked="checked" />
                            <label for="_0_status_closed" class="control">closed</label>
                            <input type="checkbox" id="_0_status_new" name="0_status" value="new" />
                            <label for="_0_status_new" class="control">new</label>
                            <input type="checkbox" id="_0_status_reopened" name="0_status" value="reopened" />
                            <label for="_0_status_reopened" class="control">reopened</label>
                      </td>
                    </tr>
                  </tbody>
                  <tbody>
                    <tr class="actions">
                      <td class="and" colspan="2">
                         <label for="add_filter_0">And</label> 
                        <select name="add_filter_0" id="add_filter_0">
                          <option></option>
                          <option value="cc">Cc</option><option value="component">Component</option><option value="time">Created</option><option value="description">Description</option><option value="keywords">Keywords</option><option value="milestone">Milestone</option><option value="changetime">Modified</option><option value="owner">Owner</option><option value="priority">Priority</option><option value="reporter">Reporter</option><option value="repo">Repository</option><option value="resolution">Resolution</option><option value="status" disabled="disabled">Status</option><option value="summary">Summary</option><option value="theme">Theme</option><option value="id">Ticket</option><option value="type">Type</option>
                        </select>
                        <div class="inlinebuttons">
                          <input type="submit" name="add_0" value="+" />
                        </div>
                      </td>
                      <td class="or" colspan="2">
                        <label for="add_clause">Or</label> 
                        <select name="add_clause_1" id="add_clause">
                          <option></option>
                          <option value="cc">Cc</option><option value="component">Component</option><option value="time">Created</option><option value="description">Description</option><option value="keywords">Keywords</option><option value="milestone">Milestone</option><option value="changetime">Modified</option><option value="owner">Owner</option><option value="priority">Priority</option><option value="reporter">Reporter</option><option value="repo">Repository</option><option value="resolution">Resolution</option><option value="status">Status</option><option value="summary">Summary</option><option value="theme">Theme</option><option value="id">Ticket</option><option value="type">Type</option>
                        </select>
                        <div class="inlinebuttons">
                          <input type="submit" name="add_1" value="+" />
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td></tr>
            </tbody>
          </table>
        </fieldset>
        <fieldset id="columns">
          <legend class="foldable">Columns</legend>
          <div>
              <label>
                <input type="checkbox" name="col" value="summary" checked="checked" />
                Summary
              </label>
              <label>
                <input type="checkbox" name="col" value="status" />
                Status
              </label>
              <label>
                <input type="checkbox" name="col" value="owner" checked="checked" />
                Owner
              </label>
              <label>
                <input type="checkbox" name="col" value="type" />
                Type
              </label>
              <label>
                <input type="checkbox" name="col" value="priority" />
                Priority
              </label>
              <label>
                <input type="checkbox" name="col" value="milestone" />
                Milestone
              </label>
              <label>
                <input type="checkbox" name="col" value="component" />
                Component
              </label>
              <label>
                <input type="checkbox" name="col" value="resolution" checked="checked" />
                Resolution
              </label>
              <label>
                <input type="checkbox" name="col" value="time" />
                Created
              </label>
              <label>
                <input type="checkbox" name="col" value="changetime" />
                Modified
              </label>
              <label>
                <input type="checkbox" name="col" value="repo" />
                Repository
              </label>
              <label>
                <input type="checkbox" name="col" value="theme" />
                Theme
              </label>
              <label>
                <input type="checkbox" name="col" value="reporter" checked="checked" />
                Reporter
              </label>
              <label>
                <input type="checkbox" name="col" value="keywords" />
                Keywords
              </label>
              <label>
                <input type="checkbox" name="col" value="cc" />
                Cc
              </label>
          </div>
        </fieldset>
        <p class="option">
          <label for="group">Group results by</label>
          <select name="group" id="group">
            <option></option>
              <option value="component">Component</option>
              <option value="milestone">Milestone</option>
              <option value="owner">Owner</option>
              <option value="priority">Priority</option>
              <option value="reporter">Reporter</option>
              <option value="repo">Repository</option>
              <option value="resolution">Resolution</option>
              <option value="status">Status</option>
              <option value="theme">Theme</option>
              <option value="type">Type</option>
          </select>
          <input type="checkbox" name="groupdesc" id="groupdesc" />
          <label for="groupdesc">descending</label>
        </p>
        <p class="option">
          Show under each result:
            <label><input type="checkbox" name="row" value="description" checked="checked" />
            Description</label>
        </p>
        <p class="option">
          <label for="max">Max items per page</label>
          <input type="text" name="max" id="max" size="10" value="3" />
        </p>
        <div class="buttons">
          <input type="hidden" name="order" value="summary" />
          <input type="hidden" name="desc" value="1" />
          <input type="submit" name="update" value="Update" />
        </div>
        <hr />
      </form>
      <div>
  <h2 class="report-result">
    Results <span class="numresults">(286 - 288 of 2152)</span>
  </h2>
  <div class="paging">
    <span class="previous">
      <a href="query%3Fstatus=closed&amp;max=3&amp;page=95&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=86&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 86">86</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=87&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 87">87</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=88&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 88">88</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=89&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 89">89</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=90&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 90">90</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=91&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 91">91</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=92&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 92">92</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=93&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 93">93</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=94&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 94">94</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=95&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 95">95</a>
      </span>
      <span>
        <span class="current">96</span>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=97&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 97">97</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=98&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 98">98</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=99&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 99">99</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=100&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 100">100</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=101&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 101">101</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=102&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 102">102</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=103&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 103">103</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=104&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 104">104</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=105&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 105">105</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=106&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 106">106</a>
      </span>
    <span class="next">
      <a href="query%3Fstatus=closed&amp;max=3&amp;page=97&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Next Page">→</a>
    </span>
</div>
  <table class="listing tickets">
    <thead>
    <tr class="trac-columns">
      <th class="id">
        <a title="Sort by Ticket (ascending)" href="query%3Fstatus=closed&amp;max=3&amp;page=96&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;order=id&amp;row=description.html">Ticket</a>
      </th><th class="resolution">
        <a title="Sort by Resolution (ascending)" href="query%3Fstatus=closed&amp;max=3&amp;page=96&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;order=resolution&amp;row=description.html">Resolution</a>
      </th><th class="summary desc">
        <a title="Sort by Summary (ascending)" href="query%3Fstatus=closed&amp;max=3&amp;page=96&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;order=summary&amp;row=description.html">Summary</a>
      </th><th class="owner">
        <a title="Sort by Owner (ascending)" href="query%3Fstatus=closed&amp;max=3&amp;page=96&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;order=owner&amp;row=description.html">Owner</a>
      </th><th class="reporter">
        <a title="Sort by Reporter (ascending)" href="query%3Fstatus=closed&amp;max=3&amp;page=96&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;order=reporter&amp;row=description.html">Reporter</a>
      </th>
    </tr>
    </thead>
      <tbody>
              <tr class="even prio2">
                    <td class="id"><a href="ticket/2204.html" title="View ticket" class="closed">#2204</a></td>
                    <td class="resolution">
                      fixed
                    </td>
                    <td class="summary">
                      <a href="ticket/2204.html" title="View ticket">[super] Related (Stuff) Extension</a>
                    </td>
                    <td class="owner">
                      ross
                    </td>
                    <td class="reporter">
                      rgrp
                    </td>
              </tr>
                <tr class="fullrow">
                  <td colspan="5">
                    <p class="meta">Reported by <strong>rgrp</strong>,
                      <a class="timeline" href="timeline%3Ffrom=2012-03-04T12:09:52Z&amp;precision=second.html" title="2012-03-04T12:09:52Z in Timeline">2 years</a> ago.</p>
                  </td>
                </tr>
                  <tr class="fullrow">
                    <th class="meta">Description</th>
                    <td colspan="4">
                      <p>
This is a reworking of the existing apps extension.
</p>
<p>
Initial proposal at <a class="ext-link" href="http://wiki.ckan.org/Proposals#Apps_in_CKAN"><span class="icon">​</span>http://wiki.ckan.org/Proposals#Apps_in_CKAN</a> and <a class="ext-link" href="http://wiki.ckan.org/Proposals#References.2FLinks_in_CKAN"><span class="icon">​</span>http://wiki.ckan.org/Proposals#References.2FLinks_in_CKAN</a>
</p>
<h2 id="Naming">Naming</h2>
<p>
What do we call this extension?
</p>
<ul><li>related
<ul><li>RP best IMO but perhaps too close to separate relationships concept?
</li></ul></li><li>relatedstuff
</li><li>links
</li><li>references
</li></ul><h2 id="Proposal">Proposal</h2>
<p>
"Related Stuff": Apps as in an application (website/service/tool) that uses this dataset (as in Apps and Ideas extension)
</p>
<ul><li>This case seems a general example of wanting to link some external thing to a dataset (e.g. this policy paper refs this dataset, this application uses this dataset, this visualization is built on this dataset cf <a class="ext-link" href="http://lists.okfn.org/pipermail/ckan-discuss/2011-August/001607.html"><span class="icon">​</span>http://lists.okfn.org/pipermail/ckan-discuss/2011-August/001607.html</a>)
</li></ul><h2 id="Implementation">Implementation</h2>
<p>
New table named Related with following structure
</p>
<pre class="wiki">|| id (int) || type || title || description (markdown) || image_url || owner_id || url || created (timestamp)
</pre><ul><li>type = Idea | App | API | Visualization | Post | Paper | News Article
<ul><li>Suggest we make this a ckan.ini config option (comma separated ...?)
<ul><li>Do we want the possibility of different templates for different types of Related objects?
</li></ul></li></ul></li></ul><ul><li>image: ?? Depends where we store images. Simplest option would be to change to image_url and leave it to users to have already uploaded an image somewhere. If not we need to support image uploading and storage. See <a class="closed ticket" href="ticket/1692.html" title="enhancement: Add image attribute to Dataset and Group (closed: wontfix)">#1692</a> (add image attribute to datasets and groups) for more discussion, once implemented the URL here can be an internal url.
</li></ul><ul><li>owner_id = user_id or creating user (see authorization below) 
</li></ul><p>
Related2Dataset (note that related_id, dataset_id tuple should be unique). This allows for m2m connections. If a given related item is only with one dataset this could be simplified. May contain status so dataset owner can turn this on/off.
</p>
<pre class="wiki">|| id || dataset_id || related_id || status
</pre><p>
status should be used to allow for a dataset owner (for dataset_id) to de-activate the relationship between the dataset and the related.
</p>
<h3 id="Url">Url</h3>
<ul><li>/dataset/{dataset-name}/related/{related-item-id}/{related-item-title-stringified}
<ul><li>If a reference item could exist in its own right (and perhaps refer to multiple datasets then it should get its own url at e.g. /related/{id}
</li></ul></li><li>/dataset/{dataset-name}/related/add =&gt; Modal dialog on related tab so we can use API to create them.
</li></ul><p>
/dataset/{id}/related &lt;- list
</p>
<ul><li>use image_url for small icon etc, title description (shortened?)
</li><li>Click through to full related item (optional)
</li><li>dataset owner is shown show / hide button ... (or on /dataset/{id}/related/{id} )
</li><li>related owner sees an edit button / icon (pops up modal)
</li></ul><p>
/dataset/{id}/related/{id} (optional)
</p>
<p>
/dataset/{id} will have a Related tab (with bubble with count).
</p>
<ul><li>Drop down with Add Related -&gt; Pop-up modal and save via API
</li></ul><blockquote>
<blockquote>
<p>
(Not used: /related/add with dataset prefilled ... )
</p>
</blockquote>
</blockquote>
<p>
/related/{id}/edit
</p>
<h3 id="Authorization">Authorization</h3>
<p>
Addition of related item be considered orthogonal to datasets (and hence with separate authorization i.e. i can add the info that site X uses dataset Y without needing permission to edit dataset Y).
</p>
<p>
Thus any logged in user could add a Related item. We set the owner of the related item to creating user and going forward only that user or a sysadmin can update or delete.
</p>
<p>
NB: we could have a system where datasets owners have to approve related items before they show up next to their dataset. This would add substantial complexity so I propose we leave out of phase 1.
</p>
<h3 id="Tasksandestimates7.5d">Tasks and estimates {7.5d}</h3>
<p>
[x] Model + Migration for Related table. {0.75d}
</p>
<p>
[x] Controller for Related (or relevant sections in Package controller). {0.75d}
</p>
<p>
[x] Routing setup. {0.25d}
</p>
<p>
[x] Schema for related. {0.5d}
</p>
<p>
[x] Logic layer actions. {1.0d}
</p>
<p>
[x] Auth (default + publisher). {0.5d}
</p>
<p>
[x] Templates + Dataset changes (new tab etc). {1.0d}
</p>
<p>
[x] JS Application for adding Related objects in a modal. {1.0d}
</p>
<p>
[x] Testing. {0.75d}
</p>
<p>
[x] Dataset owner disabling of Related (via M2M table). {0.5d}
</p>
<ul><li>Updated to allow author of related to delete as well
</li></ul><p>
[x] Documentation. {0.25d}
</p>

                    </td>
                  </tr>
              <tr class="odd prio1">
                    <td class="id"><a href="ticket/961.html" title="View ticket" class="closed">#961</a></td>
                    <td class="resolution">
                      fixed
                    </td>
                    <td class="summary">
                      <a href="ticket/961.html" title="View ticket">[super] Refactoring of forms, validation and model synchronization</a>
                    </td>
                    <td class="owner">
                      kindly
                    </td>
                    <td class="reporter">
                      rgrp
                    </td>
              </tr>
                <tr class="fullrow">
                  <td colspan="5">
                    <p class="meta">Reported by <strong>rgrp</strong>,
                      <a class="timeline" href="timeline%3Ffrom=2011-02-07T09:10:49Z&amp;precision=second.html" title="2011-02-07T09:10:49Z in Timeline">3 years</a> ago.</p>
                  </td>
                </tr>
                  <tr class="fullrow">
                    <th class="meta">Description</th>
                    <td colspan="4">
                      <p>
This is a meta-ticket to hold all of the work on refactoring forms, validation and model-synchronization in CKAN.
</p>
<p>
ckan-dev thread: <a class="ext-link" href="http://lists.okfn.org/pipermail/ckan-dev/2011-January/000180.html"><span class="icon">​</span>http://lists.okfn.org/pipermail/ckan-dev/2011-January/000180.html</a>
</p>
<h2 id="TheIssue">The Issue</h2>
<p>
From <a class="closed ticket" href="ticket/926.html" title="enhancement: Pick a simpler form framework (closed: fixed)">#926</a>:
</p>
<p>
The current formalchemy setup conflates view, controller and model code in a way that makes it hard to debug and customise.
</p>
<p>
From <a class="ext-link" href="http://lists.okfn.org/pipermail/ckan-dev/2011-January/000181.html"><span class="icon">​</span>http://lists.okfn.org/pipermail/ckan-dev/2011-January/000181.html</a>:
</p>
<p>
... FormAlchemy, in retrospect, was probably a mistake as it merges too much model/validation/form generation into one thing.
</p>
<p>
At least 3 functions involved [in this area]:
</p>
<ol><li>Generating (or just filling) a form template with 'form data' (and errors)
</li><li>Converting model data to form data (also happens for APIs in fact) -- let's call this 'dict-ization'
</li><li>Converting form data to model data (and validating) (inverse of previous step)
</li></ol><h2 id="RelatedTickets">Related Tickets</h2>
<ul><li><a class="closed ticket" href="ticket/926.html" title="enhancement: Pick a simpler form framework (closed: fixed)">#926</a> - Pick a simpler form framework
</li><li><a class="closed ticket" href="ticket/1046.html" title="enhancement: Dictization and the new logic layer (closed: fixed)">#1046</a> 'dictization' and the logic layer - serialization / deserialization of package (and other domain objects) to standard intermediate format such as json-convertable python dict
<ul><li><a class="closed ticket" href="ticket/1079.html" title="enhancement: Refactor API to use new logic layer and dictization (closed: fixed)">#1079</a> Refactor API to use new logic layer and dictization
</li><li><a class="closed ticket" href="ticket/1078.html" title="enhancement: Refactors WUI controllers and forms to use logic layer (closed: fixed)">#1078</a> Refactor WUI controllers and forms to use logic layer
</li><li>cf existing dumper and importer code
</li><li>This will fix <a class="closed ticket" href="ticket/662.html" title="defect: Can't put entity that is returned by posting to package register (closed: fixed)">#662</a>
</li></ul></li><li>[not ticketed yet] - validation layer (should work on serialized objects?)
</li><li><a class="closed ticket" href="ticket/662.html" title="defect: Can't put entity that is returned by posting to package register (closed: fixed)">#662</a> - Can't put entity that is returned by posting to package register (Defect)
</li><li><a class="closed ticket" href="ticket/972.html" title="enhancement: Merge 'extras' into main package dict rather than having separate key (closed: wontfix)">#972</a> - Merge 'extras' into main package dict rather than having separate key
</li><li><a class="closed ticket" href="ticket/1035.html" title="enhancement: Form impressions given an ID (closed: wontfix)">#1035</a> - Form impressions are given IDs
</li><li><a class="closed ticket" href="ticket/810.html" title="enhancement: Move &#34;add packages&#34; field up in group form (closed: wontfix)">#810</a> - Move "add packages" field up in group form (easier to do this once forms are done)
</li></ul>
                    </td>
                  </tr>
              <tr class="even prio2">
                    <td class="id"><a href="ticket/1094.html" title="View ticket" class="closed">#1094</a></td>
                    <td class="resolution">
                      duplicate
                    </td>
                    <td class="summary">
                      <a href="ticket/1094.html" title="View ticket">[super] Refactor the Auth System</a>
                    </td>
                    <td class="owner">
                      thejimmyg
                    </td>
                    <td class="reporter">
                      thejimmyg
                    </td>
              </tr>
                <tr class="fullrow">
                  <td colspan="5">
                    <p class="meta">Reported by <strong>thejimmyg</strong>,
                      <a class="timeline" href="timeline%3Ffrom=2011-04-18T09:12:53Z&amp;precision=second.html" title="2011-04-18T09:12:53Z in Timeline">3 years</a> ago.</p>
                  </td>
                </tr>
                  <tr class="fullrow">
                    <th class="meta">Description</th>
                    <td colspan="4">
                      <p>
Here are some proposed changes related to CKAN's authorization system - they aren't very big, but should provide for some forthcoming use cases including <a class="closed ticket" href="ticket/787.html" title="task: Auth API (closed: fixed)">#787</a>.
</p>
<p>
Two man reasons for the changes are:
</p>
<ul><li>We have a completely refactored architecture now which introduces a logic layer. These Auth changes are designed to better support the way we work with that layer.
</li></ul><ul><li>Different CKAN extension apps may need radically different authentication/authorisation so we need to allow whatever we have to be override-able.
</li></ul><p>
The first two changes revolve around the is_authorized method, which
is called by the logic layer to ask whether a particular user (e.g.
Bob) is allowed to do a certain action (e.g. edit) on a certain object (e.g. Package).
</p>
<ol><li>The first thing the is_authorized method is a hook to a plugin
</li></ol><p>
which *overrides* the current call with its own implementation (note: in previous discussions we have considered allowing a chain of plugins, no longer!)
</p>
<p>
Reason: authorization can be completely delegated to another system
(or partially)
</p>
<ol start="2"><li>is_authorized method currently takes (username, action, object)
</li></ol><p>
but for action=create_package, the object supplied is System, and for action=edit the object supplied is the package. Instead action should always be the string name of a function in the logic layer and object should always be the object passed to that function. This means our auth system is based around the actual actions we are performing (rather than a model them) and with the actual data that forms the action (rather than a related object). You never need a System object in this model.
</p>
<ol start="3"><li>Rename these two classes to better reflect what they are
<ul><li><a class="missing wiki">AuthorizationGroup?</a> -&gt; <a class="missing wiki">UserGroup?</a>
</li><li>Group -&gt; <a class="missing wiki">PackageGroup?</a>
</li></ul></li></ol><ol start="4"><li>Rename the Editor role to <a class="missing wiki">PriveledgeUser?</a> since Editors sometimes can't edit.
</li></ol><p>
Although this sounds a bit radical we already have auth extensions.
</p>
<h2 id="Read-onlyCKANWebUI">Read-only CKAN Web UI</h2>
<p>
(Additional requirement from <a class="closed ticket" href="ticket/764.html" title="enhancement: Read-only CKAN Web UI (closed: duplicate)">#764</a>)
</p>
<p>
Whilse using CKAN web interface, you are not tempted to edit stuff:
</p>
<ul><li>You know at all times this CKAN is read-only
</li><li>All editing facilities are still seen but greyed-out with an indication why it is.
</li></ul>
                    </td>
                  </tr>
      </tbody>
  </table>
  <div class="paging">
    <span class="previous">
      <a href="query%3Fstatus=closed&amp;max=3&amp;page=95&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Previous Page">←</a>
    </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=86&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 86">86</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=87&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 87">87</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=88&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 88">88</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=89&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 89">89</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=90&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 90">90</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=91&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 91">91</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=92&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 92">92</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=93&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 93">93</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=94&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 94">94</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=95&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 95">95</a>
      </span>
      <span>
        <span class="current">96</span>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=97&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 97">97</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=98&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 98">98</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=99&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 99">99</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=100&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 100">100</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=101&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 101">101</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=102&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 102">102</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=103&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 103">103</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=104&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 104">104</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=105&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 105">105</a>
      </span>
      <span>
        <a href="query%3Fstatus=closed&amp;max=3&amp;page=106&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Page 106">106</a>
      </span>
    <span class="next">
      <a href="query%3Fstatus=closed&amp;max=3&amp;page=97&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description.html" title="Next Page">→</a>
    </span>
</div>
</div>
      <div class="buttons">
      </div>
      <div id="help"><strong>Note:</strong> See <a href="wiki/TracQuery.html">TracQuery</a>
        for help on using queries.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="query%3Fstatus=closed&amp;format=rss&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description" class="rss">RSS Feed</a>
        </li><li>
          <a rel="nofollow" href="query%3Fstatus=closed&amp;format=csv&amp;max=3&amp;page=96&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description" class="csv">Comma-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="query%3Fstatus=closed&amp;format=tab&amp;max=3&amp;page=96&amp;col=id&amp;col=resolution&amp;col=summary&amp;col=owner&amp;col=reporter&amp;desc=1&amp;order=summary&amp;row=description" class="tab">Tab-delimited Text</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="about.html"><strong>Trac 0.12.3</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>