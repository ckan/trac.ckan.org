<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      DistributingChanges (diff) – CKAN
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">window.location.hash = window.location.hash;</script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="help" href="TracGuide.html" />
        <link rel="up" href="DistributingChanges%3Faction=history.html" title="Page history" />
        <link rel="next" href="DistributingChanges%3Faction=diff&amp;version=2.html" title="Version 2" />
        <link rel="start" href="../wiki.1.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/wiki.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/diff.css" type="text/css" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search CKAN" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/diff.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="../chrome/common/css/diff.css" />
    <meta name="ROBOTS" content="NOINDEX, NOFOLLOW" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://ckan.org/"><img src="http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png" alt="CKAN Trac" height="70" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../login.html">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="TracGuide.html">Help/Guide</a></li><li><a href="../about.html">About Trac</a></li><li class="last"><a href="../register.html">Register</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li><a href="../report.html">View Tickets</a></li><li><a href="../search.html">Search</a></li><li class="last active"><a href="../wiki.1.html">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span class="missing">&larr; Previous Change</span></li><li><a href="DistributingChanges%3Faction=history.html" title="Page history">Wiki History</a></li><li class="last"><span><a class="next" href="DistributingChanges%3Faction=diff&amp;version=2.html" title="Version 2">Next Change</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="wiki">
      <h1>
        Changes between
          <a href="http://localhost/wiki/DistributingChanges?version=0">Initial Version</a> and
          <a href="DistributingChanges%3Fversion=1.html">Version 1</a> of
          <a href="DistributingChanges%3Fversion=1.html">DistributingChanges</a>
      </h1>
      <form method="post" id="prefs" action="DistributingChanges%3Fversion=1.html"><div><input type="hidden" name="__FORM_TOKEN" value="93d81ccf9a7bb1c456462f62" /></div>
        <div>
          <input type="hidden" name="action" value="diff" />
          <input type="hidden" name="version" value="1" />
          <input type="hidden" name="old_version" value="0" />
          
  <label for="style">View differences</label>
  <select id="style" name="style">
    <option selected="selected" value="inline">inline</option>
    <option value="sidebyside">side by side</option>
  </select>
  <div class="field">
    <label><input type="radio" name="contextall" value="0" checked="checked" />
             Show</label>
      <label><input type="text" name="contextlines" id="contextlines" size="2" maxlength="3" value="2" />
             lines around each change</label><br />
    <label><input type="radio" name="contextall" value="1" />
           Show the changes in full context</label>
  </div>
  <fieldset id="ignore">
    <legend>Ignore:</legend>
    <div class="field">
      <input type="checkbox" id="ignoreblanklines" name="ignoreblanklines" />
      <label for="ignoreblanklines">Blank lines</label>
    </div>
    <div class="field">
      <input type="checkbox" id="ignorecase" name="ignorecase" />
      <label for="ignorecase">Case changes</label>
    </div>
    <div class="field">
      <input type="checkbox" id="ignorewhitespace" name="ignorewhitespace" />
      <label for="ignorewhitespace">White space changes</label>
    </div>
  </fieldset>
  <div class="buttons">
    <input type="submit" name="update" value="Update" />
  </div>

        </div>
      </form>
      <dl id="overview">
        <dt class="property time">Timestamp:</dt>
        <dd class="time">
            02/22/10 17:44:52 (<a class="timeline" href="../timeline%3Ffrom=2010-02-22T17:44:52Z&amp;precision=second.html" title="2010-02-22T17:44:52Z in Timeline">4 years</a> ago)
        </dd>
        <dt class="property author">Author:</dt>
        <dd class="author">
          johnbywater
        </dd>
        <dt class="property message">Comment:</dt>
        <dd class="message">
          
          <p>
initial considerations for distribution of CKAN model changes
</p>

        </dd>
      </dl>
      <div class="diff">
        <div class="legend" id="diff-legend">
          <h3>Legend:</h3>
          <dl>
            <dt class="unmod"></dt><dd>Unmodified</dd>
            <dt class="add"></dt><dd>Added</dd>
            <dt class="rem"></dt><dd>Removed</dd>
            <dt class="mod"></dt><dd>Modified</dd>
          </dl>
        </div>
        <div class="diff">
  <ul class="entries">
      <li class="entry">
        <h2 id="file0">
          <a href="DistributingChanges%3Fversion=1.html">DistributingChanges</a>
        </h2>
        <table class="trac-diff inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Version currently edited">
                    <a href="DistributingChanges%3Faction=diff&amp;version=1.html#L1">
                      v1</a>
                  </th>
                  <th title="Version 1">
                    <a href="DistributingChanges%3Fversion=1.html#L1">
                      v1</a>
                  </th>
                  <td> </td>
                </tr>
              </thead>
            <tbody class="add">
                  <tr class="first">
                          <th> </th><th>1</th><td class="r"><ins>Abstracting and continuing considerations from:</ins> </td>
                  </tr><tr>
                          <th> </th><th>2</th><td class="r"><ins>&nbsp;- SyncingInstances</ins> </td>
                  </tr><tr>
                          <th> </th><th>3</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>4</th><td class="r"><ins>Apparent wants and needs:</ins> </td>
                  </tr><tr>
                          <th> </th><th>5</th><td class="r"><ins>&nbsp;- to distribute local CKAN changes to foreign CKAN instances</ins> </td>
                  </tr><tr>
                          <th> </th><th>6</th><td class="r"><ins>&nbsp;- to preserve history (perhaps so that normally each instance's Recent Changes resembles the others)</ins> </td>
                  </tr><tr>
                          <th> </th><th>7</th><td class="r"><ins>&nbsp;- to support selective distribution (either by selecting for some logical subset of CKAN records, or by manual approval of changes on a case-by-case basic, or a combination, or otherwise)</ins> </td>
                  </tr><tr>
                          <th> </th><th>8</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>9</th><td class="r"><ins>Inferred wants and needs:</ins> </td>
                  </tr><tr>
                          <th> </th><th>10</th><td class="r"><ins>&nbsp;- to support use through firewall (client-server: where client pushes changes on client to server, and client polls and pulls changes on server to client) </ins> </td>
                  </tr><tr>
                          <th> </th><th>11</th><td class="r"><ins>&nbsp;- to support use across internet (peer-peer: each accepts listeners, each can register to listen for changes, each notifies its listeners of any new changes, each listener pulls changes it doesn't have, etc)</ins> </td>
                  </tr><tr>
                          <th> </th><th>12</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>13</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>14</th><td class="r"><ins>Highlighted core models of Mercurial and of CKAN:</ins> </td>
                  </tr><tr>
                          <th> </th><th>15</th><td class="r"><ins>(because it is thought that CKAN is like a DVCS)</ins> </td>
                  </tr><tr>
                          <th> </th><th>16</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>17</th><td class="r"><ins>of Mercurial:</ins> </td>
                  </tr><tr>
                          <th> </th><th>18</th><td class="r"><ins>&nbsp;- Repository (create with: hg init; hg clone)</ins> </td>
                  </tr><tr>
                          <th> </th><th>19</th><td class="r"><ins>&nbsp;- File (create with: editor)</ins> </td>
                  </tr><tr>
                          <th> </th><th>20</th><td class="r"><ins>&nbsp;- Repository History (create with: hg log; hg glog)</ins> </td>
                  </tr><tr>
                          <th> </th><th>21</th><td class="r"><ins>&nbsp;- Changeset (create with: hg commit; hg merge)</ins> </td>
                  </tr><tr>
                          <th> </th><th>22</th><td class="r"><ins>&nbsp;- Working Directory (create with: hg update)</ins> </td>
                  </tr><tr>
                          <th> </th><th>23</th><td class="r"><ins>&nbsp;- Changeset Patch (create with: hg export)</ins> </td>
                  </tr><tr>
                          <th> </th><th>24</th><td class="r"><ins>&nbsp;- Branch (create with hg: pull)</ins> </td>
                  </tr><tr>
                          <th> </th><th>25</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>26</th><td class="r"><ins>of CKAN:</ins> </td>
                  </tr><tr>
                          <th> </th><th>27</th><td class="r"><ins>&nbsp;- Repository (create with: paste setup-app)</ins> </td>
                  </tr><tr>
                          <th> </th><th>28</th><td class="r"><ins>&nbsp;- Package</ins> </td>
                  </tr><tr>
                          <th> </th><th>29</th><td class="r"><ins>&nbsp;- Tag</ins> </td>
                  </tr><tr>
                          <th> </th><th>30</th><td class="r"><ins>&nbsp;- Group</ins> </td>
                  </tr><tr>
                          <th> </th><th>31</th><td class="r"><ins>&nbsp;- Recent Changes</ins> </td>
                  </tr><tr>
                          <th> </th><th>32</th><td class="r"><ins>&nbsp;- Revision</ins> </td>
                  </tr><tr>
                          <th> </th><th>33</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>34</th><td class="r"><ins>Concepts that don't easily carry over from Mercurial to CKAN:</ins> </td>
                  </tr><tr>
                          <th> </th><th>35</th><td class="r"><ins>&nbsp;- Mercurial Branch (CKAN just has a single change history)</ins> </td>
                  </tr><tr>
                          <th> </th><th>36</th><td class="r"><ins>&nbsp;- Mercurial Merge (CKAN doesn't have any branches to merge)</ins> </td>
                  </tr><tr>
                          <th> </th><th>37</th><td class="r"><ins>&nbsp;- Mercurial Push/Pull (CKAN can't send or receive foreign branches)</ins> </td>
                  </tr><tr>
                          <th> </th><th>38</th><td class="r"><ins>&nbsp;- Working Directory (CKAN presents its repository directly)</ins> </td>
                  </tr><tr>
                          <th> </th><th>39</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>40</th><td class="r"><ins>Concepts that do easily carry over from Mercurial to CKAN:</ins> </td>
                  </tr><tr>
                          <th> </th><th>41</th><td class="r"><ins>&nbsp;- Changeset Patch</ins> </td>
                  </tr><tr>
                          <th> </th><th>42</th><td class="r"><ins>&nbsp;- Export/Import (which BTW causes changes to be applied to the working directory before committing, that is different from Pull which doesn't affect the working directory - also worth noting that import normally aborts if there are outstanding changes in the working directory, which would carry over to CKAN should received changeset patches be queued and progressively applied unless there is a conflict, which [could] normally cause the queue to be held up, and notification to be sent to the site admins to intervene, after the conflicting patch is resolved the queue would continue until the next conflict -- other behaviours could include: automatic merging; automatic skipping; intervention each time)</ins> </td>
                  </tr><tr>
                          <th> </th><th>43</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>44</th><td class="r"><ins>Actions needed in CKAN to distribute changes (functional requirements):</ins> </td>
                  </tr><tr>
                          <th> </th><th>45</th><td class="r"><ins>&nbsp;- Changeset patch, creation (on new revision: create serialised diff)</ins> </td>
                  </tr><tr>
                          <th> </th><th>46</th><td class="r"><ins>&nbsp;- Changeset patch, publication (handle register-get and entity-get, searchable, publish-subscribe)</ins> </td>
                  </tr><tr>
                          <th> </th><th>47</th><td class="r"><ins>&nbsp;- Changeset patch, retrieval (get and add new changeset patches to local queue entity-get, add to queue)</ins> </td>
                  </tr><tr>
                          <th> </th><th>48</th><td class="r"><ins>&nbsp;- Changeset patch, conflict detection (possibly by asserting either that new values of changed attributes match current values of same attributes in model - so the patch would leave the local model in it's current state, or that old values of changed attributes match current values of same attributes in model?)</ins> </td>
                  </tr><tr>
                          <th> </th><th>49</th><td class="r"><ins>&nbsp;- Changeset patch, resolution (human response to conflict notification, decide new state, continue the queue)</ins> </td>
                  </tr><tr>
                          <th> </th><th>50</th><td class="r"><ins>&nbsp;- Changeset patch, application (model merge, record changeset patch has been applied)</ins> </td>
                  </tr><tr>
                          <th> </th><th>51</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>52</th><td class="r"><ins>&nbsp;- Model Merge (to include add/remove aggregated children e.g. packages)</ins> </td>
                  </tr><tr>
                          <th> </th><th>53</th><td class="r"><ins>&nbsp;- Model Package Merge (to include add/remove child associations e.g. taggings)</ins> </td>
                  </tr><tr>
                          <th> </th><th>54</th><td class="r"><ins>&nbsp;- Model Tag Merge (if there are any editable attributes )</ins> </td>
                  </tr><tr>
                          <th> </th><th>55</th><td class="r"><ins>&nbsp;- Model Group Merge (if there are any editable attributes)</ins> </td>
                  </tr><tr>
                          <th> </th><th>56</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>57</th><td class="r"><ins>&nbsp;- CKAN merge (merge queued changeset patches into the model: FIFO, for each: if changeset patch conflicts, request resolution and stop; otherwise apply changeset patch and continue with next in queue)</ins> </td>
                  </tr><tr>
                          <th> </th><th>58</th><td class="r"><ins>&nbsp;- CKAN pull (retrieve new patches)</ins> </td>
                  </tr><tr>
                          <th> </th><th>59</th><td class="r"><ins>&nbsp;- CKAN push (send new patches)</ins> </td>
                  </tr><tr>
                          <th> </th><th>60</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>61</th><td class="r"><ins>Sub-domain models needed in CKAN:</ins> </td>
                  </tr><tr>
                          <th> </th><th>62</th><td class="r"><ins>&nbsp;- changeset patch model (need uuids for changeset patches, need each to record which patches have already been received, need to record what state of application they are in, need to arrange things so that new change numbers are created only in the case where the change does not arise from applying a patch)</ins> </td>
                  </tr><tr>
                          <th> </th><th>63</th><td class="r"><ins>&nbsp;- changeset patch notification publish-subscribe model (for event-driven changeset patch distribution)</ins> </td>
                  </tr><tr>
                          <th> </th><th>64</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>65</th><td class="r"><ins>Notes:</ins> </td>
                  </tr><tr>
                          <th> </th><th>66</th><td class="r"><ins>&nbsp;- the more divergent two instances the more likely it is that a changeset will conflict, so there is a very good reason to make the changeset distribution loop as tight as possible (in order to minimise the need to conflicts to be resolved) -- hence the event-driven peer-peer considerations</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>67</th><td class="r"><ins>&nbsp;- the frequency of human intervention will also depend on the strictness of the changeset patch conflict detection and the forcefulness of the patch application mechanism</ins> </td>
                  </tr>
            </tbody>
        </table>
      </li>
  </ul>
</div>
      </div>
  </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.3</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>
