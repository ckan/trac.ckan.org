<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      TracFastCgi (diff) – CKAN
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">window.location.hash = window.location.hash;</script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="help" href="TracGuide.html" />
        <link rel="up" href="TracFastCgi%3Faction=history.html" title="Page history" />
        <link rel="start" href="../wiki.1.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/wiki.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/diff.css" type="text/css" />
        <link rel="prev" href="TracFastCgi%3Faction=diff&amp;version=3.html" title="Version 3" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search CKAN" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/diff.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="../chrome/common/css/diff.css" />
    <meta name="ROBOTS" content="NOINDEX, NOFOLLOW" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://ckan.org/"><img src="http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png" alt="CKAN Trac" height="70" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../login.html">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="TracGuide.html">Help/Guide</a></li><li><a href="../about.html">About Trac</a></li><li class="last"><a href="../register.html">Register</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li><a href="../report.html">View Tickets</a></li><li><a href="../search.html">Search</a></li><li class="last active"><a href="../wiki.1.html">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="TracFastCgi%3Faction=diff&amp;version=3.html" title="Version 3">Previous Change</a></span></li><li><a href="TracFastCgi%3Faction=history.html" title="Page history">Wiki History</a></li><li class="last"><span class="missing">Next Change &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="wiki">
      <h1>
        Changes between
          <a href="TracFastCgi%3Fversion=3.html">Version 3</a> and
          <a href="TracFastCgi%3Fversion=4.html">Version 4</a> of
          <a href="TracFastCgi%3Fversion=4.html">TracFastCgi</a>
      </h1>
      <form method="post" id="prefs" action="TracFastCgi%3Fversion=4.html"><div><input type="hidden" name="__FORM_TOKEN" value="93d81ccf9a7bb1c456462f62" /></div>
        <div>
          <input type="hidden" name="action" value="diff" />
          <input type="hidden" name="version" value="4" />
          <input type="hidden" name="old_version" value="3" />
          
  <label for="style">View differences</label>
  <select id="style" name="style">
    <option selected="selected" value="inline">inline</option>
    <option value="sidebyside">side by side</option>
  </select>
  <div class="field">
    <label><input type="radio" name="contextall" value="0" checked="checked" />
             Show</label>
      <label><input type="text" name="contextlines" id="contextlines" size="2" maxlength="3" value="2" />
             lines around each change</label><br />
    <label><input type="radio" name="contextall" value="1" />
           Show the changes in full context</label>
  </div>
  <fieldset id="ignore">
    <legend>Ignore:</legend>
    <div class="field">
      <input type="checkbox" id="ignoreblanklines" name="ignoreblanklines" />
      <label for="ignoreblanklines">Blank lines</label>
    </div>
    <div class="field">
      <input type="checkbox" id="ignorecase" name="ignorecase" />
      <label for="ignorecase">Case changes</label>
    </div>
    <div class="field">
      <input type="checkbox" id="ignorewhitespace" name="ignorewhitespace" />
      <label for="ignorewhitespace">White space changes</label>
    </div>
  </fieldset>
  <div class="buttons">
    <input type="submit" name="update" value="Update" />
  </div>

        </div>
      </form>
      <dl id="overview">
        <dt class="property time">Timestamp:</dt>
        <dd class="time">
            05/02/14 01:33:04 (<a class="timeline" href="../timeline%3Ffrom=2014-05-02T01:33:04Z&amp;precision=second.html" title="2014-05-02T01:33:04Z in Timeline">7 minutes</a> ago)
        </dd>
        <dt class="property author">Author:</dt>
        <dd class="author">
          trac
        </dd>
        <dt class="property message">Comment:</dt>
        <dd class="message">
          
          <p>
--
</p>

        </dd>
      </dl>
      <div class="diff">
        <div class="legend" id="diff-legend">
          <h3>Legend:</h3>
          <dl>
            <dt class="unmod"></dt><dd>Unmodified</dd>
            <dt class="add"></dt><dd>Added</dd>
            <dt class="rem"></dt><dd>Removed</dd>
            <dt class="mod"></dt><dd>Modified</dd>
          </dl>
        </div>
        <div class="diff">
  <ul class="entries">
      <li class="entry">
        <h2 id="file0">
          <a href="TracFastCgi%3Fversion=4.html">TracFastCgi</a>
        </h2>
        <table class="trac-diff inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Version 3">
                    <a href="TracFastCgi%3Fversion=3.html#L1">
                      v3</a>
                  </th>
                  <th title="Version 4">
                    <a href="TracFastCgi%3Fversion=4.html#L1">
                      v4</a>
                  </th>
                  <td> </td>
                </tr>
              </thead>
            <tbody class="add">
                  <tr class="first">
                          <th> </th><th>1</th><td class="r"><ins>[[PageOutline]]</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>2</th><td class="r"><ins></ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>1</th><th>3</th><td class="l"><span>= Trac with FastCGI =</span> </td>
                  </tr><tr>
                          <th>2</th><th>4</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>3</th><th> </th><td class="l"><span><del>Since version 0.9, Trac supports being run through the [http://www.fastcgi.com/ FastCGI] interface. Like [wiki:TracModPython mod_python], this allows Trac to remain resident, and is faster than external CGI interfaces which must start a new process for each request. However, unlike mod_python, it is able to support [http://httpd.apache.org/docs/suexec.html SuEXEC].</del> Additionally, it is supported by much wider variety of web servers.</span> </td>
                      </tr><tr>
                        <th>4</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>5</th><th> </th><td class="l"><span>{{{</span> </td>
                      </tr><tr>
                        <th>6</th><th> </th><td class="l"><span>#!html</span> </td>
                      </tr><tr>
                        <th>7</th><th> </th><td class="l"><span>&lt;p style="background: #fdc; border: 2px solid #d00; font-style: italic; padding: 0 .5em; margin: 1em 0;"&gt;</span> </td>
                      </tr><tr>
                        <th>8</th><th> </th><td class="l"><span>&lt;strong&gt;Note for Windows:&lt;/strong&gt; Trac's FCGI does not run under Windows, as Windows does not implement Socket.fromfd, which is used by _fcgi.py</span> </td>
                      </tr><tr>
                        <th>9</th><th> </th><td class="l"><span>&lt;/p&gt;</span> </td>
                      </tr><tr>
                        <th>10</th><th> </th><td class="l"><span>}}}</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>5</th><td class="r"><span><ins>[http://www.fastcgi.com/ FastCGI] interface allows Trac to remain resident much like with [wiki:TracModPython mod_python] or [wiki:TracModWSGI mod_wsgi]. It is faster than external CGI interfaces which must start a new process for each request. </ins> Additionally, it is supported by much wider variety of web servers.</span> </td>
                      </tr><tr>
                        <th> </th><th>6</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>7</th><td class="r"><span>Note that unlike mod_python, FastCGI supports [http://httpd.apache.org/docs/suexec.html Apache SuEXEC], i.e. run with different permissions than web server running with (`mod_wsgi` supports the `WSGIDaemonProcess` with user / group parameters to achieve the same effect).</span> </td>
                      </tr><tr>
                        <th> </th><th>8</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>9</th><td class="r"><span>'''Note for Windows:''' Trac's FastCGI does not run under Windows, as Windows does not implement `Socket.fromfd`, which is used by `_fcgi.py`. If you want to connect to IIS, you may want to try [trac:TracOnWindowsIisAjp AJP]/[trac:TracOnWindowsIisAjp ISAPI].</span> </td>
                      </tr><tr>
                        <th> </th><th>10</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>11</th><td class="r"><span>[[PageOutline(2-3,Overview,inline)]]</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>12</th><td class="r"><span></span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>11</th><th>13</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>12</th><th>14</th><td class="l"><span>== Simple Apache configuration ==</span> </td>
                  </tr><tr>
                          <th>13</th><th>15</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>14</th><th>16</th><td class="l"><span>There are two FastCGI modules commonly available for Apache: `mod_fastcgi` and</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>15</th><th> </th><td class="l"><span>`mod_fcgid`.&nbsp; The `FastCgiIpcDir` and `FastCgiConfig` directives discussed</span> </td>
                      </tr><tr>
                        <th>16</th><th> </th><td class="l"><span>below are `mod_fastcgi` directives; the `DefaultInitEnv` is a `mod_fcgid`</span> </td>
                      </tr><tr>
                        <th>17</th><th> </th><td class="l"><span>directive.</span> </td>
                      </tr><tr>
                        <th>18</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>19</th><th> </th><td class="l"><span>For `mod_fastcgi`, add the following to an appropriate Apache configuration</span> </td>
                      </tr><tr>
                        <th>20</th><th> </th><td class="l"><span>file:</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>17</th><td class="r"><span>`mod_fcgid` (preferred). The latter is more up-to-date.</span> </td>
                      </tr><tr>
                        <th> </th><th>18</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>19</th><td class="r"><span>The following sections focus on the FCGI specific setup, see also [wiki:TracModWSGI#ConfiguringAuthentication] for configuring the authentication in Apache.</span> </td>
                      </tr><tr>
                        <th> </th><th>20</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>21</th><td class="r"><span>Regardless of which cgi module is used, be sure the web server has executable permissions on the cgi-bin folder. While FastCGI will throw specific permissions errors, mod_fcgid will throw an ambiguous error if this has not been done. (Connection reset by peer: mod_fcgid: error reading data from FastCGI server) </span> </td>
                      </tr><tr>
                        <th> </th><th>22</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>23</th><td class="r"><span>=== Set up with `mod_fastcgi` ===</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>24</th><td class="r"><span>`mod_fastcgi` uses `FastCgiIpcDir` and `FastCgiConfig` directives that should be added to an appropriate Apache configuration file:</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>21</th><th>25</th><td class="l"><span>{{{</span> </td>
                  </tr><tr>
                          <th>22</th><th>26</th><td class="l"><span># Enable fastcgi for .fcgi files</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="TracFastCgi%3Fversion=3.html#L34">…</a></th>
                  <th><a href="TracFastCgi%3Fversion=4.html#L38">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>34</th><th>38</th><td class="l"><span>calling `trac.fcgi` instead of `trac.cgi`.</span> </td>
                  </tr><tr>
                          <th>35</th><th>39</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>36</th><th> </th><td class="l"><span><del>You can</del> set up the `TRAC_ENV` as an overall default:</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>40</th><td class="r"><span><ins>Add the following to the Apache configuration file (below the `FastCgiIpcDir` line) if you intend to</ins> set up the `TRAC_ENV` as an overall default:</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>37</th><th>41</th><td class="l"><span>{{{</span> </td>
                  </tr><tr>
                          <th>38</th><th>42</th><td class="l"><span>FastCgiConfig -initial-env TRAC_ENV=/path/to/env/trac</span> </td>
                  </tr><tr>
                          <th>39</th><th>43</th><td class="l"><span>}}}</span> </td>
                  </tr><tr>
                          <th>40</th><th>44</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>41</th><th> </th><td class="l"><span><del>Or you can serve multiple Trac projects in a directory like</del>:</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>45</th><td class="r"><span><ins>Alternatively, you can serve multiple Trac projects in a directory by adding this</ins>:</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>42</th><th>46</th><td class="l"><span>{{{</span> </td>
                  </tr><tr>
                          <th>43</th><th>47</th><td class="l"><span>FastCgiConfig -initial-env TRAC_ENV_PARENT_DIR=/parent/dir/of/projects</span> </td>
                  </tr><tr>
                          <th>44</th><th>48</th><td class="l"><span>}}}</span> </td>
                  </tr><tr>
                          <th>45</th><th>49</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>46</th><th> </th><td class="l"><span>But neither of these will work for `mod_fcgid`.&nbsp; A similar but partial</span> </td>
                      </tr><tr>
                        <th>47</th><th> </th><td class="l"><span>solution for `mod_fcgid` is:</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>50</th><td class="r"><span>=== Set up with `mod_fcgid` ===</span> </td>
                      </tr><tr>
                        <th> </th><th>51</th><td class="r"><span>Configure `ScriptAlias` (see TracCgi for details), but call `trac.fcgi`</span> </td>
                      </tr><tr>
                        <th> </th><th>52</th><td class="r"><span>instead of `trac.cgi`. Note that slash at the end - it is important.</span> </td>
                      </tr><tr>
                        <th> </th><th>53</th><td class="r"><span>{{{</span> </td>
                      </tr><tr>
                        <th> </th><th>54</th><td class="r"><span>ScriptAlias /trac /path/to/www/trac/cgi-bin/trac.fcgi/</span> </td>
                      </tr><tr>
                        <th> </th><th>55</th><td class="r"><span>}}}</span> </td>
                      </tr><tr>
                        <th> </th><th>56</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>57</th><td class="r"><span>To set up Trac environment for `mod_fcgid` it is necessary to use</span> </td>
                      </tr><tr>
                        <th> </th><th>58</th><td class="r"><span>`DefaultInitEnv` directive. It cannot be used in `Directory` or</span> </td>
                      </tr><tr>
                        <th> </th><th>59</th><td class="r"><span>`Location` context, so if you need to support multiple projects, try</span> </td>
                      </tr><tr>
                        <th> </th><th>60</th><td class="r"><span>alternative environment setup below.</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>61</th><td class="r"><span></span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>48</th><th>62</th><td class="l"><span>{{{</span> </td>
                  </tr><tr>
                          <th>49</th><th>63</th><td class="l"><span>DefaultInitEnv TRAC_ENV /path/to/env/trac/</span> </td>
                  </tr><tr>
                          <th>50</th><th>64</th><td class="l"><span>}}}</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>51</th><th> </th><td class="l"><span>But this cannot be used in `Directory` or `Location` context, which makes it</span> </td>
                      </tr><tr>
                        <th>52</th><th> </th><td class="l"><span>difficult to support multiple projects.</span> </td>
                      </tr><tr>
                        <th>53</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>54</th><th> </th><td class="l"><span>A better method which works for both of these modules (and for&nbsp; [http://www.lighttpd.net/ lighttpd] and CGI as well), because it involves</span> </td>
                      </tr><tr>
                        <th>55</th><th> </th><td class="l"><span>no server configuration settings for environment variables, is to set one</span> </td>
                      </tr><tr>
                        <th>56</th><th> </th><td class="l"><span><del>of the variables in `trac.fcgi`, e.g.</del>:</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>65</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>66</th><td class="r"><span>=== alternative environment setup ===</span> </td>
                      </tr><tr>
                        <th> </th><th>67</th><td class="r"><span>A better method to specify path to Trac environment is to embed the path</span> </td>
                      </tr><tr>
                        <th> </th><th>68</th><td class="r"><span>into `trac.fcgi` script itself. That doesn't require configuration of server</span> </td>
                      </tr><tr>
                        <th> </th><th>69</th><td class="r"><span>environment variables, works for both FastCgi modules</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>70</th><td class="r"><span><ins>(and for [http://www.lighttpd.net/ lighttpd] and CGI as well)</ins>:</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>57</th><th>71</th><td class="l"><span>{{{</span> </td>
                  </tr><tr>
                          <th>58</th><th>72</th><td class="l"><span>import os</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="TracFastCgi%3Fversion=3.html#L65">…</a></th>
                  <th><a href="TracFastCgi%3Fversion=4.html#L79">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>65</th><th>79</th><td class="l"><span>}}}</span> </td>
                  </tr><tr>
                          <th>66</th><th>80</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>67</th><th> </th><td class="l"><span>Using this method, different projects can be supported by using different</span> </td>
                      </tr><tr>
                        <th>68</th><th> </th><td class="l"><span>`.fcgi` scripts with different `ScriptAliases`, copying and appropriately</span> </td>
                      </tr><tr>
                        <th>69</th><th> </th><td class="l"><span>renaming `trac.fcgi` and adding the above code to create each such script.</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>81</th><td class="r"><span>With this method different projects can be supported by using different</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>82</th><td class="r"><span>`.fcgi` scripts with different `ScriptAliases`.</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>70</th><th>83</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>71</th><th>84</th><td class="l"><span>See [https://coderanger.net/~coderanger/httpd/fcgi_example.conf this fcgid example config] which uses a !ScriptAlias directive with trac.fcgi with a trailing / like this:</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="TracFastCgi%3Fversion=3.html#L76">…</a></th>
                  <th><a href="TracFastCgi%3Fversion=4.html#L89">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>76</th><th>89</th><td class="l"><span>== Simple Cherokee Configuration ==</span> </td>
                  </tr><tr>
                          <th>77</th><th>90</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>78</th><th> </th><td class="l"><span>Configuration wanted.</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>91</th><td class="r"><span>The configuration on Cherokee's side is quite simple. You will only need to know that you can spawn Trac as an SCGI process.</span> </td>
                      </tr><tr>
                        <th> </th><th>92</th><td class="r"><span>You can either start it manually, or better yet, automatically by letting Cherokee spawn the server whenever it is down.</span> </td>
                      </tr><tr>
                        <th> </th><th>93</th><td class="r"><span>First set up an information source in cherokee-admin with a local interpreter.</span> </td>
                      </tr><tr>
                        <th> </th><th>94</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>95</th><td class="r"><span>{{{</span> </td>
                      </tr><tr>
                        <th> </th><th>96</th><td class="r"><span>Host:</span> </td>
                      </tr><tr>
                        <th> </th><th>97</th><td class="r"><span>localhost:4433</span> </td>
                      </tr><tr>
                        <th> </th><th>98</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>99</th><td class="r"><span>Interpreter:</span> </td>
                      </tr><tr>
                        <th> </th><th>100</th><td class="r"><span>/usr/bin/tracd —single-env —daemonize —protocol=scgi —hostname=localhost —port=4433 /path/to/project/</span> </td>
                      </tr><tr>
                        <th> </th><th>101</th><td class="r"><span>}}}</span> </td>
                      </tr><tr>
                        <th> </th><th>102</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>103</th><td class="r"><span>If the port was not reachable, the interpreter command would be launched. Note that, in the definition of the information source, you will have to manually launch the spawner if you use a ''Remote host'' as ''Information source'' instead of a ''Local interpreter''.</span> </td>
                      </tr><tr>
                        <th> </th><th>104</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>105</th><td class="r"><span>After doing this, we will just have to create a new rule managed by the SCGI handler to access Trac. It can be created in a new virtual server, trac.example.net for instance, and will only need two rules. The '''default''' one will use the SCGI handler associated to the previously created information source.</span> </td>
                      </tr><tr>
                        <th> </th><th>106</th><td class="r"><span>The second rule will be there to serve the few static files needed to correctly display the Trac interface. Create it as ''Directory rule'' for ''/common'' and just set it to the ''Static files'' handler and with a ''Document root'' that points to the appropriate files: ''$TRAC_LOCAL/htdocs/'' (where $TRAC_LOCAL is a directory defined by the user or the system administrator to place local trac resources).</span> </td>
                      </tr><tr>
                        <th> </th><th>107</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>108</th><td class="r"><span>Note:\\</span> </td>
                      </tr><tr>
                        <th> </th><th>109</th><td class="r"><span>If the tracd process fails to start up, and cherokee displays a 503 error page, you might be missing the [http://trac.saddi.com/flup python-flup] package.\\</span> </td>
                      </tr><tr>
                        <th> </th><th>110</th><td class="r"><span>Python-flup is a dependency which provides trac with SCGI capability. You can install it on debian based systems with:</span> </td>
                      </tr><tr>
                        <th> </th><th>111</th><td class="r"><span>{{{</span> </td>
                      </tr><tr>
                        <th> </th><th>112</th><td class="r"><span>sudo apt-get install python-flup</span> </td>
                      </tr><tr>
                        <th> </th><th>113</th><td class="r"><span>}}}</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>114</th><td class="r"><span></span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>79</th><th>115</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>80</th><th>116</th><td class="l"><span>== Simple Lighttpd Configuration ==</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="TracFastCgi%3Fversion=3.html#L85">…</a></th>
                  <th><a href="TracFastCgi%3Fversion=4.html#L121">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>85</th><th>121</th><td class="l"><span>environments.&nbsp; It has a very low memory footprint compared to other web servers and takes care of CPU load.</span> </td>
                  </tr><tr>
                          <th>86</th><th>122</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>87</th><th> </th><td class="l"><span>For using `trac.fcgi` with lighttpd add the following to your lighttpd.conf:</span> </td>
                      </tr><tr>
                        <th>88</th><th> </th><td class="l"><span>{{{</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>123</th><td class="r"><span>For using `trac.fcgi`(prior to 0.11) / fcgi_frontend.py (0.11) with lighttpd add the following to your lighttpd.conf:</span> </td>
                      </tr><tr>
                        <th> </th><th>124</th><td class="r"><span>{{{</span> </td>
                      </tr><tr>
                        <th> </th><th>125</th><td class="r"><span>#var.fcgi_binary="/usr/bin/python /path/to/fcgi_frontend.py" # 0.11 if installed with easy_setup, it is inside the egg directory</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>126</th><td class="r"><span>var.fcgi_binary="/path/to/cgi-bin/trac.fcgi" # 0.10 name of prior fcgi executable</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>89</th><th>127</th><td class="l"><span>fastcgi.server = ("/trac" =&gt;</span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="last first">
                          <th> </th><th>128</th><td class="r"><ins>&nbsp; &nbsp;</ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>90</th><th>129</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;("trac" =&gt;</span> </td>
                  </tr><tr>
                          <th>91</th><th>130</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;("socket" =&gt; "/tmp/trac-fastcgi.sock",</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>92</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "bin-path" =&gt; <del>"/path/to/cgi-bin/trac.fcgi"</del>,</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>131</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "bin-path" =&gt; <ins>fcgi_binary</ins>,</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>93</th><th>132</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "check-local" =&gt; "disable",</span> </td>
                  </tr><tr>
                          <th>94</th><th>133</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "bin-environment" =&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="TracFastCgi%3Fversion=3.html#L103">…</a></th>
                  <th><a href="TracFastCgi%3Fversion=4.html#L142">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>103</th><th>142</th><td class="l"><span>using `bin-environment` (as in the section above on Apache configuration).</span> </td>
                  </tr><tr>
                          <th>104</th><th>143</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>144</th><td class="r"><ins>Note that lighttpd has a bug related to 'SCRIPT_NAME' and 'PATH_INFO' when the uri of fastcgi.server is '/' instead of '/trac' in this example (see [trac:#2418]). This should be fixed since lighttpd 1.4.23, and you may need to add `"fix-root-scriptname" =&gt; "enable"` as parameter of fastcgi.server.</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>145</th><td class="r"><ins></ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>105</th><th>146</th><td class="l"><span>For using two projects with lighttpd add the following to your `lighttpd.conf`:</span> </td>
                  </tr><tr>
                          <th>106</th><th>147</th><td class="l"><span>{{{</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="TracFastCgi%3Fversion=3.html#L108">…</a></th>
                  <th><a href="TracFastCgi%3Fversion=4.html#L149">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>108</th><th>149</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;("first" =&gt;</span> </td>
                  </tr><tr>
                          <th>109</th><th>150</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ("socket" =&gt; "/tmp/trac-fastcgi-first.sock",</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>110</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"bin-path" =&gt; <del>"/path/to/cgi-bin/trac.fcgi"</del>,</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>151</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"bin-path" =&gt; <ins>fcgi_binary</ins>,</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>111</th><th>152</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"check-local" =&gt; "disable",</span> </td>
                  </tr><tr>
                          <th>112</th><th>153</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"bin-environment" =&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="TracFastCgi%3Fversion=3.html#L117">…</a></th>
                  <th><a href="TracFastCgi%3Fversion=4.html#L158">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>117</th><th>158</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ("second" =&gt;</span> </td>
                  </tr><tr>
                          <th>118</th><th>159</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ("socket" =&gt; "/tmp/trac-fastcgi-second.sock",</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>119</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"bin-path" =&gt; <del>"/path/to/cgi-bin/trac.fcgi"</del>,</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>160</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"bin-path" =&gt; <ins>fcgi_binary</ins>,</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>120</th><th>161</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"check-local" =&gt; "disable",</span> </td>
                  </tr><tr>
                          <th>121</th><th>162</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"bin-environment" =&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="TracFastCgi%3Fversion=3.html#L130">…</a></th>
                  <th><a href="TracFastCgi%3Fversion=4.html#L171">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>130</th><th>171</th><td class="l"><span>Note that the above will result in different processes in any event, even</span> </td>
                  </tr><tr>
                          <th>131</th><th>172</th><td class="l"><span>if both are running from the same `trac.fcgi` script.</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>132</th><th> </th><td class="l"><span>{{{</span> </td>
                      </tr><tr>
                        <th>133</th><th> </th><td class="l"><span>#!html</span> </td>
                      </tr><tr>
                        <th>134</th><th> </th><td class="l"><span>&lt;p style="background: #fdc; border: 2px solid #d00; font-style: italic; padding: 0 .5em; margin: 1em 0;"&gt;</span> </td>
                      </tr><tr>
                        <th>135</th><th> </th><td class="l"><span><del>&lt;strong&gt;Note from c00i90wn:&lt;/strong&gt; It's very important the order on which server.modules are loaded, if mod_auth is not loaded &lt;strong&gt;BEFORE&lt;/strong&gt;</del> mod_fastcgi, then the server will fail to authenticate the user.</span> </td>
                      </tr><tr>
                        <th>136</th><th> </th><td class="l"><span>&lt;/p&gt;</span> </td>
                      </tr><tr>
                        <th>137</th><th> </th><td class="l"><span>}}}</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>173</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>174</th><td class="r"><span>{{{</span> </td>
                      </tr><tr>
                        <th> </th><th>175</th><td class="r"><span>#!div class=important</span> </td>
                      </tr><tr>
                        <th> </th><th>176</th><td class="r"><span><ins>'''Note''' It's very important the order on which server.modules are loaded, if mod_auth is not loaded '''BEFORE'''</ins> mod_fastcgi, then the server will fail to authenticate the user.</span> </td>
                      </tr><tr>
                        <th> </th><th>177</th><td class="r"><span>}}}</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>178</th><td class="r"><span></span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>138</th><th>179</th><td class="l"><span>For authentication you should enable mod_auth in lighttpd.conf 'server.modules', select auth.backend and auth rules:</span> </td>
                  </tr><tr>
                          <th>139</th><th>180</th><td class="l"><span>{{{</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="TracFastCgi%3Fversion=3.html#L183">…</a></th>
                  <th><a href="TracFastCgi%3Fversion=4.html#L224">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>183</th><th>224</th><td class="l"><span>server.modules += ("mod_alias")</span> </td>
                  </tr><tr>
                          <th>184</th><th>225</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>185</th><th> </th><td class="l"><span># Set<del></del>up an alias for the static resources</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>226</th><td class="r"><span># Set<ins>&nbsp;</ins>up an alias for the static resources</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>186</th><th>227</th><td class="l"><span>alias.url = ("/trac/chrome/common" =&gt; "/usr/share/trac/htdocs")</span> </td>
                  </tr><tr>
                          <th>187</th><th>228</th><td class="l"><span></span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="TracFastCgi%3Fversion=3.html#L193">…</a></th>
                  <th><a href="TracFastCgi%3Fversion=4.html#L234">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>193</th><th>234</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;("trac" =&gt;</span> </td>
                  </tr><tr>
                          <th>194</th><th>235</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;("socket" =&gt; "/tmp/trac-fastcgi.sock",</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>195</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "bin-path" =&gt; <del>"/path/to/cgi-bin/trac.fcgi"</del>,</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>236</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "bin-path" =&gt; <ins>fcgi_binary</ins>,</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>196</th><th>237</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "check-local" =&gt; "disable",</span> </td>
                  </tr><tr>
                          <th>197</th><th>238</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "bin-environment" =&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="TracFastCgi%3Fversion=3.html#L212">…</a></th>
                  <th><a href="TracFastCgi%3Fversion=4.html#L253">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>212</th><th>253</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span> </td>
                  </tr><tr>
                          <th>213</th><th>254</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "socket" =&gt; "/tmp/trac.sock",</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>214</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "bin-path" =&gt; <del>"/path/to/cgi-bin/trac.fcgi"</del>,</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>255</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "bin-path" =&gt; <ins>fcgi_binary</ins>,</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>215</th><th>256</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "check-local" =&gt; "disable",</span> </td>
                  </tr><tr>
                          <th>216</th><th>257</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "bin-environment" =&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="TracFastCgi%3Fversion=3.html#L238">…</a></th>
                  <th><a href="TracFastCgi%3Fversion=4.html#L279">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>238</th><th>279</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;("trac" =&gt;</span> </td>
                  </tr><tr>
                          <th>239</th><th>280</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;("socket" =&gt; "/tmp/trac-fastcgi.sock",</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>240</th><th> </th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "bin-path" =&gt; <del>"/path/to/cgi-bin/trac.fcgi"</del>,</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>281</th><td class="r"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "bin-path" =&gt; <ins>fcgi_binary</ins>,</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>241</th><th>282</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "check-local" =&gt; "disable",</span> </td>
                  </tr><tr>
                          <th>242</th><th>283</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "bin-environment" =&gt;</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="TracFastCgi%3Fversion=3.html#L247">…</a></th>
                  <th><a href="TracFastCgi%3Fversion=4.html#L288">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>247</th><th>288</th><td class="l"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)</span> </td>
                  </tr><tr>
                          <th>248</th><th>289</th><td class="l"><span>}}}</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>249</th><th> </th><td class="l"><span>For details about languages specification see TracFaq question 2.13.</span> </td>
                      </tr><tr>
                        <th>250</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>251</th><th> </th><td class="l"><span>Other important information like [http://trac.lighttpd.net/trac/wiki/TracInstall this updated TracInstall page], [wiki:TracCgi#MappingStaticResources and this] are useful for non-fastcgi specific installation aspects.</span> </td>
                      </tr><tr>
                        <th>252</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>253</th><th> </th><td class="l"><span>If you use trac-0.9, read [http://lists.edgewall.com/archive/trac/2005-November/005311.html about small bug]</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>290</th><td class="r"><span>For details about languages specification see [trac:TracFaq TracFaq] question 2.13.</span> </td>
                      </tr><tr>
                        <th> </th><th>291</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>292</th><td class="r"><span>Other important information like the [wiki:TracInstall#MappingStaticResources mapping static resources advices] are useful for non-fastcgi specific installation aspects.</span> </td>
                      </tr><tr class="last">
                        <th> </th><th>293</th><td class="r"><span>]</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>254</th><th>294</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>255</th><th>295</th><td class="l"><span>Relaunch lighttpd, and browse to `http://yourhost.example.org/trac` to access Trac.</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="TracFastCgi%3Fversion=3.html#L257">…</a></th>
                  <th><a href="TracFastCgi%3Fversion=4.html#L297">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>257</th><th>297</th><td class="l"><span>Note about running lighttpd with reduced permissions:</span> </td>
                  </tr><tr>
                          <th>258</th><th>298</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>259</th><th> </th><td class="l"><span><del>&nbsp; If nothing else helps and trac.fcgi doesn't start with lighttpd settings __server.username = "www-data"__, __server.groupname = "www-data"__</del>, then in the `bin-environment` section set `PYTHON_EGG_CACHE` to the home directory of `www-data` or some other directory accessible to this account for writing.</span> </td>
                      </tr><tr>
                        <th>260</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>261</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>262</th><th> </th><td class="l"><span>== Simple <del></del>LiteSpeed Configuration ==</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>299</th><td class="r"><span><ins>If nothing else helps and trac.fcgi doesn't start with lighttpd settings `server.username = "www-data"`, `server.groupname = "www-data"`</ins>, then in the `bin-environment` section set `PYTHON_EGG_CACHE` to the home directory of `www-data` or some other directory accessible to this account for writing.</span> </td>
                      </tr><tr>
                        <th> </th><th>300</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>301</th><td class="r"><span></span> </td>
                      </tr><tr class="last">
                        <th> </th><th>302</th><td class="r"><span>== Simple <ins>!</ins>LiteSpeed Configuration ==</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>263</th><th>303</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>264</th><th>304</th><td class="l"><span>The FastCGI front-end was developed primarily for use with alternative webservers, such as [http://www.litespeedtech.com/ LiteSpeed].</span> </td>
                  </tr><tr>
                          <th>265</th><th>305</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>266</th><th> </th><td class="l"><span>LiteSpeed web server is an event-driven asynchronous Apache replacement designed from the ground-up to be secure, scalable, and operate with minimal resources. LiteSpeed can operate directly from an Apache config file and is targeted for business-critical environments.</span> </td>
                      </tr><tr>
                        <th>267</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>268</th><th> </th><td class="l"><span>Setup</span> </td>
                      </tr><tr>
                        <th>269</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>270</th><th> </th><td class="l"><span>1) Please make sure you have first have a working install of a Trac project. Test install with “tracd” first.</span> </td>
                      </tr><tr>
                        <th>271</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>272</th><th> </th><td class="l"><span>2) Create a Virtual Host for this setup. From now on we will refer to this vhost as TracVhost. For this tutorial we will be assuming that your trac project will be accessible via:</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>306</th><td class="r"><span>!LiteSpeed web server is an event-driven asynchronous Apache replacement designed from the ground-up to be secure, scalable, and operate with minimal resources. !LiteSpeed can operate directly from an Apache config file and is targeted for business-critical environments.</span> </td>
                      </tr><tr>
                        <th> </th><th>307</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>308</th><td class="r"><span>&nbsp;1. Please make sure you have first have a working install of a Trac project. Test install with “tracd” first.</span> </td>
                      </tr><tr>
                        <th> </th><th>309</th><td class="r"><span></span> </td>
                      </tr><tr class="last">
                        <th> </th><th>310</th><td class="r"><span>&nbsp;2. Create a Virtual Host for this setup. From now on we will refer to this vhost as !TracVhost. For this tutorial we will be assuming that your trac project will be accessible via:</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>273</th><th>311</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>274</th><th>312</th><td class="l"><span>{{{</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="TracFastCgi%3Fversion=3.html#L276">…</a></th>
                  <th><a href="TracFastCgi%3Fversion=4.html#L314">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>276</th><th>314</th><td class="l"><span>}}}</span> </td>
                  </tr><tr>
                          <th>277</th><th>315</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>278</th><th> </th><td class="l"><span><del>3) Go “</del>TracVhost → External Apps” tab and create a new “External Application”.</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>316</th><td class="r"><span><ins>&nbsp;3. Go “!</ins>TracVhost → External Apps” tab and create a new “External Application”.</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>279</th><th>317</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>280</th><th>318</th><td class="l"><span>{{{</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="TracFastCgi%3Fversion=3.html#L294">…</a></th>
                  <th><a href="TracFastCgi%3Fversion=4.html#L332">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>294</th><th>332</th><td class="l"><span>}}}</span> </td>
                  </tr><tr>
                          <th>295</th><th>333</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>296</th><th> </th><td class="l"><span><del>4) Optional. If you need to use htpasswd based authentication. Go to “</del>TracVhost → Security” tab and create a new security “Realm”.</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>334</th><td class="r"><span><ins>&nbsp;4. Optional. If you need to use htpasswd based authentication. Go to “!</ins>TracVhost → Security” tab and create a new security “Realm”.</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>297</th><th>335</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>298</th><th>336</th><td class="l"><span>{{{</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="TracFastCgi%3Fversion=3.html#L304">…</a></th>
                  <th><a href="TracFastCgi%3Fversion=4.html#L342">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>304</th><th>342</th><td class="l"><span>If you don’t have a htpasswd file or don’t know how to create the entries within one, go to http://sherylcanter.com/encrypt.php, to generate the user:password combos.</span> </td>
                  </tr><tr>
                          <th>305</th><th>343</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>306</th><th> </th><td class="l"><span><del>5) Go to “</del>PythonVhost → Contexts” and create a new “FCGI Context”.</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>344</th><td class="r"><span><ins>&nbsp;5. Go to “!</ins>PythonVhost → Contexts” and create a new “FCGI Context”.</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>307</th><th>345</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>308</th><th>346</th><td class="l"><span>{{{</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="TracFastCgi%3Fversion=3.html#L312">…</a></th>
                  <th><a href="TracFastCgi%3Fversion=4.html#L350">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>312</th><th>350</th><td class="l"><span>}}}</span> </td>
                  </tr><tr>
                          <th>313</th><th>351</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>314</th><th> </th><td class="l"><span>6) Modify /fullpathto/mytracproject/conf/trac.ini</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>352</th><td class="r"><span>&nbsp;6. Modify `/fullpathto/mytracproject/conf/trac.ini`</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>315</th><th>353</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>316</th><th>354</th><td class="l"><span>{{{</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="TracFastCgi%3Fversion=3.html#L321">…</a></th>
                  <th><a href="TracFastCgi%3Fversion=4.html#L359">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>321</th><th>359</th><td class="l"><span>}}}</span> </td>
                  </tr><tr>
                          <th>322</th><th>360</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>323</th><th> </th><td class="l"><span><del>7) Restart </del>LiteSpeed, “lswsctrl restart”, and access your new Trac project at: </span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>361</th><td class="r"><span><ins>&nbsp;7. Restart !</ins>LiteSpeed, “lswsctrl restart”, and access your new Trac project at: </span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>324</th><th>362</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>325</th><th>363</th><td class="l"><span>{{{</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="TracFastCgi%3Fversion=3.html#L327">…</a></th>
                  <th><a href="TracFastCgi%3Fversion=4.html#L365">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>327</th><th>365</th><td class="l"><span>}}}</span> </td>
                  </tr><tr>
                          <th>328</th><th>366</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="add">
                  <tr class="first">
                          <th> </th><th>367</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>368</th><td class="r"><ins>== Simple Nginx Configuration ==</ins> </td>
                  </tr><tr>
                          <th> </th><th>369</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>370</th><td class="r"><ins>Nginx is able to communicate with FastCGI processes, but can not spawn them. So you need to start FastCGI server for Trac separately.</ins> </td>
                  </tr><tr>
                          <th> </th><th>371</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>372</th><td class="r"><ins>&nbsp;1. Nginx configuration with basic authentication handled by Nginx - confirmed to work on 0.6.32</ins> </td>
                  </tr><tr>
                          <th> </th><th>373</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>374</th><td class="r"><ins>&nbsp; &nbsp; server {</ins> </td>
                  </tr><tr>
                          <th> </th><th>375</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; listen&nbsp; &nbsp; &nbsp; &nbsp;10.9.8.7:443;</ins> </td>
                  </tr><tr>
                          <th> </th><th>376</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; server_name&nbsp; trac.example;</ins> </td>
                  </tr><tr>
                          <th> </th><th>377</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>378</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; ssl&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; on;</ins> </td>
                  </tr><tr>
                          <th> </th><th>379</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; ssl_certificate&nbsp; &nbsp; &nbsp; /etc/ssl/trac.example.crt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>380</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; ssl_certificate_key&nbsp; /etc/ssl/trac.example.key;</ins> </td>
                  </tr><tr>
                          <th> </th><th>381</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>382</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; ssl_session_timeout&nbsp; 5m;</ins> </td>
                  </tr><tr>
                          <th> </th><th>383</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>384</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; ssl_protocols&nbsp; SSLv2 SSLv3 TLSv1;</ins> </td>
                  </tr><tr>
                          <th> </th><th>385</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; ssl_ciphers&nbsp; ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;</ins> </td>
                  </tr><tr>
                          <th> </th><th>386</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; ssl_prefer_server_ciphers&nbsp; &nbsp;on;</ins> </td>
                  </tr><tr>
                          <th> </th><th>387</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>388</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; # (Or ``^/some/prefix/(.*)``.</ins> </td>
                  </tr><tr>
                          <th> </th><th>389</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; if ($uri ~ ^/(.*)) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>390</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set $path_info /$1;</ins> </td>
                  </tr><tr>
                          <th> </th><th>391</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>392</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>393</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; # it makes sense to serve static resources through Nginx</ins> </td>
                  </tr><tr>
                          <th> </th><th>394</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; location /chrome/ {</ins> </td>
                  </tr><tr>
                          <th> </th><th>395</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;alias /home/trac/instance/static/htdocs/;</ins> </td>
                  </tr><tr>
                          <th> </th><th>396</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>397</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>398</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; # You can copy this whole location to ``location [/some/prefix]/login``</ins> </td>
                  </tr><tr>
                          <th> </th><th>399</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; # and remove the auth entries below if you want Trac to enforce</ins> </td>
                  </tr><tr>
                          <th> </th><th>400</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; # authorization where appropriate instead of needing to authenticate</ins> </td>
                  </tr><tr>
                          <th> </th><th>401</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; # for accessing the whole site.</ins> </td>
                  </tr><tr>
                          <th> </th><th>402</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; # (Or ``location /some/prefix``.)</ins> </td>
                  </tr><tr>
                          <th> </th><th>403</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; location / {</ins> </td>
                  </tr><tr>
                          <th> </th><th>404</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; auth_basic&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "trac realm";</ins> </td>
                  </tr><tr>
                          <th> </th><th>405</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; auth_basic_user_file /home/trac/htpasswd;</ins> </td>
                  </tr><tr>
                          <th> </th><th>406</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>407</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # socket address</ins> </td>
                  </tr><tr>
                          <th> </th><th>408</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_pass&nbsp; &nbsp;unix:/home/trac/run/instance.sock;</ins> </td>
                  </tr><tr>
                          <th> </th><th>409</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>410</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # python - wsgi specific</ins> </td>
                  </tr><tr>
                          <th> </th><th>411</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param HTTPS on;</ins> </td>
                  </tr><tr>
                          <th> </th><th>412</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>413</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ## WSGI REQUIRED VARIABLES</ins> </td>
                  </tr><tr>
                          <th> </th><th>414</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # WSGI application name - trac instance prefix.</ins> </td>
                  </tr><tr>
                          <th> </th><th>415</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # (Or ``fastcgi_param&nbsp; SCRIPT_NAME&nbsp; /some/prefix``.)</ins> </td>
                  </tr><tr>
                          <th> </th><th>416</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param&nbsp; SCRIPT_NAME&nbsp; &nbsp; &nbsp; &nbsp; "";</ins> </td>
                  </tr><tr>
                          <th> </th><th>417</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param&nbsp; PATH_INFO&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $path_info;</ins> </td>
                  </tr><tr>
                          <th> </th><th>418</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>419</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ## WSGI NEEDED VARIABLES - trac warns about them</ins> </td>
                  </tr><tr>
                          <th> </th><th>420</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param&nbsp; REQUEST_METHOD&nbsp; &nbsp; &nbsp;$request_method;</ins> </td>
                  </tr><tr>
                          <th> </th><th>421</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param&nbsp; SERVER_NAME&nbsp; &nbsp; &nbsp; &nbsp; $server_name;</ins> </td>
                  </tr><tr>
                          <th> </th><th>422</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param&nbsp; SERVER_PORT&nbsp; &nbsp; &nbsp; &nbsp; $server_port;</ins> </td>
                  </tr><tr>
                          <th> </th><th>423</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param&nbsp; SERVER_PROTOCOL&nbsp; &nbsp; $server_protocol;</ins> </td>
                  </tr><tr>
                          <th> </th><th>424</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param&nbsp; QUERY_STRING&nbsp; &nbsp; &nbsp; &nbsp;$query_string;</ins> </td>
                  </tr><tr>
                          <th> </th><th>425</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>426</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # For Nginx authentication to work - do not forget to comment these</ins> </td>
                  </tr><tr>
                          <th> </th><th>427</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # lines if not using Nginx for authentication</ins> </td>
                  </tr><tr>
                          <th> </th><th>428</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param&nbsp; AUTH_USER&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $remote_user;</ins> </td>
                  </tr><tr>
                          <th> </th><th>429</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param&nbsp; REMOTE_USER&nbsp; &nbsp; &nbsp; &nbsp; $remote_user;</ins> </td>
                  </tr><tr>
                          <th> </th><th>430</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>431</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # for ip to work</ins> </td>
                  </tr><tr>
                          <th> </th><th>432</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param REMOTE_ADDR&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$remote_addr;</ins> </td>
                  </tr><tr>
                          <th> </th><th>433</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>434</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # For attchments to work</ins> </td>
                  </tr><tr>
                          <th> </th><th>435</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param&nbsp; &nbsp; CONTENT_TYPE&nbsp; &nbsp; &nbsp;$content_type;</ins> </td>
                  </tr><tr>
                          <th> </th><th>436</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param&nbsp; &nbsp; CONTENT_LENGTH&nbsp; &nbsp;$content_length;</ins> </td>
                  </tr><tr>
                          <th> </th><th>437</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>438</th><td class="r"><ins>&nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>439</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>440</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>441</th><td class="r"><ins>&nbsp;2. Modified trac.fcgi:</ins> </td>
                  </tr><tr>
                          <th> </th><th>442</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>443</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>444</th><td class="r"><ins>#!/usr/bin/env python</ins> </td>
                  </tr><tr>
                          <th> </th><th>445</th><td class="r"><ins>import os</ins> </td>
                  </tr><tr>
                          <th> </th><th>446</th><td class="r"><ins>sockaddr = '/home/trac/run/instance.sock'</ins> </td>
                  </tr><tr>
                          <th> </th><th>447</th><td class="r"><ins>os.environ['TRAC_ENV'] = '/home/trac/instance'</ins> </td>
                  </tr><tr>
                          <th> </th><th>448</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>449</th><td class="r"><ins>try:</ins> </td>
                  </tr><tr>
                          <th> </th><th>450</th><td class="r"><ins>&nbsp; &nbsp; &nbsp;from trac.web.main import dispatch_request</ins> </td>
                  </tr><tr>
                          <th> </th><th>451</th><td class="r"><ins>&nbsp; &nbsp; &nbsp;import trac.web._fcgi</ins> </td>
                  </tr><tr>
                          <th> </th><th>452</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>453</th><td class="r"><ins>&nbsp; &nbsp; &nbsp;fcgiserv = trac.web._fcgi.WSGIServer(dispatch_request, </ins> </td>
                  </tr><tr>
                          <th> </th><th>454</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bindAddress = sockaddr, umask = 7)</ins> </td>
                  </tr><tr>
                          <th> </th><th>455</th><td class="r"><ins>&nbsp; &nbsp; &nbsp;fcgiserv.run()</ins> </td>
                  </tr><tr>
                          <th> </th><th>456</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>457</th><td class="r"><ins>except SystemExit:</ins> </td>
                  </tr><tr>
                          <th> </th><th>458</th><td class="r"><ins>&nbsp; &nbsp; raise</ins> </td>
                  </tr><tr>
                          <th> </th><th>459</th><td class="r"><ins>except Exception, e:</ins> </td>
                  </tr><tr>
                          <th> </th><th>460</th><td class="r"><ins>&nbsp; &nbsp; print 'Content-Type: text/plain\r\n\r\n',</ins> </td>
                  </tr><tr>
                          <th> </th><th>461</th><td class="r"><ins>&nbsp; &nbsp; print 'Oops...'</ins> </td>
                  </tr><tr>
                          <th> </th><th>462</th><td class="r"><ins>&nbsp; &nbsp; print</ins> </td>
                  </tr><tr>
                          <th> </th><th>463</th><td class="r"><ins>&nbsp; &nbsp; print 'Trac detected an internal error:'</ins> </td>
                  </tr><tr>
                          <th> </th><th>464</th><td class="r"><ins>&nbsp; &nbsp; print</ins> </td>
                  </tr><tr>
                          <th> </th><th>465</th><td class="r"><ins>&nbsp; &nbsp; print e</ins> </td>
                  </tr><tr>
                          <th> </th><th>466</th><td class="r"><ins>&nbsp; &nbsp; print</ins> </td>
                  </tr><tr>
                          <th> </th><th>467</th><td class="r"><ins>&nbsp; &nbsp; import traceback</ins> </td>
                  </tr><tr>
                          <th> </th><th>468</th><td class="r"><ins>&nbsp; &nbsp; import StringIO</ins> </td>
                  </tr><tr>
                          <th> </th><th>469</th><td class="r"><ins>&nbsp; &nbsp; tb = StringIO.StringIO()</ins> </td>
                  </tr><tr>
                          <th> </th><th>470</th><td class="r"><ins>&nbsp; &nbsp; traceback.print_exc(file=tb)</ins> </td>
                  </tr><tr>
                          <th> </th><th>471</th><td class="r"><ins>&nbsp; &nbsp; print tb.getvalue()</ins> </td>
                  </tr><tr>
                          <th> </th><th>472</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>473</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>474</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>475</th><td class="r"><ins>&nbsp;3. reload nginx and launch trac.fcgi like that:</ins> </td>
                  </tr><tr>
                          <th> </th><th>476</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>477</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>478</th><td class="r"><ins>trac@trac.example ~ $ ./trac-standalone-fcgi.py </ins> </td>
                  </tr><tr>
                          <th> </th><th>479</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>480</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>481</th><td class="r"><ins>The above assumes that:</ins> </td>
                  </tr><tr>
                          <th> </th><th>482</th><td class="r"><ins>&nbsp;* There is a user named 'trac' for running trac instances and keeping trac environments in its home directory.</ins> </td>
                  </tr><tr>
                          <th> </th><th>483</th><td class="r"><ins>&nbsp;* `/home/trac/instance` contains a trac environment</ins> </td>
                  </tr><tr>
                          <th> </th><th>484</th><td class="r"><ins>&nbsp;* `/home/trac/htpasswd` contains authentication information</ins> </td>
                  </tr><tr>
                          <th> </th><th>485</th><td class="r"><ins>&nbsp;* `/home/trac/run` is owned by the same group the nginx runs under</ins> </td>
                  </tr><tr>
                          <th> </th><th>486</th><td class="r"><ins>&nbsp; * and if your system is Linux the `/home/trac/run` has setgid bit set (`chmod g+s run`)</ins> </td>
                  </tr><tr>
                          <th> </th><th>487</th><td class="r"><ins>&nbsp; * and patch from ticket #T7239 is applied, or you'll have to fix the socket file permissions every time</ins> </td>
                  </tr><tr>
                          <th> </th><th>488</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>489</th><td class="r"><ins>Unfortunately nginx does not support variable expansion in fastcgi_pass directive. </ins> </td>
                  </tr><tr>
                          <th> </th><th>490</th><td class="r"><ins>Thus it is not possible to serve multiple trac instances from one server block. </ins> </td>
                  </tr><tr>
                          <th> </th><th>491</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>492</th><td class="r"><ins>If you worry enough about security, run trac instances under separate users. </ins> </td>
                  </tr><tr>
                          <th> </th><th>493</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>494</th><td class="r"><ins>Another way to run trac as a FCGI external application is offered in ticket #T6224</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>495</th><td class="r"><ins></ins> </td>
                  </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>329</th><th>496</th><td class="l"><span>----</span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>330</th><th> </th><td class="l"><span>See also<del>&nbsp;TracCgi, TracModPython, TracInstall, TracGuide</del></span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>497</th><td class="r"><span>See also<ins>:&nbsp; TracGuide, TracInstall, [wiki:TracModWSGI ModWSGI], [wiki:TracCgi CGI], [wiki:TracModPython ModPython], [trac:TracNginxRecipe TracNginxRecipe]</ins></span> </td>
                      </tr>
            </tbody>
        </table>
      </li>
  </ul>
</div>
      </div>
  </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.3</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>
