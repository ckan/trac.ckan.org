<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      VersionsAndBranching (diff) – CKAN
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">window.location.hash = window.location.hash;</script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="help" href="TracGuide.html" />
        <link rel="up" href="VersionsAndBranching%3Faction=history.html" title="Page history" />
        <link rel="next" href="VersionsAndBranching%3Faction=diff&amp;version=5.html" title="Version 5" />
        <link rel="start" href="../wiki.1.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/wiki.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/diff.css" type="text/css" />
        <link rel="prev" href="VersionsAndBranching%3Faction=diff&amp;version=3.html" title="Version 3" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search CKAN" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/diff.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="../chrome/common/css/diff.css" />
    <meta name="ROBOTS" content="NOINDEX, NOFOLLOW" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://ckan.org/"><img src="http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png" alt="CKAN Trac" height="70" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../login.html">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="TracGuide.html">Help/Guide</a></li><li><a href="../about.html">About Trac</a></li><li class="last"><a href="../register.html">Register</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li><a href="../report.html">View Tickets</a></li><li><a href="../search.html">Search</a></li><li class="last active"><a href="../wiki.1.html">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="VersionsAndBranching%3Faction=diff&amp;version=3.html" title="Version 3">Previous Change</a></span></li><li><a href="VersionsAndBranching%3Faction=history.html" title="Page history">Wiki History</a></li><li class="last"><span><a class="next" href="VersionsAndBranching%3Faction=diff&amp;version=5.html" title="Version 5">Next Change</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="wiki">
      <h1>
        Changes between
          <a href="VersionsAndBranching%3Fversion=3.html">Version 3</a> and
          <a href="VersionsAndBranching%3Fversion=4.html">Version 4</a> of
          <a href="VersionsAndBranching%3Fversion=4.html">VersionsAndBranching</a>
      </h1>
      <form method="post" id="prefs" action="VersionsAndBranching%3Fversion=4.html"><div><input type="hidden" name="__FORM_TOKEN" value="93d81ccf9a7bb1c456462f62" /></div>
        <div>
          <input type="hidden" name="action" value="diff" />
          <input type="hidden" name="version" value="4" />
          <input type="hidden" name="old_version" value="3" />
          
  <label for="style">View differences</label>
  <select id="style" name="style">
    <option selected="selected" value="inline">inline</option>
    <option value="sidebyside">side by side</option>
  </select>
  <div class="field">
    <label><input type="radio" name="contextall" value="0" checked="checked" />
             Show</label>
      <label><input type="text" name="contextlines" id="contextlines" size="2" maxlength="3" value="2" />
             lines around each change</label><br />
    <label><input type="radio" name="contextall" value="1" />
           Show the changes in full context</label>
  </div>
  <fieldset id="ignore">
    <legend>Ignore:</legend>
    <div class="field">
      <input type="checkbox" id="ignoreblanklines" name="ignoreblanklines" />
      <label for="ignoreblanklines">Blank lines</label>
    </div>
    <div class="field">
      <input type="checkbox" id="ignorecase" name="ignorecase" />
      <label for="ignorecase">Case changes</label>
    </div>
    <div class="field">
      <input type="checkbox" id="ignorewhitespace" name="ignorewhitespace" />
      <label for="ignorewhitespace">White space changes</label>
    </div>
  </fieldset>
  <div class="buttons">
    <input type="submit" name="update" value="Update" />
  </div>

        </div>
      </form>
      <dl id="overview">
        <dt class="property time">Timestamp:</dt>
        <dd class="time">
            08/26/10 10:41:56 (<a class="timeline" href="../timeline%3Ffrom=2010-08-26T10:41:56Z&amp;precision=second.html" title="2010-08-26T10:41:56Z in Timeline">4 years</a> ago)
        </dd>
        <dt class="property author">Author:</dt>
        <dd class="author">
          dread
        </dd>
        <dt class="property message">Comment:</dt>
        <dd class="message">
          
          <p>
Info about ultrastable and version numbering
</p>

        </dd>
      </dl>
      <div class="diff">
        <div class="legend" id="diff-legend">
          <h3>Legend:</h3>
          <dl>
            <dt class="unmod"></dt><dd>Unmodified</dd>
            <dt class="add"></dt><dd>Added</dd>
            <dt class="rem"></dt><dd>Removed</dd>
            <dt class="mod"></dt><dd>Modified</dd>
          </dl>
        </div>
        <div class="diff">
  <ul class="entries">
      <li class="entry">
        <h2 id="file0">
          <a href="VersionsAndBranching%3Fversion=4.html">VersionsAndBranching</a>
        </h2>
        <table class="trac-diff inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Version 3">
                    <a href="VersionsAndBranching%3Fversion=3.html#L1">
                      v3</a>
                  </th>
                  <th title="Version 4">
                    <a href="VersionsAndBranching%3Fversion=4.html#L1">
                      v4</a>
                  </th>
                  <td> </td>
                </tr>
              </thead>
            <tbody class="unmod">
                  <tr>
                          <th>1</th><th>1</th><td class="l"><span>CKAN is stored in a mercurial repo and we have devised this process to cope with coding, releasing and maintaining versions of the software.</span> </td>
                  </tr><tr>
                          <th>2</th><th>2</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>3</th><th> </th><td class="l"><span>We have <del>three</del> branches of the code to reflect their uses:</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>3</th><td class="r"><span>We have <ins>a number of maintained</ins> branches of the code to reflect their uses:</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>4</th><th>4</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>5</th><th>5</th><td class="l"><span>'''default''' branch is for future releases - New features go here. Bug fixes should always go here as well as the other branches.</span> </td>
                  </tr>
            </tbody>
              <tbody class="skipped">
                <tr>
                  <th><a href="VersionsAndBranching%3Fversion=3.html#L7">…</a></th>
                  <th><a href="VersionsAndBranching%3Fversion=4.html#L7">…</a></th>
                  <td> </td>
                </tr>
              </tbody>
            <tbody class="unmod">
                  <tr>
                          <th>7</th><th>7</th><td class="l"><span>'''metastable''' branch is for releases deployed to ckan.net and similar servers. These servers get new features first. Sometimes there are issues to be resolved with these new features. It usually lags `default`.</span> </td>
                  </tr><tr>
                          <th>8</th><th>8</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>9</th><th> </th><td class="l"><span>'''stable''' branch is <del>designed for the most stable code</del>. It usually lags `metastable`.</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>9</th><td class="r"><span>'''stable''' branch is <ins>for very stable code - major releases</ins>. It usually lags `metastable`.</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>10</th><th>10</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>11</th><th> </th><td class="l"><span><del>(From now on) merges must only be done in the DOWN direction (in the direction `default`-&gt;`metastable`-&gt;`stable`) and only when you release. So you can release `default` to `metastable` with a merge, and from `metastable` to `stable`, but you mustn't merge `metastable` to `default`, for example. And not when you simply fix a bug</del>.</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>11</th><td class="r"><span><ins>'''ultrastable''' branch is for the most stable code - major releases, one behind `stable`</ins>.</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>12</th><th>12</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>13</th><th> </th><td class="l"><span>The problem with merging in the other direction is that a bugfix changesets on `metastable` may well be mixed in with changesets incrementing the minor digit of the version number. The version number on the `default` branch may already have a higher major version and you don't want to overwrite it with the `metastable` changeset. When you merge you can't pick and choose changesets - you have all up to a certain one - so you can't merge in this direction.</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>13</th><td class="r"><span>(From now on) merges must only be done in the DOWN direction (in the direction `default`-&gt;`metastable`-&gt;`stable`-&gt;`ultrastable`) and only when you release. This means that you would release `default` to `metastable` with a merge, and from `metastable` to `stable`, but you must not merge `metastable` to `default`, for example. And not when you simply fix a bug.</span> </td>
                      </tr><tr>
                        <th> </th><th>14</th><td class="r"><span></span> </td>
                      </tr><tr class="last">
                        <th> </th><th>15</th><td class="r"><span>The problem with merging in the other direction is that bugfix changesets on `metastable` may well be mixed in with changesets incrementing the minor digit of the version number. The version number on the `default` branch may already have a higher major version and you don't want to overwrite it with the `metastable` changeset. When you merge you can't pick and choose changesets - you have all up to a certain one - so you can't merge in this direction.</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>14</th><th>16</th><td class="l"><span></span> </td>
                  </tr><tr>
                          <th>15</th><th>17</th><td class="l"><span>You might have written a bugfix in `default` that you want in `metastable` too, but don't want the rigmorole of releasing at this point. In this case, don't merge - the problem with merging when you're not releasing, is that you may well pull half-finished features from `default` into branches which need to be more stable.</span> </td>
                  </tr><tr>
                          <th>16</th><th>18</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>17</th><th> </th><td class="l"><span>The solution (instead of <del>'hg merge') is to 'hg export' particular changesets from one branch and 'hg import'</del> it to another.</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>19</th><td class="r"><span>The solution (instead of <ins>`hg merge`) is to `hg export` particular changesets from one branch and `hg import`</ins> it to another.</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>18</th><th>20</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>19</th><th> </th><td class="l"><span>== <del>Notes</del> ==</span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>21</th><td class="r"><span>== <ins>'tip' note</ins> ==</span> </td>
                      </tr>
            </tbody><tbody class="unmod">
                  <tr>
                          <th>20</th><th>22</th><td class="l"><span></span> </td>
                  </tr>
            </tbody><tbody class="mod">
                      <tr class="first">
                        <th>21</th><th> </th><td class="l"><span>'''tip''' is what Mercurial tags the latest commit. So it changes on every commit and might be on any branch. So it's best not to refer to it in documentation, emails or changeset comments.</span> </td>
                      </tr>
                      <tr>
                        <th> </th><th>23</th><td class="r"><span>Mercurial tags the latest commit with the tag `tip`. This means it changes on every commit and might be on ''any'' branch. So it's best not to refer to it in documentation, emails or changeset comments.</span> </td>
                      </tr><tr>
                        <th> </th><th>24</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>25</th><td class="r"><span>== Version numbers ==</span> </td>
                      </tr><tr>
                        <th> </th><th>26</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>27</th><td class="r"><span>We generally have a major and minor version number. e.g. 1.5 It is not decimal, so 1.11 is 'one point eleven', not 'one point one one'.</span> </td>
                      </tr><tr>
                        <th> </th><th>28</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>29</th><td class="r"><span>On the `default` branch, when you approach a release, we up the minor version number, and add `a` to indicate alpha, e.g. `1.2a`. There may be further trial states e.g. `1.2b` and `1.2c`, before the final release of `1.2`.</span> </td>
                      </tr><tr>
                        <th> </th><th>30</th><td class="r"><span></span> </td>
                      </tr><tr>
                        <th> </th><th>31</th><td class="r"><span>The final release goes to the metastable and eventually the other branches too, keeping this version number.</span> </td>
                      </tr><tr>
                        <th> </th><th>32</th><td class="r"><span></span> </td>
                      </tr><tr class="last">
                        <th> </th><th>33</th><td class="r"><span>Bugfixes may appear on branches, yet by default, the code will keep the same version number. If the fix is warranted enough to be released as a point release, then the version number on `default` is upped (e.g. to 1.2.1), and the change made on other branches that have the fix. ''Note'', because `default` may have other changesets since the release unrelated to the fix, we can't merge from `default` to the branches for either the bugfix or the version number change - use `hg import` and `hg export`.</span> </td>
                      </tr>
            </tbody>
        </table>
      </li>
  </ul>
</div>
      </div>
  </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.3</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>
