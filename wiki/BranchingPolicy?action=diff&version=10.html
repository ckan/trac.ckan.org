<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      BranchingPolicy (diff) – CKAN
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">window.location.hash = window.location.hash;</script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="help" href="TracGuide.html" />
        <link rel="up" href="BranchingPolicy%3Faction=history.html" title="Page history" />
        <link rel="start" href="../wiki.1.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/wiki.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/diff.css" type="text/css" />
        <link rel="prev" href="BranchingPolicy%3Faction=diff&amp;version=9.html" title="Version 9" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search CKAN" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/diff.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="../chrome/common/css/diff.css" />
    <meta name="ROBOTS" content="NOINDEX, NOFOLLOW" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://ckan.org/"><img src="http://assets.okfn.org/p/ckan/img/ckan_logo_shortname.png" alt="CKAN Trac" height="70" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../login.html">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="TracGuide.html">Help/Guide</a></li><li><a href="../about.html">About Trac</a></li><li class="last"><a href="../register.html">Register</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li><a href="../report.html">View Tickets</a></li><li><a href="../search.html">Search</a></li><li class="last active"><a href="../wiki.1.html">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="BranchingPolicy%3Faction=diff&amp;version=9.html" title="Version 9">Previous Change</a></span></li><li><a href="BranchingPolicy%3Faction=history.html" title="Page history">Wiki History</a></li><li class="last"><span class="missing">Next Change &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="wiki">
      <h1>
        Changes between
          <a href="BranchingPolicy%3Fversion=9.html">Version 9</a> and
          <a href="BranchingPolicy%3Fversion=10.html">Version 10</a> of
          <a href="BranchingPolicy%3Fversion=10.html">BranchingPolicy</a>
      </h1>
      <form method="post" id="prefs" action="BranchingPolicy%3Fversion=10.html"><div><input type="hidden" name="__FORM_TOKEN" value="93d81ccf9a7bb1c456462f62" /></div>
        <div>
          <input type="hidden" name="action" value="diff" />
          <input type="hidden" name="version" value="10" />
          <input type="hidden" name="old_version" value="9" />
          
  <label for="style">View differences</label>
  <select id="style" name="style">
    <option selected="selected" value="inline">inline</option>
    <option value="sidebyside">side by side</option>
  </select>
  <div class="field">
    <label><input type="radio" name="contextall" value="0" checked="checked" />
             Show</label>
      <label><input type="text" name="contextlines" id="contextlines" size="2" maxlength="3" value="2" />
             lines around each change</label><br />
    <label><input type="radio" name="contextall" value="1" />
           Show the changes in full context</label>
  </div>
  <fieldset id="ignore">
    <legend>Ignore:</legend>
    <div class="field">
      <input type="checkbox" id="ignoreblanklines" name="ignoreblanklines" />
      <label for="ignoreblanklines">Blank lines</label>
    </div>
    <div class="field">
      <input type="checkbox" id="ignorecase" name="ignorecase" />
      <label for="ignorecase">Case changes</label>
    </div>
    <div class="field">
      <input type="checkbox" id="ignorewhitespace" name="ignorewhitespace" />
      <label for="ignorewhitespace">White space changes</label>
    </div>
  </fieldset>
  <div class="buttons">
    <input type="submit" name="update" value="Update" />
  </div>

        </div>
      </form>
      <dl id="overview">
        <dt class="property time">Timestamp:</dt>
        <dd class="time">
            03/17/11 12:36:08 (<a class="timeline" href="../timeline%3Ffrom=2011-03-17T12:36:08Z&amp;precision=second.html" title="2011-03-17T12:36:08Z in Timeline">3 years</a> ago)
        </dd>
        <dt class="property author">Author:</dt>
        <dd class="author">
          thejimmyg
        </dd>
        <dt class="property message">Comment:</dt>
        <dd class="message">
          
          <p>
--
</p>

        </dd>
      </dl>
      <div class="diff">
        <div class="legend" id="diff-legend">
          <h3>Legend:</h3>
          <dl>
            <dt class="unmod"></dt><dd>Unmodified</dd>
            <dt class="add"></dt><dd>Added</dd>
            <dt class="rem"></dt><dd>Removed</dd>
            <dt class="mod"></dt><dd>Modified</dd>
          </dl>
        </div>
        <div class="diff">
  <ul class="entries">
      <li class="entry">
        <h2 id="file0">
          <a href="BranchingPolicy%3Fversion=10.html">BranchingPolicy</a>
        </h2>
        <table class="trac-diff inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Version 9">
                    <a href="BranchingPolicy%3Fversion=9.html#L1">
                      v9</a>
                  </th>
                  <th title="Version 10">
                    <a href="BranchingPolicy%3Fversion=10.html#L1">
                      v10</a>
                  </th>
                  <td> </td>
                </tr>
              </thead>
            <tbody class="mod">
                      <tr class="first">
                        <th>1</th><th> </th><td class="l"><span>= Branching Policy =</span> </td>
                      </tr><tr>
                        <th>2</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>3</th><th> </th><td class="l"><span>CKAN is stored in a mercurial repo. This policy covers development and branching policy for this repo.</span> </td>
                      </tr><tr>
                        <th>4</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>5</th><th> </th><td class="l"><span>= General: One Branch per Feature and Defect =</span> </td>
                      </tr><tr>
                        <th>6</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>7</th><th> </th><td class="l"><span>We will be following the process described in (1) but applied to mercurial. Key aspects:</span> </td>
                      </tr><tr>
                        <th>8</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>9</th><th> </th><td class="l"><span>&nbsp;1. There will be three 'core' branches: "stable", "metastable" and "default" (in article stable=master and develop=default)</span> </td>
                      </tr><tr>
                        <th>10</th><th> </th><td class="l"><span>&nbsp; * stable: stable code</span> </td>
                      </tr><tr>
                        <th>11</th><th> </th><td class="l"><span>&nbsp; * metastable: (will soon be deprecated) for code preparing to be stable</span> </td>
                      </tr><tr>
                        <th>12</th><th> </th><td class="l"><span>&nbsp; * default: development HEAD</span> </td>
                      </tr><tr>
                        <th>13</th><th> </th><td class="l"><span>&nbsp;2. A (named) branch will be created for each feature or defect (bug), unless it is almost certain that the ticket only requires one changeset.</span> </td>
                      </tr><tr>
                        <th>14</th><th> </th><td class="l"><span>&nbsp; Branch naming convention:</span> </td>
                      </tr><tr>
                        <th>15</th><th> </th><td class="l"><span>&nbsp; * defect-{ticket-number}[-optional-name] e.g. defect-902-my-bad-bug</span> </td>
                      </tr><tr>
                        <th>16</th><th> </th><td class="l"><span>&nbsp; * feature-{ticket-number}[-optional-name] e.g. feature-903-my-amazing-feature</span> </td>
                      </tr><tr>
                        <th>17</th><th> </th><td class="l"><span>&nbsp;3. A (named) branch will be created for each release: release-v{release-number} e.g. release-v1.3</span> </td>
                      </tr><tr>
                        <th>18</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>19</th><th> </th><td class="l"><span>Feature, bug and release branches may be "closed" once appropriately merged. To summarize the work-flow:</span> </td>
                      </tr><tr>
                        <th>20</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>21</th><th> </th><td class="l"><span>&nbsp;* Almost no work should be done in default or stable directly - only tickets requiring single changesets area allowed. Otherwise work in branches.</span> </td>
                      </tr><tr>
                        <th>22</th><th> </th><td class="l"><span>&nbsp;* feature branches branch off default and merge back into default</span> </td>
                      </tr><tr>
                        <th>23</th><th> </th><td class="l"><span>&nbsp;* defect branches branch off default *or* stable and merge back into respective branches. Fixes on stable get merged to default as appropriate.</span> </td>
                      </tr><tr>
                        <th>24</th><th> </th><td class="l"><span>&nbsp; * NB: if a fix needs to go from default to stable (it happens!) then you can use mercurial's transplant (as you obviously must *not* merge from default to stable)</span> </td>
                      </tr><tr>
                        <th>25</th><th> </th><td class="l"><span>&nbsp;* release branches branch off metastable (in future off stable)</span> </td>
                      </tr><tr>
                        <th>26</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>27</th><th> </th><td class="l"><span>More in article (1).</span> </td>
                      </tr><tr>
                        <th>28</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>29</th><th> </th><td class="l"><span>We also strongly recommend that users push *by default* to their own personal repo rather than the main repo. This allows for code review by another dev before merging into the main repo and should reduce the number of "oops, I've pushed and broken the build" moments.</span> </td>
                      </tr><tr>
                        <th>30</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>31</th><th> </th><td class="l"><span>== Closing Branches ==</span> </td>
                      </tr><tr>
                        <th>32</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>33</th><th> </th><td class="l"><span>{{{</span> </td>
                      </tr><tr>
                        <th>34</th><th> </th><td class="l"><span>hg up -r {branch-name}</span> </td>
                      </tr><tr>
                        <th>35</th><th> </th><td class="l"><span>hg ci --close-branch {branch-name}</span> </td>
                      </tr><tr>
                        <th>36</th><th> </th><td class="l"><span># may now want to merge to default or you'll be left with a dangling head</span> </td>
                      </tr><tr>
                        <th>37</th><th> </th><td class="l"><span>hg up -r default</span> </td>
                      </tr><tr>
                        <th>38</th><th> </th><td class="l"><span>hg merge -r {branch-name}</span> </td>
                      </tr><tr>
                        <th>39</th><th> </th><td class="l"><span>}}}</span> </td>
                      </tr><tr>
                        <th>40</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>41</th><th> </th><td class="l"><span>== Transplanting changesets ==</span> </td>
                      </tr><tr>
                        <th>42</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>43</th><th> </th><td class="l"><span>When you merge, you can't cherry pick changesets - you have to take all of them up to a certain one. In these cases transplant can be useful to copy a changeset across (though mercurial will not be aware of this copy).</span> </td>
                      </tr><tr>
                        <th>44</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>45</th><th> </th><td class="l"><span>== 'tip' note ==</span> </td>
                      </tr><tr>
                        <th>46</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>47</th><th> </th><td class="l"><span>Mercurial tags the latest commit with the tag `tip`. This means it changes on every commit and might be on ''any'' branch. So it's best not to refer to it in documentation, emails or changeset comments.</span> </td>
                      </tr><tr>
                        <th>48</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>49</th><th> </th><td class="l"><span>= Further references =</span> </td>
                      </tr><tr>
                        <th>50</th><th> </th><td class="l"><span></span> </td>
                      </tr><tr>
                        <th>51</th><th> </th><td class="l"><span>&nbsp;1. http://nvie.com/posts/a-successful-git-branching-model/</span> </td>
                      </tr><tr>
                        <th>52</th><th> </th><td class="l"><span>&nbsp;2. http://forceten.tidalwave.it/development/mercurial-best-practices/</span> </td>
                      </tr><tr>
                        <th>53</th><th> </th><td class="l"><span>&nbsp;3. http://www.rabbitmq.com/mercurial.html#branchperbug</span> </td>
                      </tr><tr>
                        <th>54</th><th> </th><td class="l"><span>&nbsp;4. http://stevelosh.com/blog/2009/08/a-guide-to-branching-in-mercurial/</span> </td>
                      </tr><tr>
                        <th>55</th><th> </th><td class="l"><span>&nbsp;5. Original thread http://lists.okfn.org/pipermail/ckan-dev/2010-November/000034.html</span> </td>
                      </tr><tr>
                        <th>56</th><th> </th><td class="l"><span></span> </td>
                      </tr>
                      <tr class="last">
                        <th> </th><th>1</th><td class="r"><span>This is now at: http://wiki.ckan.net/Mercurial</span> </td>
                      </tr>
            </tbody>
        </table>
      </li>
  </ul>
</div>
      </div>
  </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.3</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>
